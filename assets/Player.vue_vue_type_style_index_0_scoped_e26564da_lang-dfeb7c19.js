
import{A as Le}from"./constants-e8ac43b8.js";import{z as vi,S as $r,N as Vr,d as zt,o as Bt,b as Et,G as rr,n as Dt,a as Pt,e as Lt,f as _t,V as Mi,r as Gr,w as Hr,g as jr,i as Xr,X as qr,C as Wr,s as Kr,K as Qr,t as Yr,F as Ui,q as Li,l as Di,p as Jr,h as Ni,L as Zr,M as ts}from"./runtime-dom.esm-bundler-75af5957.js";import{_ as es}from"./_plugin-vue_export-helper-c450468a.js";function sr(m,E){return function(){return m.apply(E,arguments)}}const{toString:is}=Object.prototype,{getPrototypeOf:Ai}=Object,Te=(m=>E=>{const $=is.call(E);return m[$]||(m[$]=$.slice(8,-1).toLowerCase())})(Object.create(null)),Wt=m=>(m=m.toLowerCase(),E=>Te(E)===m),Ie=m=>E=>typeof E===m,{isArray:ne}=Array,le=Ie("undefined");function rs(m){return m!==null&&!le(m)&&m.constructor!==null&&!le(m.constructor)&&Ht(m.constructor.isBuffer)&&m.constructor.isBuffer(m)}const ar=Wt("ArrayBuffer");function ss(m){let E;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?E=ArrayBuffer.isView(m):E=m&&m.buffer&&ar(m.buffer),E}const as=Ie("string"),Ht=Ie("function"),nr=Ie("number"),Pe=m=>m!==null&&typeof m=="object",ns=m=>m===!0||m===!1,ge=m=>{if(Te(m)!=="object")return!1;const E=Ai(m);return(E===null||E===Object.prototype||Object.getPrototypeOf(E)===null)&&!(Symbol.toStringTag in m)&&!(Symbol.iterator in m)},os=Wt("Date"),cs=Wt("File"),ds=Wt("Blob"),hs=Wt("FileList"),ls=m=>Pe(m)&&Ht(m.pipe),us=m=>{let E;return m&&(typeof FormData=="function"&&m instanceof FormData||Ht(m.append)&&((E=Te(m))==="formdata"||E==="object"&&Ht(m.toString)&&m.toString()==="[object FormData]"))},fs=Wt("URLSearchParams"),[ps,ms,gs,vs]=["ReadableStream","Request","Response","Headers"].map(Wt),As=m=>m.trim?m.trim():m.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pe(m,E,{allOwnKeys:$=!1}={}){if(m===null||typeof m>"u")return;let q,K;if(typeof m!="object"&&(m=[m]),ne(m))for(q=0,K=m.length;q<K;q++)E.call(null,m[q],q,m);else{const J=$?Object.getOwnPropertyNames(m):Object.keys(m),g=J.length;let p;for(q=0;q<g;q++)p=J[q],E.call(null,m[p],p,m)}}function or(m,E){E=E.toLowerCase();const $=Object.keys(m);let q=$.length,K;for(;q-- >0;)if(K=$[q],E===K.toLowerCase())return K;return null}const cr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),dr=m=>!le(m)&&m!==cr;function ai(){const{caseless:m}=dr(this)&&this||{},E={},$=(q,K)=>{const J=m&&or(E,K)||K;ge(E[J])&&ge(q)?E[J]=ai(E[J],q):ge(q)?E[J]=ai({},q):ne(q)?E[J]=q.slice():E[J]=q};for(let q=0,K=arguments.length;q<K;q++)arguments[q]&&pe(arguments[q],$);return E}const ys=(m,E,$,{allOwnKeys:q}={})=>(pe(E,(K,J)=>{$&&Ht(K)?m[J]=sr(K,$):m[J]=K},{allOwnKeys:q}),m),ws=m=>(m.charCodeAt(0)===65279&&(m=m.slice(1)),m),bs=(m,E,$,q)=>{m.prototype=Object.create(E.prototype,q),m.prototype.constructor=m,Object.defineProperty(m,"super",{value:E.prototype}),$&&Object.assign(m.prototype,$)},ks=(m,E,$,q)=>{let K,J,g;const p={};if(E=E||{},m==null)return E;do{for(K=Object.getOwnPropertyNames(m),J=K.length;J-- >0;)g=K[J],(!q||q(g,m,E))&&!p[g]&&(E[g]=m[g],p[g]=!0);m=$!==!1&&Ai(m)}while(m&&(!$||$(m,E))&&m!==Object.prototype);return E},xs=(m,E,$)=>{m=String(m),($===void 0||$>m.length)&&($=m.length),$-=E.length;const q=m.indexOf(E,$);return q!==-1&&q===$},Ts=m=>{if(!m)return null;if(ne(m))return m;let E=m.length;if(!nr(E))return null;const $=new Array(E);for(;E-- >0;)$[E]=m[E];return $},Is=(m=>E=>m&&E instanceof m)(typeof Uint8Array<"u"&&Ai(Uint8Array)),Ps=(m,E)=>{const q=(m&&m[Symbol.iterator]).call(m);let K;for(;(K=q.next())&&!K.done;){const J=K.value;E.call(m,J[0],J[1])}},Ss=(m,E)=>{let $;const q=[];for(;($=m.exec(E))!==null;)q.push($);return q},Rs=Wt("HTMLFormElement"),_s=m=>m.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function($,q,K){return q.toUpperCase()+K}),Oi=(({hasOwnProperty:m})=>(E,$)=>m.call(E,$))(Object.prototype),Bs=Wt("RegExp"),hr=(m,E)=>{const $=Object.getOwnPropertyDescriptors(m),q={};pe($,(K,J)=>{let g;(g=E(K,J,m))!==!1&&(q[J]=g||K)}),Object.defineProperties(m,q)},Es=m=>{hr(m,(E,$)=>{if(Ht(m)&&["arguments","caller","callee"].indexOf($)!==-1)return!1;const q=m[$];if(Ht(q)){if(E.enumerable=!1,"writable"in E){E.writable=!1;return}E.set||(E.set=()=>{throw Error("Can not rewrite read-only method '"+$+"'")})}})},Cs=(m,E)=>{const $={},q=K=>{K.forEach(J=>{$[J]=!0})};return ne(m)?q(m):q(String(m).split(E)),$},Ms=()=>{},Us=(m,E)=>m!=null&&Number.isFinite(m=+m)?m:E,De="abcdefghijklmnopqrstuvwxyz",zi="0123456789",lr={DIGIT:zi,ALPHA:De,ALPHA_DIGIT:De+De.toUpperCase()+zi},Ls=(m=16,E=lr.ALPHA_DIGIT)=>{let $="";const{length:q}=E;for(;m--;)$+=E[Math.random()*q|0];return $};function Ds(m){return!!(m&&Ht(m.append)&&m[Symbol.toStringTag]==="FormData"&&m[Symbol.iterator])}const Ns=m=>{const E=new Array(10),$=(q,K)=>{if(Pe(q)){if(E.indexOf(q)>=0)return;if(!("toJSON"in q)){E[K]=q;const J=ne(q)?[]:{};return pe(q,(g,p)=>{const t=$(g,K+1);!le(t)&&(J[p]=t)}),E[K]=void 0,J}}return q};return $(m,0)},Os=Wt("AsyncFunction"),zs=m=>m&&(Pe(m)||Ht(m))&&Ht(m.then)&&Ht(m.catch),nt={isArray:ne,isArrayBuffer:ar,isBuffer:rs,isFormData:us,isArrayBufferView:ss,isString:as,isNumber:nr,isBoolean:ns,isObject:Pe,isPlainObject:ge,isReadableStream:ps,isRequest:ms,isResponse:gs,isHeaders:vs,isUndefined:le,isDate:os,isFile:cs,isBlob:ds,isRegExp:Bs,isFunction:Ht,isStream:ls,isURLSearchParams:fs,isTypedArray:Is,isFileList:hs,forEach:pe,merge:ai,extend:ys,trim:As,stripBOM:ws,inherits:bs,toFlatObject:ks,kindOf:Te,kindOfTest:Wt,endsWith:xs,toArray:Ts,forEachEntry:Ps,matchAll:Ss,isHTMLForm:Rs,hasOwnProperty:Oi,hasOwnProp:Oi,reduceDescriptors:hr,freezeMethods:Es,toObjectSet:Cs,toCamelCase:_s,noop:Ms,toFiniteNumber:Us,findKey:or,global:cr,isContextDefined:dr,ALPHABET:lr,generateString:Ls,isSpecCompliantForm:Ds,toJSONObject:Ns,isAsyncFn:Os,isThenable:zs};function Tt(m,E,$,q,K){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=m,this.name="AxiosError",E&&(this.code=E),$&&(this.config=$),q&&(this.request=q),K&&(this.response=K)}nt.inherits(Tt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:nt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ur=Tt.prototype,fr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(m=>{fr[m]={value:m}});Object.defineProperties(Tt,fr);Object.defineProperty(ur,"isAxiosError",{value:!0});Tt.from=(m,E,$,q,K,J)=>{const g=Object.create(ur);return nt.toFlatObject(m,g,function(t){return t!==Error.prototype},p=>p!=="isAxiosError"),Tt.call(g,m.message,E,$,q,K),g.cause=m,g.name=m.name,J&&Object.assign(g,J),g};const Fs=null;function ni(m){return nt.isPlainObject(m)||nt.isArray(m)}function pr(m){return nt.endsWith(m,"[]")?m.slice(0,-2):m}function Fi(m,E,$){return m?m.concat(E).map(function(K,J){return K=pr(K),!$&&J?"["+K+"]":K}).join($?".":""):E}function $s(m){return nt.isArray(m)&&!m.some(ni)}const Vs=nt.toFlatObject(nt,{},null,function(E){return/^is[A-Z]/.test(E)});function Se(m,E,$){if(!nt.isObject(m))throw new TypeError("target must be an object");E=E||new FormData,$=nt.toFlatObject($,{metaTokens:!0,dots:!1,indexes:!1},!1,function(d,c){return!nt.isUndefined(c[d])});const q=$.metaTokens,K=$.visitor||i,J=$.dots,g=$.indexes,t=($.Blob||typeof Blob<"u"&&Blob)&&nt.isSpecCompliantForm(E);if(!nt.isFunction(K))throw new TypeError("visitor must be a function");function e(a){if(a===null)return"";if(nt.isDate(a))return a.toISOString();if(!t&&nt.isBlob(a))throw new Tt("Blob is not supported. Use a Buffer instead.");return nt.isArrayBuffer(a)||nt.isTypedArray(a)?t&&typeof Blob=="function"?new Blob([a]):Buffer.from(a):a}function i(a,d,c){let l=a;if(a&&!c&&typeof a=="object"){if(nt.endsWith(d,"{}"))d=q?d:d.slice(0,-2),a=JSON.stringify(a);else if(nt.isArray(a)&&$s(a)||(nt.isFileList(a)||nt.endsWith(d,"[]"))&&(l=nt.toArray(a)))return d=pr(d),l.forEach(function(o,u){!(nt.isUndefined(o)||o===null)&&E.append(g===!0?Fi([d],u,J):g===null?d:d+"[]",e(o))}),!1}return ni(a)?!0:(E.append(Fi(c,d,J),e(a)),!1)}const n=[],s=Object.assign(Vs,{defaultVisitor:i,convertValue:e,isVisitable:ni});function r(a,d){if(!nt.isUndefined(a)){if(n.indexOf(a)!==-1)throw Error("Circular reference detected in "+d.join("."));n.push(a),nt.forEach(a,function(l,h){(!(nt.isUndefined(l)||l===null)&&K.call(E,l,nt.isString(h)?h.trim():h,d,s))===!0&&r(l,d?d.concat(h):[h])}),n.pop()}}if(!nt.isObject(m))throw new TypeError("data must be an object");return r(m),E}function $i(m){const E={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(m).replace(/[!'()~]|%20|%00/g,function(q){return E[q]})}function yi(m,E){this._pairs=[],m&&Se(m,this,E)}const mr=yi.prototype;mr.append=function(E,$){this._pairs.push([E,$])};mr.toString=function(E){const $=E?function(q){return E.call(this,q,$i)}:$i;return this._pairs.map(function(K){return $(K[0])+"="+$(K[1])},"").join("&")};function Gs(m){return encodeURIComponent(m).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gr(m,E,$){if(!E)return m;const q=$&&$.encode||Gs,K=$&&$.serialize;let J;if(K?J=K(E,$):J=nt.isURLSearchParams(E)?E.toString():new yi(E,$).toString(q),J){const g=m.indexOf("#");g!==-1&&(m=m.slice(0,g)),m+=(m.indexOf("?")===-1?"?":"&")+J}return m}class Hs{constructor(){this.handlers=[]}use(E,$,q){return this.handlers.push({fulfilled:E,rejected:$,synchronous:q?q.synchronous:!1,runWhen:q?q.runWhen:null}),this.handlers.length-1}eject(E){this.handlers[E]&&(this.handlers[E]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(E){nt.forEach(this.handlers,function(q){q!==null&&E(q)})}}const Vi=Hs,vr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},js=typeof URLSearchParams<"u"?URLSearchParams:yi,Xs=typeof FormData<"u"?FormData:null,qs=typeof Blob<"u"?Blob:null,Ws={isBrowser:!0,classes:{URLSearchParams:js,FormData:Xs,Blob:qs},protocols:["http","https","file","blob","url","data"]},wi=typeof window<"u"&&typeof document<"u",Ks=(m=>wi&&["ReactNative","NativeScript","NS"].indexOf(m)<0)(typeof navigator<"u"&&navigator.product),Qs=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ys=wi&&window.location.href||"http://localhost",Js=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:wi,hasStandardBrowserEnv:Ks,hasStandardBrowserWebWorkerEnv:Qs,origin:Ys},Symbol.toStringTag,{value:"Module"})),Xt={...Js,...Ws};function Zs(m,E){return Se(m,new Xt.classes.URLSearchParams,Object.assign({visitor:function($,q,K,J){return Xt.isNode&&nt.isBuffer($)?(this.append(q,$.toString("base64")),!1):J.defaultVisitor.apply(this,arguments)}},E))}function ta(m){return nt.matchAll(/\w+|\[(\w*)]/g,m).map(E=>E[0]==="[]"?"":E[1]||E[0])}function ea(m){const E={},$=Object.keys(m);let q;const K=$.length;let J;for(q=0;q<K;q++)J=$[q],E[J]=m[J];return E}function Ar(m){function E($,q,K,J){let g=$[J++];if(g==="__proto__")return!0;const p=Number.isFinite(+g),t=J>=$.length;return g=!g&&nt.isArray(K)?K.length:g,t?(nt.hasOwnProp(K,g)?K[g]=[K[g],q]:K[g]=q,!p):((!K[g]||!nt.isObject(K[g]))&&(K[g]=[]),E($,q,K[g],J)&&nt.isArray(K[g])&&(K[g]=ea(K[g])),!p)}if(nt.isFormData(m)&&nt.isFunction(m.entries)){const $={};return nt.forEachEntry(m,(q,K)=>{E(ta(q),K,$,0)}),$}return null}function ia(m,E,$){if(nt.isString(m))try{return(E||JSON.parse)(m),nt.trim(m)}catch(q){if(q.name!=="SyntaxError")throw q}return($||JSON.stringify)(m)}const bi={transitional:vr,adapter:["xhr","http","fetch"],transformRequest:[function(E,$){const q=$.getContentType()||"",K=q.indexOf("application/json")>-1,J=nt.isObject(E);if(J&&nt.isHTMLForm(E)&&(E=new FormData(E)),nt.isFormData(E))return K?JSON.stringify(Ar(E)):E;if(nt.isArrayBuffer(E)||nt.isBuffer(E)||nt.isStream(E)||nt.isFile(E)||nt.isBlob(E)||nt.isReadableStream(E))return E;if(nt.isArrayBufferView(E))return E.buffer;if(nt.isURLSearchParams(E))return $.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),E.toString();let p;if(J){if(q.indexOf("application/x-www-form-urlencoded")>-1)return Zs(E,this.formSerializer).toString();if((p=nt.isFileList(E))||q.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Se(p?{"files[]":E}:E,t&&new t,this.formSerializer)}}return J||K?($.setContentType("application/json",!1),ia(E)):E}],transformResponse:[function(E){const $=this.transitional||bi.transitional,q=$&&$.forcedJSONParsing,K=this.responseType==="json";if(nt.isResponse(E)||nt.isReadableStream(E))return E;if(E&&nt.isString(E)&&(q&&!this.responseType||K)){const g=!($&&$.silentJSONParsing)&&K;try{return JSON.parse(E)}catch(p){if(g)throw p.name==="SyntaxError"?Tt.from(p,Tt.ERR_BAD_RESPONSE,this,null,this.response):p}}return E}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xt.classes.FormData,Blob:Xt.classes.Blob},validateStatus:function(E){return E>=200&&E<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};nt.forEach(["delete","get","head","post","put","patch"],m=>{bi.headers[m]={}});const ki=bi,ra=nt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sa=m=>{const E={};let $,q,K;return m&&m.split(`
`).forEach(function(g){K=g.indexOf(":"),$=g.substring(0,K).trim().toLowerCase(),q=g.substring(K+1).trim(),!(!$||E[$]&&ra[$])&&($==="set-cookie"?E[$]?E[$].push(q):E[$]=[q]:E[$]=E[$]?E[$]+", "+q:q)}),E},Gi=Symbol("internals");function he(m){return m&&String(m).trim().toLowerCase()}function ve(m){return m===!1||m==null?m:nt.isArray(m)?m.map(ve):String(m)}function aa(m){const E=Object.create(null),$=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let q;for(;q=$.exec(m);)E[q[1]]=q[2];return E}const na=m=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(m.trim());function Ne(m,E,$,q,K){if(nt.isFunction(q))return q.call(this,E,$);if(K&&(E=$),!!nt.isString(E)){if(nt.isString(q))return E.indexOf(q)!==-1;if(nt.isRegExp(q))return q.test(E)}}function oa(m){return m.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(E,$,q)=>$.toUpperCase()+q)}function ca(m,E){const $=nt.toCamelCase(" "+E);["get","set","has"].forEach(q=>{Object.defineProperty(m,q+$,{value:function(K,J,g){return this[q].call(this,E,K,J,g)},configurable:!0})})}class Re{constructor(E){E&&this.set(E)}set(E,$,q){const K=this;function J(p,t,e){const i=he(t);if(!i)throw new Error("header name must be a non-empty string");const n=nt.findKey(K,i);(!n||K[n]===void 0||e===!0||e===void 0&&K[n]!==!1)&&(K[n||t]=ve(p))}const g=(p,t)=>nt.forEach(p,(e,i)=>J(e,i,t));if(nt.isPlainObject(E)||E instanceof this.constructor)g(E,$);else if(nt.isString(E)&&(E=E.trim())&&!na(E))g(sa(E),$);else if(nt.isHeaders(E))for(const[p,t]of E.entries())J(t,p,q);else E!=null&&J($,E,q);return this}get(E,$){if(E=he(E),E){const q=nt.findKey(this,E);if(q){const K=this[q];if(!$)return K;if($===!0)return aa(K);if(nt.isFunction($))return $.call(this,K,q);if(nt.isRegExp($))return $.exec(K);throw new TypeError("parser must be boolean|regexp|function")}}}has(E,$){if(E=he(E),E){const q=nt.findKey(this,E);return!!(q&&this[q]!==void 0&&(!$||Ne(this,this[q],q,$)))}return!1}delete(E,$){const q=this;let K=!1;function J(g){if(g=he(g),g){const p=nt.findKey(q,g);p&&(!$||Ne(q,q[p],p,$))&&(delete q[p],K=!0)}}return nt.isArray(E)?E.forEach(J):J(E),K}clear(E){const $=Object.keys(this);let q=$.length,K=!1;for(;q--;){const J=$[q];(!E||Ne(this,this[J],J,E,!0))&&(delete this[J],K=!0)}return K}normalize(E){const $=this,q={};return nt.forEach(this,(K,J)=>{const g=nt.findKey(q,J);if(g){$[g]=ve(K),delete $[J];return}const p=E?oa(J):String(J).trim();p!==J&&delete $[J],$[p]=ve(K),q[p]=!0}),this}concat(...E){return this.constructor.concat(this,...E)}toJSON(E){const $=Object.create(null);return nt.forEach(this,(q,K)=>{q!=null&&q!==!1&&($[K]=E&&nt.isArray(q)?q.join(", "):q)}),$}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([E,$])=>E+": "+$).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(E){return E instanceof this?E:new this(E)}static concat(E,...$){const q=new this(E);return $.forEach(K=>q.set(K)),q}static accessor(E){const q=(this[Gi]=this[Gi]={accessors:{}}).accessors,K=this.prototype;function J(g){const p=he(g);q[p]||(ca(K,g),q[p]=!0)}return nt.isArray(E)?E.forEach(J):J(E),this}}Re.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);nt.reduceDescriptors(Re.prototype,({value:m},E)=>{let $=E[0].toUpperCase()+E.slice(1);return{get:()=>m,set(q){this[$]=q}}});nt.freezeMethods(Re);const qt=Re;function Oe(m,E){const $=this||ki,q=E||$,K=qt.from(q.headers);let J=q.data;return nt.forEach(m,function(p){J=p.call($,J,K.normalize(),E?E.status:void 0)}),K.normalize(),J}function yr(m){return!!(m&&m.__CANCEL__)}function oe(m,E,$){Tt.call(this,m??"canceled",Tt.ERR_CANCELED,E,$),this.name="CanceledError"}nt.inherits(oe,Tt,{__CANCEL__:!0});function wr(m,E,$){const q=$.config.validateStatus;!$.status||!q||q($.status)?m($):E(new Tt("Request failed with status code "+$.status,[Tt.ERR_BAD_REQUEST,Tt.ERR_BAD_RESPONSE][Math.floor($.status/100)-4],$.config,$.request,$))}function da(m){const E=/^([-+\w]{1,25})(:?\/\/|:)/.exec(m);return E&&E[1]||""}function ha(m,E){m=m||10;const $=new Array(m),q=new Array(m);let K=0,J=0,g;return E=E!==void 0?E:1e3,function(t){const e=Date.now(),i=q[J];g||(g=e),$[K]=t,q[K]=e;let n=J,s=0;for(;n!==K;)s+=$[n++],n=n%m;if(K=(K+1)%m,K===J&&(J=(J+1)%m),e-g<E)return;const r=i&&e-i;return r?Math.round(s*1e3/r):void 0}}function la(m,E){let $=0;const q=1e3/E;let K=null;return function(){const g=this===!0,p=Date.now();if(g||p-$>q)return K&&(clearTimeout(K),K=null),$=p,m.apply(null,arguments);K||(K=setTimeout(()=>(K=null,$=Date.now(),m.apply(null,arguments)),q-(p-$)))}}const ye=(m,E,$=3)=>{let q=0;const K=ha(50,250);return la(J=>{const g=J.loaded,p=J.lengthComputable?J.total:void 0,t=g-q,e=K(t),i=g<=p;q=g;const n={loaded:g,total:p,progress:p?g/p:void 0,bytes:t,rate:e||void 0,estimated:e&&p&&i?(p-g)/e:void 0,event:J,lengthComputable:p!=null};n[E?"download":"upload"]=!0,m(n)},$)},ua=Xt.hasStandardBrowserEnv?function(){const E=/(msie|trident)/i.test(navigator.userAgent),$=document.createElement("a");let q;function K(J){let g=J;return E&&($.setAttribute("href",g),g=$.href),$.setAttribute("href",g),{href:$.href,protocol:$.protocol?$.protocol.replace(/:$/,""):"",host:$.host,search:$.search?$.search.replace(/^\?/,""):"",hash:$.hash?$.hash.replace(/^#/,""):"",hostname:$.hostname,port:$.port,pathname:$.pathname.charAt(0)==="/"?$.pathname:"/"+$.pathname}}return q=K(window.location.href),function(g){const p=nt.isString(g)?K(g):g;return p.protocol===q.protocol&&p.host===q.host}}():function(){return function(){return!0}}(),fa=Xt.hasStandardBrowserEnv?{write(m,E,$,q,K,J){const g=[m+"="+encodeURIComponent(E)];nt.isNumber($)&&g.push("expires="+new Date($).toGMTString()),nt.isString(q)&&g.push("path="+q),nt.isString(K)&&g.push("domain="+K),J===!0&&g.push("secure"),document.cookie=g.join("; ")},read(m){const E=document.cookie.match(new RegExp("(^|;\\s*)("+m+")=([^;]*)"));return E?decodeURIComponent(E[3]):null},remove(m){this.write(m,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pa(m){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(m)}function ma(m,E){return E?m.replace(/\/?\/$/,"")+"/"+E.replace(/^\/+/,""):m}function br(m,E){return m&&!pa(E)?ma(m,E):E}const Hi=m=>m instanceof qt?{...m}:m;function Zt(m,E){E=E||{};const $={};function q(e,i,n){return nt.isPlainObject(e)&&nt.isPlainObject(i)?nt.merge.call({caseless:n},e,i):nt.isPlainObject(i)?nt.merge({},i):nt.isArray(i)?i.slice():i}function K(e,i,n){if(nt.isUndefined(i)){if(!nt.isUndefined(e))return q(void 0,e,n)}else return q(e,i,n)}function J(e,i){if(!nt.isUndefined(i))return q(void 0,i)}function g(e,i){if(nt.isUndefined(i)){if(!nt.isUndefined(e))return q(void 0,e)}else return q(void 0,i)}function p(e,i,n){if(n in E)return q(e,i);if(n in m)return q(void 0,e)}const t={url:J,method:J,data:J,baseURL:g,transformRequest:g,transformResponse:g,paramsSerializer:g,timeout:g,timeoutMessage:g,withCredentials:g,withXSRFToken:g,adapter:g,responseType:g,xsrfCookieName:g,xsrfHeaderName:g,onUploadProgress:g,onDownloadProgress:g,decompress:g,maxContentLength:g,maxBodyLength:g,beforeRedirect:g,transport:g,httpAgent:g,httpsAgent:g,cancelToken:g,socketPath:g,responseEncoding:g,validateStatus:p,headers:(e,i)=>K(Hi(e),Hi(i),!0)};return nt.forEach(Object.keys(Object.assign({},m,E)),function(i){const n=t[i]||K,s=n(m[i],E[i],i);nt.isUndefined(s)&&n!==p||($[i]=s)}),$}const kr=m=>{const E=Zt({},m);let{data:$,withXSRFToken:q,xsrfHeaderName:K,xsrfCookieName:J,headers:g,auth:p}=E;E.headers=g=qt.from(g),E.url=gr(br(E.baseURL,E.url),m.params,m.paramsSerializer),p&&g.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):"")));let t;if(nt.isFormData($)){if(Xt.hasStandardBrowserEnv||Xt.hasStandardBrowserWebWorkerEnv)g.setContentType(void 0);else if((t=g.getContentType())!==!1){const[e,...i]=t?t.split(";").map(n=>n.trim()).filter(Boolean):[];g.setContentType([e||"multipart/form-data",...i].join("; "))}}if(Xt.hasStandardBrowserEnv&&(q&&nt.isFunction(q)&&(q=q(E)),q||q!==!1&&ua(E.url))){const e=K&&J&&fa.read(J);e&&g.set(K,e)}return E},ga=typeof XMLHttpRequest<"u",va=ga&&function(m){return new Promise(function($,q){const K=kr(m);let J=K.data;const g=qt.from(K.headers).normalize();let{responseType:p}=K,t;function e(){K.cancelToken&&K.cancelToken.unsubscribe(t),K.signal&&K.signal.removeEventListener("abort",t)}let i=new XMLHttpRequest;i.open(K.method.toUpperCase(),K.url,!0),i.timeout=K.timeout;function n(){if(!i)return;const r=qt.from("getAllResponseHeaders"in i&&i.getAllResponseHeaders()),d={data:!p||p==="text"||p==="json"?i.responseText:i.response,status:i.status,statusText:i.statusText,headers:r,config:m,request:i};wr(function(l){$(l),e()},function(l){q(l),e()},d),i=null}"onloadend"in i?i.onloadend=n:i.onreadystatechange=function(){!i||i.readyState!==4||i.status===0&&!(i.responseURL&&i.responseURL.indexOf("file:")===0)||setTimeout(n)},i.onabort=function(){i&&(q(new Tt("Request aborted",Tt.ECONNABORTED,K,i)),i=null)},i.onerror=function(){q(new Tt("Network Error",Tt.ERR_NETWORK,K,i)),i=null},i.ontimeout=function(){let a=K.timeout?"timeout of "+K.timeout+"ms exceeded":"timeout exceeded";const d=K.transitional||vr;K.timeoutErrorMessage&&(a=K.timeoutErrorMessage),q(new Tt(a,d.clarifyTimeoutError?Tt.ETIMEDOUT:Tt.ECONNABORTED,K,i)),i=null},J===void 0&&g.setContentType(null),"setRequestHeader"in i&&nt.forEach(g.toJSON(),function(a,d){i.setRequestHeader(d,a)}),nt.isUndefined(K.withCredentials)||(i.withCredentials=!!K.withCredentials),p&&p!=="json"&&(i.responseType=K.responseType),typeof K.onDownloadProgress=="function"&&i.addEventListener("progress",ye(K.onDownloadProgress,!0)),typeof K.onUploadProgress=="function"&&i.upload&&i.upload.addEventListener("progress",ye(K.onUploadProgress)),(K.cancelToken||K.signal)&&(t=r=>{i&&(q(!r||r.type?new oe(null,m,i):r),i.abort(),i=null)},K.cancelToken&&K.cancelToken.subscribe(t),K.signal&&(K.signal.aborted?t():K.signal.addEventListener("abort",t)));const s=da(K.url);if(s&&Xt.protocols.indexOf(s)===-1){q(new Tt("Unsupported protocol "+s+":",Tt.ERR_BAD_REQUEST,m));return}i.send(J||null)})},Aa=(m,E)=>{let $=new AbortController,q;const K=function(t){if(!q){q=!0,g();const e=t instanceof Error?t:this.reason;$.abort(e instanceof Tt?e:new oe(e instanceof Error?e.message:e))}};let J=E&&setTimeout(()=>{K(new Tt(`timeout ${E} of ms exceeded`,Tt.ETIMEDOUT))},E);const g=()=>{m&&(J&&clearTimeout(J),J=null,m.forEach(t=>{t&&(t.removeEventListener?t.removeEventListener("abort",K):t.unsubscribe(K))}),m=null)};m.forEach(t=>t&&t.addEventListener&&t.addEventListener("abort",K));const{signal:p}=$;return p.unsubscribe=g,[p,()=>{J&&clearTimeout(J),J=null}]},ya=Aa,wa=function*(m,E){let $=m.byteLength;if(!E||$<E){yield m;return}let q=0,K;for(;q<$;)K=q+E,yield m.slice(q,K),q=K},ba=async function*(m,E,$){for await(const q of m)yield*wa(ArrayBuffer.isView(q)?q:await $(String(q)),E)},ji=(m,E,$,q,K)=>{const J=ba(m,E,K);let g=0;return new ReadableStream({type:"bytes",async pull(p){const{done:t,value:e}=await J.next();if(t){p.close(),q();return}let i=e.byteLength;$&&$(g+=i),p.enqueue(new Uint8Array(e))},cancel(p){return q(p),J.return()}},{highWaterMark:2})},Xi=(m,E)=>{const $=m!=null;return q=>setTimeout(()=>E({lengthComputable:$,total:m,loaded:q}))},_e=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",xr=_e&&typeof ReadableStream=="function",oi=_e&&(typeof TextEncoder=="function"?(m=>E=>m.encode(E))(new TextEncoder):async m=>new Uint8Array(await new Response(m).arrayBuffer())),ka=xr&&(()=>{let m=!1;const E=new Request(Xt.origin,{body:new ReadableStream,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!E})(),qi=64*1024,ci=xr&&!!(()=>{try{return nt.isReadableStream(new Response("").body)}catch{}})(),we={stream:ci&&(m=>m.body)};_e&&(m=>{["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!we[E]&&(we[E]=nt.isFunction(m[E])?$=>$[E]():($,q)=>{throw new Tt(`Response type '${E}' is not supported`,Tt.ERR_NOT_SUPPORT,q)})})})(new Response);const xa=async m=>{if(m==null)return 0;if(nt.isBlob(m))return m.size;if(nt.isSpecCompliantForm(m))return(await new Request(m).arrayBuffer()).byteLength;if(nt.isArrayBufferView(m))return m.byteLength;if(nt.isURLSearchParams(m)&&(m=m+""),nt.isString(m))return(await oi(m)).byteLength},Ta=async(m,E)=>{const $=nt.toFiniteNumber(m.getContentLength());return $??xa(E)},Ia=_e&&(async m=>{let{url:E,method:$,data:q,signal:K,cancelToken:J,timeout:g,onDownloadProgress:p,onUploadProgress:t,responseType:e,headers:i,withCredentials:n="same-origin",fetchOptions:s}=kr(m);e=e?(e+"").toLowerCase():"text";let[r,a]=K||J||g?ya([K,J],g):[],d,c;const l=()=>{!d&&setTimeout(()=>{r&&r.unsubscribe()}),d=!0};let h;try{if(t&&ka&&$!=="get"&&$!=="head"&&(h=await Ta(i,q))!==0){let v=new Request(E,{method:"POST",body:q,duplex:"half"}),y;nt.isFormData(q)&&(y=v.headers.get("content-type"))&&i.setContentType(y),v.body&&(q=ji(v.body,qi,Xi(h,ye(t)),null,oi))}nt.isString(n)||(n=n?"cors":"omit"),c=new Request(E,{...s,signal:r,method:$.toUpperCase(),headers:i.normalize().toJSON(),body:q,duplex:"half",withCredentials:n});let o=await fetch(c);const u=ci&&(e==="stream"||e==="response");if(ci&&(p||u)){const v={};["status","statusText","headers"].forEach(A=>{v[A]=o[A]});const y=nt.toFiniteNumber(o.headers.get("content-length"));o=new Response(ji(o.body,qi,p&&Xi(y,ye(p,!0)),u&&l,oi),v)}e=e||"text";let f=await we[nt.findKey(we,e)||"text"](o,m);return!u&&l(),a&&a(),await new Promise((v,y)=>{wr(v,y,{data:f,headers:qt.from(o.headers),status:o.status,statusText:o.statusText,config:m,request:c})})}catch(o){throw l(),o&&o.name==="TypeError"&&/fetch/i.test(o.message)?Object.assign(new Tt("Network Error",Tt.ERR_NETWORK,m,c),{cause:o.cause||o}):Tt.from(o,o&&o.code,m,c)}}),di={http:Fs,xhr:va,fetch:Ia};nt.forEach(di,(m,E)=>{if(m){try{Object.defineProperty(m,"name",{value:E})}catch{}Object.defineProperty(m,"adapterName",{value:E})}});const Wi=m=>`- ${m}`,Pa=m=>nt.isFunction(m)||m===null||m===!1,Tr={getAdapter:m=>{m=nt.isArray(m)?m:[m];const{length:E}=m;let $,q;const K={};for(let J=0;J<E;J++){$=m[J];let g;if(q=$,!Pa($)&&(q=di[(g=String($)).toLowerCase()],q===void 0))throw new Tt(`Unknown adapter '${g}'`);if(q)break;K[g||"#"+J]=q}if(!q){const J=Object.entries(K).map(([p,t])=>`adapter ${p} `+(t===!1?"is not supported by the environment":"is not available in the build"));let g=E?J.length>1?`since :
`+J.map(Wi).join(`
`):" "+Wi(J[0]):"as no adapter specified";throw new Tt("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return q},adapters:di};function ze(m){if(m.cancelToken&&m.cancelToken.throwIfRequested(),m.signal&&m.signal.aborted)throw new oe(null,m)}function Ki(m){return ze(m),m.headers=qt.from(m.headers),m.data=Oe.call(m,m.transformRequest),["post","put","patch"].indexOf(m.method)!==-1&&m.headers.setContentType("application/x-www-form-urlencoded",!1),Tr.getAdapter(m.adapter||ki.adapter)(m).then(function(q){return ze(m),q.data=Oe.call(m,m.transformResponse,q),q.headers=qt.from(q.headers),q},function(q){return yr(q)||(ze(m),q&&q.response&&(q.response.data=Oe.call(m,m.transformResponse,q.response),q.response.headers=qt.from(q.response.headers))),Promise.reject(q)})}const Ir="1.7.2",xi={};["object","boolean","number","function","string","symbol"].forEach((m,E)=>{xi[m]=function(q){return typeof q===m||"a"+(E<1?"n ":" ")+m}});const Qi={};xi.transitional=function(E,$,q){function K(J,g){return"[Axios v"+Ir+"] Transitional option '"+J+"'"+g+(q?". "+q:"")}return(J,g,p)=>{if(E===!1)throw new Tt(K(g," has been removed"+($?" in "+$:"")),Tt.ERR_DEPRECATED);return $&&!Qi[g]&&(Qi[g]=!0,console.warn(K(g," has been deprecated since v"+$+" and will be removed in the near future"))),E?E(J,g,p):!0}};function Sa(m,E,$){if(typeof m!="object")throw new Tt("options must be an object",Tt.ERR_BAD_OPTION_VALUE);const q=Object.keys(m);let K=q.length;for(;K-- >0;){const J=q[K],g=E[J];if(g){const p=m[J],t=p===void 0||g(p,J,m);if(t!==!0)throw new Tt("option "+J+" must be "+t,Tt.ERR_BAD_OPTION_VALUE);continue}if($!==!0)throw new Tt("Unknown option "+J,Tt.ERR_BAD_OPTION)}}const hi={assertOptions:Sa,validators:xi},Yt=hi.validators;class be{constructor(E){this.defaults=E,this.interceptors={request:new Vi,response:new Vi}}async request(E,$){try{return await this._request(E,$)}catch(q){if(q instanceof Error){let K;Error.captureStackTrace?Error.captureStackTrace(K={}):K=new Error;const J=K.stack?K.stack.replace(/^.+\n/,""):"";try{q.stack?J&&!String(q.stack).endsWith(J.replace(/^.+\n.+\n/,""))&&(q.stack+=`
`+J):q.stack=J}catch{}}throw q}}_request(E,$){typeof E=="string"?($=$||{},$.url=E):$=E||{},$=Zt(this.defaults,$);const{transitional:q,paramsSerializer:K,headers:J}=$;q!==void 0&&hi.assertOptions(q,{silentJSONParsing:Yt.transitional(Yt.boolean),forcedJSONParsing:Yt.transitional(Yt.boolean),clarifyTimeoutError:Yt.transitional(Yt.boolean)},!1),K!=null&&(nt.isFunction(K)?$.paramsSerializer={serialize:K}:hi.assertOptions(K,{encode:Yt.function,serialize:Yt.function},!0)),$.method=($.method||this.defaults.method||"get").toLowerCase();let g=J&&nt.merge(J.common,J[$.method]);J&&nt.forEach(["delete","get","head","post","put","patch","common"],a=>{delete J[a]}),$.headers=qt.concat(g,J);const p=[];let t=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen($)===!1||(t=t&&d.synchronous,p.unshift(d.fulfilled,d.rejected))});const e=[];this.interceptors.response.forEach(function(d){e.push(d.fulfilled,d.rejected)});let i,n=0,s;if(!t){const a=[Ki.bind(this),void 0];for(a.unshift.apply(a,p),a.push.apply(a,e),s=a.length,i=Promise.resolve($);n<s;)i=i.then(a[n++],a[n++]);return i}s=p.length;let r=$;for(n=0;n<s;){const a=p[n++],d=p[n++];try{r=a(r)}catch(c){d.call(this,c);break}}try{i=Ki.call(this,r)}catch(a){return Promise.reject(a)}for(n=0,s=e.length;n<s;)i=i.then(e[n++],e[n++]);return i}getUri(E){E=Zt(this.defaults,E);const $=br(E.baseURL,E.url);return gr($,E.params,E.paramsSerializer)}}nt.forEach(["delete","get","head","options"],function(E){be.prototype[E]=function($,q){return this.request(Zt(q||{},{method:E,url:$,data:(q||{}).data}))}});nt.forEach(["post","put","patch"],function(E){function $(q){return function(J,g,p){return this.request(Zt(p||{},{method:E,headers:q?{"Content-Type":"multipart/form-data"}:{},url:J,data:g}))}}be.prototype[E]=$(),be.prototype[E+"Form"]=$(!0)});const Ae=be;class Ti{constructor(E){if(typeof E!="function")throw new TypeError("executor must be a function.");let $;this.promise=new Promise(function(J){$=J});const q=this;this.promise.then(K=>{if(!q._listeners)return;let J=q._listeners.length;for(;J-- >0;)q._listeners[J](K);q._listeners=null}),this.promise.then=K=>{let J;const g=new Promise(p=>{q.subscribe(p),J=p}).then(K);return g.cancel=function(){q.unsubscribe(J)},g},E(function(J,g,p){q.reason||(q.reason=new oe(J,g,p),$(q.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(E){if(this.reason){E(this.reason);return}this._listeners?this._listeners.push(E):this._listeners=[E]}unsubscribe(E){if(!this._listeners)return;const $=this._listeners.indexOf(E);$!==-1&&this._listeners.splice($,1)}static source(){let E;return{token:new Ti(function(K){E=K}),cancel:E}}}const Ra=Ti;function _a(m){return function($){return m.apply(null,$)}}function Ba(m){return nt.isObject(m)&&m.isAxiosError===!0}const li={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(li).forEach(([m,E])=>{li[E]=m});const Ea=li;function Pr(m){const E=new Ae(m),$=sr(Ae.prototype.request,E);return nt.extend($,Ae.prototype,E,{allOwnKeys:!0}),nt.extend($,E,null,{allOwnKeys:!0}),$.create=function(K){return Pr(Zt(m,K))},$}const Nt=Pr(ki);Nt.Axios=Ae;Nt.CanceledError=oe;Nt.CancelToken=Ra;Nt.isCancel=yr;Nt.VERSION=Ir;Nt.toFormData=Se;Nt.AxiosError=Tt;Nt.Cancel=Nt.CanceledError;Nt.all=function(E){return Promise.all(E)};Nt.spread=_a;Nt.isAxiosError=Ba;Nt.mergeConfig=Zt;Nt.AxiosHeaders=qt;Nt.formToJSON=m=>Ar(nt.isHTMLForm(m)?new FormData(m):m);Nt.getAdapter=Tr.getAdapter;Nt.HttpStatusCode=Ea;Nt.default=Nt;const Sr=Nt;var Ca=Object.defineProperty,yt=(m,E)=>Ca(m,"name",{value:E,configurable:!0}),Yi;(function(m){(function(E){var $=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),q=K(m);typeof $.Reflect>"u"?$.Reflect=m:q=K($.Reflect,q),E(q);function K(J,g){return function(p,t){typeof J[p]!="function"&&Object.defineProperty(J,p,{configurable:!0,writable:!0,value:t}),g&&g(p,t)}}yt(K,"makeExporter")})(function(E){var $=Object.prototype.hasOwnProperty,q=typeof Symbol=="function",K=q&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",J=q&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",g=typeof Object.create=="function",p={__proto__:[]}instanceof Array,t=!g&&!p,e={create:g?function(){return vt(Object.create(null))}:p?function(){return vt({__proto__:null})}:function(){return vt({})},has:t?function(et,st){return $.call(et,st)}:function(et,st){return st in et},get:t?function(et,st){return $.call(et,st)?et[st]:void 0}:function(et,st){return et[st]}},i=Object.getPrototypeOf(Function),n=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",s=!n&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ft(),r=!n&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ut(),a=!n&&typeof WeakMap=="function"?WeakMap:At(),d=new a;function c(et,st,at,ct){if(F(at)){if(!N(et))throw new TypeError;if(!O(st))throw new TypeError;return k(et,st)}else{if(!N(et))throw new TypeError;if(!G(st))throw new TypeError;if(!G(ct)&&!F(ct)&&!H(ct))throw new TypeError;return H(ct)&&(ct=void 0),at=Q(at),T(et,st,at,ct)}}yt(c,"decorate"),E("decorate",c);function l(et,st){function at(ct,mt){if(!G(ct))throw new TypeError;if(!F(mt)&&!R(mt))throw new TypeError;z(et,st,ct,mt)}return yt(at,"decorator"),at}yt(l,"metadata"),E("metadata",l);function h(et,st,at,ct){if(!G(at))throw new TypeError;return F(ct)||(ct=Q(ct)),z(et,st,at,ct)}yt(h,"defineMetadata"),E("defineMetadata",h);function o(et,st,at){if(!G(st))throw new TypeError;return F(at)||(at=Q(at)),b(et,st,at)}yt(o,"hasMetadata"),E("hasMetadata",o);function u(et,st,at){if(!G(st))throw new TypeError;return F(at)||(at=Q(at)),x(et,st,at)}yt(u,"hasOwnMetadata"),E("hasOwnMetadata",u);function f(et,st,at){if(!G(st))throw new TypeError;return F(at)||(at=Q(at)),I(et,st,at)}yt(f,"getMetadata"),E("getMetadata",f);function v(et,st,at){if(!G(st))throw new TypeError;return F(at)||(at=Q(at)),S(et,st,at)}yt(v,"getOwnMetadata"),E("getOwnMetadata",v);function y(et,st){if(!G(et))throw new TypeError;return F(st)||(st=Q(st)),V(et,st)}yt(y,"getMetadataKeys"),E("getMetadataKeys",y);function A(et,st){if(!G(et))throw new TypeError;return F(st)||(st=Q(st)),L(et,st)}yt(A,"getOwnMetadataKeys"),E("getOwnMetadataKeys",A);function w(et,st,at){if(!G(st))throw new TypeError;F(at)||(at=Q(at));var ct=P(st,at,!1);if(F(ct)||!ct.delete(et))return!1;if(ct.size>0)return!0;var mt=d.get(st);return mt.delete(at),mt.size>0||d.delete(st),!0}yt(w,"deleteMetadata"),E("deleteMetadata",w);function k(et,st){for(var at=et.length-1;at>=0;--at){var ct=et[at],mt=ct(st);if(!F(mt)&&!H(mt)){if(!O(mt))throw new TypeError;st=mt}}return st}yt(k,"DecorateConstructor");function T(et,st,at,ct){for(var mt=et.length-1;mt>=0;--mt){var It=et[mt],bt=It(st,at,ct);if(!F(bt)&&!H(bt)){if(!G(bt))throw new TypeError;ct=bt}}return ct}yt(T,"DecorateProperty");function P(et,st,at){var ct=d.get(et);if(F(ct)){if(!at)return;ct=new s,d.set(et,ct)}var mt=ct.get(st);if(F(mt)){if(!at)return;mt=new s,ct.set(st,mt)}return mt}yt(P,"GetOrCreateMetadataMap");function b(et,st,at){var ct=x(et,st,at);if(ct)return!0;var mt=ot(st);return H(mt)?!1:b(et,mt,at)}yt(b,"OrdinaryHasMetadata");function x(et,st,at){var ct=P(st,at,!1);return F(ct)?!1:X(ct.has(et))}yt(x,"OrdinaryHasOwnMetadata");function I(et,st,at){var ct=x(et,st,at);if(ct)return S(et,st,at);var mt=ot(st);if(!H(mt))return I(et,mt,at)}yt(I,"OrdinaryGetMetadata");function S(et,st,at){var ct=P(st,at,!1);if(!F(ct))return ct.get(et)}yt(S,"OrdinaryGetOwnMetadata");function z(et,st,at,ct){var mt=P(at,ct,!0);mt.set(et,st)}yt(z,"OrdinaryDefineOwnMetadata");function V(et,st){var at=L(et,st),ct=ot(et);if(ct===null)return at;var mt=V(ct,st);if(mt.length<=0)return at;if(at.length<=0)return mt;for(var It=new r,bt=[],dt=0,ht=at;dt<ht.length;dt++){var gt=ht[dt],lt=It.has(gt);lt||(It.add(gt),bt.push(gt))}for(var Mt=0,jt=mt;Mt<jt.length;Mt++){var gt=jt[Mt],lt=It.has(gt);lt||(It.add(gt),bt.push(gt))}return bt}yt(V,"OrdinaryMetadataKeys");function L(et,st){var at=[],ct=P(et,st,!1);if(F(ct))return at;for(var mt=ct.keys(),It=B(mt),bt=0;;){var dt=Z(It);if(!dt)return at.length=bt,at;var ht=Y(dt);try{at[bt]=ht}catch(gt){try{rt(It)}finally{throw gt}}bt++}}yt(L,"OrdinaryOwnMetadataKeys");function C(et){if(et===null)return 1;switch(typeof et){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return et===null?1:6;default:return 6}}yt(C,"Type");function F(et){return et===void 0}yt(F,"IsUndefined");function H(et){return et===null}yt(H,"IsNull");function M(et){return typeof et=="symbol"}yt(M,"IsSymbol");function G(et){return typeof et=="object"?et!==null:typeof et=="function"}yt(G,"IsObject");function D(et,st){switch(C(et)){case 0:return et;case 1:return et;case 2:return et;case 3:return et;case 4:return et;case 5:return et}var at=st===3?"string":st===5?"number":"default",ct=j(et,K);if(ct!==void 0){var mt=ct.call(et,at);if(G(mt))throw new TypeError;return mt}return W(et,at==="default"?"number":at)}yt(D,"ToPrimitive");function W(et,st){if(st==="string"){var at=et.toString;if(_(at)){var ct=at.call(et);if(!G(ct))return ct}var mt=et.valueOf;if(_(mt)){var ct=mt.call(et);if(!G(ct))return ct}}else{var mt=et.valueOf;if(_(mt)){var ct=mt.call(et);if(!G(ct))return ct}var It=et.toString;if(_(It)){var ct=It.call(et);if(!G(ct))return ct}}throw new TypeError}yt(W,"OrdinaryToPrimitive");function X(et){return!!et}yt(X,"ToBoolean");function U(et){return""+et}yt(U,"ToString");function Q(et){var st=D(et,3);return M(st)?st:U(st)}yt(Q,"ToPropertyKey");function N(et){return Array.isArray?Array.isArray(et):et instanceof Object?et instanceof Array:Object.prototype.toString.call(et)==="[object Array]"}yt(N,"IsArray");function _(et){return typeof et=="function"}yt(_,"IsCallable");function O(et){return typeof et=="function"}yt(O,"IsConstructor");function R(et){switch(C(et)){case 3:return!0;case 4:return!0;default:return!1}}yt(R,"IsPropertyKey");function j(et,st){var at=et[st];if(at!=null){if(!_(at))throw new TypeError;return at}}yt(j,"GetMethod");function B(et){var st=j(et,J);if(!_(st))throw new TypeError;var at=st.call(et);if(!G(at))throw new TypeError;return at}yt(B,"GetIterator");function Y(et){return et.value}yt(Y,"IteratorValue");function Z(et){var st=et.next();return st.done?!1:st}yt(Z,"IteratorStep");function rt(et){var st=et.return;st&&st.call(et)}yt(rt,"IteratorClose");function ot(et){var st=Object.getPrototypeOf(et);if(typeof et!="function"||et===i||st!==i)return st;var at=et.prototype,ct=at&&Object.getPrototypeOf(at);if(ct==null||ct===Object.prototype)return st;var mt=ct.constructor;return typeof mt!="function"||mt===et?st:mt}yt(ot,"OrdinaryGetPrototypeOf");function ft(){var et={},st=[],at=function(){function bt(dt,ht,gt){this._index=0,this._keys=dt,this._values=ht,this._selector=gt}return yt(bt,"MapIterator"),bt.prototype["@@iterator"]=function(){return this},bt.prototype[J]=function(){return this},bt.prototype.next=function(){var dt=this._index;if(dt>=0&&dt<this._keys.length){var ht=this._selector(this._keys[dt],this._values[dt]);return dt+1>=this._keys.length?(this._index=-1,this._keys=st,this._values=st):this._index++,{value:ht,done:!1}}return{value:void 0,done:!0}},bt.prototype.throw=function(dt){throw this._index>=0&&(this._index=-1,this._keys=st,this._values=st),dt},bt.prototype.return=function(dt){return this._index>=0&&(this._index=-1,this._keys=st,this._values=st),{value:dt,done:!0}},bt}();return function(){function bt(){this._keys=[],this._values=[],this._cacheKey=et,this._cacheIndex=-2}return yt(bt,"Map1"),Object.defineProperty(bt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),bt.prototype.has=function(dt){return this._find(dt,!1)>=0},bt.prototype.get=function(dt){var ht=this._find(dt,!1);return ht>=0?this._values[ht]:void 0},bt.prototype.set=function(dt,ht){var gt=this._find(dt,!0);return this._values[gt]=ht,this},bt.prototype.delete=function(dt){var ht=this._find(dt,!1);if(ht>=0){for(var gt=this._keys.length,lt=ht+1;lt<gt;lt++)this._keys[lt-1]=this._keys[lt],this._values[lt-1]=this._values[lt];return this._keys.length--,this._values.length--,dt===this._cacheKey&&(this._cacheKey=et,this._cacheIndex=-2),!0}return!1},bt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=et,this._cacheIndex=-2},bt.prototype.keys=function(){return new at(this._keys,this._values,ct)},bt.prototype.values=function(){return new at(this._keys,this._values,mt)},bt.prototype.entries=function(){return new at(this._keys,this._values,It)},bt.prototype["@@iterator"]=function(){return this.entries()},bt.prototype[J]=function(){return this.entries()},bt.prototype._find=function(dt,ht){return this._cacheKey!==dt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=dt)),this._cacheIndex<0&&ht&&(this._cacheIndex=this._keys.length,this._keys.push(dt),this._values.push(void 0)),this._cacheIndex},bt}();function ct(bt,dt){return bt}function mt(bt,dt){return dt}function It(bt,dt){return[bt,dt]}}yt(ft,"CreateMapPolyfill");function ut(){return function(){function et(){this._map=new s}return yt(et,"Set1"),Object.defineProperty(et.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),et.prototype.has=function(st){return this._map.has(st)},et.prototype.add=function(st){return this._map.set(st,st),this},et.prototype.delete=function(st){return this._map.delete(st)},et.prototype.clear=function(){this._map.clear()},et.prototype.keys=function(){return this._map.keys()},et.prototype.values=function(){return this._map.values()},et.prototype.entries=function(){return this._map.entries()},et.prototype["@@iterator"]=function(){return this.keys()},et.prototype[J]=function(){return this.keys()},et}()}yt(ut,"CreateSetPolyfill");function At(){var et=16,st=e.create(),at=ct();return function(){function ht(){this._key=ct()}return yt(ht,"WeakMap1"),ht.prototype.has=function(gt){var lt=mt(gt,!1);return lt!==void 0?e.has(lt,this._key):!1},ht.prototype.get=function(gt){var lt=mt(gt,!1);return lt!==void 0?e.get(lt,this._key):void 0},ht.prototype.set=function(gt,lt){var Mt=mt(gt,!0);return Mt[this._key]=lt,this},ht.prototype.delete=function(gt){var lt=mt(gt,!1);return lt!==void 0?delete lt[this._key]:!1},ht.prototype.clear=function(){this._key=ct()},ht}();function ct(){var ht;do ht="@@WeakMap@@"+dt();while(e.has(st,ht));return st[ht]=!0,ht}function mt(ht,gt){if(!$.call(ht,at)){if(!gt)return;Object.defineProperty(ht,at,{value:e.create()})}return ht[at]}function It(ht,gt){for(var lt=0;lt<gt;++lt)ht[lt]=Math.random()*255|0;return ht}function bt(ht){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(ht)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(ht)):It(new Uint8Array(ht),ht):It(new Array(ht),ht)}function dt(){var ht=bt(et);ht[6]=ht[6]&79|64,ht[8]=ht[8]&191|128;for(var gt="",lt=0;lt<et;++lt){var Mt=ht[lt];(lt===4||lt===6||lt===8)&&(gt+="-"),Mt<16&&(gt+="0"),gt+=Mt.toString(16).toLowerCase()}return gt}}yt(At,"CreateWeakMapPolyfill");function vt(et){return et.__=void 0,delete et.__,et}yt(vt,"MakeDictionary")})})(Yi||(Yi={}));var Ma="__client__",Rr="__client_name__",ue="default",_r="__base_url__",Ua="__path__",La="__method__",ui="__arguments__",fe=new Map;function fi(m){var E,$;const q=Sr.create(m),K=(E=m.interceptorConfig)==null?void 0:E.request,J=($=m.interceptorConfig)==null?void 0:$.response;return K&&q.interceptors.request.use(K.onFulfilled,K.onRejected),J&&q.interceptors.response.use(J.onFulfilled,J.onRejected),q}yt(fi,"createClient");function Da(m){return fe.get(m??ue)}yt(Da,"useClient");function Na(m){Array.isArray(m)||fe.set(m.name||ue,fi(m)),Array.isArray(m)&&m.forEach(E=>{fe.set(E.name||ue,fi(E))})}yt(Na,"defineConfig");function Oa(m){return E=>{const $=(m==null?void 0:m.name)||ue;Reflect.defineMetadata(Rr,$,E),Reflect.defineMetadata(Ma,fe.get($),E)}}yt(Oa,"Client");function Be(m){return E=>{Reflect.defineMetadata(_r,m||"",E)}}yt(Be,"Api");var Qt;(function(m){m.BODY="BODY",m.QUERY="QUERY",m.PATH="PATH",m.HEADER="HEADER",m.FORM_DATA="FORM_DATA"})(Qt||(Qt={}));function Br(m,E,$,q){return{...m,[`${E}:${$}`]:{property:q,index:$}}}yt(Br,"assignMetadata");function Ii(m){return E=>($,q,K)=>{const J=Reflect.getMetadata(ui,$.constructor,q)||{};Reflect.defineMetadata(ui,Br(J,m,K,E),$.constructor,q)}}yt(Ii,"createParamDecorator");var za=yt(m=>Ii(Qt.BODY)(m),"Body"),Pi=yt(m=>Ii(Qt.QUERY)(m),"Query"),te;(function(m){m.GET="GET",m.POST="POST",m.PUT="PUT",m.DELETE="DELETE"})(te||(te={}));var pi;(function(m){m.JSON="application/json;charset=UTF-8",m.FORM_URLENCODED="application/x-www-form-urlencoded;charset=UTF-8",m.FORM_DATA="multipart/form-data;charset=UTF-8"})(pi||(pi={}));function mi(m){return Object.prototype.toString.call(m)==="[object Object]"}yt(mi,"isObject");var Fa=Sr.create({});function Er(m){const E=m.path||"/",$=m.method||te.GET;return(q,K,J)=>(J.value=(...g)=>{var p,t,e;const i=(p=Reflect.getMetadata(Rr,q.constructor))!=null?p:ue,n=(t=Reflect.getMetadata(ui,q.constructor,K))!=null?t:{},s=(e=fe.get(i))!=null?e:Fa,a=`${Reflect.getMetadata(_r,q.constructor)}${E}`,d=Object.entries(n).reduce((c,l)=>{var h,o,u,f,v,y;const[A,w]=l,[k,T]=A.split(":"),{property:P}=w,b=g[parseInt(T,10)];if(k===Qt.BODY&&(P?c.data=Object.assign((h=c.data)!=null?h:{},{[P]:b}):c.data=Object.assign((o=c.data)!=null?o:{},b)),k===Qt.QUERY){if(!mi(b)&&!P)throw new Error("query is missing unique key");P?c.params=Object.assign((u=c.params)!=null?u:{},{[P]:b}):c.params=Object.assign((f=c.params)!=null?f:{},b)}if(k===Qt.HEADER){if(!mi(b)&&!P)throw new Error("header is missing unique key");P?c.headers=Object.assign((v=c.headers)!=null?v:{},{[P]:b}):c.headers=Object.assign((y=c.headers)!=null?y:{},b)}if(k===Qt.PATH){if(!P)throw new Error("path is missing unique key");const x=a.replace(`:${P}`,b);c.url=x}if(k===Qt.FORM_DATA){let x=new FormData;b instanceof FormData?x=b:Object.keys(b).forEach(I=>{const S=b[I];if(Array.isArray(S)){S.forEach(z=>{x.append(`${I}[]`,z)});return}x.append(I,b[I])}),c.data=x}return c},{url:a,method:$,headers:{"Content-Type":pi.JSON}});return s==null?void 0:s(d)},Reflect.defineMetadata(Ua,E,J.value),Reflect.defineMetadata(La,$,J.value),J)}yt(Er,"defineRequestMetadata");function me(m){return E=>Er({path:E,method:m})}yt(me,"createRequestDecorator");var Ee=me(te.GET),$a=me(te.POST);me(te.PUT);me(te.DELETE);/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Va=Object.defineProperty,Ga=Object.getOwnPropertyDescriptor,Ce=(m,E,$,q)=>{for(var K=q>1?void 0:q?Ga(E,$):E,J=m.length-1,g;J>=0;J--)(g=m[J])&&(K=(q?g(E,$,K):g(K))||K);return q&&K&&Va(E,$,K),K},Si=(m,E)=>($,q)=>E($,q,m);let ae=class{list(m){return{}}details(m){return{}}playUrl(m){}};Ce([Ee("/list"),Si(0,Pi())],ae.prototype,"list",1);Ce([Ee("/list"),Si(0,Pi())],ae.prototype,"details",1);Ce([Ee("/play-url"),Si(0,Pi())],ae.prototype,"playUrl",1);ae=Ce([Be("/vod")],ae);const pc=new ae;var Ha=Object.defineProperty,ja=Object.getOwnPropertyDescriptor,Cr=(m,E,$,q)=>{for(var K=q>1?void 0:q?ja(E,$):E,J=m.length-1,g;J>=0;J--)(g=m[J])&&(K=(q?g(E,$,K):g(K))||K);return q&&K&&Ha(E,$,K),K},Xa=(m,E)=>($,q)=>E($,q,m);let ke=class{token(m){}get authorization(){const m=this.getToken();return m?`Bearer ${m.access_token}`:""}get isVisitor(){const m=this.getToken();return m==null?void 0:m.isVisitor}getToken(){const m=window.localStorage.getItem(Le);if(!m)return null;try{return JSON.parse(m)}catch{return{access_token:m,isVisitor:!0}}}setToken(m){window.localStorage.setItem(Le,JSON.stringify(m))}clearToken(){window.localStorage.removeItem(Le)}refreshToken(m){try{return this.token(m).then(E=>{this.setToken(E)})}catch(E){return this.clearToken(),Promise.reject(E)}}async login(m){try{return this.authorization&&!m.username?void 0:this.token(m).then(E=>{this.setToken(E)})}catch(E){return this.clearToken(),Promise.reject(E)}}};Cr([$a("/token/get"),Xa(0,za())],ke.prototype,"token",1);ke=Cr([Be("/auth")],ke);const mc=new ke;var qa=Object.defineProperty,Wa=Object.getOwnPropertyDescriptor,Mr=(m,E,$,q)=>{for(var K=q>1?void 0:q?Wa(E,$):E,J=m.length-1,g;J>=0;J--)(g=m[J])&&(K=(q?g(E,$,K):g(K))||K);return q&&K&&qa(E,$,K),K};let xe=class{info(){}};Mr([Ee("/info")],xe.prototype,"info",1);xe=Mr([Be("/user")],xe);const gc=new xe,ee=Object.prototype.toString;function Ur(m){return ee.call(m)==="[object Array]"}function vc(m){return ee.call(m)==="[object Null]"}function Ac(m){return ee.call(m)==="[object Boolean]"}function yc(m){return ee.call(m)==="[object Object]"}const wc=m=>ee.call(m)==="[object Promise]";function Ka(m){return ee.call(m)==="[object String]"}function Vt(m){return ee.call(m)==="[object Number]"&&m===m}function bc(m){return m===void 0}function Lr(m){return typeof m=="function"}const kc=m=>(m==null?void 0:m.$)!==void 0,Dr=Symbol("ArcoConfigProvider");var Qa=Object.defineProperty,Ya=Object.defineProperties,Ja=Object.getOwnPropertyDescriptors,Ji=Object.getOwnPropertySymbols,Za=Object.prototype.hasOwnProperty,tn=Object.prototype.propertyIsEnumerable,Zi=(m,E,$)=>E in m?Qa(m,E,{enumerable:!0,configurable:!0,writable:!0,value:$}):m[E]=$,en=(m,E)=>{for(var $ in E||(E={}))Za.call(E,$)&&Zi(m,$,E[$]);if(Ji)for(var $ of Ji(E))tn.call(E,$)&&Zi(m,$,E[$]);return m},rn=(m,E)=>Ya(m,Ja(E));const sn="A",an="arco",gi="$arco",xc=m=>{var E;return(E=m==null?void 0:m.componentPrefix)!=null?E:sn},Tc=(m,E)=>{var $;E&&E.classPrefix&&(m.config.globalProperties[gi]=rn(en({},($=m.config.globalProperties[gi])!=null?$:{}),{classPrefix:E.classPrefix}))},Ft=m=>{var E,$,q;const K=$r(),J=vi(Dr,void 0),g=(q=($=J==null?void 0:J.prefixCls)!=null?$:(E=K==null?void 0:K.appContext.config.globalProperties[gi])==null?void 0:E.classPrefix)!=null?q:an;return m?`${g}-${m}`:g};var tr;(function(m){m[m.ELEMENT=1]="ELEMENT",m[m.FUNCTIONAL_COMPONENT=2]="FUNCTIONAL_COMPONENT",m[m.STATEFUL_COMPONENT=4]="STATEFUL_COMPONENT",m[m.COMPONENT=6]="COMPONENT",m[m.TEXT_CHILDREN=8]="TEXT_CHILDREN",m[m.ARRAY_CHILDREN=16]="ARRAY_CHILDREN",m[m.SLOTS_CHILDREN=32]="SLOTS_CHILDREN",m[m.TELEPORT=64]="TELEPORT",m[m.SUSPENSE=128]="SUSPENSE",m[m.COMPONENT_SHOULD_KEEP_ALIVE=256]="COMPONENT_SHOULD_KEEP_ALIVE",m[m.COMPONENT_KEPT_ALIVE=512]="COMPONENT_KEPT_ALIVE"})(tr||(tr={}));var er;(function(m){m[m.TEXT=1]="TEXT",m[m.CLASS=2]="CLASS",m[m.STYLE=4]="STYLE",m[m.PROPS=8]="PROPS",m[m.FULL_PROPS=16]="FULL_PROPS",m[m.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",m[m.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",m[m.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",m[m.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",m[m.NEED_PATCH=512]="NEED_PATCH",m[m.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",m[m.DEV_ROOT_FRAGMENT=2048]="DEV_ROOT_FRAGMENT",m[m.HOISTED=-1]="HOISTED",m[m.BAIL=-2]="BAIL"})(er||(er={}));const Ri=m=>!!(m&&m.shapeFlag&1),Me=(m,E)=>!!(m&&m.shapeFlag&6),Nr=(m,E)=>!!(m&&m.shapeFlag&16),nn=(m,E)=>!!(m&&m.shapeFlag&32),Fe=m=>{var E,$;if(m)for(const q of m){if(Ri(q)||Me(q))return q;if(Nr(q,q.children)){const K=Fe(q.children);if(K)return K}else if(nn(q,q.children)){const K=($=(E=q.children).default)==null?void 0:$.call(E);if(K){const J=Fe(K);if(J)return J}}else if(Ur(q)){const K=Fe(q);if(K)return K}}},Ic=m=>{if(!m)return!0;for(const E of m)if(E.children)return!1;return!0},on=(m,E)=>{if(m&&m.length>0)for(let $=0;$<m.length;$++){const q=m[$];if(Ri(q)||Me(q)){const J=Lr(E)?E(q):E;return m[$]=Vr(q,J,!0),!0}const K=_i(q);if(K&&K.length>0&&on(K,E))return!0}return!1},_i=m=>{if(Nr(m,m.children))return m.children;if(Ur(m))return m},Or=m=>{var E,$;if(Ri(m))return m.el;if(Me(m)){if(((E=m.el)==null?void 0:E.nodeType)===1)return m.el;if(($=m.component)!=null&&$.subTree){const q=Or(m.component.subTree);if(q)return q}}else{const q=_i(m);return cn(q)}},cn=m=>{if(m&&m.length>0)for(const E of m){const $=Or(E);if($)return $}},Pc=m=>{if(m)return Lr(m)?m:()=>m},zr=(m,E)=>{var $;const q=[];if(Me(m,m.type))m.type.name===E?m.component&&q.push(m.component.uid):($=m.component)!=null&&$.subTree&&q.push(...zr(m.component.subTree,E));else{const K=_i(m);K&&q.push(...dn(K,E))}return q},dn=(m,E)=>{const $=[];if(m&&m.length>0)for(const q of m)$.push(...zr(q,E));return $},Bi=()=>{},hn=()=>{const{body:m}=document,E=document.documentElement;let $;try{$=(window.top||window.self||window).document.body}catch{}return{height:Math.max(m.scrollHeight,m.offsetHeight,E.clientHeight,E.scrollHeight,E.offsetHeight,($==null?void 0:$.scrollHeight)||0,($==null?void 0:$.clientHeight)||0),width:Math.max(m.scrollWidth,m.offsetWidth,E.clientWidth,E.scrollWidth,E.offsetWidth,($==null?void 0:$.scrollWidth)||0,($==null?void 0:$.clientWidth)||0)}},Ei=(()=>{try{return!(typeof window<"u"&&document!==void 0)}catch{return!0}})(),Sc=(()=>Ei?Bi:(m,E,$,q=!1)=>{m.addEventListener(E,$,q)})(),Rc=(()=>Ei?Bi:(m,E,$,q=!1)=>{m.removeEventListener(E,$,q)})(),_c=(m,E)=>{if(!m||!E)return!1;let $=E;for(;$;){if($===m)return!0;$=$.parentNode}return!1},Bc=m=>{const E=document.createElement("div");return E.setAttribute("class",`arco-overlay arco-overlay-${m}`),E},ln=(m,E)=>{var $;return Ei?Bi():($=(E??document).querySelector(m))!=null?$:void 0},Ec=(m,E)=>{if(Ka(m)){const $=m[0]==="#"?`[id='${m.slice(1)}']`:m;return ln($,E)}return m},Cc=m=>m.tagName==="BODY"?document.documentElement.scrollHeight>window.innerHeight:m.scrollHeight>m.offsetHeight,Mc=m=>m.tagName==="BODY"?window.innerWidth-hn().width:m.offsetWidth-m.clientWidth;var $t=(m,E)=>{for(const[$,q]of E)m[$]=q;return m};const un=zt({name:"IconHover",props:{prefix:{type:String},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1}},setup(){return{prefixCls:Ft("icon-hover")}}});function fn(m,E,$,q,K,J){return Bt(),Et("span",{class:Dt([m.prefixCls,{[`${m.prefix}-icon-hover`]:m.prefix,[`${m.prefixCls}-size-${m.size}`]:m.size!=="medium",[`${m.prefixCls}-disabled`]:m.disabled}])},[rr(m.$slots,"default")],2)}var Uc=$t(un,[["render",fn]]);const pn=zt({name:"IconClose",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-close`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),mn=["stroke-width","stroke-linecap","stroke-linejoin"],gn=_t("path",{d:"M9.857 9.858 24 24m0 0 14.142 14.142M24 24 38.142 9.858M24 24 9.857 38.142"},null,-1),vn=[gn];function An(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},vn,14,mn)}var $e=$t(pn,[["render",An]]);const Lc=Object.assign($e,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+$e.name,$e)}}),yn=zt({name:"IconInfoCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-info-circle-fill`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),wn=["stroke-width","stroke-linecap","stroke-linejoin"],bn=_t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm2-30a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2Zm0 17h1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h1v-8a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v11Z",fill:"currentColor",stroke:"none"},null,-1),kn=[bn];function xn(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},kn,14,wn)}var Ve=$t(yn,[["render",xn]]);const Dc=Object.assign(Ve,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+Ve.name,Ve)}}),Tn=zt({name:"IconCheckCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-check-circle-fill`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),In=["stroke-width","stroke-linecap","stroke-linejoin"],Pn=_t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm10.207-24.379a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0L22 26.172l-4.878-4.88a1 1 0 0 0-1.415 0l-1.414 1.415a1 1 0 0 0 0 1.414l7 7a1 1 0 0 0 1.414 0l11.5-11.5Z",fill:"currentColor",stroke:"none"},null,-1),Sn=[Pn];function Rn(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},Sn,14,In)}var Ge=$t(Tn,[["render",Rn]]);const Nc=Object.assign(Ge,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+Ge.name,Ge)}}),_n=zt({name:"IconExclamationCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-exclamation-circle-fill`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),Bn=["stroke-width","stroke-linecap","stroke-linejoin"],En=_t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm-2-11a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2Zm4-18a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V15Z",fill:"currentColor",stroke:"none"},null,-1),Cn=[En];function Mn(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},Cn,14,Bn)}var He=$t(_n,[["render",Mn]]);const Oc=Object.assign(He,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+He.name,He)}}),Un=zt({name:"IconCloseCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-close-circle-fill`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),Ln=["stroke-width","stroke-linecap","stroke-linejoin"],Dn=_t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm4.955-27.771-4.95 4.95-4.95-4.95a1 1 0 0 0-1.414 0l-1.414 1.414a1 1 0 0 0 0 1.414l4.95 4.95-4.95 4.95a1 1 0 0 0 0 1.414l1.414 1.414a1 1 0 0 0 1.414 0l4.95-4.95 4.95 4.95a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414l-4.95-4.95 4.95-4.95a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0Z",fill:"currentColor",stroke:"none"},null,-1),Nn=[Dn];function On(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},Nn,14,Ln)}var je=$t(Un,[["render",On]]);const zc=Object.assign(je,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+je.name,je)}}),Fc=["info","success","warning","error"],$c=["onFocus","onFocusin","onFocusout","onBlur","onChange","onBeforeinput","onInput","onReset","onSubmit","onInvalid","onKeydown","onKeypress","onKeyup","onCopy","onCut","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onSelect","autocomplete","autofocus","maxlength","minlength","name","pattern","readonly","required"],zn=zt({name:"IconLoading",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-loading`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),Fn=["stroke-width","stroke-linecap","stroke-linejoin"],$n=_t("path",{d:"M42 24c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6"},null,-1),Vn=[$n];function Gn(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},Vn,14,Fn)}var Xe=$t(zn,[["render",Gn]]);const Vc=Object.assign(Xe,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+Xe.name,Xe)}}),Hn=Symbol("ArcoFormItemContext"),Gc=Symbol("ArcoFormContext"),Hc=({size:m,disabled:E,error:$,uninject:q}={})=>{const K=q?{}:vi(Hn,{}),J=Pt(()=>{var i;return(i=m==null?void 0:m.value)!=null?i:K.size}),g=Pt(()=>(E==null?void 0:E.value)||K.disabled),p=Pt(()=>($==null?void 0:$.value)||K.error),t=Mi(K,"feedback"),e=Mi(K,"eventHandlers");return{formItemCtx:K,mergedSize:J,mergedDisabled:g,mergedError:p,feedback:t,eventHandlers:e}},jc=(m,{defaultValue:E="medium"}={})=>{const $=vi(Dr,void 0);return{mergedSize:Pt(()=>{var K,J;return(J=(K=m==null?void 0:m.value)!=null?K:$==null?void 0:$.size)!=null?J:E})}},jn=1e3,Xn=5e3,qn=1;class Wn{constructor(){this.popupStack={popup:new Set,dialog:new Set,message:new Set},this.getNextZIndex=E=>(E==="message"?Array.from(this.popupStack.message).pop()||Xn:Array.from(this.popupStack.popup).pop()||jn)+qn,this.add=E=>{const $=this.getNextZIndex(E);return this.popupStack[E].add($),E==="dialog"&&this.popupStack.popup.add($),$},this.delete=(E,$)=>{this.popupStack[$].delete(E),$==="dialog"&&this.popupStack.popup.delete(E)},this.isLastDialog=E=>this.popupStack.dialog.size>1?E===Array.from(this.popupStack.dialog).pop():!0}}const qe=new Wn;function Xc(m,{visible:E,runOnMounted:$}={}){const q=Gr(0),K=()=>{q.value=qe.add(m)},J=()=>{qe.delete(q.value,m)},g=()=>m==="dialog"?qe.isLastDialog(q.value):!1;return Hr(()=>E==null?void 0:E.value,p=>{p?K():J()},{immediate:!0}),$&&(jr(()=>{K()}),Xr(()=>{J()})),{zIndex:qr(q),open:K,close:J,isLastDialog:g}}const Kn=zt({name:"IconDown",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-down`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),Qn=["stroke-width","stroke-linecap","stroke-linejoin"],Yn=_t("path",{d:"M39.6 17.443 24.043 33 8.487 17.443"},null,-1),Jn=[Yn];function Zn(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},Jn,14,Qn)}var We=$t(Kn,[["render",Zn]]);const qc=Object.assign(We,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+We.name,We)}}),to=zt({name:"IconRight",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-right`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),eo=["stroke-width","stroke-linecap","stroke-linejoin"],io=_t("path",{d:"m16 39.513 15.556-15.557L16 8.4"},null,-1),ro=[io];function so(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},ro,14,eo)}var Ke=$t(to,[["render",so]]);const Wc=Object.assign(Ke,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+Ke.name,Ke)}}),ao=zt({name:"IconLeft",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-left`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),no=["stroke-width","stroke-linecap","stroke-linejoin"],oo=_t("path",{d:"M32 8.4 16.444 23.956 32 39.513"},null,-1),co=[oo];function ho(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},co,14,no)}var Qe=$t(ao,[["render",ho]]);const Kc=Object.assign(Qe,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+Qe.name,Qe)}}),lo=zt({name:"IconUp",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-up`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),uo=["stroke-width","stroke-linecap","stroke-linejoin"],fo=_t("path",{d:"M39.6 30.557 24.043 15 8.487 30.557"},null,-1),po=[fo];function mo(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},po,14,uo)}var Ye=$t(lo,[["render",mo]]);const Qc=Object.assign(Ye,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+Ye.name,Ye)}}),go=zt({name:"IconFullscreen",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-fullscreen`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),vo=["stroke-width","stroke-linecap","stroke-linejoin"],Ao=_t("path",{d:"M42 17V9a1 1 0 0 0-1-1h-8M6 17V9a1 1 0 0 1 1-1h8m27 23v8a1 1 0 0 1-1 1h-8M6 31v8a1 1 0 0 0 1 1h8"},null,-1),yo=[Ao];function wo(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},yo,14,vo)}var Je=$t(go,[["render",wo]]);const Yc=Object.assign(Je,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+Je.name,Je)}}),bo=zt({name:"IconPause",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-pause`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),ko=["stroke-width","stroke-linecap","stroke-linejoin"],xo=_t("path",{d:"M14 12h4v24h-4zM30 12h4v24h-4z"},null,-1),To=_t("path",{fill:"currentColor",stroke:"none",d:"M14 12h4v24h-4zM30 12h4v24h-4z"},null,-1),Io=[xo,To];function Po(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},Io,14,ko)}var Ze=$t(bo,[["render",Po]]);const Jc=Object.assign(Ze,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+Ze.name,Ze)}}),So=zt({name:"IconPlayArrowFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-play-arrow-fill`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),Ro=["stroke-width","stroke-linecap","stroke-linejoin"],_o=_t("path",{d:"M17.533 10.974a1 1 0 0 0-1.537.844v24.356a1 1 0 0 0 1.537.844L36.67 24.84a1 1 0 0 0 0-1.688L17.533 10.974Z",fill:"currentColor",stroke:"none"},null,-1),Bo=[_o];function Eo(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},Bo,14,Ro)}var ti=$t(So,[["render",Eo]]);const Zc=Object.assign(ti,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+ti.name,ti)}});const Co=zt({name:"IconMuteFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-mute-fill`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),Mo=["stroke-width","stroke-linecap","stroke-linejoin"],Uo=_t("path",{d:"M5.931 13.001A2 2 0 0 0 4 15v18a2 2 0 0 0 2 2h7.37l9.483 6.639A2 2 0 0 0 26 40v-6.93L5.931 13.001ZM35.27 28.199l-3.311-3.313a7.985 7.985 0 0 0-1.96-6.107.525.525 0 0 1 .011-.718l2.122-2.122a.485.485 0 0 1 .7.008c3.125 3.393 3.938 8.15 2.439 12.252ZM41.13 34.059l-2.936-2.937c3.07-5.89 2.226-13.288-2.531-18.348a.513.513 0 0 1 .004-.713l2.122-2.122a.492.492 0 0 1 .703.006c6.322 6.64 7.202 16.56 2.639 24.114ZM26 18.928l-8.688-8.688 5.541-3.878A2 2 0 0 1 26 8v10.928Z",fill:"currentColor",stroke:"none"},null,-1),Lo=_t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"m7.012 4.184 35.272 35.272-2.828 2.828L4.184 7.012l2.828-2.828Z",fill:"currentColor",stroke:"none"},null,-1),Do=[Uo,Lo];function No(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},Do,14,Mo)}var ei=$t(Co,[["render",No]]);const td=Object.assign(ei,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+ei.name,ei)}}),Oo=zt({name:"IconSoundFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-sound-fill`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),zo=["stroke-width","stroke-linecap","stroke-linejoin"],Fo=_t("path",{d:"m14 15 10-7v32l-10-7H6V15h8Z",fill:"currentColor",stroke:"none"},null,-1),$o=_t("path",{d:"M24.924 6.226A2 2 0 0 1 26 8v32a2 2 0 0 1-3.147 1.639L13.37 35H6a2 2 0 0 1-2-2V15a2 2 0 0 1 2-2h7.37l9.483-6.638a2 2 0 0 1 2.07-.136ZM35.314 35.042c6.248-6.249 6.248-16.38 0-22.628l2.828-2.828c7.81 7.81 7.81 20.474 0 28.284l-2.828-2.828Z",fill:"currentColor",stroke:"none"},null,-1),Vo=_t("path",{d:"M29.657 29.728a8 8 0 0 0 0-11.314l2.828-2.828c4.687 4.686 4.687 12.284 0 16.97l-2.828-2.828Z",fill:"currentColor",stroke:"none"},null,-1),Go=[Fo,$o,Vo];function Ho(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},Go,14,zo)}var ii=$t(Oo,[["render",Ho]]);const ed=Object.assign(ii,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+ii.name,ii)}}),jo=zt({name:"IconFullscreenExit",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:m=>["butt","round","square"].includes(m)},strokeLinejoin:{type:String,default:"miter",validator:m=>["arcs","bevel","miter","miter-clip","round"].includes(m)},rotate:Number,spin:Boolean},emits:{click:m=>!0},setup(m,{emit:E}){const $=Ft("icon"),q=Pt(()=>[$,`${$}-fullscreen-exit`,{[`${$}-spin`]:m.spin}]),K=Pt(()=>{const g={};return m.size&&(g.fontSize=Vt(m.size)?`${m.size}px`:m.size),m.rotate&&(g.transform=`rotate(${m.rotate}deg)`),g});return{cls:q,innerStyle:K,onClick:g=>{E("click",g)}}}}),Xo=["stroke-width","stroke-linecap","stroke-linejoin"],qo=_t("path",{d:"M35 6v8a1 1 0 0 0 1 1h8M13 6v8a1 1 0 0 1-1 1H4m31 27v-8a1 1 0 0 1 1-1h8m-31 9v-8a1 1 0 0 0-1-1H4"},null,-1),Wo=[qo];function Ko(m,E,$,q,K,J){return Bt(),Et("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Dt(m.cls),style:Lt(m.innerStyle),"stroke-width":m.strokeWidth,"stroke-linecap":m.strokeLinecap,"stroke-linejoin":m.strokeLinejoin,onClick:E[0]||(E[0]=(...g)=>m.onClick&&m.onClick(...g))},Wo,14,Xo)}var ri=$t(jo,[["render",Ko]]);const id=Object.assign(ri,{install:(m,E)=>{var $;const q=($=E==null?void 0:E.iconPrefix)!=null?$:"";m.component(q+ri.name,ri)}});(()=>{var m={149:(K,J,g)=>{g(355),g(438).Array.isArray},948:(K,J,g)=>{g(780),K.exports=g(438).Object.freeze},279:(K,J,g)=>{g(828),g(438).parseFloat},600:K=>{K.exports=function(J){if(typeof J!="function")throw TypeError(J+" is not a function!");return J}},812:(K,J,g)=>{var p=g(401);K.exports=function(t){if(!p(t))throw TypeError(t+" is not an object!");return t}},417:K=>{var J={}.toString;K.exports=function(g){return J.call(g).slice(8,-1)}},438:K=>{var J=K.exports={version:"2.6.12"};typeof __e=="number"&&(__e=J)},852:(K,J,g)=>{var p=g(600);K.exports=function(t,e,i){if(p(t),e===void 0)return t;switch(i){case 1:return function(n){return t.call(e,n)};case 2:return function(n,s){return t.call(e,n,s)};case 3:return function(n,s,r){return t.call(e,n,s,r)}}return function(){return t.apply(e,arguments)}}},608:K=>{K.exports=function(J){if(J==null)throw TypeError("Can't call method on  "+J);return J}},219:(K,J,g)=>{K.exports=!g(984)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},802:(K,J,g)=>{var p=g(401),t=g(670).document,e=p(t)&&p(t.createElement);K.exports=function(i){return e?t.createElement(i):{}}},535:(K,J,g)=>{var p=g(670),t=g(438),e=g(852),i=g(677),n=g(509),s="prototype",r=function(a,d,c){var l,h,o,u=a&r.F,f=a&r.G,v=a&r.S,y=a&r.P,A=a&r.B,w=a&r.W,k=f?t:t[d]||(t[d]={}),T=k[s],P=f?p:v?p[d]:(p[d]||{})[s];for(l in f&&(c=d),c)(h=!u&&P&&P[l]!==void 0)&&n(k,l)||(o=h?P[l]:c[l],k[l]=f&&typeof P[l]!="function"?c[l]:A&&h?e(o,p):w&&P[l]==o?function(b){var x=function(I,S,z){if(this instanceof b){switch(arguments.length){case 0:return new b;case 1:return new b(I);case 2:return new b(I,S)}return new b(I,S,z)}return b.apply(this,arguments)};return x[s]=b[s],x}(o):y&&typeof o=="function"?e(Function.call,o):o,y&&((k.virtual||(k.virtual={}))[l]=o,a&r.R&&T&&!T[l]&&i(T,l,o)))};r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,r.U=64,r.R=128,K.exports=r},984:K=>{K.exports=function(J){try{return!!J()}catch{return!0}}},670:K=>{var J=K.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=J)},509:K=>{var J={}.hasOwnProperty;K.exports=function(g,p){return J.call(g,p)}},677:(K,J,g)=>{var p=g(423),t=g(260);K.exports=g(219)?function(e,i,n){return p.f(e,i,t(1,n))}:function(e,i,n){return e[i]=n,e}},484:(K,J,g)=>{K.exports=!g(219)&&!g(984)(function(){return Object.defineProperty(g(802)("div"),"a",{get:function(){return 7}}).a!=7})},461:(K,J,g)=>{var p=g(417);K.exports=Array.isArray||function(t){return p(t)=="Array"}},401:K=>{K.exports=function(J){return typeof J=="object"?J!==null:typeof J=="function"}},172:(K,J,g)=>{var p=g(191)("meta"),t=g(401),e=g(509),i=g(423).f,n=0,s=Object.isExtensible||function(){return!0},r=!g(984)(function(){return s(Object.preventExtensions({}))}),a=function(c){i(c,p,{value:{i:"O"+ ++n,w:{}}})},d=K.exports={KEY:p,NEED:!1,fastKey:function(c,l){if(!t(c))return typeof c=="symbol"?c:(typeof c=="string"?"S":"P")+c;if(!e(c,p)){if(!s(c))return"F";if(!l)return"E";a(c)}return c[p].i},getWeak:function(c,l){if(!e(c,p)){if(!s(c))return!0;if(!l)return!1;a(c)}return c[p].w},onFreeze:function(c){return r&&d.NEED&&s(c)&&!e(c,p)&&a(c),c}}},423:(K,J,g)=>{var p=g(812),t=g(484),e=g(752),i=Object.defineProperty;J.f=g(219)?Object.defineProperty:function(n,s,r){if(p(n),s=e(s,!0),p(r),t)try{return i(n,s,r)}catch{}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(n[s]=r.value),n}},331:(K,J,g)=>{var p=g(535),t=g(438),e=g(984);K.exports=function(i,n){var s=(t.Object||{})[i]||Object[i],r={};r[i]=n(s),p(p.S+p.F*e(function(){s(1)}),"Object",r)}},709:(K,J,g)=>{var p=g(670).parseFloat,t=g(269).trim;K.exports=1/p(g(459)+"-0")!=-1/0?function(e){var i=t(String(e),3),n=p(i);return n===0&&i.charAt(0)=="-"?-0:n}:p},260:K=>{K.exports=function(J,g){return{enumerable:!(1&J),configurable:!(2&J),writable:!(4&J),value:g}}},269:(K,J,g)=>{var p=g(535),t=g(608),e=g(984),i=g(459),n="["+i+"]",s=RegExp("^"+n+n+"*"),r=RegExp(n+n+"*$"),a=function(c,l,h){var o={},u=e(function(){return!!i[c]()||"​"[c]()!="​"}),f=o[c]=u?l(d):i[c];h&&(o[h]=f),p(p.P+p.F*u,"String",o)},d=a.trim=function(c,l){return c=String(t(c)),1&l&&(c=c.replace(s,"")),2&l&&(c=c.replace(r,"")),c};K.exports=a},459:K=>{K.exports=`	
\v\f\r   ᠎             　\u2028\u2029\uFEFF`},752:(K,J,g)=>{var p=g(401);K.exports=function(t,e){if(!p(t))return t;var i,n;if(e&&typeof(i=t.toString)=="function"&&!p(n=i.call(t))||typeof(i=t.valueOf)=="function"&&!p(n=i.call(t))||!e&&typeof(i=t.toString)=="function"&&!p(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},191:K=>{var J=0,g=Math.random();K.exports=function(p){return"Symbol(".concat(p===void 0?"":p,")_",(++J+g).toString(36))}},355:(K,J,g)=>{var p=g(535);p(p.S,"Array",{isArray:g(461)})},780:(K,J,g)=>{var p=g(401),t=g(172).onFreeze;g(331)("freeze",function(e){return function(i){return e&&p(i)?e(t(i)):i}})},828:(K,J,g)=>{var p=g(535),t=g(709);p(p.G+p.F*(parseFloat!=t),{parseFloat:t})},632:(K,J,g)=>{g(149)},403:(K,J,g)=>{K.exports=g(948)},32:(K,J,g)=>{g(279)}},E={};function $(K){var J=E[K];if(J!==void 0)return J.exports;var g=E[K]={exports:{}};return m[K](g,g.exports,$),g.exports}$.n=K=>{var J=K&&K.__esModule?()=>K.default:()=>K;return $.d(J,{a:J}),J},$.d=(K,J)=>{for(var g in J)$.o(J,g)&&!$.o(K,g)&&Object.defineProperty(K,g,{enumerable:!0,get:J[g]})},$.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),$.o=(K,J)=>Object.prototype.hasOwnProperty.call(K,J),$.r=K=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(K,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(K,"__esModule",{value:!0})};var q={};(()=>{$.r(q);var K=$(403),J=$.n(K);const g="undefined",p=typeof window!==g?window:void 0,t=typeof globalThis!==g?globalThis:typeof $.g!==g?$.g:p,e=typeof self!==g?self:t;J()({}),J()([]);const i=Math.pow(2,32);function n(h,o){return(h>>>0)+o*i}const s=Math.pow(2,32);function r(h){return[h>>>0,Math.floor(h/s)]}function a(h){return typeof h=="string"}function d(h){return typeof h=="number"&&!isNaN(h)}function c(h){const o={int:new Int32Array(h),uint:new Uint32Array(h),buffer:h,length:h.byteLength>>>3,byteLength:h.byteLength,byteOffset:0};return new Proxy(o,{get:function(u,f,v){if(a(f)&&d(+f)){const y=+f<<1,A=u.uint[y],w=u.int[y+1],k=BigInt(Math.floor(n(A,Math.abs(w))));return w>=0?k:-k}return u[f]},set:function(u,f,v,y){if(a(f)&&d(+f)){let[A,w]=r(Math.abs(Number(v)));v<0&&(w=-w);const k=+f<<1;u.uint[k]=A,u.int[k+1]=w}else u[f]=v;return!0}})}function l(h){const o={view:new Uint32Array(h),buffer:h,length:h.byteLength>>>3,byteLength:h.byteLength,byteOffset:0};return new Proxy(o,{get:function(u,f,v){if(a(f)&&d(+f)){const y=+f<<1,A=u.view[y],w=u.view[y+1];return BigInt(Math.floor(n(A,w)))}return u[f]},set:function(u,f,v,y){if(a(f)&&d(+f)){let[A,w]=r(v);const k=+f<<1;u.view[k]=A,u.view[k+1]=w}else u[f]=v;return!0}})}$(632),$(32),e.Atomics||(e.Atomics={add:function(h,o,u){const f=h[o];return h[o]=f+u,f},compareExchange:function(h,o,u,f){const v=h[o];return v===u&&(h[o]=f),v},exchange:function(h,o,u){const f=h[o];return h[o]=u,f},isLockFree:function(h){return!0},load:function(h,o){return h[o]},and:function(h,o,u){const f=h[o];return h[o]=f&u,f},or:function(h,o,u){const f=h[o];return h[o]=f|u,f},store:function(h,o,u){const f=h[o];return h[o]=u,f},sub:function(h,o,u){const f=h[o];return h[o]=f-u,f},wait:function(h,o,u,f){return"ok"},notify:function(h,o,u){return 1},xor:function(h,o,u){const f=h[o];return h[o]=f^u,f}}),function(){e.BigInt||(e.BigInt=Number),e.BigInt64Array||(e.BigInt64Array=c),e.BigUint64Array||(e.BigUint64Array=l),e.DataView.prototype.getBigInt64||(e.DataView.prototype.getBigInt64=function(o,u){let f=0,v=0;f=this.getUint32(o+(u?0:4),u),v=this.getInt32(o+(u?4:0),u);const y=BigInt(Math.floor(n(f,Math.abs(v))));return v>=0?y:-y}),e.DataView.prototype.setBigInt64||(e.DataView.prototype.setBigInt64=function(o,u,f){let[v,y]=r(Math.abs(Number(u)));u<0&&(y=-y),this.setUint32(o+(f?0:4),v,f),this.setInt32(o+(f?4:0),y,f)}),e.DataView.prototype.getBigUint64||(e.DataView.prototype.getBigUint64=function(o,u){let f=0,v=0;return f=this.getUint32(o+(u?0:4),u),v=this.getUint32(o+(u?4:0),u),BigInt(Math.floor(n(f,v)))}),e.DataView.prototype.setBigUint64||(e.DataView.prototype.setBigUint64=function(o,u,f){const[v,y]=r(Number(u));this.setUint32(o+(f?0:4),v,f),this.setUint32(o+(f?4:0),y,f)});const h=new DataView(new ArrayBuffer(8));e.BigInt.asUintN||(e.BigInt.asUintN=function(o,u){return h.setBigInt64(0,u),o===8?h.getUint8(0):o===16?h.getUint16(0):o===32?h.getUint32(0):o===64?h.getBigUint64(0):void 0}),e.BigInt.asIntN||(e.BigInt.asIntN=function(o,u){return h.setBigInt64(0,u),o===8?h.getInt8(0):o===16?h.getInt16(0):o===32?h.getInt32(0):o===64?h.getBigInt64(0):void 0})}()})()})();var Qo=Object.getOwnPropertyNames,Yo=(m,E)=>function(){return E||(0,m[Qo(m)[0]])((E={exports:{}}).exports,E),E.exports},Jo=Yo({"lib/av-player/index.js"(m,E){(function($,q){typeof m=="object"&&typeof E=="object"?E.exports=q():typeof define=="function"&&define.amd?define([],q):typeof m=="object"?m.AVPlayer=q():$.AVPlayer=q()})(self,()=>(()=>{var $={92246:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(134),i=t(16030),n=t(4624);class s{constructor(a){(0,e.A)(this,"resampler",void 0),(0,e.A)(this,"options",void 0),(0,e.A)(this,"inputParameters",void 0),(0,e.A)(this,"outputParameters",void 0),this.options=a,this.resampler=new i.A(this.options.resource)}async open(a,d){this.inputParameters=a,this.outputParameters=d,await this.resampler.run(),this.resampler.call("resample_set_input_parameters",a.sampleRate,a.channels,a.format,a.layout||0),this.resampler.call("resample_set_output_parameters",d.sampleRate,d.channels,d.format,d.layout||0);let c=this.resampler.call("resample_init");c<0&&n.h2(`open resampler failed, ret: ${c}`,"src\\audioresample\\Resampler.ts",84)}resample(a,d,c){return this.resampler.call("resample_process",a,d,c)}close(){this.resampler.call("resample_destroy"),this.resampler.destroy(),this.resampler=null}getInputPCMParameters(){return this.inputParameters}getOutputPCMParameters(){return this.outputParameters}}},70089:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(16030);class n{constructor(r){(0,e.A)(this,"processor",void 0),(0,e.A)(this,"options",void 0),this.options=r,this.processor=new i.A(this.options.resource)}async open(r){await this.processor.run(),this.processor.call("stretchpitch_init"),this.processor.call("stretchpitch_set_channels",r.channels),this.processor.call("stretchpitch_set_samplerate",r.sampleRate)}setRate(r){this.processor.call("stretchpitch_set_rate",r)}setRateChange(r){this.processor.call("stretchpitch_set_rate_change",r)}setTempo(r){this.processor.call("stretchpitch_set_tempo",r)}setTempoChange(r){this.processor.call("stretchpitch_set_tempo_change",r)}setPitch(r){this.processor.call("stretchpitch_set_pitch",r)}setPitchOctaves(r){this.processor.call("stretchpitch_set_pitch_octaves",r)}setPitchSemiTones(r){this.processor.call("stretchpitch_set_pitch_semi_tones",r)}sendSamples(r,a){this.processor.call("stretchpitch_send_samples",r,a)}receiveSamples(r,a){return this.processor.call("stretchpitch_receive_samples",r,a)}flush(){this.processor.call("stretchpitch_flush")}clear(){this.processor.call("stretchpitch_clear")}getUnprocessedSamplesCount(){return this.processor.call("stretchpitch_get_unprocessed_samples_num")}getInputOutputSamplesRatio(){return this.processor.call("stretchpitch_get_input_output_sample_ratio")}getLatency(){return this.processor.call("get_latency")}close(){this.processor.call("stretchpitch_destroy"),this.processor.destroy(),this.processor=null}}},51128:(g,p,t)=>{t.d(p,{d:()=>e});const e={86017:"mp3",86018:"mp4a.40",86021:"vorbis",86028:"flac",86076:"opus",65542:"ulaw",65543:"alaw",225:"av01",27:"avc1",173:"hev1",196:"vvc1",139:"vp8",167:"vp09",12:"mp4v"}},1984:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(63939),i=t(51128);function n(s){const r=e.f[15](s+4);let a=e.f[15](s+48),d=i.d[r];return r===86018&&(d=`${d}.${a}`),d||"unknown"}},21233:(g,p,t)=>{t.d(p,{C:()=>i});var e=t(86834);function i(n){return n?!e.A.chrome||e.A.checkVersion(e.A.majorVersion,"94",!0)?"prefer-hardware":"allow":!e.A.chrome||e.A.checkVersion(e.A.majorVersion,"94",!0)?"prefer-software":"deny"}},94663:(g,p,t)=>{t.d(p,{A:()=>o});var e=t(63939),i=t(51128),n=t(90412),s=t(14392),r=t(58919),a=t(55611),d=t(20525),c=t(77231),l=t(14686),h=t(90932);function o(u,f){const v=e.f[15](u+4);let y=e.f[15](u+48),A=e.f[15](u+52);f||e.f[20](u+12)===0||(f=(0,l.s3)(e.f[20](u+12),e.f[15](u+16)));let w=i.d[v],k="";if(v===27)y===110&&(y=100),k=d.GP("%s.%02x%02x%02x",w,255&y,f?f[2]:0,255&A);else if(v===173){var T;let b=0,x=0,I=0,S=0;((T=f)===null||T===void 0?void 0:T.length)>13&&(b=f[1]>>>6&3,I=f[1]>>>5&1,x=f[2]|f[3]<<8|f[4]<<16|f[5]<<24,S=240&f[6]);const z={0:"",1:"A",2:"B",3:"C"};k=d.GP("%s.%s%d.%x.%s%d.%x",w,z[b],y,x,I===0?"L":"H",A,S)}else if(v===196){var P;let b=0;if(((P=f)===null||P===void 0?void 0:P.length)>13&&(b=1&f[5]),k=d.GP("%s.%d.%s%d",w,y,b===0?"L":"H",A),f){const x=a.Ui(f);if(x.generalConstraintInfo.length){let I=x.generalConstraintInfo.length-1;for(;I>0&&x.generalConstraintInfo[I]===0;)I--;const S=x.generalConstraintInfo.slice(0,I+1);S.length&&(k+=`.C${h.l(new Uint8Array(S),!1)}`)}x.generalSubProfileIdc.length&&(k+=`.S${x.generalSubProfileIdc.map(I=>I.toString(16)).join("+")}`),k+=`.O${x.olsIdx}+${x.numSublayers}`}}else if(v===225)if(f){const b=n.Ui(f);k=d.GP("%s.%d.%02d%s.%02d.%d.%d%d%d",w,b.profile,b.level,b.tier?"H":"M",b.bitDepth,b.monochrome,b.chromaSubsamplingX,b.chromaSubsamplingY,b.chromaSamplePosition)}else k=d.GP("%s.%d.%02dM.08",w,y,A);else if(v===139)if(f){const b=s.U(f);k=d.GP("%s.%02d.%02d.%02d",w,b.profile,b.level,b.bitDepth)}else k=y!==c.N_&&A!==c.N_?d.GP("%s.%02d.%02d.08",w,y,A):w;else if(v===167)if(f){const b=r.U(f);k=d.GP("%s.%02d.%02d.%02d.%02d.%02d.%02d.%02d.%02d",w,b.profile,b.level,b.bitDepth,b.chromaSubsampling,b.colorPrimaries,b.colorTrc,b.colorSpace,b.fullRangeFlag)}else k=y!==c.N_&&A!==c.N_?d.GP("%s.%02d.%02d.08.00",w,y,A):d.GP("%s.%02d.%02d.08.00",w,0,40);else k=w||"unknown";return k}},75742:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(134),i=t(16030),n=t(56024),s=t(4624);class r{constructor(d){(0,e.A)(this,"options",void 0),(0,e.A)(this,"decoder",void 0),(0,e.A)(this,"frame",void 0),this.options=d,this.decoder=new i.A(d.resource)}getAVFrame(){return this.frame?this.frame:this.frame=this.options.avframePool?this.options.avframePool.alloc():(0,n.FP)()}outputAVFrame(){this.frame&&(this.options.onReceiveFrame?this.options.onReceiveFrame(this.frame):this.options.avframePool?this.options.avframePool.release(this.frame):(0,n.xj)(this.frame),this.frame=0)}receiveAVFrame(){return this.decoder.call("decoder_receive",this.getAVFrame())}async open(d){await this.decoder.run();let c=this.decoder.call("decoder_open",d,0,1);c<0&&s.h2(`open audio decoder failed, ret: ${c}`,"src\\avcodec\\wasmcodec\\AudioDecoder.ts",82)}decode(d){let c=this.decoder.call("decoder_decode",d);if(c)return c;for(;;){if(c=this.receiveAVFrame(),c!==1){if(c<0)return c;break}this.outputAVFrame()}return 0}async flush(){for(this.decoder.call("decoder_flush");;){if(this.receiveAVFrame()<1)return;this.outputAVFrame()}}close(){this.decoder.call("decoder_close"),this.decoder.destroy(),this.decoder=null,this.frame&&(this.options.avframePool?this.options.avframePool.release(this.frame):(0,n.xj)(this.frame),this.frame=0)}}},40417:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(134),i=t(16030),n=t(56024),s=t(4624);class r{constructor(d){(0,e.A)(this,"options",void 0),(0,e.A)(this,"decoder",void 0),(0,e.A)(this,"frame",void 0),(0,e.A)(this,"parameters",void 0),this.options=d,this.decoder=new i.A(this.options.resource)}getAVFrame(){return this.frame?this.frame:this.frame=this.options.avframePool?this.options.avframePool.alloc():(0,n.FP)()}outputAVFrame(){this.frame&&(this.options.onReceiveFrame?this.options.onReceiveFrame(this.frame):this.options.avframePool?this.options.avframePool.release(this.frame):(0,n.xj)(this.frame),this.frame=0)}receiveAVFrame(){return this.decoder.call("decoder_receive",this.getAVFrame())}async open(d,c=1){await this.decoder.run();let l=this.decoder.call("decoder_open",d,0,c);l<0&&s.h2(`open video decoder failed, ret: ${l}`,"src\\avcodec\\wasmcodec\\VideoDecoder.ts",119),this.parameters=d,await this.decoder.childrenThreadReady()}decode(d){let c=this.decoder.call("decoder_decode",d);if(c)return c;for(;;){if(c=this.receiveAVFrame(),c!==1){if(c<0)return c;break}this.outputAVFrame()}return 0}async flush(){for(this.decoder.call("decoder_flush");;){if(this.receiveAVFrame()<1)return;this.outputAVFrame()}}close(){this.decoder.call("decoder_close"),this.decoder.destroy(),this.decoder=null,this.frame&&(this.options.avframePool?this.options.avframePool.release(this.frame):(0,n.xj)(this.frame),this.frame=0),this.parameters=0}setSkipFrameDiscard(d){this.decoder.call("decoder_discard",d)}}},77104:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(134),i=t(63939),n=t(1984),s=t(14686),r=t(71517);class a{constructor(c){(0,e.A)(this,"options",void 0),(0,e.A)(this,"decoder",void 0),(0,e.A)(this,"parameters",void 0),(0,e.A)(this,"extradata",void 0),(0,e.A)(this,"currentError",void 0),this.options=c}output(c){this.options.onReceiveFrame?this.options.onReceiveFrame(c):c.close()}error(c){this.currentError=c,this.options.onError(c)}async open(c){this.currentError=null,this.parameters=c,this.extradata=null,i.f[20](c+12)!==0&&(this.extradata=(0,s.s3)(i.f[20](c+12),i.f[15](c+16)).slice());const l={codec:(0,n.A)(this.parameters),sampleRate:i.f[15](c+136),numberOfChannels:i.f[15](c+116),description:this.extradata};if(l.description||delete l.description,!(await AudioDecoder.isConfigSupported(l)).supported)throw new Error("not support");if(this.decoder&&this.decoder.state!=="closed"&&this.decoder.close(),this.decoder=new AudioDecoder({output:this.output.bind(this),error:this.error.bind(this)}),this.decoder.reset(),this.decoder.configure(l),this.currentError)throw this.currentError}changeExtraData(c){if(c.length===this.extradata.length){let l=!0;for(let h=0;h<c.length;h++)if(c[h]!==this.extradata[h]){l=!1;break}if(l)return}if(this.extradata=c.slice(),this.decoder.reset(),this.decoder.configure({codec:(0,n.A)(this.parameters),sampleRate:i.f[15](this.parameters+136),numberOfChannels:i.f[15](this.parameters+116),description:this.extradata}),this.currentError)throw this.currentError}decode(c,l){const h=(0,r.rU)(c,1);h!==0&&this.changeExtraData((0,s.s3)(i.f[20](h),i.f[15](h+4)));const o=Number(l??i.f[17](c+8)),u=1&i.f[15](c+36),f=new EncodedAudioChunk({type:u?"key":"delta",timestamp:o,data:(0,s.s3)(i.f[20](c+24),i.f[15](c+28))});try{this.decoder.decode(f)}catch{return-1}return 0}async flush(){await this.decoder.flush()}close(){this.decoder.state!=="closed"&&this.decoder.close(),this.decoder=null}getQueueLength(){return this.decoder.decodeQueueSize}}},71039:(g,p,t)=>{t.d(p,{A:()=>c});var e=t(134),i=t(63939),n=t(86834),s=t(94663),r=t(14686),a=t(71517),d=t(21233);class c{constructor(h){(0,e.A)(this,"decoder",void 0),(0,e.A)(this,"options",void 0),(0,e.A)(this,"parameters",void 0),(0,e.A)(this,"extradata",void 0),(0,e.A)(this,"currentError",void 0),(0,e.A)(this,"inputQueue",void 0),(0,e.A)(this,"outputQueue",void 0),(0,e.A)(this,"sort",void 0),(0,e.A)(this,"keyframeRequire",void 0),this.options=h,this.inputQueue=[],this.outputQueue=[],this.sort=n.A.safari}async output(h){if(this.sort){let o=0;for(;o<this.outputQueue.length;o++)if(this.outputQueue[o].timestamp>h.timestamp){this.outputQueue.splice(o,0,h);break}for(o===this.outputQueue.length&&this.outputQueue.push(h);this.outputQueue.length>2&&this.outputQueue[0].timestamp===this.inputQueue[0];){const u=this.outputQueue.shift();this.options.onReceiveFrame?this.options.onReceiveFrame(u):u.close(),this.inputQueue.shift()}}else this.options.onReceiveFrame?this.options.onReceiveFrame(h):h.close()}error(h){this.currentError=h,this.options.onError(h)}changeExtraData(h){var o;if(h.length===this.extradata.length){let u=!0;for(let f=0;f<h.length;f++)if(h[f]!==this.extradata[f]){u=!1;break}if(u)return}this.extradata=h.slice(),this.decoder.reset(),this.decoder.configure({codec:(0,s.A)(this.parameters,h),description:this.extradata,hardwareAcceleration:(0,d.C)((o=this.options.enableHardwareAcceleration)===null||o===void 0||o)}),this.keyframeRequire=!0}async open(h){var o;this.currentError=null,this.extradata=null,i.f[20](h+12)!==0&&(this.extradata=(0,r.s3)(i.f[20](h+12),i.f[15](h+16)).slice()),this.parameters=h;const u={codec:(0,s.A)(h),codedWidth:i.f[15](h+56),codedHeight:i.f[15](h+60),description:i.f[15](h+160)!==2?this.extradata:void 0,hardwareAcceleration:(0,d.C)((o=this.options.enableHardwareAcceleration)===null||o===void 0||o)};if(u.description||delete u.description,!(await VideoDecoder.isConfigSupported(u)).supported)throw new Error("not support");if(this.decoder&&this.decoder.state!=="closed"&&this.decoder.close(),this.decoder=new VideoDecoder({output:this.output.bind(this),error:this.error.bind(this)}),this.decoder.reset(),this.decoder.configure(u),this.currentError)throw this.currentError;this.keyframeRequire=!0,this.inputQueue.length=0,this.outputQueue.length=0}decode(h){const o=(0,a.rU)(h,1);o!==0&&this.changeExtraData((0,r.s3)(i.f[20](o),i.f[15](o+4)));const u=Number(i.f[17](h+8)),f=1&i.f[15](h+36);if(this.keyframeRequire&&!f)return;const v=new EncodedVideoChunk({type:f?"key":"delta",timestamp:u,data:(0,r.s3)(i.f[20](h+24),i.f[15](h+28))});if(this.sort){let y=0;for(;y<this.inputQueue.length;y++)if(this.inputQueue[y]>u){this.inputQueue.splice(y,0,u);break}y===this.inputQueue.length&&this.inputQueue.push(u)}try{this.decoder.decode(v)}catch{return-1}return f&&(this.keyframeRequire=!1),0}async flush(){if(await this.decoder.flush(),this.sort)for(;this.outputQueue.length;){const h=this.outputQueue.shift();this.options.onReceiveFrame?this.options.onReceiveFrame(h):h.close()}this.keyframeRequire=!0}close(){var h;this.decoder&&this.decoder.state!=="closed"&&this.decoder.close(),this.decoder=null,this.currentError=null,(h=this.outputQueue)!==null&&h!==void 0&&h.length&&this.outputQueue.forEach(o=>{o.close()}),this.inputQueue=null,this.outputQueue=null}getQueueLength(){return this.decoder.decodeQueueSize}setSkipFrameDiscard(h){}}},44315:(g,p,t)=>{t.d(p,{X:()=>r,f:()=>a});var e=t(134),i=t(15017);class n{constructor(){(0,e.A)(this,"packetBuffer",void 0),this.packetBuffer=[]}}class s{constructor(){(0,e.A)(this,"metadataHeaderPadding",-1),(0,e.A)(this,"streams",void 0),(0,e.A)(this,"options",void 0),(0,e.A)(this,"privateData",void 0),(0,e.A)(this,"processPrivateData",void 0),(0,e.A)(this,"iformat",void 0),(0,e.A)(this,"oformat",void 0),(0,e.A)(this,"ioReader",void 0),(0,e.A)(this,"ioWriter",void 0),(0,e.A)(this,"errorFlag",void 0),(0,e.A)(this,"interval",void 0),(0,e.A)(this,"streamIndex",void 0),this.streams=[],this.errorFlag=0,this.streamIndex=0,this.interval=new n,this.options={},this.privateData={}}getStreamById(c){return this.streams.find(l=>l.id===c)}getStreamByIndex(c){return this.streams.find(l=>l.index===c)}getStreamByMediaType(c){return this.streams.find(l=>{var h;return((h=l.codecpar)===null||h===void 0?void 0:h.codecType)===c})}createStream(){const c=new i.A;return c.index=this.streamIndex++,c.id=c.index,this.removeStreamByIndex(c.index),this.streams.push(c),c}addStream(c){this.removeStreamByIndex(c.index),this.streams.push(c)}removeStream(c){this.removeStreamByIndex(c.index)}removeStreamById(c){const l=this.streams.findIndex(h=>h.id===c);if(l>-1){const h=this.streams.splice(l,1);h[0]&&h[0].destroy()}}removeStreamByIndex(c){const l=this.streams.findIndex(h=>h.index===c);if(l>-1){const h=this.streams.splice(l,1);h[0]&&h[0].destroy()}}destroy(){this.oformat&&this.oformat.destroy(this),this.iformat&&this.iformat.destroy(this),this.streams.forEach(c=>{c.destroy()}),this.streams=[],this.interval=null,this.ioReader=this.ioWriter=null,this.oformat=this.iformat=null}}function r(){return new s}function a(){return new s}},15017:(g,p,t)=>{t.d(p,{A:()=>l});var e=t(134),i=t(80662),n=t.n(i),s=t(74503),r=t(94300),a=t(77162),d=t(77231),c=t(9599);class l{constructor(){(0,e.A)(this,"index",d.N_),(0,e.A)(this,"id",d.N_),(0,e.A)(this,"privData",null),(0,e.A)(this,"codecpar",(0,s.A)(a.A,new a.A)),(0,e.A)(this,"sideData",{}),(0,e.A)(this,"nbFrames",BigInt(0)),(0,e.A)(this,"metadata",{}),(0,e.A)(this,"duration",d.Dh),(0,e.A)(this,"startTime",d.Dh),(0,e.A)(this,"firstDTS",BigInt(0)),(0,e.A)(this,"disposition",0),(0,e.A)(this,"timeBase",(0,s.A)(c.P)),(0,e.A)(this,"sampleIndexes",[]),(0,e.A)(this,"sampleIndexesPosMap",new(n()))}destroy(){this.codecpar&&(this.codecpar.destroy(),(0,r.A)(this.codecpar),this.codecpar=null),this.timeBase&&((0,r.A)(this.timeBase),this.timeBase=null),this.sampleIndexes.length=0,this.sampleIndexesPosMap.clear()}}},64436:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(134),i=t(63939),n=t(37837),s=t(71766);class r{constructor(){(0,e.A)(this,"inCodecpar",void 0),(0,e.A)(this,"inTimeBase",void 0),(0,e.A)(this,"outCodecpar",void 0)}init(d,c){return this.inCodecpar=(0,n.Gy)(168),(0,s.Yi)(this.inCodecpar,d),this.inTimeBase={den:i.f[15](c+4),num:i.f[15](c)},0}destroy(){this.inCodecpar&&((0,s.dn)(this.inCodecpar),this.inCodecpar=0)}}},50848:(g,p,t)=>{t.d(p,{A:()=>y});var e=t(134),i=t(63939),n=t(50932),s=t(77162),r=t(29170),a=t(64436),d=t(14686),c=t(4624),l=t(9705),h=t(77231),o=t(58469),u=t(44328),f=t(37837),v=t(71517);class y extends a.A{constructor(...w){super(...w),(0,e.A)(this,"streamMuxConfig",void 0),(0,e.A)(this,"caches",void 0)}init(w,k){return super.init(w,k),this.caches=[],this.streamMuxConfig={profile:h.N_,sampleRate:h.N_,channels:h.N_},0}sendAVPacket(w){let k=0,T=i.f[17](w+16)||i.f[17](w+8);const P=(0,d.s3)(i.f[20](w+24),i.f[15](w+28)).slice();for(;k<P.length;){const b=P[k]<<4|P[k+1]>>4;if(b!==4095)return c.z3(`found syncWord not 0xFFF, got: 0x${b.toString(16)}`,"src\\avformat\\bsf\\aac\\ADTS2RawFilter.ts",103),l.LR;const x=1&P[k+1],I=(192&P[k+2])>>>6,S=(60&P[k+2])>>>2,z=(1&P[k+2])<<2|(192&P[k+3])>>>6,V=(3&P[k+3])<<11|P[k+4]<<3|(224&P[k+5])>>>5,L=3&P[k+6];let C=x===1?7:9,F=V-C;const H={dts:T,buffer:null,extradata:null,duration:h.N_};H.buffer=P.subarray(k+C,k+C+F),this.streamMuxConfig.profile=I+1,this.streamMuxConfig.sampleRate=o.hY[S],this.streamMuxConfig.channels=o.En[z];const M=i.f[15](this.inCodecpar+48)!==this.streamMuxConfig.profile||i.f[15](this.inCodecpar+136)!==this.streamMuxConfig.sampleRate||i.f[15](this.inCodecpar+116)!==this.streamMuxConfig.channels,G=(0,u.k)(BigInt(Math.floor(1024*(L+1)/this.streamMuxConfig.sampleRate*h.SF)),h.KR,this.inTimeBase);if(H.duration=Number(G),M){n.M[15](this.inCodecpar+48,this.streamMuxConfig.profile),n.M[15](this.inCodecpar+136,this.streamMuxConfig.sampleRate),n.M[15](this.inCodecpar+116,this.streamMuxConfig.channels);const D=(0,o.Ij)((0,r.A)(this.inCodecpar,s.A));i.f[20](this.inCodecpar+12)&&(0,f.Eb)(i.f[20](this.inCodecpar+12)),n.M[20](this.inCodecpar+12,(0,f.sY)(D.length)),(0,d.lW)(i.f[20](this.inCodecpar+12),D.length,D),n.M[15](this.inCodecpar+16,D.length),H.extradata=D}this.caches.push(H),k+=V,T+=G}}receiveAVPacket(w){if(this.caches.length){(0,v.Up)(w);const k=this.caches.shift(),T=(0,f.sY)(k.buffer.length);if((0,d.lW)(T,k.buffer.length,k.buffer),(0,v.NX)(w,T,k.buffer.length),n.M[17](w+16,k.dts),n.M[17](w+8,k.dts),n.M[17](w+48,BigInt(Math.floor(k.duration))),n.M[15](w+36,1|i.f[15](w+36)),k.extradata){const P=(0,f.sY)(k.extradata.length);(0,d.lW)(P,k.extradata.length,k.extradata),(0,v.Ow)(w,1,P,k.extradata.length)}return 0}return l.LT}}},36488:(g,p,t)=>{t.d(p,{A:()=>w});var e=t(134),i=t(63939),n=t(50932),s=t(77162),r=t(29170),a=t(64436),d=t(14686),c=t(4624),l=t(9705),h=t(77231),o=t(58469),u=t(44328),f=t(37837),v=t(71517),y=t(37246),A="src\\avformat\\bsf\\aac\\LATM2RawFilter.ts";class w extends a.A{constructor(...T){super(...T),(0,e.A)(this,"bitReader",void 0),(0,e.A)(this,"streamMuxConfig",void 0),(0,e.A)(this,"caches",void 0),(0,e.A)(this,"refSampleDuration",void 0)}init(T,P){return super.init(T,P),this.caches=[],this.refSampleDuration=BigInt(0),this.bitReader=new y.A,this.streamMuxConfig={profile:h.N_,sampleRate:h.N_,channels:h.N_},0}getLATMValue(){const T=this.bitReader.readU(2);let P=0;for(let b=0;b<=T;b++)P<<=8,P|=this.bitReader.readU(8);return P}sendAVPacket(T){const P=(0,d.s3)(i.f[20](T+24),i.f[15](T+28));this.bitReader.clear(),this.bitReader.appendBuffer(P);let b=i.f[17](T+16)||i.f[17](T+8);for(;this.bitReader.remainingLength()>3;){const x=this.bitReader.readU(11);if(x!==695)return c.z3(`AACLATMParser found syncWord not 0x2B7, got: 0x${x.toString(16)}`,A,103),this.bitReader.clear(),l.LR;if(this.bitReader.readU(13)>this.bitReader.remainingLength())break;if(this.bitReader.readU1()!==1){const V=this.bitReader.readU1()===1;if(V&&this.bitReader.readU1()===1)return c.z3("audioMuxVersionA is Not Supported",A,119),this.bitReader.clear(),l.LR;if(V&&this.getLATMValue(),this.bitReader.readU1()!==1)return c.z3("allStreamsSameTimeFraming zero is Not Supported",A,128),this.bitReader.clear(),l.LR;if(this.bitReader.readU(6)!==0)return c.z3("more than 2 numSubFrames Not Supported",A,134),this.bitReader.clear(),l.LR;if(this.bitReader.readU(4)!==0)return c.z3("more than 2 numProgram Not Supported",A,141),this.bitReader.clear(),l.LR;if(this.bitReader.readU(3)!==0)return c.z3("more than 2 numLayer Not Supported'",A,148),this.bitReader.clear(),l.LR;let L=V?this.getLATMValue():0;const C=this.bitReader.readU(5);L-=5;const F=this.bitReader.readU(4);L-=4;const H=this.bitReader.readU(4);L-=4,this.bitReader.readU(3),L-=3,L>0&&this.bitReader.readU(L);const M=this.bitReader.readU(3);if(M!==0)return c.z3(`frameLengthType = ${M}, only frameLengthType = 0 supported`,A,176),this.bitReader.clear(),l.LR;if(this.bitReader.readU(8),this.bitReader.readU1()===1)if(V)this.getLATMValue();else{let G=0;for(;;){G<<=8;const D=this.bitReader.readU1()===1;if(G+=this.bitReader.readU(8),!D)break}}this.bitReader.readU1()===1&&this.bitReader.readU(8),this.streamMuxConfig.profile=C+1,this.streamMuxConfig.sampleRate=o.hY[F],this.streamMuxConfig.channels=o.En[H]}let I=0;for(;;){const V=this.bitReader.readU(8);if(I+=V,V!==255)break}const S=new Uint8Array(I);for(let V=0;V<I;V++)S[V]=this.bitReader.readU(8);const z={dts:b,buffer:S,extradata:null};if(i.f[15](this.inCodecpar+48)!==this.streamMuxConfig.profile||i.f[15](this.inCodecpar+136)!==this.streamMuxConfig.sampleRate||i.f[15](this.inCodecpar+116)!==this.streamMuxConfig.channels){this.refSampleDuration=(0,u.k)(BigInt(Math.floor(1024/this.streamMuxConfig.sampleRate*h.SF)),h.KR,this.inTimeBase),n.M[15](this.inCodecpar+48,this.streamMuxConfig.profile),n.M[15](this.inCodecpar+136,this.streamMuxConfig.sampleRate),n.M[15](this.inCodecpar+116,this.streamMuxConfig.channels);const V=(0,o.Ij)((0,r.A)(this.inCodecpar,s.A));i.f[20](this.inCodecpar+12)&&(0,f.Eb)(i.f[20](this.inCodecpar+12)),n.M[20](this.inCodecpar+12,(0,f.sY)(V.length)),(0,d.lW)(i.f[20](this.inCodecpar+12),V.length,V),n.M[15](this.inCodecpar+16,V.length),z.extradata=V}this.caches.push(z),b+=this.refSampleDuration,this.bitReader.skipPadding()}}receiveAVPacket(T){if(this.caches.length){(0,v.Up)(T);const P=this.caches.shift(),b=(0,f.sY)(P.buffer.length);if((0,d.lW)(b,P.buffer.length,P.buffer),(0,v.NX)(T,b,P.buffer.length),n.M[17](T+16,P.dts),n.M[17](T+8,P.dts),n.M[15](T+36,1|i.f[15](T+36)),P.extradata){const x=(0,f.sY)(P.extradata.length);(0,d.lW)(x,P.extradata.length,P.extradata),(0,v.Ow)(T,1,x,P.extradata.length)}return 0}return l.LT}}},26173:(g,p,t)=>{t.d(p,{A:()=>v});var e=t(134),i=t(63939),n=t(50932),s=t(64436),r=t(71517),a=t(20620),d=t(53e3),c=t(55611),l=t(14686),h=t(9705),o=t(60264),u=t(37837),f=t(4624);class v extends s.A{constructor(...A){super(...A),(0,e.A)(this,"cache",void 0),(0,e.A)(this,"cached",void 0)}init(A,w){return super.init(A,w),this.cache=(0,r._5)(),this.cached=!1,0}destroy(){super.destroy(),(0,r.Qe)(this.cache),this.cache=0}sendAVPacket(A){const w=(0,l.JW)(i.f[20](A+24),i.f[15](A+28));if(i.f[15](A+80)!==1&&(0,o.Bs)(w)){let k;if((0,r.zu)(this.cache,A),i.f[15](this.inCodecpar+4)===27||i.f[15](this.inCodecpar+4)===12?k=a.oT(w):i.f[15](this.inCodecpar+4)===173?k=d.oT(w):i.f[15](this.inCodecpar+4)===196?k=c.oT(w):f.h2(`not support for codecId: ${i.f[15](this.inCodecpar+4)}`,"src\\avformat\\bsf\\h2645\\Annexb2AvccFilter.ts",93),n.M[15](this.cache+80,1),(0,r.NX)(this.cache,k.bufferPointer,k.length),k.key&&n.M[15](this.cache+36,1|i.f[15](this.cache+36)),k.extradata){const T=(0,u.sY)(k.extradata.length);(0,l.lW)(T,k.extradata.length,k.extradata),(0,r.Ow)(this.cache,1,T,k.extradata.length)}}else(0,r.rN)(this.cache,A);return this.cached=!0,0}receiveAVPacket(A){return this.cached?((0,r.Up)(A),(0,r.rN)(A,this.cache),this.cached=!1,0):h.LR}}},61702:(g,p,t)=>{t.d(p,{A:()=>f});var e=t(134),i=t(63939),n=t(50932),s=t(64436),r=t(77231),a=t(44328),d=t(65451),c=t(4624),l=t(9705),h=t(71517),o=t(37837),u=t(14686);class f extends s.A{constructor(...y){super(...y),(0,e.A)(this,"caches",void 0)}init(y,A){return super.init(y,A),this.caches=[],0}sendAVPacket(y){let A=0,w=i.f[17](y+16)||i.f[17](y+8);const k=(0,h.iI)(y);for(;A<k.length;){const T=k[A]<<3|k[A+1]>>5;if(T!==1023)return c.z3(`MpegtsOpusParser found syncWord not 0x3ff, got: 0x${T.toString(16)}`,"src\\avformat\\bsf\\opus\\Mpegts2RawFilter.ts",67),l.LR;const P=!!(16&k[A+1]),b=!!(8&k[A+1]);let x=A+2,I=0;for(;k[x]===255;)I+=255,x++;I+=k[x],x++,x+=P?2:0,x+=b?2:0;let S=k.subarray(x,x+I);const z=i.f[15](this.inCodecpar+136)>0?i.f[15](this.inCodecpar+136):48e3,V=(0,a.k)(BigInt(Math.floor(d.kt(S)/z*r.SF)),r.KR,this.inTimeBase);this.caches.push({dts:w,buffer:S.slice(),duration:Number(V)}),w+=V,A=x+I}}receiveAVPacket(y){if(this.caches.length){(0,h.Up)(y);const A=this.caches.shift(),w=(0,o.sY)(A.buffer.length);return(0,u.lW)(w,A.buffer.length,A.buffer),(0,h.NX)(y,w,A.buffer.length),n.M[17](y+16,A.dts),n.M[17](y+8,A.dts),n.M[15](y+36,1|i.f[15](y+36)),n.M[17](y+48,BigInt(Math.floor(A.duration))),0}return l.LR}}},58469:(g,p,t)=>{t.d(p,{En:()=>s,Ij:()=>a,XC:()=>r,hY:()=>n});var e=t(77231);const i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,e.N_,e.N_,e.N_],s=[e.N_,1,2,3,4,5,6,7];function r(d,c){if(!c&&d.sideData[1]&&(c=d.sideData[1]),c){const{profile:l,sampleRate:h,channels:o}=function(u){let f=e.N_,v=e.N_,y=e.N_;var A,w;return u.length>=2&&(f=u[0]>>3&31,v=(A=n[(7&u[0])<<1|u[1]>>7])!==null&&A!==void 0?A:48e3,y=(w=s[u[1]>>3&15])!==null&&w!==void 0?w:2),{profile:f,sampleRate:v,channels:y}}(c);d.codecpar.profile=l,d.codecpar.sampleRate=h,d.codecpar.chLayout.nbChannels=o}}function a(d){const c=i[d.sampleRate],l=d.chLayout.nbChannels,h=new Uint8Array(2);return h[0]=(31&d.profile)<<3|(14&c)>>1,h[1]=(1&c)<<7|(15&l)<<3,h}},90412:(g,p,t)=>{t.d(p,{Ui:()=>n,XC:()=>i});var e=t(37246);function i(s,r){if(!r&&s.sideData[1]&&(r=s.sideData[1]),r&&r.length>=4){const a=n(r);s.codecpar.profile=a.profile,s.codecpar.level=a.level}}function n(s){const r=new e.A(s.length);r.appendBuffer(s),r.readU1(),r.readU(7);const a=r.readU(3),d=r.readU(5),c=r.readU1();let l=r.readU1()?10:8;return r.readU1()&&(l=12),{profile:a,level:d,tier:c,bitDepth:l,monochrome:r.readU1(),chromaSubsamplingX:r.readU1(),chromaSubsamplingY:r.readU1(),chromaSamplePosition:r.readU(2)}}},20620:(g,p,t)=>{t.d(p,{Jk:()=>w,XC:()=>T,ci:()=>k,oT:()=>A});var e=t(63939),i=t(50932),n=t(72739),s=t(729),r=t(31865),a=t(37246),d=t(4624),c=t(14686),l=t(71517),h=t(60264),o=t(37837),u=t(23991),f="src\\avformat\\codecs\\h264.ts";const v=3;function y(b,x,I=[]){b.length>32&&(d.R8(`h264 metadata's sps max length is 32, but get ${b.length}`,f,159),b=b.slice(0,32)),b.length>256&&(d.R8(`h264 metadata's pps max length is 256, but get ${b.length}`,f,163),b=b.slice(0,256));let S=7;S=b.reduce((F,H)=>F+2+H.length,S),S=x.reduce((F,H)=>F+2+H.length,S);const z=b[0],V=P(z);V.profile!==66&&V.profile!==77&&V.profile!==88&&(S+=4,I.length&&(S=I.reduce((F,H)=>F+2+H.length,S)));const L=new Uint8Array(S),C=new s.A(L);return C.writeUint8(1),C.writeUint8(z[1]),C.writeUint8(z[2]),C.writeUint8(z[3]),C.writeUint8(252|v),C.writeUint8(224|31&b.length),n.__(b,F=>{C.writeUint16(F.length),C.writeBuffer(F)}),C.writeUint8(x.length),n.__(x,F=>{C.writeUint16(F.length),C.writeBuffer(F)}),V.profile!==66&&V.profile!==77&&V.profile!==88&&(C.writeUint8(252|V.chromaFormatIdc),C.writeUint8(248|V.bitDepthLumaMinus8),C.writeUint8(248|V.bitDepthChromaMinus8),I.length&&n.__(I,F=>{C.writeUint16(F.length),C.writeBuffer(F)})),L}function A(b){let x,I=(0,h.py)(b),S=!1;if(I.length>1){const F=[],H=[],M=[];I.forEach(G=>{const D=31&G[0];D===7?F.push(G):D===8?H.push(G):D===13&&M.push(G)}),F.length&&H.length&&(x=y(F,H,M)),I=I.filter(G=>{const D=31&G[0];return D!==9&&D!==8&&D!==7&&D!==13})}const z=I.reduce((F,H)=>F+v+1+H.length,0),V=(0,o.sY)(z),L=(0,c.s3)(V,z),C=new s.A(L);return n.__(I,F=>{C.writeUint32(F.length),C.writeBuffer(F.subarray(0)),(31&F[0])==5&&(S=!0)}),{bufferPointer:V,length:z,key:S,extradata:x}}function w(b,x){var I;if(!(1&e.f[15](b+36)))return;const S=(0,l.iI)(b);if((0,h.Bs)(S))return;const z=(I=x.metadata.naluLengthSizeMinusOne)!==null&&I!==void 0?I:v;let V=[],L=[],C=[],F=[];const H=new r.A(S);for(;H.remainingSize()>0;){let M=0;M=z===3?H.readUint32():z===2?H.readUint24():z===1?H.readUint16():H.readUint8();const G=S.subarray(0|Number(0xffffffffn&H.getPos()),(0|Number(0xffffffffn&H.getPos()))+M);H.skip(M);const D=31&G[0];D===7?V.push(G):D===8?L.push(G):D===13?C.push(G):F.push(G)}if(V.length||L.length){const M=y(V,L,C),G=(0,o.sY)(M.length);(0,c.lW)(G,M.length,M),(0,l.Ow)(b,1,G,M.length)}}function k(b,x=!1){if(!(1&e.f[15](b+36)||x))return;const I=(0,l.iI)(b);if(!(0,h.Bs)(I))return;let S=(0,h.py)(I);if(S.length>1){const z=[],V=[],L=[];if(S.forEach(C=>{const F=31&C[0];F===7?z.push(C):F===8?V.push(C):F===13&&L.push(C)}),z.length&&V.length){const C=y(z,V,L),F=(0,o.sY)(C.length);(0,c.lW)(F,C.length,C),(0,l.Ow)(b,1,F,C.length),i.M[15](b+36,1|e.f[15](b+36))}}}function T(b,x){if(!x&&b.sideData[1]&&(x=b.sideData[1]),x&&x.length>=6){b.metadata.naluLengthSizeMinusOne=3&x[4];const{spss:I}=function(S){const z=new r.A(S);z.skip(5);const V=[],L=[],C=[],F=31&z.readUint8();for(let M=0;M<F;M++){const G=z.readUint16();V.push(z.readBuffer(G))}const H=z.readUint8();for(let M=0;M<H;M++){const G=z.readUint16();L.push(z.readBuffer(G))}if(z.remainingSize()>4){z.skip(3);const M=z.readUint8();if(M>0)for(let G=0;G<M;G++){const D=z.readUint16();C.push(z.readBuffer(D))}}return{spss:V,ppss:L,spsExts:C}}(x);if(I.length){const{profile:S,level:z,width:V,height:L}=P(I[0]);b.codecpar.profile=S,b.codecpar.level=z,b.codecpar.width=V,b.codecpar.height=L}}}function P(b){if(!b||b.length<3)return;let x=0;b[0]===0&&b[1]===0&&b[2]===0&&b[3]===1&&(x=4);const I=(0,h.BN)(b.subarray(x)),S=new a.A(I.length);S.appendBuffer(I),S.readU1(),S.readU(2),S.readU(5);const z=S.readU(8);S.readU1(),S.readU1(),S.readU1(),S.readU1(),S.readU1(),S.readU1(),S.readU(2);const V=S.readU(8);u.xb(S);let L=1,C=0,F=0;if((z==100||z==110||z==122||z==244||z==44||z==83||z==86||z==118||z==128||z==138||z==139||z==134||z==135)&&(L=u.xb(S),L===3&&S.readU1(),C=u.xb(S),F=u.xb(S),S.readU1(),S.readU1())){const Q=new Array(8);for(let N=0;N<(L!=3?8:12);N++)Q[N]=S.readU1()}u.xb(S);const H=u.xb(S);if(H===0)u.xb(S);else if(H===1){S.readU1(),u.$x(S),u.$x(S);const Q=u.xb(S);for(let N=0;N<Q;N++)u.$x(S)}u.xb(S),S.readU1();const M=u.xb(S),G=u.xb(S),D=S.readU1();let W=16*(M+1),X=(2-D)*(G+1)*16;D||S.readU1(),S.readU1();const U=S.readU1();if(U){let Q=1,N=2-U;L===1?(Q=2,N=2*(2-U)):U===2&&(Q=2,N=2-U),W-=Q*(u.xb(S)+u.xb(S)),X-=N*(u.xb(S)+u.xb(S))}return{profile:z,level:V,width:W,height:X,chromaFormatIdc:L,bitDepthLumaMinus8:C,bitDepthChromaMinus8:F}}},53e3:(g,p,t)=>{t.d(p,{Jk:()=>y,XC:()=>w,ci:()=>A,oT:()=>v});var e=t(63939),i=t(50932),n=t(72739),s=t(729),r=t(31865),a=t(37246),d=t(14686),c=t(60264),l=t(71517),h=t(37837),o=t(23991);const u=3;function f(T,P,b){const x=P[0];let I=23;T.length&&(I+=3,I=T.reduce((C,F)=>C+2+F.length,I)),P.length&&(I+=3,I=P.reduce((C,F)=>C+2+F.length,I)),b.length&&(I+=3,I=b.reduce((C,F)=>C+2+F.length,I));const S=new Uint8Array(I),z=new s.A(S,!0),V=k(x);z.writeUint8(1),z.writeUint8(x[1]),z.writeUint8(x[2]),z.writeUint8(x[3]),z.writeUint8(x[4]),z.writeUint8(x[5]),z.writeUint8(x[6]),z.writeUint8(x[7]),z.writeUint8(x[8]),z.writeUint8(x[9]),z.writeUint8(x[10]),z.writeUint8(x[11]),z.writeUint8(V.level),z.writeUint8(1020),z.writeUint8(0),z.writeUint8(16320),z.writeUint8(16320|V.chromaFormatIdc),z.writeUint8(8160|V.bitDepthLumaMinus8),z.writeUint8(8160|V.bitDepthChromaMinus8),z.writeUint16(0),z.writeUint8(8|(1&x[0])<<2|u);let L=0;return T.length&&L++,P.length&&L++,b.length&&L++,z.writeUint8(L),T.length&&(z.writeUint8(160),z.writeUint16(T.length),n.__(T,C=>{z.writeUint16(C.length),z.writeBuffer(C)})),P.length&&(z.writeUint8(161),z.writeUint16(P.length),n.__(P,C=>{z.writeUint16(C.length),z.writeBuffer(C)})),b.length&&(z.writeUint8(162),z.writeUint16(b.length),n.__(b,C=>{z.writeUint16(C.length),z.writeBuffer(C)})),S}function v(T){let P,b=!1,x=(0,c.py)(T);if(x.length>2){const L=[],C=[],F=[];x.forEach(H=>{const M=H[0]>>>1&63;M===32?L.push(H):M===33?C.push(H):M===34&&F.push(H)}),L.length&&C.length&&F.length&&(P=f(L,C,F),x=x.filter(H=>{const M=H[0]>>>1&63;return M!==32&&M!==33&&M!==34&&M!==35}))}const I=x.reduce((L,C)=>L+u+1+C.length,0),S=(0,h.sY)(I),z=(0,d.s3)(S,I),V=new s.A(z);return n.__(x,L=>{V.writeUint32(L.length),V.writeBuffer(L.subarray(0));const C=L[0]>>>1&63;C!==19&&C!==20&&C!==21||(b=!0)}),{bufferPointer:S,length:I,extradata:P,key:b}}function y(T,P){var b;if(!(1&e.f[15](T+36)))return;const x=(0,l.iI)(T);if((0,c.Bs)(x))return;const I=(b=P.metadata.naluLengthSizeMinusOne)!==null&&b!==void 0?b:u;let S=[],z=[],V=[];const L=new r.A(x);for(;L.remainingSize()>0;){let C=0;C=I===3?L.readUint32():I===2?L.readUint24():I===1?L.readUint16():L.readUint8();const F=x.subarray(0|Number(0xffffffffn&L.getPos()),(0|Number(0xffffffffn&L.getPos()))+C);L.skip(C);const H=F[0]>>>1&63;H===33?z.push(F):H===34?V.push(F):H===32&&S.push(F)}if(z.length||V.length||S.length){const C=f(S,z,V),F=(0,h.sY)(C.length);(0,d.lW)(F,C.length,C),(0,l.Ow)(T,1,F,C.length)}}function A(T,P=!1){if(!(1&e.f[15](T+36)||P))return;const b=(0,l.iI)(T);if(!(0,c.Bs)(b))return;let x=(0,c.py)(b);if(x.length>2){const I=[],S=[],z=[];if(x.forEach(V=>{const L=V[0]>>>1&63;L===32?I.push(V):L===33?S.push(V):L===34&&z.push(V)}),I.length&&S.length&&z.length){const V=f(I,S,z),L=(0,h.sY)(V.length);(0,d.lW)(L,V.length,V),(0,l.Ow)(T,1,L,V.length),i.M[15](T+36,1|e.f[15](T+36))}}}function w(T,P){if(!P&&T.sideData[1]&&(P=T.sideData[1]),P&&P.length>=6){T.metadata.naluLengthSizeMinusOne=3&P[21];const{spss:b}=function(x){const I=new r.A(x,!0);I.skip(22);let S=[],z=[],V=[];const L=I.readUint8();for(let C=0;C<L;C++){const F=63&I.readUint8(),H=I.readUint16(),M=[];for(let G=0;G<H;G++){const D=I.readUint16();M.push(I.readBuffer(D))}F===32?S=M:F===33?z=M:F===34&&(V=M)}return{vpss:S,spss:z,ppss:V}}(P);if(b.length){const{profile:x,level:I,width:S,height:z}=k(b[0]);T.codecpar.profile=x,T.codecpar.level=I,T.codecpar.width=S,T.codecpar.height=z}}}function k(T){if(!T||T.length<3)return;let P=0;T[0]===0&&T[1]===0&&T[2]===0&&T[3]===1&&(P=4);let b=0,x=0,I=0,S=0,z=0,V=0,L=1,C=0,F=0,H=0,M=0;const G=(0,c.BN)(T.subarray(P)),D=new a.A(G.length);D.appendBuffer(G),D.readU1(),D.readU(6),D.readU(6),D.readU(3),D.readU(4);const W=D.readU(3);if(D.readU1(),W<=6){C=D.readU(2),F=D.readU1(),b=D.readU(5),H=D.readU(32),M=D.readU(48),x=D.readU(8);const X=new Array(6),U=new Array(6);for(let B=0;B<W;B++)X[B]=D.readU1(),U[B]=D.readU1();if(W>0)for(let B=W;B<8;B++)D.readU(2);for(let B=0;B<W;B++)X[B]&&(D.readU(2),D.readU(1),D.readU(5),D.readU(32),D.readU(1),D.readU(1),D.readU(1),D.readU(1),D.readU(44)),U[B]&&D.readU(8);o.xb(D),L=o.xb(D),L===3&&D.readU(1),I=o.xb(D),S=o.xb(D);let Q=0,N=0,_=0,O=0;D.readU1()&&(Q=o.xb(D),N=o.xb(D),_=o.xb(D),O=o.xb(D)),z=o.xb(D),V=o.xb(D);let R=2,j=2;L===0?R=j=0:L===2?(R=2,j=1):L===3&&(R=j=1),I-=R*(1<<z+1)*(Q+N),S-=j*(1<<z+1)*(_+O)}return{profile:b,level:x,width:I,height:S,chromaFormatIdc:L,bitDepthLumaMinus8:z,bitDepthChromaMinus8:V,generalProfileSpace:C,generalTierFlag:F,generalProfileCompatibilityFlag:H,constraintFlags:M}}},89088:(g,p,t)=>{t.d(p,{Au:()=>A,XC:()=>w,Y2:()=>f,hG:()=>v,oz:()=>y});var e=t(77231);const i=[44100,48e3,32e3,0],n=[22050,24e3,16e3,0],s=[11025,12e3,8e3,0],r=[0,1152,1152,384],a=[0,576,1152,384],d=[0,576,1152,384],c=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],l=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],h=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],o=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,-1],u=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1];function f(k,T){switch(k){case 0:return s[T];case 2:return n[T];case 3:return i[T]}return e.N_}function v(k,T){switch(k){case 0:return d[T];case 2:return a[T];case 3:return r[T]}return e.N_}function y(k,T,P){switch(T){case 1:switch(k){case 0:case 2:return u[P];case 3:return h[P]}break;case 2:switch(k){case 0:case 2:return u[P];case 3:return l[P]}case 3:switch(k){case 0:case 2:return o[P];case 3:return c[P]}}return e.N_}function A(k){switch(k){case 1:return 34;case 2:return 33;case 3:return 32}return e.N_}function w(k,T){if(T&&T.length>=4){const P=T[1]>>>3&3,b=(6&T[1])>>1,x=(12&T[2])>>>2,I=3&~(T[3]>>>6)?2:1,S=A(b),z=f(P,x);k.codecpar.profile=S,k.codecpar.sampleRate=z,k.codecpar.chLayout.nbChannels=I}}},65451:(g,p,t)=>{t.d(p,{Ij:()=>d,XC:()=>a,kt:()=>r});var e=t(31865),i=t(729),n=t(44328);const s=[480,960,1920,2880,480,960,1920,2880,480,960,1920,2880,480,960,480,960,120,240,480,960,120,240,480,960,120,240,480,960,120,240,480,960];function r(c){let l=0,h=0,o=0;if(c.length<1)return 0;switch(l=c[0],h=s[l>>3],3&l){case 0:o=1;break;case 1:case 2:o=2;break;case 3:if(c.length<2)return 0;o=63&c[1]}return o*h}function a(c,l){if(!l&&c.sideData[1]&&(l=c.sideData[1]),l&&l.length>=19){const h=new e.A(l,!1);h.skip(9),c.codecpar.chLayout.nbChannels=h.readUint8(),c.codecpar.initialPadding=h.readUint16(),c.codecpar.sampleRate=h.readUint32(),c.codecpar.seekPreroll=Number((0,n.k)(BigInt(80),{den:1e3,num:1},{den:48e3,num:1}))}}function d(c){const l=new Uint8Array(19),h=new i.A(l,!1);return h.writeString("OpusHead"),h.writeUint8(1),h.writeUint8(c.chLayout.nbChannels),h.writeUint16(c.initialPadding),h.writeUint32(c.sampleRate),l}},14392:(g,p,t)=>{t.d(p,{U:()=>n,X:()=>i});var e=t(37246);function i(s,r){if(!r&&s.sideData[1]&&(r=s.sideData[1]),r&&r.length>=6){const a=n(r);s.codecpar.profile=a.profile,s.codecpar.level=a.level}}function n(s){const r=new e.A(s.length);return r.appendBuffer(s.subarray(4)),{profile:r.readU(8),level:r.readU(8),bitDepth:r.readU(4),chromaSubsampling:r.readU(3),fullRangeFlag:r.readU1(),colorPrimaries:r.readU(8),colorTrc:r.readU(8),colorSpace:r.readU(8)}}},58919:(g,p,t)=>{t.d(p,{U:()=>n,X:()=>i});var e=t(37246);function i(s,r){if(!r&&s.sideData[1]&&(r=s.sideData[1]),r&&r.length>=6){const a=n(r);s.codecpar.profile=a.profile,s.codecpar.level=a.level}}function n(s){const r=new e.A(s.length);return r.appendBuffer(s.subarray(4)),{profile:r.readU(8),level:r.readU(8),bitDepth:r.readU(4),chromaSubsampling:r.readU(3),fullRangeFlag:r.readU1(),colorPrimaries:r.readU(8),colorTrc:r.readU(8),colorSpace:r.readU(8)}}},55611:(g,p,t)=>{t.d(p,{Jk:()=>w,Ui:()=>b,XC:()=>T,ci:()=>k,oT:()=>A});var e=t(63939),i=t(50932),n=t(72739),s=t(729),r=t(31865),a=t(37246),d=t(14686),c=t(60264),l=t(71517),h=t(37837),o=t(23991),u=t(83314);const f=3;function v(x){const I=x.readU(9),S=x.readU(3),z=x.readU(2),V=x.readU(2),L=x.readU(3);x.readU(5),x.readU(2);const C=x.readU(6),F=x.readU(7),H=x.readU(1),M=x.readU(8),G=x.readU(1),D=x.readU(1),W=[],X=[];if(C){for(let N=0;N<C-1;N++)W[N]=x.readU(8);W[C-1]=x.readU(6)}else x.readU(6);if(S>1){let N=0;for(let _=S-2;_>=0;--_)N|=x.readU(1)<<_;for(let _=S;_<=8&&S>1;++_)x.readU(1);for(let _=S-2;_>=0;--_)N&1<<_&&(X[_]=x.readU(8))}const U=x.readU(8),Q=[];if(U)for(let N=0;N<U;N++)Q.push(x.readU(8));return{olsIdx:I,numSublayers:S,bitDepthMinus8:L,chromaFormatIdc:V,constantFrameRate:z,generalProfileIdc:F,generalTierFlag:H,generalLevelIdc:M,ptlFrameOnlyConstraintFlag:G,ptlMultilayerEnabledFlag:D,generalConstraintInfo:W,sublayerLevelIdc:X,generalSubProfileIdc:Q,maxPictureWidth:x.readU(16),maxPictureHeight:x.readU(16),avgFramerate:x.readU(16)}}function y(x,I,S){const z=I[0];let V;if(z){const M=P(z),G=new u.A;if(G.writeU(9,0),G.writeU(3,M.spsMaxSublayersMinus1+1),G.writeU(2,1),G.writeU(2,M.chromaFormatIdc),G.writeU(3,M.bitDepthMinus8),G.writeU(5,31),G.writeU(2,3),G.writeU(6,M.generalConstraintInfo.length),G.writeU(7,M.profile),G.writeU1(M.tierFlag),G.writeU(8,M.level),G.writeU1(M.ptlFrameOnlyConstraintFlag),G.writeU1(M.ptlMultilayerEnabledFlag),M.generalConstraintInfo.length){for(let D=0;D<M.generalConstraintInfo.length-1;D++)G.writeU(8,M.generalConstraintInfo[D]);G.writeU(6,M.generalConstraintInfo[M.generalConstraintInfo.length-1])}else G.writeU(6,63);if(M.spsMaxSublayersMinus1+1>1){let D=0;for(let W=M.spsMaxSublayersMinus1-1;W>=0;W--)D=D<<1|M.ptlSublayerLevelPresentFlag[W];G.writeU(8,D)}for(let D=M.spsMaxSublayersMinus1-1;D>=0;D--)M.ptlSublayerLevelPresentFlag[D]&&G.writeU(8,M.sublayerLevelIdc[D]);G.writeU(8,M.generalSubProfileIdc.length);for(let D=0;D<M.generalSubProfileIdc.length;D++)G.writeU(32,M.sublayerLevelIdc[D]);G.writeU(16,M.width),G.writeU(16,M.height),G.writeU(16,0),G.padding(),V=G.getBuffer().subarray(0,G.getPointer())}let L=1+(V?V.length:0);x.length&&(L+=3,L=x.reduce((M,G)=>M+2+G.length,L)),I.length&&(L+=3,L=I.reduce((M,G)=>M+2+G.length,L)),S.length&&(L+=3,L=S.reduce((M,G)=>M+2+G.length,L));const C=new Uint8Array(L),F=new s.A(C,!0);F.writeUint8(f<<1|(V?1:0)|248),V&&F.writeBuffer(V);let H=0;return x.length&&H++,I.length&&H++,S.length&&H++,F.writeUint8(H),x.length&&(F.writeUint8(142),F.writeUint16(x.length),n.__(x,M=>{F.writeUint16(M.length),F.writeBuffer(M)})),I.length&&(F.writeUint8(143),F.writeUint16(I.length),n.__(I,M=>{F.writeUint16(M.length),F.writeBuffer(M)})),S.length&&(F.writeUint8(144),F.writeUint16(S.length),n.__(S,M=>{F.writeUint16(M.length),F.writeBuffer(M)})),C}function A(x){let I,S=!1,z=(0,c.py)(x);if(z.length>2){const H=[],M=[],G=[];z.forEach(D=>{const W=D[0]>>>1&63;W===14?H.push(D):W===15?M.push(D):W===16&&G.push(D)}),H.length&&M.length&&G.length&&(I=y(H,M,G),z=z.filter(D=>{const W=D[0]>>>1&63;return W!==14&&W!==15&&W!==16&&W!==20}))}const V=z.reduce((H,M)=>H+f+1+M.length,0),L=(0,h.sY)(V),C=(0,d.s3)(L,V),F=new s.A(C);return n.__(z,H=>{F.writeUint32(H.length),F.writeBuffer(H.subarray(0));const M=H[0]>>>1&63;M!==8&&M!==7&&M!==9&&M!==10||(S=!0)}),{bufferPointer:L,length:V,extradata:I,key:S}}function w(x,I){var S;if(!(1&e.f[15](x+36)))return;const z=(0,l.iI)(x);if((0,c.Bs)(z))return;const V=(S=I.metadata.naluLengthSizeMinusOne)!==null&&S!==void 0?S:f;let L=[],C=[],F=[];const H=new r.A(z);for(;H.remainingSize()>0;){let M=0;M=V===3?H.readUint32():V===2?H.readUint24():V===1?H.readUint16():H.readUint8();const G=z.subarray(0|Number(0xffffffffn&H.getPos()),(0|Number(0xffffffffn&H.getPos()))+M);H.skip(M);const D=G[0]>>>1&63;D===15?C.push(G):D===16?F.push(G):D===14&&L.push(G)}if(C.length||F.length||L.length){const M=y(L,C,F),G=(0,h.sY)(M.length);(0,d.lW)(G,M.length,M),(0,l.Ow)(x,1,G,M.length)}}function k(x,I=!1){if(!(1&e.f[15](x+36)||I))return;const S=(0,l.iI)(x);if(!(0,c.Bs)(S))return;let z=(0,c.py)(S);if(z.length>2){const V=[],L=[],C=[];if(z.forEach(F=>{const H=F[0]>>>1&63;H===14?V.push(F):H===15?L.push(F):H===16&&C.push(F)}),V.length&&L.length&&C.length){const F=y(V,L,C),H=(0,h.sY)(F.length);(0,d.lW)(H,F.length,F),(0,l.Ow)(x,1,H,F.length),i.M[15](x+36,1|e.f[15](x+36))}}}function T(x,I){if(!I&&x.sideData[1]&&(I=x.sideData[1]),I&&I.length>=6){x.metadata.naluLengthSizeMinusOne=I[0]>>>1&3;const{spss:S}=function(z){const V=new r.A(z,!0);if(1&V.readUint8()){const M=new a.A;M.appendBuffer(z.subarray(1)),v(M),V.skip(M.getPos())}let L=[],C=[],F=[];const H=V.readUint8();for(let M=0;M<H;M++){const G=31&V.readUint8();let D=1;G!==13&&G!==12&&(D=V.readUint16());const W=[];for(let X=0;X<D;X++){const U=V.readUint16();W.push(V.readBuffer(U))}G===14?L=W:G===15?C=W:G===16&&(F=W)}return{vpss:L,spss:C,ppss:F}}(I);if(S.length){const{profile:z,level:V,width:L,height:C}=P(S[0]);x.codecpar.profile=z,x.codecpar.level=V,x.codecpar.width=L,x.codecpar.height=C}}}function P(x){if(!x||x.length<3)return;let I=0;x[0]===0&&x[1]===0&&x[2]===0&&x[3]===1&&(I=4);let S=0,z=0,V=0,L=0,C=0,F=1,H=0,M=0,G=0;const D=[],W=[],X=[],U=[],Q=(0,c.BN)(x.subarray(I)),N=new a.A(Q.length);N.appendBuffer(Q),N.readU1(),N.readU1(),N.readU(6),N.readU(5),N.readU(3),N.readU(8);const _=N.readU(3);F=N.readU(2);const O=N.readU(2);if(N.readU(1)){if(S=N.readU(7),H=N.readU(1),z=N.readU(8),M=N.readU(1),G=N.readU(1),N.readU(1)){for(let Z=0;Z<8;Z++)D[Z]=N.readU(8);D[8]=N.readU(7);const Y=N.readU(8);N.readU(Y)}N.skipPadding();for(let Y=_-1;Y>=0;Y--)W[Y]=N.readU(1);N.skipPadding();for(let Y=_-1;Y>=0;Y--)W[Y]&&(X[Y]=N.readU(8));const B=N.readU(8);if(B)for(let Y=0;Y<B;Y++)U[Y]=N.readU(32)}N.readU1(),N.readU1()&&N.readU1();const R=V=o.xb(N),j=L=o.xb(N);if(N.readU1()&&(o.xb(N),o.xb(N),o.xb(N),o.xb(N)),N.readU1()){const B=o.xb(N),Y=O+5,Z=1<<Y,rt=R/(1<<Y),ot=j/(1<<Y),ft=Math.ceil(Math.log2(rt)),ut=Math.ceil(Math.log2(ot));let At=0,vt=0,et=0;B>0&&(et=N.readU1(),vt=N.readU1());for(let st=0;B>0&&st<=B;st++)vt&&st!=0||(st>0&&R>Z&&N.readU(ft),st>0&&j>Z&&N.readU(ut),st<B&&R>Z&&N.readU(ft),st<B&&j>Z&&N.readU(ut)),et||N.readU(2);if(At=o.xb(N)+1,N.readU(1)&&N.readU(1))for(let st=0;st<=B;st++)N.readU(At)}return C=o.xb(N),{profile:S,level:z,width:V,height:L,chromaFormatIdc:F,bitDepthMinus8:C,generalProfileSpace:0,tierFlag:H,generalConstraintInfo:D,generalSubProfileIdc:U,ptlFrameOnlyConstraintFlag:M,ptlMultilayerEnabledFlag:G,spsMaxSublayersMinus1:_,ptlSublayerLevelPresentFlag:W,sublayerLevelIdc:X}}function b(x){const I=new a.A;return I.appendBuffer(x),1&I.readU(8)?v(I):{}}},16160:(g,p,t)=>{t.d(p,{V:()=>i,v:()=>e});const e=256e3,i=BigInt(5e3)},75:(g,p,t)=>{t.d(p,{Cj:()=>T,Ib:()=>A,ho:()=>y,jF:()=>P});var e=t(63939),i=t(9599),n=t(29170),s=t(95335),r=t(72739),a=t(77231),d=t(31425),c=t(44328),l=t(71517),h=t(16160),o=t(9705),u=t(4624),f="src\\avformat\\demux.ts";const v={fastOpen:!1,maxAnalyzeDuration:1e3};async function y(b,x={}){const I=s.X$({},v,x);return b.ioReader||u.h2("need IOReader",f,62),b.iformat||u.h2("need iformat",f,65),b.iformat.type===2&&(I.maxAnalyzeDuration=Math.max(I.maxAnalyzeDuration,2e3)),b.iformat.init(b),b.options=I,b.iformat.readHeader(b)}async function A(b){const x=b.iformat.getAnalyzeStreamsCount(),I={},S={},z={};let V=0;const L=[];let C=0;for(;!(b.streams.length>=x&&(0,d.$)(b)&&b.options.fastOpen);){V||(V=(0,l._5)());let F=!1;if(C=await T(b,V),C!==0)break;const H=b.getStreamByIndex(e.f[15](V+32));if(e.f[15](V+28)&&(F=!0,L.push(V),I[H.index]||(H.firstDTS=e.f[17](V+16),H.startTime=e.f[17](V+8),I[H.index]=!0),e.f[17](V+8)<H.startTime&&(H.startTime=e.f[17](V+8)),S[H.index]?S[H.index].push(e.f[17](V+16)):S[H.index]=[e.f[17](V+16)],z[H.index]?z[H.index]+=e.f[15](V+28):z[H.index]=e.f[15](V+28)),S[H.index]&&S[H.index].length===12){let M=BigInt(0);for(let W=1;W<S[H.index].length;W++)M+=S[H.index][W]-S[H.index][W-1];let G=Number(M)/(S[H.index].length-1);H.codecpar.codecType===1&&H.codecpar.sampleRate>0?H.codecpar.frameSize=Math.round(G/H.timeBase.den*H.timeBase.num*H.codecpar.sampleRate):H.codecpar.codecType===0&&(H.codecpar.framerate.num=H.timeBase.den*H.timeBase.num,H.codecpar.framerate.den=G>>>0);const D=Number(e.f[17](V+16)-H.firstDTS)*H.timeBase.num/H.timeBase.den;D&&(H.codecpar.bitRate=BigInt(Math.floor(8*z[H.index]/D)))}if(e.f[17](V+16)-H.startTime>(0,c.k)(BigInt(Math.floor(b.options.maxAnalyzeDuration)),a.i0,H.timeBase)){s.__(S,(M,G)=>{const D=b.getStreamById(+G);if(M&&M.length>1){let W=BigInt(0);for(let Q=1;Q<M.length;Q++)W+=M[Q]-M[Q-1];let X=Number(W)/(S[D.index].length-1);D.codecpar.codecType===1&&D.codecpar.sampleRate>0?D.codecpar.frameSize=Math.round(X/D.timeBase.den*D.timeBase.num*D.codecpar.sampleRate):D.codecpar.codecType===0&&(D.codecpar.framerate.num=D.timeBase.den*D.timeBase.num,D.codecpar.framerate.den=X>>>0);const U=Number(e.f[17](V+16)-D.firstDTS)*D.timeBase.num/D.timeBase.den;U&&(D.codecpar.bitRate=BigInt(Math.floor(8*z[D.index]/U)))}}),F&&(V=0);break}F&&(V=0)}return V&&(0,l.Qe)(V),L.length&&(b.interval.packetBuffer=L.concat(b.interval.packetBuffer)),C===-1048576?0:C!==0?C:(b.iformat.type===2&&1&b.ioReader.flags&&await async function(F){const H=await F.ioReader.fileSize();if(H<=BigInt(0))return;const M=F.interval.packetBuffer;F.interval.packetBuffer=[];let G=F.ioReader.getPos(),D=0;for(;D<4;){const W=H-BigInt(Math.floor(h.v<<D)),X=await F.iformat.seek(F,null,W,2);X>BigInt(0)&&(G=X);const U={},Q=(0,l._5)();for(;!(await T(F,Q)<0);){let _=e.f[17](Q+8);const O=F.getStreamByIndex(e.f[15](Q+32));O.startTime!==a.Dh?_-=O.startTime:_-=O.firstDTS,_>BigInt(0)&&((O.duration===a.Dh||!U[e.f[15](Q+32)]||O.duration<_&&Math.abs(Number(_-O.duration))<60*O.timeBase.den/O.timeBase.num)&&(O.duration=_),U[Q.streamIndex]=_)}(0,l.Qe)(Q);let N=!0;if(r.__(F.streams,_=>{if(_.duration===a.Dh)return N=!1,!1}),N)break;D++}r.__(F.interval.packetBuffer,W=>{(0,l.Qe)(W)}),F.interval.packetBuffer=M,await F.iformat.seek(F,null,G,2)}(b),0)}function w(b,x){const I=r.El(b.sampleIndexes,z=>z.pts<e.f[17](x+8)?1:-1),S={dts:e.f[17](x+16),pts:e.f[17](x+8),pos:e.f[17](x+56),size:e.f[15](x+28),duration:e.f[17](x+48),flags:e.f[15](x+36)};I>-1?(b.sampleIndexesPosMap.set(e.f[17](x+56),I),b.sampleIndexes.splice(I,0,S)):(b.sampleIndexesPosMap.set(e.f[17](x+56),b.sampleIndexes.length),b.sampleIndexes.push(S))}async function k(b,x){const I=b.getStreamById(e.f[15](x+32));let S=0;if(I&&(I.codecpar.codecId===27||I.codecpar.codecId===173||I.codecpar.codecId===196||I.codecpar.codecId===86018)){if(!e.f[15](x+28)&&(0,l.fQ)(x,1))for(;;){const z=(0,l._5)();if(S=await b.iformat.readAVPacket(b,z),S!==0){if(b.interval.packetBuffer.length){let V=b.interval.packetBuffer.shift();return(0,l.Up)(x),(0,l.rN)(x,V),(0,l.Qe)(V),k(b,x)}return S}if(e.f[15](z+32)!==e.f[15](x+32))b.interval.packetBuffer.push(z);else{if(e.f[15](z+28))return(0,l.Zx)(x,z),(0,l.Qe)(z),0;(0,l.Up)(x),(0,l.rN)(x,z),(0,l.Qe)(z)}}else if(32&e.f[15](x+36))return T(b,x)}if(1&b.ioReader.flags&&!I.sampleIndexesPosMap.has(e.f[17](x+56))){if(I.codecpar.codecType===0)1&e.f[15](x+36)&&w(I,x);else if(I.codecpar.codecType===1){const z=r.El(I.sampleIndexes,V=>V.pts<e.f[17](x+8)?1:-1);(!I.sampleIndexes.length||z<0&&(0,c.k)(e.f[17](x+8)-I.sampleIndexes[I.sampleIndexes.length-1].pts,(0,n.A)(x+72,i.P),a.i0)>=h.V||z>0&&z<I.sampleIndexes.length-1&&(0,c.k)(e.f[17](x+8)-I.sampleIndexes[z-1].pts,(0,n.A)(x+72,i.P),a.i0)>=h.V||z===0&&(0,c.k)(I.sampleIndexes[0].pts-e.f[17](x+8),(0,n.A)(x+72,i.P),a.i0)>=h.V)&&w(I,x)}}return 0}async function T(b,x){let I=0;if((0,l.Up)(x),b.interval.packetBuffer.length){const S=b.interval.packetBuffer.shift();return(0,l.rN)(x,S),(0,l.Qe)(S),k(b,x)}return I=await b.iformat.readAVPacket(b,x),I!==0?((0,l.Up)(x),I):k(b,x)}async function P(b,x,I,S){let z=b.streams[x];if(z||(z=b.getStreamByMediaType(0),z||(z=b.getStreamByMediaType(1))),!z)return u.z3(`not found any stream to seek, streamIndex: ${z.index}`,f,464),BigInt(o.LR);u.Yz(`seek in ${z.codecpar.codecType===0?"video":"audio"} stream, streamIndex: ${z.index}, timestamp: ${I}, flags: ${S}`,f,468),I=(0,c.k)(I,a.i0,z.timeBase);const V=await b.iformat.seek(b,z,I,S);return V>=BigInt(0)?(r.__(b.interval.packetBuffer,L=>{(0,l.Qe)(L)}),b.interval.packetBuffer.length=0,BigInt(0)):V}},47094:(g,p,t)=>{t.d(p,{A:()=>y});var e=t(134),i=t(63939),n=t(50932),s=t(4624),r=t(9705),a=t(85947),d=t(14686),c=t(37837),l=t(71517),h=t(44328),o=t(77231),u=t(72739),f=t(58469),v="src\\avformat\\formats\\IAacFormat.ts";class y extends a.A{constructor(){super(),(0,e.A)(this,"type",8),(0,e.A)(this,"frameType",void 0),(0,e.A)(this,"fileSize",void 0),(0,e.A)(this,"currentPts",void 0)}init(w){this.currentPts=BigInt(0)}async estimateTotalBlock(w){let k=0;const T=w.ioReader.getPos();for(;;)try{const P=await w.ioReader.peekBuffer(7),b=(3&P[3])<<11|P[4]<<3|(224&P[5])>>>5;k+=1+(3&P[6]),await w.ioReader.skip(b)}catch{break}return await w.ioReader.seek(T),k}async readHeader(w){const k=await w.ioReader.peekBuffer(4);if(this.fileSize=await w.ioReader.fileSize(),k[0]===65&&k[1]===68&&k[2]===73&&k[3]===70){const T=w.createStream();T.codecpar.codecId=86018,T.codecpar.codecType=1,this.frameType=0}else{if(k[0]!==255||240&~k[1])return r.LR;{this.frameType=1;const T=w.createStream();T.codecpar.codecId=86018,T.codecpar.codecType=1;const P=await w.ioReader.peekBuffer(7),b=(192&P[2])>>>6,x=(60&P[2])>>>2,I=(1&P[2])<<2|(192&P[3])>>>6;T.codecpar.profile=b+1,T.codecpar.sampleRate=f.hY[x],T.codecpar.chLayout.nbChannels=f.En[I];const S=(0,f.Ij)(T.codecpar);T.codecpar.extradata=(0,c.sY)(S.length),(0,d.lW)(T.codecpar.extradata,S.length,S),T.codecpar.extradataSize=S.length,T.timeBase.den=T.codecpar.sampleRate,T.timeBase.num=1,T.duration=(0,h.k)(BigInt(Math.floor(1024*await this.estimateTotalBlock(w)/T.codecpar.sampleRate*o.SF)),o.KR,T.timeBase)}}return 0}async readAVPacket(w,k){const T=w.streams.find(P=>P.codecpar.codecType=1);try{const P=w.ioReader.getPos();let b;if(this.frameType===0)b=await w.ioReader.readBuffer(Math.min(1024,0|Number(this.fileSize-P&0xffffffffn)));else if(this.frameType===1){const I=await w.ioReader.readBuffer(7),S=1&I[1],z=(3&I[3])<<11|I[4]<<3|(224&I[5])>>>5,V=3&I[6];let L=S===1?7:9,C=z-L;L===9&&await w.ioReader.skip(2);const F=(0,h.k)(BigInt(Math.floor(1024*(V+1)/T.codecpar.sampleRate*o.SF)),o.KR,T.timeBase);n.M[17](k+48,F),b=await w.ioReader.readBuffer(C)}const x=(0,c.sY)(b.length);return(0,d.lW)(x,b.length,b),(0,l.NX)(k,x,b.length),n.M[17](k+16,this.currentPts),n.M[17](k+8,this.currentPts),n.M[17](k+56,P),n.M[15](k+32,T.index),n.M[15](k+76,T.timeBase.den),n.M[15](k+72,T.timeBase.num),this.currentPts+=i.f[17](k+48),0}catch(P){return w.ioReader.error!==-1048576&&s.z3(P.message,v,193),w.ioReader.error}}async syncFrame(w){let k=o.Dh;for(;;)try{if(await w.ioReader.peekUint16()>>>4==4095){k=w.ioReader.getPos();const T=await w.ioReader.peekBuffer(7),P=(3&T[3])<<11|T[4]<<3|(224&T[5])>>>5;if(P>512e3){await w.ioReader.skip(1);continue}await w.ioReader.skip(P);let b=0;for(;b!==3&&await w.ioReader.peekUint16()>>>4==4095;){b++;const x=await w.ioReader.peekBuffer(7),I=(3&x[3])<<11|x[4]<<3|(224&x[5])>>>5;if(I>512e3)break;await w.ioReader.skip(I)}if(b===3)break}await w.ioReader.skip(1)}catch{break}k!==o.Dh&&await w.ioReader.seek(k)}async seek(w,k,T,P){if(this.frameType===1){const b=w.ioReader.getPos();if(2&P){const x=await w.ioReader.fileSize();return x<=BigInt(0)?BigInt(r.E$):(T<BigInt(0)?T=BigInt(0):T>x&&(T=x),await w.ioReader.seek(T),4&P||(await this.syncFrame(w),k.duration&&this.fileSize&&(this.currentPts=T/this.fileSize*k.duration)),b)}if(k&&k.sampleIndexes.length){let x=u.El(k.sampleIndexes,I=>I.pts>T?-1:1);if(x>0&&(0,h.k)(T-k.sampleIndexes[x-1].pts,k.timeBase,o.i0)<BigInt(5e3))return s.Yz(`seek in sampleIndexes, found index: ${x}, pts: ${k.sampleIndexes[x-1].pts}, pos: ${k.sampleIndexes[x-1].pos}`,v,296),await w.ioReader.seek(k.sampleIndexes[x-1].pos),this.currentPts=T,b}if(s.Yz("not found any keyframe index, try to seek in bytes",v,303),!k.duration)return BigInt(r.E$);{await w.ioReader.seek(BigInt(0));let x=BigInt(0);for(;;)try{if(x>=T)return this.currentPts=x,b;const I=await w.ioReader.peekBuffer(7),S=(3&I[3])<<11|I[4]<<3|(224&I[5])>>>5,z=3&I[6];x+=(0,h.k)(BigInt(Math.floor(1024*(z+1)/k.codecpar.sampleRate*o.SF)),o.KR,k.timeBase),await w.ioReader.skip(S)}catch{return BigInt(r.E$)}}}return BigInt(r.E$)}getAnalyzeStreamsCount(){return 1}}},18453:(g,p,t)=>{t.d(p,{A:()=>k});var e=t(134),i=t(50932),n=t(4624),s=t(9705),r=t(85947),a=t(14686),d=t(37837),c=t(71517),l=t(91375),h=t(37246),o=t(92647),u=t(77231),f=t(52071),v=t(72739),y=t(44328),A="src\\avformat\\formats\\IFlacFormat.ts";const w=1024;class k extends r.A{constructor(){super(),(0,e.A)(this,"type",10),(0,e.A)(this,"context",void 0)}init(P){P.ioReader.setEndian(!0),this.context={streamInfo:{minimumBlockSize:0,maximumBlockSize:0,minimumFrameSize:0,maximumFrameSize:0,sampleRate:0,channels:0,bitPerSample:0,samples:BigInt(0),md5:""},frameInfo:{sampleRate:0,channels:0,bps:0,blocksize:0,chMode:0,frameOrSampleNum:BigInt(0),isVarSize:0},seekPoints:[],cueSheet:{catalogNumber:"",leadInSamples:BigInt(0),compactDisc:!1,tracks:[]},picture:{type:0,mimeType:"",description:"",width:0,height:0,colorDepth:0,indexedColor:0,data:null},cacheBuffer:null,cachePos:BigInt(0),bitReader:new h.A(16),fileSize:BigInt(0),firstFramePos:BigInt(0)}}async readHeader(P){if(await P.ioReader.readString(4)!=="fLaC")return n.z3("the file format is not flac",A,115),s.LR;this.context.fileSize=await P.ioReader.fileSize();const b=P.createStream();for(b.codecpar.codecType=1,b.codecpar.codecId=86028;;){const x=await P.ioReader.readUint8(),I=await P.ioReader.readUint24(),S=-129&x;if(S===0){b.codecpar.extradata=(0,d.sY)(I),b.codecpar.extradataSize=I,(0,a.lW)(b.codecpar.extradata,I,await P.ioReader.peekBuffer(I)),this.context.streamInfo.minimumBlockSize=await P.ioReader.readUint16(),this.context.streamInfo.maximumBlockSize=await P.ioReader.readUint16(),this.context.streamInfo.minimumFrameSize=await P.ioReader.readUint24(),this.context.streamInfo.maximumFrameSize=await P.ioReader.readUint24();const z=await P.ioReader.readUint24();b.codecpar.sampleRate=z>>4,b.codecpar.chLayout.nbChannels=1+((15&z)>>>1),this.context.streamInfo.sampleRate=b.codecpar.sampleRate,this.context.streamInfo.channels=b.codecpar.chLayout.nbChannels;const V=await P.ioReader.readUint8();b.codecpar.bitsPerRawSample=1+((1&z)<<4|(240&V)>>>4),this.context.streamInfo.bitPerSample=b.codecpar.bitsPerRawSample;const L=await P.ioReader.readUint32(),C=BigInt(Math.floor(15&V))<<BigInt(32)|BigInt(Math.floor(L));this.context.streamInfo.samples=C,b.timeBase.den=b.codecpar.sampleRate,b.timeBase.num=1,b.duration=C,b.startTime=BigInt(0),this.context.streamInfo.md5=await P.ioReader.readString(16)}else if(S===2){const z=P.createStream();z.codecpar.codecType=2,z.codecpar.codecTag=await P.ioReader.readUint32(),z.codecpar.extradata=(0,d.sY)(I-4),z.codecpar.extradataSize=I-4,await P.ioReader.readBuffer(I-4,(0,a.JW)(z.codecpar.extradata,z.codecpar.extradataSize))}else if(S===3)for(let z=0;z<I/18;z++){const V=await P.ioReader.readUint64(),L=await P.ioReader.readUint64(),C=await P.ioReader.readUint16();this.context.seekPoints.push({pts:V,pos:L,samples:C})}else if(S===4){P.ioReader.setEndian(!1);const z=await P.ioReader.readUint32(),V=await P.ioReader.readString(z),L=await P.ioReader.readUint32(),C=[];for(let F=0;F<L;F++){const H=await P.ioReader.readUint32();C.push(await P.ioReader.readString(H))}b.metadata.vendor=V,b.metadata.comments=C,P.ioReader.setEndian(!0)}else if(S===5){this.context.cueSheet.catalogNumber=await P.ioReader.readString(128),this.context.cueSheet.leadInSamples=await P.ioReader.readUint64(),this.context.cueSheet.compactDisc=!!(await P.ioReader.readUint8()>>>7),await P.ioReader.skip(258);const z=await P.ioReader.readUint8();for(let V=0;V<z;V++){const L=await P.ioReader.readUint64(),C=await P.ioReader.readUint8(),F=await P.ioReader.readBuffer(12),H=await P.ioReader.readUint8();await P.ioReader.skip(13);const M=await P.ioReader.readUint8(),G=[];for(let D=0;D<M;D++)G.push({offset:await P.ioReader.readUint64(),point:await P.ioReader.readUint8()}),await P.ioReader.skip(3);this.context.cueSheet.tracks.push({offset:L,number:C,isrc:F,type:H>>>7,preEmphasisFlag:H>>>6&1,points:G})}}else if(S===6){this.context.picture.type=await P.ioReader.readUint32();let z=await P.ioReader.readUint32();this.context.picture.mimeType=await P.ioReader.readString(z),z=await P.ioReader.readUint32(),this.context.picture.description=await P.ioReader.readString(z),this.context.picture.width=await P.ioReader.readUint32(),this.context.picture.height=await P.ioReader.readUint32(),this.context.picture.colorDepth=await P.ioReader.readUint32(),this.context.picture.indexedColor=await P.ioReader.readUint32(),z=await P.ioReader.readUint32(),this.context.picture.data=await P.ioReader.readBuffer(z)}else await P.ioReader.skip(I);if(128&x)break}return this.context.firstFramePos=P.ioReader.getPos(),b.privData=this.context,0}async getNextFrame(P){const b=[];for(;;){if(P.ioReader.getPos()===this.context.fileSize){this.context.cacheBuffer&&(b.push(this.context.cacheBuffer),this.context.cacheBuffer=null);break}this.context.cacheBuffer?this.context.cacheBuffer.length<17&&(this.context.cacheBuffer=(0,o.A)(Uint8Array,[this.context.cacheBuffer,await P.ioReader.readBuffer(Math.min(w,0|Number(this.context.fileSize-P.ioReader.getPos()&0xffffffffn)))])):(this.context.cachePos=P.ioReader.getPos(),this.context.cacheBuffer=await P.ioReader.readBuffer(Math.min(w,0|Number(this.context.fileSize-P.ioReader.getPos()&0xffffffffn))));let x=b.length?0:2;for(;x<this.context.cacheBuffer.length-2;x++)if(this.context.cacheBuffer[x]===255&&(this.context.cacheBuffer[x+1]===249||this.context.cacheBuffer[x+1]===248)){x&&(b.push(this.context.cacheBuffer.subarray(0,x)),this.context.cacheBuffer=this.context.cacheBuffer.subarray(x),this.context.cachePos+=BigInt(Math.floor(x)));break}if(x!==this.context.cacheBuffer.length-2){if(this.context.cacheBuffer.length<16&&(this.context.cacheBuffer=(0,o.A)(Uint8Array,[this.context.cacheBuffer,await P.ioReader.readBuffer(Math.min(w,0|Number(this.context.fileSize-P.ioReader.getPos()&0xffffffffn)))])),this.context.bitReader.clear(),this.context.bitReader.appendBuffer(this.context.cacheBuffer.subarray(0,16)),!((0,l.x)(this.context.bitReader,{},!0)<0))break;b.push(this.context.cacheBuffer.subarray(0,2)),this.context.cachePos+=BigInt(2),this.context.cacheBuffer=this.context.cacheBuffer.subarray(2)}else P.ioReader.getPos()===this.context.fileSize?(b.push(this.context.cacheBuffer),this.context.cachePos+=BigInt(Math.floor(this.context.cacheBuffer.length)),this.context.cacheBuffer=null):(b.push(this.context.cacheBuffer.subarray(0,x)),this.context.cachePos+=BigInt(Math.floor(x)),this.context.cacheBuffer=this.context.cacheBuffer.subarray(x))}return b.length===1?b[0]:(0,o.A)(Uint8Array,b)}async readAVPacket(P,b){const x=P.streams.find(I=>I.codecpar.codecType=1);try{let I=P.ioReader.getPos();if(I===this.context.fileSize)return-1048576;if(this.context.bitReader.clear(),this.context.cacheBuffer?(I=this.context.cachePos,this.context.cacheBuffer.length<16&&(this.context.cacheBuffer=(0,o.A)(Uint8Array,[this.context.cacheBuffer,await P.ioReader.readBuffer(Math.min(w,0|Number(this.context.fileSize-P.ioReader.getPos()&0xffffffffn)))])),this.context.bitReader.appendBuffer(this.context.cacheBuffer.subarray(0,16))):this.context.bitReader.appendBuffer(await P.ioReader.peekBuffer(16)),(0,l.x)(this.context.bitReader,this.context.frameInfo)<0)return s.LR;const S=await this.getNextFrame(P),z=(0,d.sY)(S.length);return(0,a.lW)(z,S.length,S),(0,c.NX)(b,z,S.length),i.M[17](b+56,I),i.M[15](b+32,x.index),i.M[15](b+76,x.timeBase.den),i.M[15](b+72,x.timeBase.num),i.M[17](b+16,this.context.frameInfo.isVarSize?this.context.frameInfo.frameOrSampleNum:this.context.frameInfo.frameOrSampleNum*BigInt(this.context.frameInfo.blocksize>>>0)),i.M[17](b+8,this.context.frameInfo.isVarSize?this.context.frameInfo.frameOrSampleNum:this.context.frameInfo.frameOrSampleNum*BigInt(this.context.frameInfo.blocksize>>>0)),0}catch(I){return P.ioReader.error!==-1048576&&n.z3(I.message,A,397),P.ioReader.error}}async syncFrame(P){let b=u.Dh;for(;;)try{const x=await P.ioReader.peekUint16();if((x===65529||x===65528)&&(b=P.ioReader.getPos(),this.context.bitReader.clear(),this.context.bitReader.appendBuffer(await P.ioReader.peekBuffer(16)),!(0,l.x)(this.context.bitReader,{},!0)))break;await P.ioReader.skip(1)}catch{break}b!==u.Dh&&await P.ioReader.seek(b)}async seek(P,b,x,I){const S=P.ioReader.getPos(),z=b.privData;if(2&I){const L=await P.ioReader.fileSize();return L<=BigInt(0)?BigInt(s.E$):(x<BigInt(0)?x=BigInt(0):x>L&&(x=L),await P.ioReader.seek(x),4&I||await this.syncFrame(P),S)}if(b&&b.sampleIndexes.length){let L=v.El(b.sampleIndexes,C=>C.pts>x?-1:1);if(L>0&&(0,y.k)(x-b.sampleIndexes[L-1].pts,b.timeBase,u.i0)<BigInt(5e3))return n.Yz(`seek in sampleIndexes, found index: ${L}, pts: ${b.sampleIndexes[L-1].pts}, pos: ${b.sampleIndexes[L-1].pos}`,A,464),await P.ioReader.seek(b.sampleIndexes[L-1].pos),z.cacheBuffer=null,S}if(z.seekPoints.length)for(let L=0;L<z.seekPoints.length;L++){const C=z.seekPoints[L];if(C.pts>=x)return n.Yz(`seek in seekPoints, found index: ${L}, pts: ${C.pts}, pos: ${C.pos+z.firstFramePos}`,A,475),await P.ioReader.seek(C.pos+z.firstFramePos),z.cacheBuffer=null,S}n.Yz("not found any keyframe index, try to seek in bytes",A,483);const V=await(0,f.A)(P,b,x,z.firstFramePos,this.readAVPacket.bind(this),this.syncFrame.bind(this));return V>0&&(z.cacheBuffer=null),V}getAnalyzeStreamsCount(){return 1}}},28773:(g,p,t)=>{t.d(p,{A:()=>z});var e=t(134),i=t(63939),n=t(50932),s=t(58121),r=t(68243),a=t(4624),d=t(35028),c=t(20620),l=t(58469),h=t(53e3),o=t(55611),u=t(90412),f=t(58919),v=t(9705),y=t(85947),A=t(14686),w=t(37837),k=t(71517),T=t(65977),P=t(44328),b=t(77231),x=t(72739),I=t(52071),S="src\\avformat\\formats\\IFlvFormat.ts";class z extends y.A{constructor(L={}){super(),(0,e.A)(this,"type",0),(0,e.A)(this,"header",void 0),(0,e.A)(this,"script",void 0),(0,e.A)(this,"options",void 0),(0,e.A)(this,"firstTagPos",void 0),this.header=new s.A,this.script=new r.A,this.options=L}init(L){L.ioReader&&L.ioReader.setEndian(!0)}async readHeader(L){try{if(await L.ioReader.peekString(3)!=="FLV")return a.z3("the file format is not flv",S,99),v.LR;await this.header.read(L.ioReader),await L.ioReader.readUint32()!==0&&a.R8("the previousTagSize0 is not 0",S,106);let C=0;if(await L.ioReader.peekUint8()===18){await L.ioReader.skip(1);const F=await L.ioReader.readUint24();await L.ioReader.skip(7),C=await this.script.read(L.ioReader,F)}return C>=0&&(this.firstTagPos=L.ioReader.getPos()),C}catch(C){return a.z3(C.message,S,124),L.ioReader.error}}async readCodecConfigurationRecord(L,C,F){const H=(0,w.sY)(F);C.codecpar.extradata=H,C.codecpar.extradataSize=F,await L.ioReader.readBuffer(F,(0,A.JW)(H,F)),C.sideData[1]=(0,A.s3)(H,F).slice(),C.codecpar.codecId===27||C.codecpar.codecId===12?c.XC(C):C.codecpar.codecId===173?h.XC(C):C.codecpar.codecId===196?o.XC(C):C.codecpar.codecId===225?u.XC(C):C.codecpar.codecId===167&&f.X(C)}async readAVPacketData(L,C,F,H){const M=(0,w.sY)(H);(0,k.NX)(F,M,H),await L.ioReader.readBuffer(H,(0,A.JW)(M,H)),C.codecpar.codecId===27?(c.Jk(F,C),n.M[15](F+80,1)):C.codecpar.codecId===173?(h.Jk(F,C),n.M[15](F+80,1)):C.codecpar.codecId===196&&(o.Jk(F,C),n.M[15](F+80,1))}async readAVPacket_(L,C){const F=L.ioReader.getPos();n.M[17](C+56,F);const H=await L.ioReader.readUint8(),M=await L.ioReader.readUint24();let G=await L.ioReader.readUint24();const D=await L.ioReader.readUint8();if(D&&(G|=D<<24),n.M[17](C+16,BigInt(Math.floor(G))),n.M[17](C+8,BigInt(Math.floor(G))),await L.ioReader.skip(3),H===8){let U=L.getStreamByMediaType(1);U&&n.M[15](C+32,U.index);const Q=await L.ioReader.readUint8();if(U)if(U.codecpar.codecId===86018){if(await L.ioReader.readUint8()===0){const N=M-2,_=(0,w.sY)(N);(0,k.Ow)(C,1,_,N),await L.ioReader.readBuffer(N,(0,A.JW)(_,N))}else await this.readAVPacketData(L,U,C,M-2);n.M[15](C+36,1|i.f[15](C+36))}else await this.readAVPacketData(L,U,C,M-1);else{U=L.createStream(),n.M[15](C+32,U.index),U.codecpar.codecType=1,U.timeBase.den=1e3,U.timeBase.num=1,U.startTime=i.f[17](C+8)||i.f[17](C+16),this.script.onMetaData.duration&&(U.duration=BigInt(Math.floor(1e3*this.script.onMetaData.duration))),U.codecpar.chLayout.nbChannels=1&~Q?1:2,U.codecpar.sampleRate=44100<<((12&Q)>>>2)>>3,U.codecpar.bitsPerCodedSample=2&Q?16:8;const N=(240&Q)>>4;if(U.codecpar.codecId=N===0||N===3?U.codecpar.bitsPerCodedSample===8?65541:65536:d.FJ[N],U.codecpar.codecId===86018){if(await L.ioReader.readUint8()===0){const _=M-2,O=(0,w.sY)(_);U.codecpar.extradata=O,U.codecpar.extradataSize=_,await L.ioReader.readBuffer(_,(0,A.JW)(O,_)),U.sideData[1]=(0,A.s3)(O,_).slice(),l.XC(U)}else await this.readAVPacketData(L,U,C,M-2);n.M[15](C+36,1|i.f[15](C+36))}else U.codecpar.codecId===86051?(U.codecpar.sampleRate=16e3,U.codecpar.chLayout.nbChannels=1,await this.readAVPacketData(L,U,C,M-1)):await this.readAVPacketData(L,U,C,M-1);this.onStreamAdd&&this.onStreamAdd(U)}}else{if(H!==9){if(H===18){let U=await this.script.read(L.ioReader,M);return U<0?U:await this.readAVPacket_(L,C)}return a.R8(`invalid tag type: ${H}, try to sync to next tag`,S,452),await this.syncTag(L),this.readAVPacket_(L,C)}{let U=L.getStreamByMediaType(0);U&&n.M[15](C+32,U.index);const Q=await L.ioReader.readUint8();if(U)if((112&Q)>>4==1&&n.M[15](C+36,1|i.f[15](C+36)),128&Q){await L.ioReader.skip(4);const N=15&Q;if(U.codecpar.codecId!==173&&U.codecpar.codecId!==196||n.M[15](C+80,1),N===0){const _=M-5,O=(0,w.sY)(_);(0,k.Ow)(C,1,O,_),await L.ioReader.readBuffer(_,(0,A.JW)(O,_))}else if(N===2)n.M[15](C+36,32|i.f[15](C+36));else if(N===1||N===3)if(N!==1||U.codecpar.codecId!==173&&U.codecpar.codecId!==196)await this.readAVPacketData(L,U,C,M-5);else{const _=await L.ioReader.readUint24();n.M[17](C+8,i.f[17](C+16)+BigInt(Math.floor(_))),await this.readAVPacketData(L,U,C,M-8)}}else if(U.codecpar.codecId===27||U.codecpar.codecId===173||U.codecpar.codecId===12){n.M[15](C+80,1);const N=await L.ioReader.readUint8(),_=await L.ioReader.readUint24();if(n.M[17](C+8,i.f[17](C+16)+BigInt(Math.floor(_))),N===0){const O=M-5,R=(0,w.sY)(O);(0,k.Ow)(C,1,R,O),await L.ioReader.readBuffer(O,(0,A.JW)(R,O))}else N===2?n.M[15](C+36,32|i.f[15](C+36)):await this.readAVPacketData(L,U,C,M-5)}else await this.readAVPacketData(L,U,C,M-1);else{if(U=L.createStream(),n.M[15](C+32,U.index),U.codecpar.codecType=0,U.timeBase.den=1e3,U.timeBase.num=1,U.startTime=i.f[17](C+8)||i.f[17](C+16),this.script.onMetaData.duration&&(U.duration=BigInt(Math.floor(1e3*this.script.onMetaData.duration))),this.script.onMetaData.width>0&&(U.codecpar.width=this.script.onMetaData.width),this.script.onMetaData.height>0&&(U.codecpar.height=this.script.onMetaData.height),(112&Q)>>4==1&&n.M[15](C+36,1|i.f[15](C+36)),128&Q){const N=await L.ioReader.readUint32();N===(0,T.A)("hvc1")&&(U.codecpar.codecId=173,n.M[15](C+80,1)),N===(0,T.A)("vvc1")?(U.codecpar.codecId=196,n.M[15](C+80,1)):N===(0,T.A)("av01")?U.codecpar.codecId=225:N===(0,T.A)("vp09")&&(U.codecpar.codecId=167);const _=15&Q;if(_===0)await this.readCodecConfigurationRecord(L,U,M-5);else if(_===2)n.M[15](C+36,32|i.f[15](C+36));else if(_===1||_===3)if(_!==1||U.codecpar.codecId!==173&&U.codecpar.codecId!==196)await this.readAVPacketData(L,U,C,M-5);else{const O=await L.ioReader.readUint24();n.M[17](C+8,i.f[17](C+16)+BigInt(Math.floor(O))),await this.readAVPacketData(L,U,C,M-8)}}else if(U.codecpar.codecId=d.U5[15&Q],U.codecpar.codecId===27||U.codecpar.codecId===173||U.codecpar.codecId===196||U.codecpar.codecId===12){n.M[15](C+80,1);const N=await L.ioReader.readUint8(),_=await L.ioReader.readUint24();n.M[17](C+8,i.f[17](C+16)+BigInt(Math.floor(_))),N===0?await this.readCodecConfigurationRecord(L,U,M-5):N===2?n.M[15](C+36,32|i.f[15](C+36)):await this.readAVPacketData(L,U,C,M-5)}else await this.readAVPacketData(L,U,C,M-1);this.onStreamAdd&&this.onStreamAdd(U)}}}const W=L.ioReader.getPos()-F,X=BigInt(Math.floor(await L.ioReader.readUint32()));return W!==X?(a.R8(`tag ${H} size not match, size: ${W}, previousTagSize: ${X}`,S,461),v.LR):0}async readAVPacket(L,C){try{return n.M[15](C+76,1e3),n.M[15](C+72,1),await this.readAVPacket_(L,C)}catch(F){return L.ioReader.error!==-1048576&&a.z3(F.message,S,477),L.ioReader.error}}async syncTag(L){let C=b.Dh;for(;;)try{const F=await L.ioReader.readUint8();if(F===8||F===9){C=L.ioReader.getPos()-BigInt(1);const H=await L.ioReader.readUint24();if(H>10485760){await L.ioReader.seek(C+BigInt(1));continue}if(await L.ioReader.skip(7+H),L.ioReader.getPos()-C!==BigInt(Math.floor(await L.ioReader.readUint32()))){await L.ioReader.seek(C+BigInt(1)),C=b.Dh;continue}{let M=0;for(;M<=3;){const G=L.ioReader.getPos(),D=await L.ioReader.readUint8();if(D!==8&&D!==9&&D!==18)break;{const W=await L.ioReader.readUint24();if(await L.ioReader.skip(7+W),L.ioReader.getPos()-G!==BigInt(Math.floor(await L.ioReader.readUint32())))break;M++}}if(!(M<3))break;await L.ioReader.seek(C+BigInt(1)),C=b.Dh}}}catch{break}C!==b.Dh&&await L.ioReader.seek(C)}async seek(L,C,F,H){const M=L.ioReader.getPos();if(2&H)return await L.ioReader.seek(F),4&H||await this.syncTag(L),M;if(C&&C.sampleIndexes.length){let G=x.El(C.sampleIndexes,D=>D.pts>F?-1:1);if(G>0&&(0,P.k)(F-C.sampleIndexes[G-1].pts,C.timeBase,b.i0)<BigInt(1e4))return a.Yz(`seek in sampleIndexes, found index: ${G}, pts: ${C.sampleIndexes[G-1].pts}, pos: ${C.sampleIndexes[G-1].pos}`,S,575),await L.ioReader.seek(C.sampleIndexes[G-1].pos),M}if(this.script.canSeek()){const{pos:G,dts:D}=this.script.dts2Position(Number((0,P.k)(F,C.timeBase,b.i0)/BigInt(1e3)));if(G>0){a.Yz(`seek in filepositions, found pts: ${D}, pos: ${G}`,S,584),await L.ioReader.seek(BigInt(Math.floor(G)));const W=await L.ioReader.peekUint8();return W!==8&&W!==9&&W!==18&&await this.syncTag(L),M}}return a.Yz("not found any keyframe index, try to seek in bytes",S,594),(0,I.A)(L,C,F,this.firstTagPos,this.readAVPacket.bind(this),this.syncTag.bind(this))}getAnalyzeStreamsCount(){let L=0;return this.header.hasAudio&&L++,this.header.hasVideo&&L++,L}}},85947:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(134);class i{constructor(){(0,e.A)(this,"type",-1),(0,e.A)(this,"onStreamAdd",void 0)}destroy(s){}}},16634:(g,p,t)=>{t.d(p,{A:()=>v});var e=t(134),i=t(63939),n=t(50932),s=t(4624),r=t(9705),a=t(85947),d=t(14686),c=t(37837),l=t(71517),h=t(77231),o="src\\avformat\\formats\\IIvfFormat.ts";const u={VP80:139,VP90:167};class f{constructor(){(0,e.A)(this,"version",void 0),(0,e.A)(this,"length",void 0),(0,e.A)(this,"codec",void 0),(0,e.A)(this,"width",void 0),(0,e.A)(this,"height",void 0),(0,e.A)(this,"denominator",void 0),(0,e.A)(this,"numerator",void 0),(0,e.A)(this,"framesCount",void 0),this.version=0,this.length=32,this.codec="VP80",this.width=0,this.height=0,this.framesCount=0,this.denominator=1,this.numerator=0}}class v extends a.A{constructor(){super(),(0,e.A)(this,"type",4),(0,e.A)(this,"header",void 0),this.header=new f}init(A){A.ioReader&&A.ioReader.setEndian(!1)}async readHeader(A){try{if(await A.ioReader.readString(4)!=="DKIF")return s.z3("the file format is not ivf",o,104),r.LR;this.header.version=await A.ioReader.readUint16(),await A.ioReader.skip(2),this.header.codec=await A.ioReader.readString(4),this.header.width=await A.ioReader.readUint16(),this.header.height=await A.ioReader.readUint16(),this.header.denominator=await A.ioReader.readUint32(),this.header.numerator=await A.ioReader.readUint32(),this.header.framesCount=await A.ioReader.readUint32(),await A.ioReader.skip(4);const w=A.createStream();return w.codecpar.codecType=0,w.codecpar.codecId=u[this.header.codec],w.timeBase.den=this.header.denominator,w.timeBase.num=this.header.numerator,w.codecpar.width=this.header.width,w.codecpar.height=this.header.height,w.nbFrames=BigInt(Math.floor(this.header.framesCount)),this.onStreamAdd&&this.onStreamAdd(w),0}catch(w){return s.z3(w.message,o,136),A.ioReader.error}}async readAVPacket(A,w){try{const k=A.getStreamByMediaType(0);if(!k)return r.LR;{const T=A.ioReader.getPos(),P=await A.ioReader.readUint32(),b=await A.ioReader.readUint64(),x=(0,c.sY)(P);(0,l.NX)(w,x,P),await A.ioReader.readBuffer(P,(0,d.JW)(x,P)),n.M[17](w+56,T),n.M[17](w+8,b),n.M[17](w+16,b),n.M[15](w+76,this.header.denominator),n.M[15](w+72,this.header.numerator),n.M[15](w+32,k.index),k.startTime===h.Dh&&(k.startTime=i.f[17](w+8)||i.f[17](w+16))}return 0}catch(k){return A.ioReader.error!==-1048576&&s.z3(k.message,o,173),A.ioReader.error}}async seek(A,w,k,T){return BigInt(r.E$)}getAnalyzeStreamsCount(){return 1}}},34577:(g,p,t)=>{t.d(p,{A:()=>W});var e=t(134),i=t(80662),n=t.n(i),s=t(97860),r=t.n(s),a=t(14686),d=t(61499),c=t(63939),l=t(50932),h=t(4624),o=t(9705),u=t(85947),f=t(37837),v=t(71517),y=t(77231),A=t(31866),w=t(33919),k=t(72739),T=t(20620),P=t(53e3),b=t(55611),x=t(14392),I=t(58919),S=t(90412),z=t(89088),V=t(65451),L=t(58469),C=t(44328),F=t(31865),H=t(93082),M=t(5783),G=t(82774),D="src\\avformat\\formats\\IMatroskaFormat.ts";class W extends u.A{constructor(){super(),(0,e.A)(this,"type",5),(0,e.A)(this,"context",void 0),(0,e.A)(this,"blockReader",void 0)}init(U){U.ioReader&&U.ioReader.setEndian(!0);const Q={isLive:!0,firstCluster:-BigInt(1),segmentStart:-BigInt(1),header:{version:0,readVersion:0,maxIdLength:4,maxSizeLength:8,docType:"",docTypeVersion:0,docTypeReadVersion:0},seekHead:null,info:null,tracks:null,attachments:null,chapters:null,cues:null,tags:null,currentCluster:{timeCode:BigInt(0),pos:-BigInt(1),block:{pos:-BigInt(1),size:-BigInt(1)},blockGroup:{block:null}},clusterIndexes:[],clusterIndexesPosMap:new(n())};U.privateData=this.context=Q}analyzeStreams(U){const Q=this.context.header.docType==="webm"?A.N:A.e;this.context.tracks&&k.__(this.context.tracks.entry,N=>{var _;const O=U.createStream();switch(O.privData=N,O.codecpar.codecId=Q[N.codecId],N.type){case 2:O.codecpar.codecType=1;break;case 1:O.codecpar.codecType=0;break;case 17:O.codecpar.codecType=3;break;default:O.codecpar.codecType=-1}if(N.audio?(N.codecName==="A_PCM/FLOAT/IEEE"?N.audio.bitDepth===64?O.codecpar.codecId=65559:N.audio.bitDepth===32&&(O.codecpar.codecId=65557):N.codecName==="A_PCM/INT/BIG"?N.audio.bitDepth===16?O.codecpar.codecId=65537:N.audio.bitDepth===24?O.codecpar.codecId=65549:N.audio.bitDepth===32&&(O.codecpar.codecId=65545):N.codecName==="A_PCM/INT/LIT"&&(N.audio.bitDepth===8?O.codecpar.codecId=65541:N.audio.bitDepth===16?O.codecpar.codecId=65536:N.audio.bitDepth===24?O.codecpar.codecId=65548:N.audio.bitDepth===32&&(O.codecpar.codecId=65544)),O.codecpar.chLayout.nbChannels=N.audio.channels,O.codecpar.sampleRate=0|N.audio.sampleRate,O.codecpar.bitsPerCodedSample=N.audio.bitDepth):N.video&&(O.codecpar.width=N.video.pixelWidth,O.codecpar.height=N.video.pixelHeight,N.video.color&&(O.codecpar.colorPrimaries=N.video.color.primaries,O.codecpar.colorTrc=N.video.color.transferCharacteristics,O.codecpar.colorRange=N.video.color.range,O.codecpar.colorSpace=N.video.color.matrixCoefficients)),(_=N.codecPrivate)!==null&&_!==void 0&&_.data)if(O.codecpar.extradataSize=0|Number(0xffffffffn&N.codecPrivate.size),O.codecpar.extradata=(0,f.sY)(O.codecpar.extradataSize),(0,a.lW)(O.codecpar.extradata,O.codecpar.extradataSize,N.codecPrivate.data),O.codecpar.extradata)switch(O.codecpar.codecId){case 27:T.XC(O,(0,a.s3)(O.codecpar.extradata,O.codecpar.extradataSize));break;case 173:P.XC(O,(0,a.s3)(O.codecpar.extradata,O.codecpar.extradataSize));break;case 196:b.XC(O,(0,a.s3)(O.codecpar.extradata,O.codecpar.extradataSize));break;case 225:S.XC(O,(0,a.s3)(O.codecpar.extradata,O.codecpar.extradataSize));break;case 139:x.X(O,(0,a.s3)(O.codecpar.extradata,O.codecpar.extradataSize));break;case 167:I.X(O,(0,a.s3)(O.codecpar.extradata,O.codecpar.extradataSize));break;case 86018:L.XC(O,(0,a.s3)(O.codecpar.extradata,O.codecpar.extradataSize));break;case 86017:z.XC(O,(0,a.s3)(O.codecpar.extradata,O.codecpar.extradataSize));break;case 86076:V.XC(O,(0,a.s3)(O.codecpar.extradata,O.codecpar.extradataSize))}else{let R;O.codecpar.codecId===86018&&(R=L.Ij(O.codecpar)),R&&(O.codecpar.extradataSize=R.length,O.codecpar.extradata=(0,f.sY)(O.codecpar.extradataSize),(0,a.lW)(O.codecpar.extradata,O.codecpar.extradataSize,R))}this.context.info&&(O.timeBase.num=1,this.context.info.timestampScale?O.timeBase.den=1e3*y.SF/this.context.info.timestampScale|0:O.timeBase.den=1e3,this.context.info.duration&&(O.duration=BigInt(Math.floor(this.context.info.duration))))}),this.context.attachments&&k.__(this.context.attachments.entry,N=>{const _=U.createStream();_.codecpar.codecType=4,_.privData=N,N.data&&(_.codecpar.extradataSize=0|Number(0xffffffffn&N.data.size),_.codecpar.extradata=(0,f.sY)(_.codecpar.extradataSize),(0,a.lW)(_.codecpar.extradata,_.codecpar.extradataSize,N.data.data))}),this.context.tags&&k.__(this.context.tags.entry,N=>{var _;if(((_=N.tag)===null||_===void 0?void 0:_.name)==="DURATION"){let O=N.tag.string.replaceAll("\0","").split("."),R=O[0].split(":"),j=BigInt(+R[0])*BigInt(36e8)+BigInt(+R[1])*BigInt(6e7)+BigInt(+R[2])*BigInt(1e6)+BigInt(+O[1])/BigInt(1e3);const B=(0,H.A)(U.streams,N.target.trackUid);B&&(B.duration=(0,C.k)(j,y.KR,B.timeBase))}})}async readHeader(U){if(await(0,w.aL)(U,this.context.header.maxIdLength)!==440786851)return h.z3("not matroska format",D,295),o.LR;const Q=await(0,w.Qb)(U.ioReader,this.context.header.maxSizeLength);if(this.context.header=await(0,w.Pb)(U,Q,w.jt),await(0,w.aL)(U,this.context.header.maxIdLength)!==408125543)return h.z3("not matroska format",D,304),o.LR;const N=await(0,w.Qb)(U.ioReader,this.context.header.maxSizeLength);this.context.segmentStart=U.ioReader.getPos();const _=U.ioReader.getPos()+N,O=new(r());for(;U.ioReader.getPos()<_;){const R=U.ioReader.getPos(),j=await(0,w.aL)(U,this.context.header.maxIdLength),B=await(0,w.Qb)(U.ioReader,this.context.header.maxSizeLength);if(j===290298740)this.context.isLive=!1,this.context.seekHead=await(0,w.Pb)(U,B,w.Cr);else if(j===475249515)this.context.isLive=!1,this.context.cues=await(0,w.Pb)(U,B,w.eG);else if(j===272869232)this.context.isLive=!1,this.context.chapters=await(0,w.Pb)(U,B,w.Y0);else if(j===357149030)this.context.info=await(0,w.Pb)(U,B,w.qi);else if(j===307544935)this.context.tags=await(0,w.Pb)(U,B,w.hK);else if(j===423732329)this.context.attachments=await(0,w.Pb)(U,B,w.qp);else if(j===374648427)this.context.tracks=await(0,w.Pb)(U,B,w.Wy);else if(j===524531317){if(this.context.firstCluster=R,this.context.isLive||!this.context.seekHead||!(1&U.ioReader.flags))break;const Y=this.context.seekHead.entry;let Z=0;for(;Z<Y.length;Z++)if(!O.has(Y[Z].id)){await U.ioReader.seek(Y[Z].pos+this.context.segmentStart);break}if(Z===Y.length)break}else await U.ioReader.skip(0|Number(0xffffffffn&B));O.add(j)}return await U.ioReader.seek(this.context.firstCluster),this.analyzeStreams(U),0}parseAdditions(U,Q){for(let _=0;_<Q.entry.length;_++){var N;const O=Q.entry[_];if((N=O.additional)!==null&&N!==void 0&&N.size){O.additionalId===4&&h.R8("ITU_T_T35 not support now",D,379);const R=(0,f.sY)(O.additional.data.length+8);G.Cv(R,BigInt(O.additionalId>>>0)),(0,a.lW)(R+8,O.additional.data.length,O.additional.data),(0,v.Ow)(U,15,R,O.additional.data.length+8)}}}async parseBlock(U,Q){var N,_;const O=((N=this.context.currentCluster.block)===null||N===void 0?void 0:N.data)||this.context.currentCluster.blockGroup.block.data;let R=(_=this.context.currentCluster.block)===null||_===void 0?void 0:_.pos;R<0&&(R=this.context.currentCluster.blockGroup.block.pos);let j,B=!1;this.context.currentCluster.blockGroup&&(j=this.context.currentCluster.blockGroup.additions,B=!this.context.currentCluster.blockGroup.reference||this.context.currentCluster.blockGroup.reference.length===0),this.blockReader?this.blockReader.resetBuffer(O):this.blockReader=new F.A(O);const Y=this.blockReader.getPos(),Z=await(0,w.Ag)(this.blockReader,4),rt=(0,M.A)(U.streams,Z);if(!rt)return;const ot=this.blockReader.readInt16(),ft=this.blockReader.readUint8();128&ft&&(B=!0);let ut=0,At=[];switch(ft>>>1&3){case 1:{ut=this.blockReader.readUint8()+1;let at=0;for(let ct=0;ct<ut-1;ct++){let mt=0;for(;;){const It=this.blockReader.readUint8();if(It===0)break;if(It!==255){mt+=It;break}mt+=255}At.push(mt)}At.push(O.length-(0|Number(this.blockReader.getPos()-Y&0xffffffffn))-at);break}case 2:{ut=this.blockReader.readUint8()+1;let at=0,ct=0;for(let mt=0;mt<ut-1;mt++){const It=await(0,w.Ag)(this.blockReader,4);let bt=0;bt=ct?ct+It:It,at+=bt,ct=bt,At.push(bt)}At.push(O.length-(0|Number(this.blockReader.getPos()-Y&0xffffffffn))-at);break}case 3:ut=this.blockReader.readUint8()+1,At.fill(O.length-(0|Number(this.blockReader.getPos()-Y&0xffffffffn))/ut,0,ut);break;case 0:ut=1,At.push(O.length-(0|Number(this.blockReader.getPos()-Y&0xffffffffn)))}const vt=rt.privData,et=vt.timeScale||1;let st=(this.context.currentCluster.timeCode+BigInt(Math.floor(ot*et)))*BigInt(this.context.info.timestampScale>>>0);vt.codecDelay&&(st-=vt.codecDelay),st/=BigInt(1e3),st=(0,C.k)(st,y.KR,rt.timeBase);for(let at=0;at<ut;at++){const ct=at!==0?(0,v._5)():Q;l.M[17](ct+56,R+this.blockReader.getPos()),l.M[15](ct+32,rt.index),(0,a.Mr)(ct+72,rt.timeBase[d.o9],8),l.M[17](ct+8,st),l.M[15](ct+28,At[at]);const mt=(0,f.sY)(At[at]);(0,a.lW)(mt,At[at],this.blockReader.readBuffer(At[at])),(0,v.NX)(ct,mt,At[at]),B?(l.M[15](ct+36,1|c.f[15](ct+36)),vt.gopCount&&(vt.dtsDelta=(vt.maxPts-vt.minPts)/BigInt(vt.gopCount>>>0)),vt.gopCount=1,vt.minPts=st,vt.maxPts=st):(vt.gopCount++,vt.dtsDelta||(vt.dtsDelta=(0,C.k)(BigInt(33),y.i0,rt.timeBase))),st>vt.maxPts&&(vt.maxPts=st),rt.codecpar.codecType===1||B?l.M[17](ct+16,st):vt.dtsDelta?l.M[17](ct+16,vt.currentDts+vt.dtsDelta):l.M[17](ct+16,BigInt(0)),vt.currentDts=c.f[17](ct+16),j&&this.parseAdditions(ct,j),at!==0&&U.interval.packetBuffer.push(ct)}}addClusterIndex(U){if(this.context.clusterIndexesPosMap.has(U.pos))return;const Q=k.El(this.context.clusterIndexes,N=>N.time<U.time?1:-1);Q>-1?(this.context.clusterIndexesPosMap.set(U.pos,Q),this.context.clusterIndexes.splice(Q,0,U)):(this.context.clusterIndexesPosMap.set(U.pos,this.context.clusterIndexes.length),this.context.clusterIndexes.push(U))}async readAVPacket_(U,Q){const N=U.ioReader.getPos(),_=await(0,w.aL)(U,this.context.header.maxIdLength),O=await(0,w.Qb)(U.ioReader,this.context.header.maxSizeLength);if(_===524531317)this.context.currentCluster.pos=N,this.context.currentCluster.timeCode=BigInt(0),await(0,w.Pb)(U,O,w.GZ,this.context.currentCluster,[163,160]),this.addClusterIndex({time:this.context.currentCluster.timeCode,pos:N}),await this.parseBlock(U,Q);else if(_===163)this.context.currentCluster.block={pos:U.ioReader.getPos(),size:O,data:await U.ioReader.readBuffer(0|Number(0xffffffffn&O))},await this.parseBlock(U,Q);else{if(_!==160)return _===475249515||_===307544935||_===423732329||_===272869232||_===357149030||_===374648427||_===290298740?(await U.ioReader.skip(0|Number(0xffffffffn&O)),this.readAVPacket_(U,Q)):(await this.syncTopLevelElement(U),this.readAVPacket_(U,Q));await(0,w.Pb)(U,O,w.Wg,this.context.currentCluster.blockGroup),await this.parseBlock(U,Q),this.context.currentCluster.blockGroup={block:null}}return 0}async readAVPacket(U,Q){try{return await this.readAVPacket_(U,Q)}catch(N){return U.ioReader.error!==-1048576&&h.z3(N.message,D,655),U.ioReader.error}}async syncTopLevelElement(U){let Q=y.Dh;for(;;)try{const N=U.ioReader.getPos(),_=await(0,w.aL)(U,this.context.header.maxIdLength),O=await(0,w.Qb)(U.ioReader,this.context.header.maxSizeLength);if(_===524531317||_===475249515||_===307544935||_===423732329||_===272869232||_===357149030||_===374648427||_===290298740){Q=N;let R=0;for(await U.ioReader.skip(0|Number(0xffffffffn&O));R<=3;){const j=await(0,w.aL)(U,this.context.header.maxIdLength),B=await(0,w.Qb)(U.ioReader,this.context.header.maxSizeLength);if(j!==524531317&&j!==475249515&&j!==307544935&&j!==423732329&&j!==272869232&&j!==357149030&&j!==374648427&&j!==290298740)break;R++,await U.ioReader.skip(0|Number(0xffffffffn&B))}if(!(R<3))break;await U.ioReader.seek(Q+BigInt(1)),Q=y.Dh}else await U.ioReader.seek(N+BigInt(1)),Q=y.Dh}catch{break}Q!==y.Dh&&await U.ioReader.seek(Q)}async seek(U,Q,N,_){var O;const R=U.ioReader.getPos(),j=(0,C.k)(N,Q.timeBase,y.KR);let B=y.Dh;if((O=this.context.cues)!==null&&O!==void 0&&O.entry.length){const Y=Q.privData;for(let Z=0;Z<this.context.cues.entry.length;Z++)if((this.context.cues.entry[Z].time||BigInt(0))*BigInt(this.context.info.timestampScale>>>0)/BigInt(1e3)>j){const rt=this.context.cues.entry[Math.max(Z-1,0)].pos;if(rt.length===1)B=rt[0].pos+this.context.segmentStart;else if(rt.length>1){const ot=rt.find(ft=>ft.track===Y.number);B=ot?ot.pos+this.context.segmentStart:rt[0].pos+this.context.segmentStart}break}}if(B===y.Dh&&this.context.clusterIndexes.length){for(let Y=0;Y<this.context.clusterIndexes.length;Y++)if(this.context.clusterIndexes[Y].time*BigInt(this.context.info.timestampScale>>>0)/BigInt(1e3)>j){B=this.context.clusterIndexes[Math.max(Y-1,0)].pos;break}}return B!==y.Dh?(await U.ioReader.seek(B),R):BigInt(o.E$)}getAnalyzeStreamsCount(){var U,Q;return(U=(Q=this.context.tracks)===null||Q===void 0?void 0:Q.entry.length)!==null&&U!==void 0?U:2}}},92047:(g,p,t)=>{t.d(p,{A:()=>k});var e=t(134),i=t(63939),n=t(50932),s=t(4624),r=t(9705),a=t(65977),d=t(74963),c=t(85947),l=t(85428),h=t(9690),o=t(72739),u=t(14686),f=t(37837),v=t(71517),y=t(44328),A=t(77231),w="src\\avformat\\formats\\IMovFormat.ts";class k extends c.A{constructor(P={}){super(),(0,e.A)(this,"type",1),(0,e.A)(this,"context",void 0),(0,e.A)(this,"options",void 0),this.options=P,this.context=(0,h.A)()}init(P){P.ioReader&&P.ioReader.setEndian(!0)}async readHeader(P){try{let b=0,x=await P.ioReader.readUint32(),I=await P.ioReader.readUint32();if(I!==(0,a.A)("ftyp"))return s.z3("the file format is not mp4",w,82),r.LR;await d.E6(P.ioReader,this.context,{type:I,size:x-8});let S=BigInt(0);for(;!this.context.foundMoov;){const z=P.ioReader.getPos();if(x=await P.ioReader.readUint32(),I=await P.ioReader.readUint32(),x<8)return s.z3(`invalid box size ${x}`,w,99),r.LR;I===(0,a.A)("mdat")?(this.context.foundMdat||(S=z),this.context.foundMdat=!0,await P.ioReader.seek(z+BigInt(Math.floor(x)))):I===(0,a.A)("moov")?(await d.wB(P.ioReader,P,this.context,{size:x-8,type:I}),this.context.foundMoov=!0):await P.ioReader.seek(z+BigInt(Math.floor(x)))}if(!this.context.fragment&&!this.context.foundMdat){const z=await P.ioReader.peekUint64()>>BigInt(32);Number(z)===(0,a.A)("moof")&&(this.context.fragment=!0)}if(this.context.fragment&&1&P.ioReader.flags){const z=P.ioReader.getPos(),V=await P.ioReader.fileSize();if(V>BigInt(16)){await P.ioReader.seek(V-BigInt(12));let L=await P.ioReader.readUint32();if(L===(0,a.A)("mfro")){await P.ioReader.skip(4);const C=await P.ioReader.readUint32();await P.ioReader.seek(V-BigInt(Math.floor(C)));const F=await P.ioReader.readUint32();L=await P.ioReader.readUint32(),L===(0,a.A)("mfra")&&await d.t9(P.ioReader,P,this.context,{size:F-8,type:L})}await P.ioReader.seek(z)}}return!this.context.fragment&&this.context.foundMdat&&await P.ioReader.seek(S),b}catch(b){return s.z3(b.message,w,161),this.context.foundMoov||s.z3("moov not found",w,164),P.ioReader.error}}async readAVPacket_(P,b){const{sample:x,stream:I}=(0,l.G)(P,this.context);if(!x)return-1048576;{n.M[15](b+32,I.index),n.M[17](b+16,x.dts),n.M[17](b+8,x.pts),n.M[17](b+48,BigInt(Math.floor(x.duration))),n.M[15](b+36,i.f[15](b+36)|x.flags),n.M[17](b+56,x.pos),n.M[15](b+76,I.timeBase.den),n.M[15](b+72,I.timeBase.num),I.startTime===A.Dh&&(I.startTime=i.f[17](b+8)||i.f[17](b+16)),await P.ioReader.seek(i.f[17](b+56));const S=x.size,z=(0,f.sY)(S);if((0,v.NX)(b,z,S),await P.ioReader.readBuffer(S,(0,u.JW)(z,S)),I.codecpar.codecId!==27&&I.codecpar.codecId!==173&&I.codecpar.codecId!==196||n.M[15](b+80,1),I.sideData[1]){const V=I.sideData[1].length,L=(0,f.sY)(V);(0,v.Ow)(b,1,L,V),(0,u.lW)(L,V,I.sideData[1]),delete I.sideData[1]}}return 0}async readAVPacket(P,b){try{if(this.context.fragment&&!this.context.currentFragment)for(;!this.context.currentFragment;){const x=P.ioReader.getPos(),I=await P.ioReader.readUint32(),S=await P.ioReader.readUint32();S===(0,a.A)("moof")?(this.context.currentFragment={pos:x,size:I,sequence:0,tracks:[],currentTrack:null},await d.wZ(P.ioReader,P,this.context,{type:S,size:I-8})):S===(0,a.A)("moov")?await d.wB(P.ioReader,P,this.context,{size:I-8,type:S}):await P.ioReader.skip(I-8)}return await this.readAVPacket_(P,b)}catch(x){return P.ioReader.error!==-1048576&&s.z3(x.message,w,262),P.ioReader.error}}async seek(P,b,x,I){const S=x,z=b.privData;if(16&I&&this.context.fragment){const L=(0,y.k)(x,b.timeBase,A.i0);return await P.ioReader.seek(L,!0),this.context.currentFragment=null,BigInt(0)}if(this.context.fragment){if(z.fragIndexes.length){let L=o.El(z.fragIndexes,C=>C.time>S?-1:C.time===S?0:1);if(L>-1)return await P.ioReader.seek(z.fragIndexes[L].pos,!0),this.context.currentFragment=null,BigInt(0)}return BigInt(r.E$)}let V=o.El(z.samplesIndex,L=>L.pts>S?-1:L.pts===S?0:1);if(V>-1&&b.codecpar.codecType===0){let L=V;for(;L>=0;L--)if(1&z.samplesIndex[L].flags){V=L;break}L<0&&(V=-1)}return V>-1?(z.currentSample=V,z.sampleEnd=!1,o.__(P.streams,L=>{if(L!==b){const C=L.privData;let F=!1,H=(0,y.k)(z.samplesIndex[z.currentSample].pts,b.timeBase,L.timeBase);o.__(C.samplesIndex,(M,G)=>{if(M.pts>=H)return C.currentSample=G,F=!0,!1}),F?C.sampleEnd=!1:(C.sampleEnd=!0,C.currentSample=C.samplesIndex.length)}}),BigInt(0)):BigInt(r.LR)}getAnalyzeStreamsCount(){return 0}}},6839:(g,p,t)=>{t.d(p,{A:()=>P});var e=t(134),i=t(14686),n=t(61499),s=t(63939),r=t(50932),a=t(4624),d=t(85947),c=t(37837),l=t(71517),h=t(77231),o=t(50011),u=t(89088),f=t(44328),v=t(31608),y=t(43607),A=t(72739),w=t(19028),k=t(75294),T="src\\avformat\\formats\\IMp3Format.ts";class P extends d.A{constructor(){super(),(0,e.A)(this,"type",7),(0,e.A)(this,"context",void 0)}init(x){x.ioReader&&x.ioReader.setEndian(!0),this.context={firstFramePos:h.Dh,isVBR:!1,hasID3v1:!1,id3v2:{version:h.N_,revision:h.N_,flags:h.N_},fileSize:BigInt(0)}}async readHeader(x){const I=x.createStream();I.codecpar.codecId=86017,I.codecpar.codecType=1,I.startTime=BigInt(0),I.firstDTS=BigInt(0);const S={frameHeader:new k.Vz,nbFrame:BigInt(0),tocIndexes:[],nextDTS:BigInt(0),frameLength:0};I.privData=S;const z=I.metadata={},V=await x.ioReader.fileSize();if(1&x.ioReader.flags&&V>v.c1&&(await x.ioReader.seek(V-BigInt(v.c1)),await x.ioReader.readString(3)==="TAG")){let G=await x.ioReader.readBuffer(30);z.title=o.D(G).replace(/\s/g,""),G=await x.ioReader.readBuffer(30),z.artist=o.D(G).replace(/\s/g,""),G=await x.ioReader.readBuffer(30),z.album=o.D(G).replace(/\s/g,""),G=await x.ioReader.readBuffer(4),z.date=o.D(G).replace(/\s/g,""),G=await x.ioReader.readBuffer(30),z.comment=o.D(G).replace(/\s/g,""),G[28]===0&&G[29]!==0&&(z.track=G[29]+""),z.genre=await x.ioReader.readUint8(),this.context.hasID3v1=!0}if(await x.ioReader.seek(BigInt(0)),await x.ioReader.peekString(3)==="ID3"){await x.ioReader.skip(3),this.context.id3v2.version=await x.ioReader.readUint8(),this.context.id3v2.revision=await x.ioReader.readUint8(),this.context.id3v2.flags=await x.ioReader.readUint8();const G=(127&await x.ioReader.readUint8())<<21|(127&await x.ioReader.readUint8())<<14|(127&await x.ioReader.readUint8())<<7|127&await x.ioReader.readUint8();await w.q(x.ioReader,G,this.context.id3v2,z)}for(this.context.firstFramePos=x.ioReader.getPos();65504&~await x.ioReader.peekUint16();)await x.ioReader.skip(1);this.context.firstFramePos!==x.ioReader.getPos()&&(a.R8(`skipping ${x.ioReader.getPos()-this.context.firstFramePos} bytes of junk at ${this.context.firstFramePos}`,T,170),this.context.firstFramePos=x.ioReader.getPos()),I.codecpar.extradataSize=4,I.codecpar.extradata=(0,c.sY)(I.codecpar.extradataSize),await x.ioReader.peekBuffer(I.codecpar.extradataSize,(0,i.JW)(I.codecpar.extradata,I.codecpar.extradataSize)),k.qg(S.frameHeader,await x.ioReader.readUint32()),I.codecpar.profile=u.Au(S.frameHeader.layer),I.codecpar.frameSize=u.hG(S.frameHeader.version,S.frameHeader.layer),I.codecpar.sampleRate=u.Y2(S.frameHeader.version,S.frameHeader.samplingFrequency),I.timeBase.num=1,I.timeBase.den=I.codecpar.sampleRate;const L=S.frameHeader.mode===3?1:2;I.codecpar.chLayout.nbChannels=L;const C=BigInt(Math.floor(u.oz(S.frameHeader.version,S.frameHeader.layer,S.frameHeader.bitrateIndex))),F=k.CM(S.frameHeader,I.codecpar.sampleRate),H=x.ioReader.getPos();await x.ioReader.skip([[0,9,17],[0,0,0],[0,9,17],[0,17,32]][S.frameHeader.version][I.codecpar.chLayout.nbChannels]);const M=await x.ioReader.readString(4);if(M==="Xing"||M==="Info"){this.context.isVBR=!0;const G=await x.ioReader.readUint32();1&G&&(S.nbFrame=BigInt(Math.floor(await x.ioReader.readUint32()))),2&G&&(this.context.fileSize=BigInt(Math.floor(await x.ioReader.readUint32())));const D=V>=H?V-H:BigInt(0);if(D&&this.context.fileSize){const W=y.jk(D,this.context.fileSize),X=y.T9(D,this.context.fileSize)-W;D>this.context.fileSize&&X>W>>BigInt(4)?(S.nbFrame=BigInt(0),a.R8("invalid concatenated file detected - using bitrate for duration",T,223)):X>W>>BigInt(4)&&a.R8("filesize and duration do not match (growing file?)",T,226)}if(I.duration=S.nbFrame*BigInt(I.codecpar.frameSize>>>0),4&G)for(let W=0;W<v.W8;W++){const X=await x.ioReader.readUint8(),U=this.context.fileSize*BigInt(Math.floor(X))/BigInt(256),Q={dts:I.duration/BigInt(v.W8)*BigInt(Math.floor(W)),pos:U};S.tocIndexes.push(Q)}8&G&&await x.ioReader.skip(4),z.encoder=await x.ioReader.readString(9),this.context.firstFramePos+=BigInt(Math.floor(F))}else await x.ioReader.seek(H),await x.ioReader.readString(4)==="VBRI"?(await x.ioReader.readUint16()===1&&(await x.ioReader.skip(4),this.context.fileSize=BigInt(Math.floor(await x.ioReader.readUint32())),S.nbFrame=BigInt(Math.floor(await x.ioReader.readUint32())),I.duration=S.nbFrame*BigInt(I.codecpar.frameSize>>>0)),this.context.firstFramePos+=BigInt(Math.floor(F))):(this.context.isVBR=!1,I.codecpar.bitRate=C*BigInt(1e3),S.nbFrame=(V-this.context.firstFramePos-BigInt(v.c1))/BigInt(Math.floor(F)),I.duration=S.nbFrame*BigInt(I.codecpar.frameSize>>>0),S.frameLength=F,this.context.fileSize=V);for(await x.ioReader.seek(this.context.firstFramePos);65504&~await x.ioReader.peekUint16();)await x.ioReader.skip(1);if(this.context.firstFramePos!==x.ioReader.getPos()&&(a.R8(`skipping ${x.ioReader.getPos()-this.context.firstFramePos} bytes of junk at ${this.context.firstFramePos}`,T,286),this.context.firstFramePos=x.ioReader.getPos()),S.tocIndexes.length)for(let G=0;G<v.W8;G++)S.tocIndexes[G].pos+=this.context.firstFramePos;return 0}async readAVPacket(x,I){const S=x.getStreamByMediaType(1),z=S.privData,V=x.ioReader.getPos();if(this.context.hasID3v1&&V>=this.context.fileSize-BigInt(v.c1))return-1048576;try{k.qg(z.frameHeader,await x.ioReader.peekUint32());let L=this.context.isVBR?k.CM(z.frameHeader,S.codecpar.sampleRate):z.frameLength;r.M[15](I+28,L),r.M[17](I+56,V),r.M[15](I+32,S.index),(0,i.Mr)(I+72,S.timeBase[n.o9],8),r.M[17](I+48,BigInt(S.codecpar.frameSize>>>0)),r.M[17](I+16,z.nextDTS),r.M[17](I+8,z.nextDTS),r.M[15](I+36,1|s.f[15](I+36)),z.nextDTS+=BigInt(S.codecpar.frameSize>>>0);const C=(0,c.sY)(L);return(0,l.NX)(I,C,L),await x.ioReader.readBuffer(L,(0,i.JW)(C,L)),0}catch(L){return x.ioReader.error!==-1048576&&a.z3(L.message,T,333),x.ioReader.error}}async syncToFrame(x){let I=h.Dh;const S=x.getStreamByMediaType(1),z=S.privData;for(;;)try{if(!(65504&~await x.ioReader.peekUint16())){I=x.ioReader.getPos(),k.qg(z.frameHeader,await x.ioReader.peekUint32());let V=this.context.isVBR?k.CM(z.frameHeader,S.codecpar.sampleRate):z.frameLength;if(V>512e3){await x.ioReader.skip(1);continue}await x.ioReader.skip(V);let L=0;for(;L<=3&&!(65504&~await x.ioReader.peekUint16());){k.qg(z.frameHeader,await x.ioReader.peekUint32());let C=this.context.isVBR?k.CM(z.frameHeader,S.codecpar.sampleRate):z.frameLength;await x.ioReader.skip(C),L++}if(!(L<3))break;await x.ioReader.seek(I+BigInt(1)),I=h.Dh}await x.ioReader.skip(1)}catch{break}I!==h.Dh&&await x.ioReader.seek(I)}async seek(x,I,S,z){const V=x.ioReader.getPos(),L=I.privData;if(I.sampleIndexes.length){let C=A.El(I.sampleIndexes,F=>F.pts>S?-1:1);if(C>0&&(0,f.k)(S-I.sampleIndexes[C-1].pts,I.timeBase,h.i0)<BigInt(1e4))return a.Yz(`seek in sampleIndexes, found index: ${C}, pts: ${I.sampleIndexes[C-1].pts}, pos: ${I.sampleIndexes[C-1].pos}`,T,416),await x.ioReader.seek(I.sampleIndexes[C-1].pos),L.nextDTS=I.sampleIndexes[C-1].dts,V}if(S===BigInt(0))return await x.ioReader.seek(this.context.firstFramePos),V;if(this.context.isVBR)if(L.tocIndexes.length){const C=L.tocIndexes[0|Number(S/(I.duration/BigInt(v.W8))&0xffffffffn)];if(C)a.Yz(`seek in xing toc indexes, pts: ${C.dts}, pos: ${C.pos}`,T,432),await x.ioReader.seek(C.pos),L.nextDTS=C.dts;else{a.Yz("not found any keyframe index, try to seek in bytes",T,437);const F=k.CM(L.frameHeader,I.codecpar.sampleRate),H=S/BigInt(I.codecpar.frameSize>>>0),M=H*BigInt(Math.floor(F))+this.context.firstFramePos;L.nextDTS=H*BigInt(I.codecpar.frameSize>>>0),await x.ioReader.seek(M)}}else{a.Yz("not found any keyframe index, try to seek in bytes",T,446);const C=k.CM(L.frameHeader,I.codecpar.sampleRate),F=S/BigInt(I.codecpar.frameSize>>>0),H=F*BigInt(Math.floor(C))+this.context.firstFramePos;L.nextDTS=F*BigInt(I.codecpar.frameSize>>>0),await x.ioReader.seek(H)}else{const C=S/BigInt(I.codecpar.frameSize>>>0),F=C*BigInt(L.frameLength>>>0)+this.context.firstFramePos;L.nextDTS=C*BigInt(I.codecpar.frameSize>>>0),await x.ioReader.seek(F)}return await this.syncToFrame(x),V}getAnalyzeStreamsCount(){return 1}}},59331:(g,p,t)=>{t.d(p,{A:()=>H});var e=t(134),i=t(63939),n=t(50932),s=t(4624),r=t(19770),a=t(53783),d=t(27274),c=t(39e3),l=t(9705),h=t(51660),o=t(39144),u=t(52088),f=t(6403),v=t(85947),y=t(86191),A=t(71517),w=t(77231),k=t(52071),T=t(44328),P=t(72739),b=t(89088),x=t(20620),I=t(53e3),S=t(55611),z=t(58469),V=t(65451),L=t(37837),C=t(14686),F="src\\avformat\\formats\\IMpegtsFormat.ts";class H extends v.A{constructor(){super(),(0,e.A)(this,"type",2),(0,e.A)(this,"context",void 0),(0,e.A)(this,"firstTSPacketPos",void 0),(0,e.A)(this,"cacheAVPacket",void 0),this.context=(0,r.A)()}init(G){G.ioReader&&G.ioReader.setEndian(!0),this.cacheAVPacket=0}destroy(G){super.destroy(G),this.cacheAVPacket&&((0,A.Qe)(this.cacheAVPacket),this.cacheAVPacket=0),P.__(G.streams,D=>{const W=D.privData;W.filter&&(W.filter.destroy(),W.filter=null)})}async readHeader(G){try{let D=0,W=await a.q(G.ioReader);for(W||(W=d.ZT),this.context.tsPacketSize=W;!this.context.hasPAT||!this.context.hasPMT;){const X=await a.n(G.ioReader,this.context);X.payload&&(X.pid!==0&&X.pid!==this.context.currentPmtPid&&this.context.pmt.pid2StreamType.get(X.pid)!==134||(0,c.A)(X,this.context))}return this.context.hasPAT&&this.context.hasPMT?(this.firstTSPacketPos=G.ioReader.getPos(),D):l.LR}catch(D){return s.z3(D.message,F,135),G.ioReader.error}}checkExtradata(G,D){if(!D.codecpar.extradata){let W=(0,A.rU)(G,1);if(!W)return;D.codecpar.extradata=(0,L.sY)(i.f[15](W+4)),(0,C.Mr)(D.codecpar.extradata,i.f[20](W),i.f[15](W+4)),D.codecpar.extradataSize=i.f[15](W+4),(0,A.Is)(G,1),D.codecpar.codecId===27||D.codecpar.codecId===12?x.XC(D,(0,C.JW)(D.codecpar.extradata,D.codecpar.extradataSize)):D.codecpar.codecId===173?I.XC(D,(0,C.JW)(D.codecpar.extradata,D.codecpar.extradataSize)):D.codecpar.codecId===196?S.XC(D,(0,C.JW)(D.codecpar.extradata,D.codecpar.extradataSize)):D.codecpar.codecId===86018?z.XC(D,(0,C.JW)(D.codecpar.extradata,D.codecpar.extradataSize)):D.codecpar.codecId===86076&&V.XC(D,(0,C.JW)(D.codecpar.extradata,D.codecpar.extradataSize))}}parsePESSlice(G,D,W,X){const U=(0,o.A)(W);(0,h.A)(U,D,X),(0,u.A)(W);const Q=X.privData;if(Q.filter){let N=0;if(N=Q.filter.sendAVPacket(D),N<0)return s.z3("send avpacket to bsf failed",F,183),l.LR;if(N=Q.filter.receiveAVPacket(D),N<0)return s.z3("receive avpacket from bsf failed",F,190),l.LR;for(n.M[15](D+76,9e4),n.M[15](D+72,1),n.M[15](D+32,X.index),this.checkExtradata(D,X);;){const _=this.cacheAVPacket||(0,A._5)();if(N=Q.filter.receiveAVPacket(_),N!==0){this.cacheAVPacket=_;break}n.M[15](_+76,9e4),n.M[15](_+72,1),n.M[15](_+32,X.index),this.checkExtradata(_,X),G.interval.packetBuffer.push(_),this.cacheAVPacket=0}}else{const N=this.context.pmt.pid2StreamType.get(Q.pid);if(N===3||N===4){n.M[15](D+36,1|i.f[15](D+36));const _=(0,A.iI)(D),O=_[1]>>>3&3,R=(6&_[1])>>1,j=(12&_[2])>>>2,B=3&~(_[3]>>>6)?2:1,Y=b.Au(R),Z=b.Y2(O,j);(X.codecpar.profile!==Y||X.codecpar.sampleRate!==Z||X.codecpar.chLayout.nbChannels!==B)&&(X.codecpar.profile=Y,X.codecpar.sampleRate=Z,X.codecpar.chLayout.nbChannels=B)}else X.codecpar.codecId===27?X.codecpar.extradata||(x.ci(D,!0),this.checkExtradata(D,X),X.codecpar.bitFormat=2):X.codecpar.codecId===173?X.codecpar.extradata||(I.ci(D,!0),this.checkExtradata(D,X),X.codecpar.bitFormat=2):X.codecpar.codecId===196&&(X.codecpar.extradata||(S.ci(D,!0),this.checkExtradata(D,X),X.codecpar.bitFormat=2))}return 0}async readAVPacket_(G,D){if(this.context.ioEnd){if(!this.context.tsSliceQueueMap.size)return-1048576;const U=this.context.tsSliceQueueMap.values();let Q;for(;;){const _=U.next();if(_.value&&_.value.slices.length){Q=_.value;break}if(_.done)break}if(!Q)return-1048576;const N=G.streams.find(_=>_.privData.pid===Q.pid);return N?this.parsePESSlice(G,D,Q,N):((0,u.A)(Q),this.readAVPacket_(G,D))}try{for(;;){const U=await a.n(G.ioReader,this.context);if(!U.payload)continue;if(U.pid===0||U.pid===this.context.currentPmtPid||this.context.pmt.pid2StreamType.get(U.pid)===134){(0,c.A)(U,this.context);continue}const Q=this.context.pmt.pid2StreamType.get(U.pid);if(!Q)continue;let N=G.streams.find(j=>j.privData.pid===U.pid);N||(N=G.createStream(),(0,y.A)(U.pid,N,this.context));let _=U.payload[4]<<8|U.payload[5],O=this.context.tsSliceQueueMap.get(U.pid),R=!1;if(O){if(O.totalLength>0&&U.payloadUnitStartIndicator){const j=this.parsePESSlice(G,D,O,N);if(j<0)return j;R=!0}}else{if(!U.payloadUnitStartIndicator)continue;O=new f.pi,this.context.tsSliceQueueMap.set(U.pid,O)}var W,X;if(U.payloadUnitStartIndicator&&(O.randomAccessIndicator=(W=(X=U.adaptationFieldInfo)===null||X===void 0?void 0:X.randomAccessIndicator)!==null&&W!==void 0?W:0,O.pos=U.pos,O.pid=U.pid,O.streamType=Q,O.expectedLength=_===0?0:_+6),O.slices.push(U.payload),O.totalLength+=U.payload.length,O.expectedLength>0&&O.expectedLength===O.totalLength){const j=this.parsePESSlice(G,D,O,N);if(j<0)return j;R=!0}if(R)return 0}}catch(U){if(G.ioReader.error!==-1048576||this.context.ioEnd){if(G.ioReader.error===-1048576)return-1048576;throw U}return this.context.ioEnd=!0,this.readAVPacket_(G,D)}}async readAVPacket(G,D){try{return this.readAVPacket_(G,D)}catch(W){return G.ioReader.error!==-1048576&&s.z3(W.message,F,414),G.ioReader.error}}async syncTSPacket(G){let D=w.Dh;for(;;)try{if(await G.ioReader.readUint8()===71){D=this.context.tsPacketSize===d.VG?G.ioReader.getPos()-BigInt(5):G.ioReader.getPos()-BigInt(1);let W=0,X=G.ioReader.getPos();for(;W<=10&&(await G.ioReader.skip(this.context.tsPacketSize-1),await G.ioReader.readUint8()===71);)W++;if(W<10){D=w.Dh,await G.ioReader.seek(X);continue}break}}catch{D=w.Dh;break}if(D!==w.Dh)for(await G.ioReader.seek(D);;){if((await a.n(G.ioReader,this.context)).payloadUnitStartIndicator){await G.ioReader.seek(D),G.streams.forEach(W=>{let X=this.context.tsSliceQueueMap.get(W.privData.pid);X&&(0,u.A)(X)});break}D=G.ioReader.getPos()}}async seek(G,D,W,X){let U=G.ioReader.getPos();if(this.context.tsSliceQueueMap.forEach(Q=>{Q.slices.length&&Q.pos<U&&(U=Q.pos),(0,u.A)(Q)}),this.context.pmt.pid2StreamType.forEach((Q,N)=>{this.context.tsSliceQueueMap.delete(N)}),16&X){const Q=(0,T.k)(W,D.timeBase,w.i0);return await G.ioReader.seek(Q,!0),this.context.ioEnd=!1,BigInt(0)}if(D&&D.sampleIndexes.length){let Q=P.El(D.sampleIndexes,N=>N.pts>W?-1:1);if(Q>0&&(0,T.k)(W-D.sampleIndexes[Q-1].pts,D.timeBase,w.i0)<BigInt(1e4))return s.Yz(`seek in sampleIndexes, found index: ${Q}, pts: ${D.sampleIndexes[Q-1].pts}, pos: ${D.sampleIndexes[Q-1].pos}`,F,524),await G.ioReader.seek(D.sampleIndexes[Q-1].pos),this.context.ioEnd=!1,U}if(2&X){const Q=await G.ioReader.fileSize();return Q<=BigInt(0)?BigInt(l.E$):(W<BigInt(0)?W=BigInt(0):W>Q&&(W=Q),await G.ioReader.seek(W),4&X||await this.syncTSPacket(G),this.context.ioEnd=!1,U)}{s.Yz("not found any keyframe index, try to seek in bytes",F,556);let Q=await(0,k.A)(G,D,W,this.firstTSPacketPos,this.readAVPacket.bind(this),this.syncTSPacket.bind(this));return Q>=0&&(this.context.ioEnd=!1),Q}}getAnalyzeStreamsCount(){var G,D;return(G=(D=this.context.pmt)===null||D===void 0?void 0:D.pid2StreamType.size)!==null&&G!==void 0?G:0}}},69979:(g,p,t)=>{t.d(p,{A:()=>x});var e=t(134),i=t(63939),n=t(50932),s=t(69584),r=t(4624),a=t(94929),d=t(797),c=t(9705),l=t(92647),h=t(85947),o=t(14686),u=t(37837),f=t(71517),v=t(82348),y=t(35336),A=t(77231),w=t(52071),k=t(44328),T=t(79630),P=t(43607),b="src\\avformat\\formats\\IOggsFormat.ts";class x extends h.A{constructor(){super(),(0,e.A)(this,"type",3),(0,e.A)(this,"headerPagesPayload",void 0),(0,e.A)(this,"page",void 0),(0,e.A)(this,"curSegIndex",void 0),(0,e.A)(this,"curSegStart",void 0),(0,e.A)(this,"segCount",void 0),(0,e.A)(this,"segIndex",void 0),(0,e.A)(this,"currentPts",void 0),(0,e.A)(this,"firstPos",void 0),(0,e.A)(this,"firstGranulePosition",void 0),this.page=new s.B,this.headerPagesPayload=[]}init(S){S.ioReader&&S.ioReader.setEndian(!1),S.ioReader&&S.ioReader.setEndian(!1),this.curSegIndex=-1,this.curSegStart=0,this.currentPts=BigInt(0),this.segCount=0,this.segIndex=0,this.firstGranulePosition=BigInt(0)}async estimateTotalBlock(S){let z=BigInt(0);const V=S.ioReader.getPos(),L=this.currentPts,C=await S.ioReader.fileSize();for(await S.ioReader.seek(P.T9(C-BigInt(195072),BigInt(0))),await this.syncPage(S);;)try{this.page.reset(),await this.page.read(S.ioReader),z=this.page.granulePosition}catch{break}return await S.ioReader.seek(V),this.currentPts=L,z}async getNextSegment(S){if(this.curSegIndex<0){this.page.granulePosition>BigInt(0)&&(this.currentPts=this.page.granulePosition),this.page.reset(),await this.page.read(S.ioReader),this.curSegIndex=0,this.curSegStart=0,this.segIndex=-1,this.segCount=0;for(let L=0;L<this.page.segmentTable.length;L++)this.page.segmentTable[L]!==255&&this.segCount++}let z=0;for(;;){const L=this.page.segmentTable[this.curSegIndex++];if(z+=L,L!==255)break}const V=this.curSegStart;return this.curSegStart+=z,this.segIndex++,this.curSegIndex===this.page.segmentTable.length&&(this.curSegIndex=-1),this.page.payload.subarray(V,V+z)}async readHeader(S){try{let z=await S.ioReader.peekString(4);if(z!=="OggS")return r.z3("the file format is not oggs",b,167),c.LR;let V=await this.getNextSegment(S),L=new v.A(V.length,!1);if(L.appendBuffer(V),z=L.peekString(8),z==="OpusHead"){const C=new a.q;C.read(L);const F=new a.o;V=await this.getNextSegment(S),L=new v.A(V.length,!1),L.appendBuffer(V),F.read(L),this.headerPagesPayload=[C,F];const H=S.createStream();H.codecpar.codecType=1,H.codecpar.codecId=86076,H.codecpar.sampleRate=C.sampleRate,H.codecpar.chLayout.nbChannels=C.channels,H.timeBase.den=H.codecpar.sampleRate,H.timeBase.num=1,H.privData={serialNumber:this.page.serialNumber},this.onStreamAdd&&this.onStreamAdd(H),H.duration=await this.estimateTotalBlock(S)}else if(z.slice(1,7)==="vorbis"){const C=[V],F=new d.m;F.read(L);const H=new d.G;V=await this.getNextSegment(S),L=new v.A(V.length,!1),L.appendBuffer(V),H.read(L),C.push(V),this.headerPagesPayload=[F,H];const M=S.createStream();M.codecpar.codecType=1,M.codecpar.codecId=86021,M.codecpar.sampleRate=F.sampleRate,M.codecpar.chLayout.nbChannels=F.channels,M.timeBase.den=M.codecpar.sampleRate,M.timeBase.num=1,M.privData={serialNumber:this.page.serialNumber},C.push(await this.getNextSegment(S));const G=C.reduce((X,U)=>X+2+U.length,0),D=(0,u.sY)(G),W=new y.A(G,!0,new T.A(D,G));C.forEach(X=>{W.writeUint16(X.length),W.writeBuffer(X)}),M.codecpar.extradata=D,M.codecpar.extradataSize=G,this.onStreamAdd&&this.onStreamAdd(M),M.duration=await this.estimateTotalBlock(S)}return this.firstPos=S.ioReader.getPos(),0}catch(z){return r.z3(z.message,b,277),S.ioReader.error}}async readAVPacket(S,z){if(!this.headerPagesPayload.length)return c.E$;n.M[17](z+56,S.ioReader.getPos());try{const V=await this.getNextSegment(S);let L=this.currentPts+(this.page.granulePosition-this.currentPts)/BigInt(Math.floor(this.segCount))*BigInt(Math.floor(this.segIndex));n.M[17](z+16,L),n.M[17](z+8,L),this.firstGranulePosition||(this.firstGranulePosition=this.page.granulePosition);const C=S.streams.find(D=>D.privData.serialNumber===this.page.serialNumber);C&&(n.M[15](z+32,C.index),n.M[15](z+76,C.timeBase.den),n.M[15](z+72,C.timeBase.num),C.codecpar.codecType===1&&n.M[15](z+36,1|i.f[15](z+36)));const F=[V];for(;this.curSegIndex<0;)try{if(!(1&(await S.ioReader.peekBuffer(6))[5]))break;F.push(await this.getNextSegment(S))}catch{break}const H=(0,l.A)(Uint8Array,F),M=H.length,G=(0,u.sY)(M);return(0,o.lW)(G,M,H),(0,f.NX)(z,G,M),0}catch(V){return S.ioReader.error!==-1048576&&r.z3(V.message,b,343),S.ioReader.error}}async syncPage(S){let z=A.Dh,V=BigInt(0);for(;;)try{if(await S.ioReader.peekString(4)==="OggS"){z=S.ioReader.getPos(),this.page.reset(),await this.page.read(S.ioReader),V=this.page.granulePosition;let L=0;for(;L!==3&&await S.ioReader.peekString(4)==="OggS";)L++,this.page.reset(),await this.page.read(S.ioReader);if(L===3)break}await S.ioReader.skip(1)}catch{break}if(z!==A.Dh){for(await S.ioReader.seek(z);1&(await S.ioReader.peekBuffer(6))[5];)this.page.reset(),await this.page.read(S.ioReader),V=this.page.granulePosition;this.currentPts=V-this.firstGranulePosition,this.curSegIndex=-1}}async seek(S,z,V,L){const C=S.ioReader.getPos();if(2&L){const F=await S.ioReader.fileSize();return F<=BigInt(0)?BigInt(c.E$):(V<BigInt(0)?V=BigInt(0):V>F&&(V=F),await S.ioReader.seek(V),4&L||await this.syncPage(S),C)}return(0,k.k)(V,z.timeBase,A.i0)<BigInt(1e4)?(r.Yz(`seek pts is earlier then 10s, seek to first packet pos(${this.firstPos}) directly`,b,435),await S.ioReader.seek(this.firstPos),this.currentPts=BigInt(0),C):(0,w.A)(S,z,V,this.firstPos,this.readAVPacket.bind(this),this.syncPage.bind(this))}getAnalyzeStreamsCount(){return 1}}},3791:(g,p,t)=>{t.d(p,{A:()=>f});var e=t(134),i=t(61499),n=t(50932),s=t(4624),r=t(9705),a=t(85947),d=t(14686),c=t(37837),l=t(71517),h=t(35531),o=t(95644),u="src\\avformat\\formats\\IWavFormat.ts";class f extends a.A{constructor(){super(),(0,e.A)(this,"type",9),(0,e.A)(this,"dataSize",void 0),(0,e.A)(this,"sampleCount",void 0),(0,e.A)(this,"pcmStartPos",void 0),(0,e.A)(this,"currentPts",void 0)}init(y){y.ioReader.setEndian(!1)}async readHeader(y){const A=await y.ioReader.readString(4);switch(A){case"RIFF":case"RF64":case"BW64":break;case"RIFX":y.ioReader.setEndian(!0);break;default:return s.z3("the file format is not wav",u,73),r.LR}await y.ioReader.skip(4);const w=await y.ioReader.readString(4);if(w!=="WAVE")return s.z3(`invalid start code ${w} in RIFF header`,u,83),r.LR;if(A==="RF64"||A==="BW64"){if(await y.ioReader.readString(4)!=="ds64")return r.LR;const P=await y.ioReader.readUint32();if(P<24)return r.LR;if(await y.ioReader.skip(8),this.dataSize=await y.ioReader.readUint64(),this.sampleCount=await y.ioReader.readUint64(),this.dataSize<0||this.sampleCount<0)return s.z3("negative data_size and/or sample_count in ds64",u,103),r.LR;await y.ioReader.skip(P-24)}const k=y.createStream(),T=await y.ioReader.fileSize();for(;y.ioReader.getPos()<T;){const P=await y.ioReader.readString(4),b=await y.ioReader.readUint32();if(P==="fmt "){let x=await(0,h.y)(y.ioReader,k.codecpar[i.o9],b);if(x<0)return x}else if(P==="data"){if(this.pcmStartPos=y.ioReader.getPos(),this.dataSize||(this.dataSize=BigInt(Math.floor(b))),this.pcmStartPos+this.dataSize===T)break;await y.ioReader.seek(this.pcmStartPos+this.dataSize)}else{if(this.pcmStartPos+this.dataSize===T)break;await y.ioReader.seek(y.ioReader.getPos()+BigInt(Math.floor(b)))}}return this.sampleCount||(this.sampleCount=(this.dataSize<<BigInt(3))/BigInt(k.codecpar.chLayout.nbChannels*(0,o.MZ)(k.codecpar.codecId))),k.timeBase.den=k.codecpar.sampleRate,k.timeBase.num=1,this.sampleCount&&(k.duration=this.sampleCount),this.currentPts=BigInt(0),await y.ioReader.seek(this.pcmStartPos),0}async readAVPacket(y,A){const w=y.streams.find(k=>k.codecpar.codecType=1);try{const k=1024*w.codecpar.chLayout.nbChannels*(0,o.MZ)(w.codecpar.codecId)>>>3,T=(0,c.sY)(k);return(0,l.NX)(A,T,k),n.M[17](A+16,this.currentPts),n.M[17](A+8,this.currentPts),n.M[17](A+56,y.ioReader.getPos()),await y.ioReader.readBuffer(k,(0,d.JW)(T,k)),n.M[15](A+32,w.index),n.M[15](A+76,w.timeBase.den),n.M[15](A+72,w.timeBase.num),this.currentPts+=BigInt(1024),0}catch(k){return y.ioReader.error!==-1048576&&s.z3(k.message,u,191),y.ioReader.error}}async seek(y,A,w,k){const T=y.ioReader.getPos();if(2&k){const P=await y.ioReader.fileSize();return P<=BigInt(0)?BigInt(r.E$):(w<BigInt(0)?w=BigInt(0):w>P&&(w=P),await y.ioReader.seek(w),4&k||(this.currentPts=(w-this.pcmStartPos<<BigInt(3))/BigInt(A.codecpar.chLayout.nbChannels*(0,o.MZ)(A.codecpar.codecId))),T)}{const P=this.pcmStartPos+(w*BigInt(A.codecpar.chLayout.nbChannels*(0,o.MZ)(A.codecpar.codecId))>>BigInt(3));return await y.ioReader.seek(P),this.currentPts=w,T}}getAnalyzeStreamsCount(){return 1}}},51597:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(134);class i{constructor(){(0,e.A)(this,"type",-1)}destroy(s){}}},69765:(g,p,t)=>{t.d(p,{A:()=>V});var e=t(134),i=t(61499),n=t(63939),s=t(9599),r=t(29170),a=t(51597),d=t(9690),c=t(65977),l=t(75473),h=t(38106),o=t(3384),u=t(35336),f=t(72739),v=t(4624),y=t(92647),A=t(79804),w=t(77231),k=t(95335),T=t(20841),P=t(59989),b=t(44328),x=t(71517),I=t(26173),S="src\\avformat\\formats\\OMovFormat.ts";const z={fragmentMode:0,movMode:0,fragment:!1,fastOpen:!1,defaultBaseIsMoof:!1};class V extends a.A{constructor(C={}){super(),(0,e.A)(this,"type",1),(0,e.A)(this,"context",void 0),(0,e.A)(this,"options",void 0),(0,e.A)(this,"annexb2AvccFilter",void 0),this.options=k.X$({},z,C),this.context=(0,d.A)()}init(C){C.ioWriter.setEndian(!0);const F=C.getStreamByMediaType(0);return F&&(this.annexb2AvccFilter=new I.A,this.annexb2AvccFilter.init(F.codecpar[i.o9],F.timeBase[i.o9])),0}destroy(C){super.destroy(C),this.annexb2AvccFilter&&(this.annexb2AvccFilter.destroy(),this.annexb2AvccFilter=null)}enableStreams(C){const F=[],H=[];for(let M=0;M<5;M++)F[M]=0,H[M]=-1;f.__(C.streams,(M,G)=>{if(M.codecpar.codecType===-1||M.codecpar.codecType>=5)return!0;H[M.codecpar.codecType]<0&&(H[M.codecpar.codecType]=G),1&M.disposition&&(F[M.codecpar.codecType]++,M.privData.flags|=1)});for(let M=0;M<5;M++)switch(M){case 0:case 1:case 3:F[M]>1&&(C.streams[F[M]].privData.perStreamGrouping=!0),!F[M]&&H[M]>=0&&(C.streams[H[M]].privData.flags|=1)}}writeHeader(C){if(this.context.majorBrand=(0,c.A)("isom"),this.context.minorVersion=512,this.context.compatibleBrand=[(0,c.A)("isom")],this.context.timescale=1e3,this.options.fragment&&(this.context.compatibleBrand.push((0,c.A)("iso6")),this.context.fragment=!0),this.options.movMode===1&&(this.context.isom=!0,this.context.majorBrand=(0,c.A)("qt  "),this.context.compatibleBrand=[this.context.majorBrand]),this.options.movMode!==1){this.context.compatibleBrand.push((0,c.A)("iso2"));const F=C.getStreamByMediaType(0);F&&F.codecpar.codecId===27&&this.context.compatibleBrand.push((0,c.A)("avc1")),this.context.compatibleBrand.push((0,c.A)("mp41"))}if(l.l7(C.ioWriter,this.context),this.context.holdMoovPos=C.ioWriter.getPos(),this.options.fragment)this.context.currentFragment={pos:BigInt(0),currentTrack:null,sequence:1,tracks:[],size:0,firstWrote:!1},f.__(C.streams,(F,H)=>{const M=(0,h.A)();F.privData=M,M.chunkOffsets=[],M.cttsSampleCounts=[],M.cttsSampleOffsets=[],M.stscFirstChunk=[],M.stscSamplesPerChunk=[],M.stscSampleDescriptionIndex=[],M.stssSampleNumbers=[],M.sampleSizes=[],M.sttsSampleCounts=[],M.sttsSampleDeltas=[],M.alternateGroup=H;const G=(0,o.A)();G.baseIsMoof=this.options.defaultBaseIsMoof,G.streamIndex=F.index,G.trackId=this.context.nextTrackId++,M.trackId=G.trackId,G.ioWriter=new u.A,G.ioWriter.onFlush=D=>(G.buffers.push(D.slice()),0),this.context.currentFragment.tracks.push(G)}),this.enableStreams(C),l.dI(C.ioWriter,C,this.context),C.ioWriter.flush();else{f.__(C.streams,(H,M)=>{const G=(0,h.A)();H.privData=G,G.trackId=this.context.nextTrackId++,G.chunkOffsets=[],G.cttsSampleCounts=[],G.cttsSampleOffsets=[],G.stscFirstChunk=[],G.stscSamplesPerChunk=[],G.stscSampleDescriptionIndex=[],G.stssSampleNumbers=[],G.sampleSizes=[],G.sttsSampleCounts=[],G.sttsSampleDeltas=[],G.alternateGroup=M}),this.enableStreams(C);const F=C.ioWriter.getPos();C.ioWriter.writeUint32(0),C.ioWriter.writeUint32((0,c.A)("mdat")),this.context.boxsPositionInfo.push({pos:F,type:"mdat",size:0})}return 0}updateCurrentChunk(C){let F=this.context.currentChunk;if(!F.sampleCount)return;const H=C.streams.find(M=>M.index===F.streamIndex).privData;H.chunkCount++,H.chunkOffsets.push(F.pos),H.stscFirstChunk.length?H.lastStscCount!==F.sampleCount&&(H.stscFirstChunk.push(H.chunkCount),H.stscSamplesPerChunk.push(F.sampleCount),H.stscSampleDescriptionIndex.push(1),H.lastStscCount=F.sampleCount):(H.stscFirstChunk.push(H.chunkCount),H.stscSamplesPerChunk.push(F.sampleCount),H.stscSampleDescriptionIndex.push(1),H.lastStscCount=F.sampleCount)}checkMdat(C,F){const H=this.context.boxsPositionInfo[this.context.boxsPositionInfo.length-1];if(H.type!=="mdat")return void v.z3("last box is not mdat",S,298);const M=C.ioWriter.getPos(),G=Number(M-H.pos);G+F>w.f7&&(H.size=G,C.ioWriter.writeUint32(0),C.ioWriter.writeUint32((0,c.A)("mdat")),this.context.boxsPositionInfo.push({pos:M,type:"mdat",size:0}))}updateCurrentFragment(C,F){if(this.context.currentFragment.firstWrote){f.__(this.context.currentFragment.tracks,D=>{const W=C.streams.find(Q=>Q.index===D.streamIndex);if(!D.sampleCount||!W)return!0;const X=W.privData;var U;D.baseDataOffset=C.ioWriter.getPos(),D.sampleDurations.length?F&&D.sampleDurations.length===D.sampleSizes.length-1&&D.sampleDurations.push(Number(F-X.lastDts)):W.codecpar.codecType===1?F?D.sampleDurations.push(Number(F-X.lastDts)):W.codecpar.frameSize>0?D.sampleDurations.push(Number((0,b.k)(BigInt(W.codecpar.frameSize/W.codecpar.sampleRate*w.SF),w.KR,W.timeBase))):(W.codecpar.codecId,D.sampleDurations.push(Number((0,b.k)(BigInt(1024/W.codecpar.sampleRate*w.SF),w.KR,W.timeBase)))):W.codecpar.codecType===0?F?D.sampleDurations.push(Number(F-X.lastDts)):(0,b.lb)(W.codecpar.framerate)>0?D.sampleDurations.push(Number((0,b.k)(BigInt(Math.floor(1/(0,b.lb)(W.codecpar.framerate)*w.SF)),w.KR,W.timeBase))):D.sampleDurations.push(W.timeBase.den/(30*W.timeBase.num)>>>0):D.sampleDurations.push(0),X.lastDuration=D.sampleDurations[D.sampleSizes.length-1],(D.sampleFlags.length===1||(0,P.A)(D.sampleFlags,1))&&(D.firstSampleFlags=D.sampleFlags[0],D.defaultSampleFlags=(U=D.sampleFlags[1])!==null&&U!==void 0?U:D.firstSampleFlags,D.sampleFlags=[]),(D.sampleSizes.length===1||(0,P.A)(D.sampleSizes))&&(D.defaultSampleSize=D.sampleSizes[0],D.sampleSizes=[]),(D.sampleDurations.length===1||(0,P.A)(D.sampleDurations))&&(D.defaultSampleDuration=D.sampleDurations[0],D.sampleDurations=[]),W.codecpar.codecType===1?D.defaultSampleFlags=33554432:D.sampleFlags.length&&(D.defaultSampleFlags=D.sampleFlags[0]),D.sampleSizes.length&&(D.defaultSampleSize=D.sampleSizes[0]),D.sampleDurations.length&&(D.defaultSampleDuration=D.sampleDurations[0])}),C.ioWriter.flush(),l.Ro(C.ioWriter,C,this.context);let H=this.context.currentFragment.size+8;const M=[];let G=8;f.__(this.context.currentFragment.tracks,D=>{if(!D.sampleCount)return!0;D.ioWriter.flush();const W=(0,y.A)(Uint8Array,D.buffers);D.dataOffset=H,H+=W.length,G+=W.length,M.push(W),(0,T.A)(C.ioWriter,D.dataOffsetPos,D.dataOffset,"int32"),D.buffers=[],D.sampleFlags=[],D.sampleSizes=[],D.sampleDurations=[],D.sampleCompositionTimeOffset=[],D.sampleCount=0,D.firstSampleFlags=0}),C.ioWriter.writeUint32(G),C.ioWriter.writeUint32((0,c.A)("mdat")),f.__(M,D=>{C.ioWriter.writeBuffer(D)}),(0,A.A)(C.ioWriter,this.context),C.ioWriter.flush(),this.context.currentFragment.firstWrote=!1,this.context.currentFragment.sequence++}}writeAVPacket(C,F){if(!n.f[15](F+28))return v.R8(`packet's size is 0: ${n.f[15](F+32)}, ignore it`,S,465),0;const H=C.getStreamByIndex(n.f[15](F+32));if(!H)return void v.R8(`can not found the stream width the avpacket's streamIndex: ${n.f[15](F+32)}, ignore it`,S,472);const M=H.privData,G=(0,b.k)(n.f[17](F+16),(0,r.A)(F+72,s.P),H.timeBase),D=(0,b.k)(n.f[17](F+8)<BigInt(0)?n.f[17](F+16):n.f[17](F+8),(0,r.A)(F+72,s.P),H.timeBase);if(H.codecpar.codecId!==27&&H.codecpar.codecId!==12&&H.codecpar.codecId!==173&&H.codecpar.codecId!==196||n.f[15](F+80)===1||(this.annexb2AvccFilter.sendAVPacket(F),this.annexb2AvccFilter.receiveAVPacket(F)),this.context.fragment){const W=this.context.currentFragment.tracks.find(X=>X.streamIndex===n.f[15](F+32));if(W){if((this.options.fragmentMode===0&&H.codecpar.codecType===0&&1&n.f[15](F+36)||this.options.fragmentMode===1)&&(this.context.currentFragment.tracks.length===1?this.updateCurrentFragment(C,G):this.updateCurrentFragment(C)),W.ioWriter.writeBuffer((0,x.iI)(F)),W.sampleSizes.length||(W.baseMediaDecodeTime=G),W.sampleSizes.length&&(!W.sampleDurations[W.sampleSizes.length-1]||W.sampleDurations[W.sampleSizes.length-1]<=0)&&(W.sampleDurations[W.sampleSizes.length-1]=Number(G-M.lastDts)),n.f[17](F+48)>0&&W.sampleDurations.push(Number((0,b.k)(n.f[17](F+48),(0,r.A)(F+72,s.P),H.timeBase))),W.sampleSizes.push(n.f[15](F+28)),H.codecpar.codecType===0){let X=0;1&n.f[15](F+36)?X|=33554432:X|=16842752,W.sampleCompositionTimeOffset.push(Number((D||G)-G)),W.sampleFlags.push(X)}W.sampleCount++,M.lastPts=D>M.lastPts?D:M.lastPts,M.lastDts=G,this.context.currentFragment.firstWrote=!0}else v.R8(`can not found track width streamIndex ${n.f[15](F+32)}, ignore it`,S,552)}else{this.checkMdat(C,n.f[15](F+28));const W=C.ioWriter.getPos();let X=this.context.currentChunk;if(X?X.streamIndex!==n.f[15](F+32)?(this.updateCurrentChunk(C),X.streamIndex=n.f[15](F+32),X.sampleCount=1,X.pos=W):X.sampleCount++:X=this.context.currentChunk={pos:W,streamIndex:n.f[15](F+32),sampleCount:1},C.ioWriter.writeBuffer((0,x.iI)(F)),M.sampleSizes.push(n.f[15](F+28)),H.codecpar.codecType===0&&1&n.f[15](F+36)&&M.stssSampleNumbers.push(M.sampleSizes.length),M.firstWrote){const U=Number(G-M.lastDts);M.sttsSampleCounts.length&&M.sttsSampleDeltas[M.sttsSampleDeltas.length-1]===U?M.sttsSampleCounts[M.sttsSampleCounts.length-1]++:(M.sttsSampleCounts.push(1),M.sttsSampleDeltas.push(U))}else M.startDts=G,M.startCT=Number((D||G)-G),M.firstWrote=!0;if(H.codecpar.codecType===0){const U=Number((D||G)-G);M.cttsSampleCounts.length&&M.cttsSampleOffsets[M.cttsSampleOffsets.length-1]===U?M.cttsSampleCounts[M.cttsSampleCounts.length-1]++:(M.cttsSampleCounts.push(1),M.cttsSampleOffsets.push(U))}M.lastPts=(D||G)>M.lastPts?D||G:M.lastPts,M.lastDts=G}return 0}writeTrailer(C){if(this.context.fragment)f.__(this.context.currentFragment.tracks,F=>{const H=C.streams.find(M=>M.index===F.streamIndex).privData;F.sampleCount&&(F.sampleDurations.length?F.sampleDurations.push(F.sampleDurations[F.sampleDurations.length-1]):F.sampleDurations=[H.lastDuration])}),this.updateCurrentFragment(C),C.ioWriter.writeUint32(8),C.ioWriter.writeString("mfra"),C.ioWriter.flush();else{this.updateCurrentChunk(C);let F,H=BigInt(0);f.__(C.streams,G=>{const D=G.privData;D.sampleSizes.length&&(D.sttsSampleDeltas.length?D.sttsSampleCounts[D.sttsSampleCounts.length-1]++:(D.sttsSampleCounts=[1],D.sttsSampleDeltas=[0])),D.lastPts>H&&(H=D.lastPts,F=G.timeBase)}),this.context.duration=(0,b.k)(H,F,{den:1e3,num:1});const M=this.context.boxsPositionInfo[this.context.boxsPositionInfo.length-1];if(M.type!=="mdat"&&v.z3("last box is not mdat",S,666),M.size=Number(C.ioWriter.getPos()-M.pos),(0,A.A)(C.ioWriter,this.context),this.options.fastOpen){C.ioWriter.flush();let G=[];const D=C.ioWriter.onFlush;C.ioWriter.onFlush=X=>(G.push(X.slice()),0),l.dI(C.ioWriter,C,this.context),C.ioWriter.flush();let W=(0,y.A)(Uint8Array,G);f.__(C.streams,X=>{const U=X.privData;if(U.chunkOffsets.length)for(let Q=0;Q<U.chunkOffsets.length;Q++)U.chunkOffsets[Q]+=BigInt(Math.floor(W.length))}),G=[],l.dI(C.ioWriter,C,this.context),C.ioWriter.flush(),W=(0,y.A)(Uint8Array,G),D&&D(W,this.context.holdMoovPos),C.ioWriter.onFlush=D}else l.dI(C.ioWriter,C,this.context),C.ioWriter.flush()}return 0}flush(C){return this.options.fragment&&(f.__(this.context.currentFragment.tracks,F=>{const H=C.streams.find(M=>M.index===F.streamIndex).privData;F.sampleCount&&(F.sampleDurations.length?F.sampleDurations.push(F.sampleDurations[F.sampleDurations.length-1]):F.sampleDurations=[H.lastDuration])}),this.updateCurrentFragment(C)),C.ioWriter.flush(),0}}},42774:(g,p,t)=>{t.d(p,{Xr:()=>n,jA:()=>e,oe:()=>i});const e=8,i=[0,8,12,0,16,20,24,32],n=[0,192,576,1152,2304,4608,0,0,256,512,1024,2048,4096,8192,16384,32768]},91375:(g,p,t)=>{t.d(p,{x:()=>a});var e=t(9705),i=t(4624),n=t(42774),s=t(72224),r="src\\avformat\\formats\\flac\\iflac.ts";function a(d,c,l=!1){const h=d.getPos();if((32767&d.readU(15))!=32764)return!l&&i.z3("invalid sync code",r,32),e.LR;c.isVarSize=d.readU1();const o=d.readU(4),u=d.readU(4);if(c.chMode=d.readU(4),c.chMode<n.jA)c.channels=c.chMode+1,c.chMode=0;else{if(!(c.chMode<n.jA+3))return!l&&i.z3(`invalid channel mode: ${c.chMode}`,r,51),e.LR;c.channels=2,c.chMode-=n.jA-1}const f=d.readU(3);if(f===3)return!l&&i.z3(`invalid sample size code: ${f}`,r,57),e.LR;if(c.bps=n.oe[f],d.readU1())return!l&&i.z3("broken stream, invalid padding",r,63),e.LR;if(c.frameOrSampleNum=function(v){let y=BigInt(Math.floor(v.readU(8))),A=(y&BigInt(128))>>BigInt(1);if((y&BigInt(192))===BigInt(128)||y>=BigInt(254))return-BigInt(1);for(;y&A;){const w=BigInt(Math.floor(v.readU(8)))-BigInt(128);if(w>>BigInt(6))return-BigInt(1);y=(y<<BigInt(6))+w,A<<=BigInt(5)}return y&=(A<<BigInt(1))-BigInt(1),y}(d),c.frameOrSampleNum<0)return!l&&i.z3("sample/frame number invalid",r,70),e.LR;if(o===0)return!l&&i.z3("reserved blocksize code: 0",r,75),e.LR;if(c.blocksize=o===6?d.readU(8)+1:o===7?d.readU(16)+1:n.Xr[o],u<12)c.sampleRate=n.oe[u];else if(u===12)c.sampleRate=1e3*d.readU(8);else if(u===13)c.sampleRate=d.readU(16);else{if(u!==14)return!l&&i.z3(`illegal sample rate code ${u}`,r,101),e.LR;c.sampleRate=10*d.readU(16)}return(0,s.A)(d.getBuffer().subarray(h,d.getPos()))!==d.readU(8)?(!l&&i.z3("header crc mismatch",r,108),e.LR):0}},58121:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(134);class i{constructor(){(0,e.A)(this,"signature",void 0),(0,e.A)(this,"version",void 0),(0,e.A)(this,"flags",void 0),(0,e.A)(this,"dataOffset",void 0),(0,e.A)(this,"hasVideo",void 0),(0,e.A)(this,"hasAudio",void 0),this.signature="FLV",this.version=1,this.flags=0,this.dataOffset=9,this.hasAudio=!1,this.hasVideo=!1}async read(s){this.signature=await s.readString(3),this.version=await s.readUint8(),this.flags=await s.readUint8(),this.dataOffset=await s.readUint32(),this.hasAudio=!!(4&this.flags),this.hasVideo=!!(1&this.flags)}write(s){this.flags=0,this.hasAudio&&(this.flags|=4),this.hasVideo&&(this.flags|=1),s.writeString(this.signature),s.writeUint8(this.version),s.writeUint8(this.flags),s.writeUint32(this.dataOffset)}}},68243:(g,p,t)=>{t.d(p,{A:()=>h});var e=t(134),i=t(35336),n=t(67672),s=t(72739),r=t(95335),a=t(92647),d=t(4624),c=t(94889),l=t(9705);class h{constructor(){(0,e.A)(this,"onMetaData",void 0),this.onMetaData={audiocodecid:10,canSeekToEnd:!1,width:0,height:0,stereo:!0,videocodecid:7}}async parseObject(u,f){return{key:await u.readString(await u.readUint16()),value:await this.parseValue(u,f)}}async parseValue(u,f){let v;switch(await u.readUint8()){case 0:v=await u.readDouble();break;case 1:v=!!await u.readUint8();break;case 2:v=await u.readString(await u.readUint16());break;case 3:for(v={};u.getPos()<f;){const{key:k,value:T}=await this.parseObject(u,f);if(v[k]=T,(16777215&await u.peekUint24())==9){await u.skip(3);break}}break;case 8:for(v={},await u.skip(4);u.getPos()<f;){const{key:k,value:T}=await this.parseObject(u,f);if(v[k]=T,(16777215&await u.peekUint24())==9){await u.skip(3);break}}break;case 9:v=null;break;case 10:v=[];const y=await u.readUint32();for(let k=0;k<y;k++)v.push(await this.parseValue(u,f));break;case 11:const A=await u.readDouble(),w=await u.readInt16();v=new Date(A+60*w*1e3);break;case 12:v=await u.readString(await u.readUint32())}return v}async read(u,f){const v=u.getPos(),y=v+BigInt(Math.floor(f)),A=await this.parseValue(u,y),w=await this.parseValue(u,y);this[A]=w;const k=Number(u.getPos()-v),T=await u.readUint32();return k+11!==T?(d.R8(`script size not match, size: ${k+11}, previousTagSize: ${T}`,"src\\avformat\\formats\\flv\\FlvScriptTag.ts",150),l.LR):0}writeValue(u,f){n.ai(f)?(u.writeUint8(0),u.writeDouble(f)):n.o(f)?(u.writeUint8(0),u.writeDouble(Number(f))):n.zM(f)?(u.writeUint8(1),u.writeUint8(f?1:0)):n.Yj(f)?f.length>=65536?(u.writeUint8(12),u.writeUint32(f.length),u.writeString(f)):(u.writeUint8(2),u.writeUint16(f.length),u.writeString(f)):n.YO(f)?(u.writeUint8(10),u.writeUint32(f.length),s.__(f,v=>{this.writeValue(u,v)})):n.Ik(f)?(u.writeUint8(3),r.__(f,(v,y)=>{u.writeUint16(y.length),u.writeString(y),this.writeValue(u,v)}),u.writeUint24(9)):f instanceof Date&&(u.writeUint8(11),u.writeDouble(f.getTime()),u.writeInt16(0))}computeSize(){const u=[],f=new i.A;return f.onFlush=v=>(u.push(v.slice()),0),this.writeValue(f,"onMetaData"),this.writeValue(f,this.onMetaData),f.flush(),(0,a.A)(Uint8Array,u).length}write(u){if(this.onMetaData){const f=[],v=new i.A;v.onFlush=w=>(f.push(w.slice()),0),this.writeValue(v,"onMetaData"),this.writeValue(v,this.onMetaData),v.flush();const y=(0,a.A)(Uint8Array,f),A=u.getPos();c.xk(u,18,y.length,BigInt(0)),u.writeBuffer(y),u.writeUint32(Number(u.getPos()-A))}}dts2Position(u){if(this.canSeek()){let f=-1;const v=this.onMetaData.keyframes.times,y=this.onMetaData.keyframes.filepositions;let A;for(A=0;A<v.length;A++){if(v[A]===u){f=A;break}if(v[A]>u){f=Math.max(A-1,0);break}}return A&&A===v.length&&(f=v.length-1),{pos:y[f],dts:v[f]}}return{pos:-1,dts:-1}}position2DTS(u){if(this.canSeek()){let v=-1;const y=this.onMetaData.keyframes.times,A=this.onMetaData.keyframes.filepositions;let w=0;for(w=0;w<A.length;w++)if(A[w]>u){v=w;break}var f;return w===A.length?(f=this.onMetaData.duration)!==null&&f!==void 0?f:y[y.length-1]:y[v]}return-1}canSeek(){return!!(this.onMetaData.keyframes&&this.onMetaData.keyframes.filepositions&&this.onMetaData.keyframes.filepositions.length)}}},35028:(g,p,t)=>{t.d(p,{FJ:()=>e,U5:()=>i});const e={10:86018,2:86017,11:86051,1:69645,4:86049,5:86049,6:86049,7:65543,8:65542},i={7:27,12:173,13:196,9:12,2:4,3:86,4:92,5:106,6:131}},94889:(g,p,t)=>{function e(i,n,s,r){i.writeUint8(n),i.writeUint24(s),i.writeUint24(Number(r&BigInt(16777215))),i.writeUint8(Number(r>>BigInt(24)&BigInt(255))),i.writeUint24(0)}t.d(p,{xk:()=>e})},5783:(g,p,t)=>{function e(i,n){for(let s=0;s<i.length;s++)if(i[s].privData.number===n)return i[s]}t.d(p,{A:()=>e})},93082:(g,p,t)=>{function e(i,n){for(let s=0;s<i.length;s++)if(i[s].privData.uid===n)return i[s]}t.d(p,{A:()=>e})},33919:(g,p,t)=>{t.d(p,{Ag:()=>k,Cr:()=>d,GZ:()=>A,Pb:()=>I,Qb:()=>T,Wg:()=>y,Wy:()=>l,Y0:()=>o,aL:()=>x,eG:()=>u,hK:()=>v,jt:()=>w,qi:()=>c,qp:()=>h});var e=t(4624),i=t(9705),n=t(67672),s=t(72739),r="src\\avformat\\formats\\matroska\\imatroska.ts";const a=BigInt(20971520),d={19899:{type:9,isArray:!0,filedName:"entry",child:{21419:{type:1,filedName:"id"},21420:{type:2,filedName:"pos"}}}},c={29604:{type:2,filedName:"segmentUUID"},2807729:{type:1,filedName:"timestampScale"},17545:{type:5,filedName:"duration"},31657:{type:7,filedName:"title"},19840:{type:7,filedName:"muxingApp"},22337:{type:7,filedName:"writingApp"},17505:{type:8,filedName:"dateUTC"}},l={174:{type:9,isArray:!0,filedName:"entry",child:{215:{type:1,filedName:"number"},29637:{type:1,filedName:"uid"},131:{type:1,filedName:"type"},21358:{type:7,filedName:"name"},2274716:{type:7,filedName:"language"},2306383:{type:6,filedName:"timeScale"},134:{type:7,filedName:"codecId"},2459272:{type:7,filedName:"codecName"},25506:{type:8,filedName:"codecPrivate"},225:{type:9,filedName:"audio",child:{181:{type:5,filedName:"sampleRate"},30901:{type:5,filedName:"outSampleRate"},25188:{type:1,filedName:"bitDepth"},159:{type:1,filedName:"channels"}}},224:{type:9,filedName:"video",child:{2327523:{type:1,filedName:"framerate"},21680:{type:1,filedName:"displayWidth"},21690:{type:1,filedName:"displayHeight"},176:{type:1,filedName:"pixelWidth"},186:{type:1,filedName:"pixelHeight"},3061028:{type:8,filedName:"colorSpace"},21440:{type:1,filedName:"alphaMode"},21936:{type:9,filedName:"color",child:{21937:{type:1,filedName:"matrixCoefficients"},21938:{type:1,filedName:"bitsPerChannel"},21941:{type:1,filedName:"cbSubHorz"},21942:{type:1,filedName:"cbSubVert"},21939:{type:1,filedName:"chromaSubHorz"},21940:{type:1,filedName:"chromaSubVert"},21943:{type:1,filedName:"chromaSitingHorz"},21944:{type:1,filedName:"chromaSitingVert"},21945:{type:1,filedName:"range"},21946:{type:1,filedName:"transferCharacteristics"},21947:{type:1,filedName:"primaries"},21948:{type:1,filedName:"maxCll"},21949:{type:1,filedName:"maxFall"},21968:{type:9,filedName:"masteringMeta",child:{21969:{type:5,filedName:"rx"},21970:{type:5,filedName:"ry"},21971:{type:5,filedName:"gx"},21972:{type:5,filedName:"gy"},21973:{type:5,filedName:"bx"},21974:{type:5,filedName:"by"},21975:{type:5,filedName:"whiteX"},21976:{type:5,filedName:"whiteY"},21978:{type:5,isArray:!0,filedName:"minLuminance"},21977:{type:5,filedName:"maxLuminance"}}}}},30320:{type:9,filedName:"projection",child:{30321:{type:1,filedName:"type"},30322:{type:8,filedName:"private"},30323:{type:5,filedName:"yaw"},30324:{type:5,filedName:"pitch"},30325:{type:5,filedName:"roll"}}},21682:{type:1,filedName:"displayUnit"},154:{type:1,filedName:"interlaced"},157:{type:1,filedName:"fieldOrder"},21432:{type:1,filedName:"stereoMode"},21683:{type:1,filedName:"aspectRatio"}}},226:{type:9,filedName:"operations",child:{227:{type:9,isArray:!0,filedName:"entry",child:{228:{type:9,isArray:!0,filedName:"planes",child:{230:{type:1,filedName:"type"},229:{type:1,filedName:"uid"}}}}}}},28032:{type:9,filedName:"encodings",child:{25152:{type:9,isArray:!0,filedName:"entry",child:{20530:{type:1,filedName:"scope"},20531:{type:1,filedName:"type"},20532:{type:9,filedName:"compression",child:{16980:{type:1,filedName:"algo"},16981:{type:8,filedName:"settings"}}},20533:{type:9,filedName:"encryption",child:{18401:{type:1,filedName:"algo"},18402:{type:8,filedName:"keyId"}}}}}}}}}},h={24999:{type:9,isArray:!0,filedName:"entry",child:{18094:{type:1,filedName:"uid"},18030:{type:7,filedName:"name"},18016:{type:7,filedName:"mime"},18046:{type:7,filedName:"description"},18012:{type:8,filedName:"data"}}}},o={17849:{type:9,isArray:!0,filedName:"entry",child:{182:{type:9,filedName:"atom",child:{145:{type:2,filedName:"start"},146:{type:2,filedName:"end"},29636:{type:1,filedName:"uid"},128:{type:9,filedName:"display",child:{133:{type:7,filedName:"title"},17276:{type:7,filedName:"language"}}}}}}}},u={187:{type:9,isArray:!0,filedName:"entry",child:{179:{type:2,filedName:"time"},183:{type:9,isArray:!0,filedName:"pos",child:{247:{type:1,filedName:"track"},241:{type:2,filedName:"pos"}}}}}},f={17827:{type:7,filedName:"name"},17543:{type:7,filedName:"string"},17530:{type:7,filedName:"language"},17540:{type:1,filedName:"default"},17588:{type:1,filedName:"default"},26568:{type:9,filedName:"sub"}};f[26568].child=f;const v={29555:{type:9,isArray:!0,filedName:"entry",child:{26568:{type:9,filedName:"tag",child:f},25536:{type:9,filedName:"target",child:{25546:{type:7,filedName:"type"},26826:{type:1,filedName:"typeValue"},25541:{type:1,filedName:"trackUid"},25540:{type:1,filedName:"chapterUid"},25542:{type:1,filedName:"attachUid"}}}}}},y={161:{type:8,filedName:"block"},30113:{type:9,filedName:"additions",child:{166:{type:9,isArray:!0,filedName:"entry",child:{238:{type:1,filedName:"additionalId"},165:{type:8,filedName:"additional"}}}}},155:{type:2,filedName:"duration"},30114:{type:4,filedName:"discardPadding"},251:{type:4,isArray:!0,filedName:"reference"},164:{type:10,filedName:"nonSimple"}},A={163:{type:8,filedName:"block"},160:{type:9,filedName:"blockGroup",child:y},231:{type:2,filedName:"timeCode"},167:{type:2,filedName:"pos"},171:{type:2,filedName:"prevSize"}},w={17030:{type:1,filedName:"version"},17143:{type:1,filedName:"readVersion"},17138:{type:1,filedName:"maxIdLength"},17139:{type:1,filedName:"maxSizeLength"},17026:{type:7,filedName:"docType"},17031:{type:1,filedName:"docTypeVersion"},17029:{type:1,filedName:"docTypeReadVersion"}};async function k(S,z){const V=S.getPos();let L=await S.readUint8();if(!L)return e.z3(`0x00 as pos ${V} invalid as first byte of an EBML number`,r,759),i.LR;let C=1;for(;!(128&L);)C++,L<<=1;if(L&=127,C>z)return e.z3(`Length ${C} indicated by an EBML number's first byte ${L.toString(16)} at pos ${V} exceeds max length ${z}.`,r,772),i.LR;let F=L>>>C-1;for(;--C;)F<<=8,F|=await S.readUint8();return F}async function T(S,z){const V=S.getPos();let L=await S.readUint8(),C=1;if(!L)return e.z3(`0x00 as pos ${V} invalid as first byte of an EBML number`,r,798),BigInt(i.LR);for(;!(128&L);)C++,L<<=1;if(L&=127,C>z)return e.z3(`Length ${C} indicated by an EBML number's first byte ${L.toString(16)} at pos ${V} exceeds max length ${z}.`,r,809),BigInt(i.LR);let F=BigInt(Math.floor(L>>>C-1));for(;--C;){F<<=BigInt(8);const H=await S.readUint8();F|=BigInt(Math.floor(H))}return F}async function P(S,z){switch(z){case BigInt(0):return 0;case BigInt(1):return S.ioReader.readUint8();case BigInt(2):return S.ioReader.readUint16();case BigInt(3):return S.ioReader.readUint24();case BigInt(4):return S.ioReader.readUint32();case BigInt(8):return S.ioReader.readUint64()}let V=BigInt(0),L=0;for(;L++<z;){const C=await S.ioReader.readUint8();V=V<<BigInt(8)|BigInt.asUintN(64,BigInt(Math.floor(C)))}return V}async function b(S,z){switch(z){case BigInt(0):return 0;case BigInt(1):return S.ioReader.readInt8();case BigInt(2):return S.ioReader.readInt16();case BigInt(4):return S.ioReader.readInt32();case BigInt(8):return S.ioReader.readInt64()}let V=BigInt(0),L=0;for(;L++<z;){const C=await S.ioReader.readUint8();V=V<<BigInt(8)|BigInt.asUintN(64,BigInt(Math.floor(C)))}return z===BigInt(3)?0|Number(0xffffffffn&BigInt.asIntN(24,V)):BigInt.asIntN(64,V)}async function x(S,z){const V=S.ioReader.getPos();let L=await S.ioReader.peekUint8();if(!L)return e.z3(`0x00 as pos ${V} invalid as first byte of an EBML number`,r,902),i.LR;let C=1;for(;!(128&L);)C++,L<<=1;let F=0;for(;C--;)F<<=8,F|=await S.ioReader.readUint8();return F}async function I(S,z,V,L={},C=[]){return await async function(F,H,M){const G=F.privateData,D=F.ioReader.getPos();for(;F.ioReader.getPos()<D+H;){const W=await x(F,G.header.maxIdLength),X=await T(F.ioReader,G.header.maxSizeLength);if(F.ioReader.getPos(),await M(W,X)===!1)return}}(S,z,async(F,H)=>{if(V[F]){const M=V[F];let G;switch(M.type){case 1:G=await P(S,H);break;case 2:G=await P(S,H),n.ai(G)&&(G=BigInt(G));break;case 3:G=await b(S,H);break;case 4:G=await b(S,H),n.ai(G)&&(G=BigInt(G));break;case 6:case 5:G=await async function(D,W){return W===BigInt(4)?D.ioReader.readFloat():W===BigInt(8)?D.ioReader.readDouble():(await D.ioReader.skip(0|Number(0xffffffffn&W)),0)}(S,H);break;case 7:G=await S.ioReader.readString(0|Number(0xffffffffn&H));break;case 10:G=!0;break;case 8:G={pos:S.ioReader.getPos(),size:H,data:H<a?await S.ioReader.readBuffer(0|Number(0xffffffffn&H)):null};break;case 9:G=M.child?await I(S,H,M.child):{};break;default:await S.ioReader.skip(0|Number(0xffffffffn&H))}if(G)if(M.isArray){const D=L[M.filedName]||[];D.push(G),L[M.filedName]=D}else L[M.filedName]=G}else await S.ioReader.skip(0|Number(0xffffffffn&H));if(C.length&&s.zy(C,F))return!1}),L}},31866:(g,p,t)=>{t.d(p,{N:()=>i,e:()=>e});const e={A_AAC:86018,A_AC3:86019,A_ALAC:86032,A_DTS:86020,A_EAC3:86056,A_FLAC:86028,A_MLP:86045,"A_MPEG/L2":86016,"A_MPEG/L1":86058,"A_MPEG/L3":86017,A_OPUS:86076,"A_OPUS/EXPERIMENTAL":86076,"A_PCM/FLOAT/IEEE":65557,"A_PCM/INT/BIG":65537,"A_PCM/INT/LIT":65536,"A_QUICKTIME/QDMC":86066,"A_QUICKTIME/QDM2":86035,"A_REAL/14_4":77824,"A_REAL/28_8":77825,"A_REAL/ATRC":86047,"A_REAL/COOK":86036,"A_REAL/SIPR":86057,A_TRUEHD:86060,A_TTA1:86038,A_VORBIS:86021,A_WAVPACK4:86041,"D_WEBVTT/SUBTITLES":94226,"D_WEBVTT/CAPTIONS":94226,"D_WEBVTT/DESCRIPTIONS":94226,"D_WEBVTT/METADATA":94226,"S_TEXT/UTF8":94225,"S_TEXT/ASCII":94210,"S_TEXT/ASS":94230,"S_TEXT/SSA":94230,S_ASS:94230,S_SSA:94230,S_VOBSUB:94208,S_DVBSUB:94209,"S_HDMV/PGS":94214,"S_HDMV/TEXTST":94231,V_AV1:225,V_DIRAC:116,V_FFV1:33,V_MJPEG:7,V_MPEG1:1,V_MPEG2:2,"V_MPEG4/ISO/ASP":12,"V_MPEG4/ISO/AP":12,"V_MPEG4/ISO/SP":12,"V_MPEG4/ISO/AVC":27,"V_MPEGH/ISO/HEVC":173,"V_MPEGH/ISO/VVC":196,"V_MPEG4/MS/V3":16,V_PRORES:147,"V_REAL/RV10":5,"V_REAL/RV20":6,"V_REAL/RV30":68,"V_REAL/RV40":69,V_SNOW:208,V_THEORA:30,V_UNCOMPRESSED:13,V_VP8:139,V_VP9:167},i={V_VP8:139,V_VP9:167,V_AV1:225,A_VORBIS:86021,A_OPUS:86076,"D_WEBVTT/SUBTITLES":94226,"D_WEBVTT/CAPTIONS":94226,"D_WEBVTT/DESCRIPTIONS":94226,"D_WEBVTT/METADATA":94226}},21071:(g,p,t)=>{t.d(p,{_l:()=>e,gQ:()=>i});const e=["hmhd","nmhd","iods","xml ","url ","bxml","ipro","mere","stts","ctts","stss","stsz","stz2","stsc","stco","co64","stsd","dref","mvhd","tkhd","mdhd","hdlr"],i=["moov","trak","edts","mdia","minf","dinf","stbl","mvex","moof","traf","vttc","tref","iref","mfra","hnti","hinf","strd","sinf","rinf","schi","trgr","udta","iprp","ipco","strk","meco"]},61179:(g,p,t)=>{function e(i,n,s){const r=i.privData,a=s.trexs.find(v=>v.trackId===n.trackId);let d=n.baseDataOffset+BigInt(Math.floor(n.dataOffset));n.baseIsMoof&&(d+=s.currentFragment.pos);let c=n.baseMediaDecodeTime;const l=n.sampleSizes,h=n.sampleDurations,o=n.sampleFlags,u=n.sampleCompositionTimeOffset;if(!l.length)for(let v=0;v<n.sampleCount;v++)l.push(n.defaultSampleSize||a.size);if(!h.length)for(let v=0;v<n.sampleCount;v++)h.push(n.defaultSampleDuration||a.duration);if(!o.length)for(let v=0;v<n.sampleCount;v++)o.push(n.defaultSampleFlags||a.flags);if(!u.length)for(let v=0;v<n.sampleCount;v++)u.push(0);const f=[];for(let v=0;v<n.sampleCount;v++){const y={dts:c,pts:c+BigInt(Math.floor(u[v])),pos:d,size:l[v],duration:h[v],flags:0};c+=BigInt(Math.floor(y.duration)),d+=BigInt(Math.floor(y.size));let A=o[v];v===0&&n.firstSampleFlags&&(A=n.firstSampleFlags),16842752&A||(y.flags|=1),f.push(y)}r.samplesIndex=f}t.d(p,{p:()=>e})},98859:(g,p,t)=>{function e(i){const n=i.privData,s=n.chunkOffsets,r=n.sampleSizes,a=n.cttsSampleCounts,d=n.cttsSampleOffsets,c=n.stscFirstChunk,l=n.stscSamplesPerChunk,h=n.stssSampleNumbersMap,o=n.sttsSampleCounts,u=n.sttsSampleDeltas;if(!s.length)return;let f=0,v=0,y=0,A=0,w=0,k=0,T=BigInt(0),P=0,b=BigInt(0);const x=[];for(let I=0;I<s.length;I++)for(T=s[I],f<c.length-1&&c[f+1]===I+1&&f++,k=l[f];k>0;){const S={dts:b,pts:b,pos:T,size:r[P],duration:0,flags:0};(h&&h.has(P+1)||i.codecpar.codecType===1)&&(S.flags|=1),d&&(S.pts=S.dts+BigInt(Math.floor(d[A])),w++,w===a[A]&&(A++,w=0)),P&&(x[P-1].duration=Number(S.dts-x[P-1].dts)),T+=BigInt(Math.floor(S.size)),b+=BigInt(Math.floor(u[v])),y++,y===o[v]&&(v++,y=0),P++,x.push(S),k--}x[P-1].duration=x[P-2].duration,n.samplesIndex=x}t.d(p,{X:()=>e})},3384:(g,p,t)=>{function e(){return{trackId:0,baseDataOffset:BigInt(0),defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0,baseMediaDecodeTime:BigInt(0),sampleCount:0,dataOffset:0,dataOffsetPos:BigInt(0),firstSampleFlags:0,sampleDurations:[],sampleSizes:[],sampleFlags:[],sampleCompositionTimeOffset:[],baseIsMoof:!1,ioWriter:null,buffers:[]}}t.d(p,{A:()=>e})},9690:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(77231);function i(){return{isom:!1,timescale:e.N_,duration:e.Dh,foundMoov:!1,foundMdat:!1,majorBrand:0,minorVersion:0,compatibleBrand:[],creationTime:BigInt(0),modificationTime:BigInt(0),rate:e.N_,volume:e.N_,matrix:null,nextTrackId:1,fragment:!1,trexs:[],currentFragment:null,boxsPositionInfo:[],holdMoovPos:BigInt(0),currentChunk:null}}},38106:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(77231);function i(){return{chunkOffsets:null,cttsSampleCounts:null,cttsSampleOffsets:null,stscFirstChunk:null,stscSamplesPerChunk:null,stscSampleDescriptionIndex:null,stssSampleNumbersMap:null,stssSampleNumbers:null,sampleSizes:null,sttsSampleCounts:null,sttsSampleDeltas:null,timescale:0,duration:BigInt(0),trackId:e.N_,layer:0,alternateGroup:0,volume:0,matrix:null,width:0,height:0,audioCid:0,samplesPerFrame:0,bytesPerFrame:0,currentSample:0,sampleEnd:!1,samplesIndex:[],fragIndexes:[],lastPts:BigInt(0),lastDts:BigInt(0),startDts:BigInt(0),startCT:0,lastDuration:0,chunkCount:0,firstWrote:!1,lastStscCount:0,perStreamGrouping:!1,index:0,flags:0}}},85428:(g,p,t)=>{t.d(p,{G:()=>n});var e=t(77231),i=t(44328);function n(s,r){let a,d,c,l,h,o,u=BigInt(0);if(s.streams.forEach(f=>{const v=f.privData;if(!v.samplesIndex||!v.samplesIndex.length)return v.sampleEnd=!0,!0;v.sampleEnd||c&&!(v.samplesIndex[v.currentSample].pos<c.pos)||(c=v.samplesIndex[v.currentSample],l=f),v.sampleEnd||h&&!((0,i.k)(v.samplesIndex[v.currentSample].dts,f.timeBase,e.KR)<u)||(h=v.samplesIndex[v.currentSample],u=(0,i.k)(h.dts,f.timeBase,e.KR),o=f)}),c&&h){const f=(0,i.k)(c.dts,l.timeBase,e.KR),v=(0,i.k)(h.dts,o.timeBase,e.KR);Math.abs(Number(f-v))<1e6||2&s.ioReader.flags?(a=c,d=l):(a=h,d=o)}else c?(a=c,d=l):h&&(a=h,d=o);return d&&(d.privData.currentSample++,d.privData.currentSample>=d.privData.samplesIndex.length&&(d.privData.sampleEnd=!0)),r.fragment&&(s.streams.find(f=>f.privData.sampleEnd===!1)||(r.currentFragment=null)),{sample:a,stream:d}}},79804:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(72739);function i(n,s){const r=n.getPos(),a=n.getPointer(),d=r-BigInt(Math.floor(a)),c=[];e.__(s.boxsPositionInfo,l=>{l.pos<r&&l.pos>=d?(n.seekInline(a+Number(l.pos-r)),n.writeUint32(l.size)):c.push(l)}),e.__(c,l=>{n.seek(l.pos),n.writeUint32(l.size)}),c.length?n.seek(r):n.seekInline(a),s.boxsPositionInfo=[]}},74963:(g,p,t)=>{t.d(p,{E6:()=>f,t9:()=>w,wB:()=>y,wZ:()=>A});var e=t(65977),i=t(21071),n=t(68361),s=t(4624),r=t(61179),a=t(98859),d=t(3384),c=t(38106),l=t(37837),h=t(14686),o=t(77231),u="src\\avformat\\formats\\mov\\imov.ts";async function f(k,T,P){const b=k.getPos()+BigInt(Math.floor(P.size));for(T.majorBrand=await k.readUint32(),T.minorVersion=await k.readUint32(),T.majorBrand===(0,e.A)("qt  ")&&(T.isom=!0);k.getPos()<b;)T.compatibleBrand.push(await k.readUint32())}async function v(k,T,P,b){const x=k.getPos()+BigInt(Math.floor(P.size));for(;k.getPos()<x;){const I=await k.readUint32(),S=await k.readUint32();if(I<8)return void s.z3(`invalid box size ${I}`,u,76);n.A[S]?await n.A[S](k,T,{type:S,size:I-8},b):i.gQ.some(z=>(0,e.A)(z)===S)?await v(k,T,{type:S,size:I-8},b):await k.skip(I-8)}}async function y(k,T,P,b){const x=k.getPos()+BigInt(Math.floor(b.size));for(;k.getPos()<x;){const I=await k.readUint32(),S=await k.readUint32();if(I<8)return void s.z3(`invalid box, type: ${S}, size ${I}`,u,124);if(n.A[S])await n.A[S](k,null,{type:S,size:I-8},P);else if(S===(0,e.A)("trak"))if(!P.foundMoov||P.fragment){const z=T.createStream();if(z.privData=(0,c.A)(),await v(k,z,{type:S,size:I-8},P),P.fragment){const V=z.privData,L=T.streams.find(C=>{const F=C.privData;if(C.index!==z.index&&F.trackId===V.trackId)return!0});L?(z.sideData[1]&&(L.sideData[1]=z.sideData[1],L.codecpar.extradata&&(0,l.Eb)(L.codecpar.extradata),L.codecpar.extradataSize=L.sideData[1].length,L.codecpar.extradata=(0,l.sY)(L.codecpar.extradataSize),(0,h.lW)(L.codecpar.extradata,L.codecpar.extradataSize,L.sideData[1]),z.codecpar.width===o.N_&&V.width>0&&(L.codecpar.width=V.width),z.codecpar.width===o.N_&&V.height>0&&(L.codecpar.height=V.height)),T.removeStream(z),T.streamIndex--):(z.codecpar.width===o.N_&&V.width>0&&(z.codecpar.width=V.width),z.codecpar.width===o.N_&&V.height>0&&(z.codecpar.height=V.height))}else(0,a.X)(z)}else await k.skip(I-8);else S===(0,e.A)("mvex")?(P.fragment=!0,await v(k,null,{type:S,size:I-8},P)):await k.skip(I-8)}}async function A(k,T,P,b){const x=k.getPos()+BigInt(Math.floor(b.size));for(;k.getPos()<x;){const I=await k.readUint32(),S=await k.readUint32();if(I<8)return void s.z3(`invalid box, type: ${S}, size ${I}`,u,229);if(n.A[S])await n.A[S](k,null,{type:S,size:I-8},P);else if(S===(0,e.A)("traf")){const z=(0,d.A)();P.currentFragment.currentTrack=z,await v(k,null,{type:S,size:I-8},P),P.currentFragment.tracks.push(z),P.currentFragment.currentTrack=null;const V=T.streams.find(L=>L.privData.trackId===z.trackId);if(V){const L=V.privData;z.streamIndex=V.index,(0,r.p)(V,z,P),L.currentSample=0,L.sampleEnd=!1}}else await k.skip(I-8)}}async function w(k,T,P,b){const x=k.getPos()+BigInt(Math.floor(b.size));for(;k.getPos()<x;){const I=await k.fileSize(),S=await k.readUint32();if(await k.readUint32()!==(0,e.A)("tfra"))return void s.z3("invalid tfra box data",u,293);const z=await k.readUint8();await k.skip(3);const V=await k.readUint32(),L=await k.readUint32(),C=await k.readUint32(),F=T.streams.find(H=>H.privData.trackId===V);if(F){const H=F.privData;let M,G;for(let D=0;D<C;D++){z===1?(M=await k.readUint64(),G=await k.readUint64()):(M=BigInt(Math.floor(await k.readUint32())),G=BigInt(Math.floor(await k.readUint32()))),H.fragIndexes.push({pos:G,time:M});for(let W=0;W<1+(L>>4&3);W++)await k.skip(1);for(let W=0;W<1+(L>>2&3);W++)await k.skip(1);for(let W=0;W<1+(3&L);W++)await k.skip(1)}if(H.fragIndexes.length){await k.seek(H.fragIndexes[H.fragIndexes.length-1].pos);const D=await k.readUint32(),W=await k.readUint32();if(W===(0,e.A)("moof")&&(P.currentFragment={pos:BigInt(0),size:D,sequence:0,tracks:[],currentTrack:null},await A(k,T,P,{size:D,type:W}),H.samplesIndex.length)){const X=H.samplesIndex[H.samplesIndex.length-1];F.duration=X.pts+BigInt(Math.floor(X.duration))}}}await k.seek(I+BigInt(Math.floor(S)),!1,!1)}P.currentFragment=null}},14202:(g,p,t)=>{t.d(p,{BB:()=>i,Ip:()=>n,Jl:()=>e});const e={1:function(s){return[{type:"tkhd"},{type:"mdia",children:[{type:"mdhd"},{type:"hdlr"},{type:"minf",children:[{type:"smhd"},s.isom?{type:"minf_hdlr"}:null,{type:"dinf",children:[{type:"dref",children:[{type:"url "}]}]},{type:"stbl",children:[{type:"stsd"},{type:"stts"},{type:"stsc"},{type:"stsz"},{type:"stco"}]}]}]}]},0:function(s){return[{type:"tkhd"},{type:"mdia",children:[{type:"mdhd"},{type:"hdlr"},{type:"minf",children:[{type:"vmhd"},s.isom?{type:"minf_hdlr"}:null,{type:"dinf",children:[{type:"dref",children:[{type:"url "}]}]},{type:"stbl",children:[{type:"stsd"},{type:"stts"},{type:"stsc"},{type:"stsz"},{type:"stco"}]}]}]}]}},i={1:function(s){return[{type:"tkhd"},{type:"edts"},{type:"mdia",children:[{type:"mdhd"},{type:"hdlr"},{type:"minf",children:[{type:"smhd"},s.isom?{type:"minf_hdlr"}:null,{type:"dinf",children:[{type:"dref",children:[{type:"url "}]}]},{type:"stbl",children:[{type:"stsd"},{type:"stts"},{type:"stsc"},{type:"stsz"},{type:"stco"}]}]}]}]},0:function(s){return[{type:"tkhd"},{type:"edts"},{type:"mdia",children:[{type:"mdhd"},{type:"hdlr"},{type:"minf",children:[{type:"vmhd"},s.isom?{type:"minf_hdlr"}:null,{type:"dinf",children:[{type:"dref",children:[{type:"url "}]}]},{type:"stbl",children:[{type:"stsd"},{type:"stts"},{type:"stss"},{type:"ctts"},{type:"stsc"},{type:"stsz"},{type:"stco"}]}]}]}]}},n=[{type:"tfhd"},{type:"tfdt"},{type:"trun"}]},6660:(g,p,t)=>{t.d(p,{Q9:()=>n,f3:()=>s,uf:()=>r,zs:()=>i});var e=t(65977);const i={86018:64,86017:105,86076:173,86028:193,86021:221,12:32,27:33,173:35,196:51,167:177,0:0},n={32:12,33:27,35:173,51:196,177:167,64:86018,102:86018,103:86018,104:86018,105:86017,107:86017,173:86076,193:86028,221:86021,0:0},s={vide:0,soun:1,clcp:3,sbtl:3,subt:3,subp:3,text:3},r={[(0,e.A)("mp4a")]:86018,1836253269:86017,[(0,e.A)("Opus")]:86076,[(0,e.A)("fLaC")]:86028,[(0,e.A)("spex")]:86051,[(0,e.A)("SPXN")]:86051,[(0,e.A)("ac-3")]:86019,[(0,e.A)("sac3")]:86019,[e.A.mp4v]:12,[(0,e.A)("av01")]:225,[(0,e.A)("vp08")]:139,[(0,e.A)("vp09")]:167,[(0,e.A)("avc1")]:27,[(0,e.A)("hev1")]:173,[(0,e.A)("hvc1")]:173,[(0,e.A)("vvc1")]:196,[(0,e.A)("vvi1")]:196,[(0,e.A)("text")]:94213,[(0,e.A)("tx3g")]:94213}},75473:(g,p,t)=>{t.d(p,{Ro:()=>h,dI:()=>l,l7:()=>d});var e=t(65977),i=t(21071),n=t(72739),s=t(80025),r=t(14202),a=t(79804);function d(o,u){o.flush();const f=o.getPointer(),v=o.getPos();o.writeUint32(0),o.writeUint32((0,e.A)("ftyp")),o.writeUint32(u.majorBrand||(0,e.A)("isom")),o.writeUint32(u.minorVersion||512),n.__(u.compatibleBrand,y=>{o.writeUint32(y)}),function(y,A,w){const k=y.getPointer();y.seekInline(A),y.writeUint32(w),y.seekInline(k)}(o,f,Number(o.getPos()-v)),u.isom?(o.writeUint32(8),o.writeUint32((0,e.A)("wide"))):u.fragment||(o.writeUint32(8),o.writeUint32((0,e.A)("free")))}function c(o,u,f,v){n.__(u,y=>{if(!y)return!0;if(s.A[y.type])s.A[y.type](o,f,v);else if(y.children){const A=o.getPos();o.writeUint32(0),o.writeUint32((0,e.A)(y.type)),c(o,y.children,f,v),v.boxsPositionInfo.push({pos:A,type:y.type,size:Number(o.getPos()-A)})}else(function(A,w){const k=n.zy(i._l,w);A.writeUint32(k?12:8),A.writeUint32((0,e.A)(w)),k&&A.writeUint32(0)})(o,y.type)})}function l(o,u,f){const v=o.getPos();if(o.writeUint32(0),o.writeUint32((0,e.A)("moov")),s.A.mvhd(o,null,f),n.__(u.streams,y=>{const A=o.getPos();o.writeUint32(0),o.writeUint32((0,e.A)("trak")),c(o,f.fragment?r.Jl[y.codecpar.codecType](f):r.BB[y.codecpar.codecType](f),y,f),f.boxsPositionInfo.push({pos:A,type:"trak",size:Number(o.getPos()-A)})}),f.fragment){const y=o.getPos();o.writeUint32(0),o.writeUint32((0,e.A)("mvex")),n.__(u.streams,A=>{s.A.trex(o,A,f)}),f.boxsPositionInfo.push({pos:y,type:"mvex",size:Number(o.getPos()-y)})}f.boxsPositionInfo.push({pos:v,type:"moov",size:Number(o.getPos()-v)}),(0,a.A)(o,f)}function h(o,u,f){const v=o.getPos();o.writeUint32(0),o.writeUint32((0,e.A)("moof")),s.A.mfhd(o,null,f),n.__(f.currentFragment.tracks,A=>{if(!A.sampleCount)return!0;const w=o.getPos();o.writeUint32(0),o.writeUint32((0,e.A)("traf"));const k=u.streams.find(T=>T.privData.trackId===A.trackId);c(o,r.Ip,k,f),f.boxsPositionInfo.push({pos:w,type:"traf",size:Number(o.getPos()-w)})});const y=Number(o.getPos()-v);f.boxsPositionInfo.push({pos:v,type:"moof",size:y}),f.currentFragment.size=y}},38582:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(4624),i=t(14686),n=t(37837),s=t(90412),r="src\\avformat\\formats\\mov\\parsing\\av1c.ts";async function a(d,c,l,h){const o=d.getPos();c.codecpar.codecId=225;const u=(0,n.sY)(l.size),f=await d.readBuffer(l.size,(0,i.JW)(u,l.size));h.foundMoov?(c.sideData[1]=f.slice(),(0,n.Eb)(u)):(c.codecpar.extradata=u,c.codecpar.extradataSize=l.size,c.sideData[1]=f.slice()),s.XC(c,c.sideData[1]);const v=l.size-Number(d.getPos()-o);v>0?await d.skip(v):v<0&&e.z3(`read avcc error, size: ${l.size}, read: ${l.size-v}`,r,63)}},73840:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(37837),i=t(14686),n=t(4624),s=t(20620),r="src\\avformat\\formats\\mov\\parsing\\avcc.ts";async function a(d,c,l,h){const o=d.getPos();c.codecpar.codecId=27;const u=(0,e.sY)(l.size),f=await d.readBuffer(l.size,(0,i.JW)(u,l.size));h.foundMoov?(c.sideData[1]=f.slice(),(0,e.Eb)(u)):(c.codecpar.extradata=u,c.codecpar.extradataSize=l.size,c.sideData[1]=f.slice()),s.XC(c,c.sideData[1]);const v=l.size-Number(d.getPos()-o);v>0?await d.skip(v):v<0&&n.z3(`read avcc error, size: ${l.size}, read: ${l.size-v}`,r,63)}},37213:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\co64.ts";async function n(s,r,a,d){const c=s.getPos(),l=await s.readUint8();await s.skip(3);const h=[],o=await s.readUint32();if(l===0)for(let f=0;f<o;f++)h.push(await s.readUint64());r.privData.chunkOffsets=h;const u=a.size-Number(s.getPos()-c);u>0?await s.skip(u):u<0&&e.z3(`read co64 error, size: ${a.size}, read: ${a.size-u}`,i,56)}},12869:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\colr.ts";async function n(s,r,a,d){const c=s.getPos();let l=await s.readString(4);if(l==="nclx"||l==="nclc"||l==="prof")if(l==="prof"){const o=await s.readBuffer(a.size-4);r.sideData[28]=o}else{let o=await s.readUint16(),u=await s.readUint16(),f=await s.readUint16();if(l==="nclx"){const v=await s.readUint8()>>7;r.codecpar.colorRange=v?2:1}o>=23&&(o=2),u>=19&&(u=2),f>=15&&(f=2),r.codecpar.colorPrimaries=o,r.codecpar.colorTrc=u,r.codecpar.colorSpace=f}else e.R8(`unsupported color_parameter_type: ${l}`,i,79);const h=a.size-Number(s.getPos()-c);h>0?await s.skip(h):h<0&&e.z3(`read vpcc error, size: ${a.size}, read: ${a.size-h}`,i,87)}},59299:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\ctts.ts";async function n(s,r,a,d){const c=s.getPos(),l=r.privData;await s.skip(4);const h=[],o=[],u=await s.readUint32();for(let v=0;v<u;v++)h.push(await s.readUint32()),o.push(await s.readInt32());l.cttsSampleCounts=h,l.cttsSampleOffsets=o;const f=a.size-Number(s.getPos()-c);f>0?await s.skip(f):f<0&&e.z3(`read ctts error, size: ${a.size}, read: ${a.size-f}`,i,59)}},86528:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(4624),i=t(37837),n=t(14686),s="src\\avformat\\formats\\mov\\parsing\\dfla.ts";async function r(a,d,c,l){const h=a.getPos();d.codecpar.codecId=86028,await a.skip(1),await a.skip(3);const o=await a.readUint8(),u=128&o,f=127&o,v=await a.readUint24();if(f===0&&v===34){const A=(0,i.sY)(v),w=await a.readBuffer(v,(0,n.JW)(A,v));l.foundMoov?(d.sideData[1]=w.slice(),(0,i.Eb)(A)):(d.codecpar.extradata=A,d.codecpar.extradataSize=v)}else e.z3("streaminfo must be first FLACMetadataBlock",s,67);u||e.R8("non streaminfo FLACMetadataBlock(s) ignored",s,71);const y=c.size-Number(a.getPos()-h);y>0?await a.skip(y):y<0&&e.z3(`read vpcc error, size: ${c.size}, read: ${c.size-y}`,s,79)}},41781:(g,p,t)=>{t.d(p,{A:()=>c});var e=t(4624),i=t(37837),n=t(14686),s=t(65451),r=t(31865),a=t(729),d="src\\avformat\\formats\\mov\\parsing\\dops.ts";async function c(l,h,o,u){const f=l.getPos();h.codecpar.codecId=86076,await l.skip(1);const v=(0,i.sY)(o.size+8),y=(0,n.JW)(v,o.size+8),A=new r.A(y),w=new a.A(y,!1);w.writeString("OpusHead"),w.writeUint8(1),await l.readBuffer(o.size-1,(0,n.JW)(v+9,o.size-1)),A.seek(10),w.seek(10),w.writeUint16(A.readUint16()),w.writeUint32(A.readUint32()),w.writeUint16(A.readUint16()),u.foundMoov?(h.sideData[1]=y.slice(),(0,i.Eb)(v)):(h.codecpar.extradata=v,h.codecpar.extradataSize=y.length,s.XC(h,y.slice()));const k=o.size-Number(l.getPos()-f);k>0?await l.skip(k):k<0&&e.z3(`read dops error, size: ${o.size}, read: ${o.size-k}`,d,81)}},28412:(g,p,t)=>{t.d(p,{A:()=>l});var e=t(4624),i=t(6660),n=t(37837),s=t(14686),r=t(58469),a=t(65451),d="src\\avformat\\formats\\mov\\parsing\\esds.ts";async function c(h){let o=0;for(let u=0;u<4;u++){const f=await h.readUint8();if(o=o<<7|127&f,!(128&f))break}return o}async function l(h,o,u,f){const v=h.getPos();await h.skip(4);let y=h.getPos()+BigInt(Math.floor(u.size-4));for(;h.getPos()<y;){let w=await h.readUint8(),k=await c(h);if(k!==0)if(w===3){let T=h.getPos()+BigInt(Math.floor(k));if(await h.skip(2),await h.skip(1),w=await h.readUint8(),k=await c(h),k===0){e.R8("esds invalid ES descriptor size 0, skip",d,85),await h.skip(Number(T-h.getPos()));continue}if(w===4)if(o.codecpar.codecId=i.Q9[await h.readUint8()],await h.skip(1),await h.skip(3),await h.skip(4),await h.skip(4),h.getPos()<T-BigInt(5))if(w=await h.readUint8(),k=await c(h),w===5){const P=(0,n.sY)(k),b=await h.readBuffer(k,(0,s.JW)(P,k));f.foundMoov?(o.sideData[1]=b.slice(),(0,n.Eb)(P)):(o.codecpar.extradata=P,o.codecpar.extradataSize=k,o.codecpar.codecId===86018?r.XC(o,b.slice()):o.codecpar.codecId===86076&&a.XC(o,b.slice()))}else await h.skip(Number(T-h.getPos()));else await h.skip(Number(T-h.getPos()));else await h.skip(Math.min(k,Number(T-h.getPos())))}else await h.skip(Math.min(k,Number(y-h.getPos())));else e.R8("esds invalid descriptor size 0, skip",d,68),await h.skip(Number(y-h.getPos()))}const A=u.size-Number(h.getPos()-v);A>0?await h.skip(A):A<0&&e.z3(`read vpcc error, size: ${u.size}, read: ${u.size-A}`,d,153)}},40179:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(4624),i=t(34677),n=t(6660),s="src\\avformat\\formats\\mov\\parsing\\hdlr.ts";async function r(a,d,c,l){const h=a.getPos(),o=await a.readUint8();if(await a.skip(3),o===0){await a.skip(4);const f=await a.readString(4),v=n.f3[f];(0,i.A)(v)&&(d.codecpar.codecType=v),await a.skip(4),await a.skip(4),await a.skip(4);const y=c.size-24;if(y>0){const A=!l.isom&&await a.peekUint8()===y-1;A&&await a.skip(1),d.metadata.handlerName=await a.readString(y-(A?1:0))}}const u=c.size-Number(a.getPos()-h);u>0?await a.skip(u):u<0&&e.z3(`read hdlr error, size: ${c.size}, read: ${c.size-u}`,s,77)}},31421:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(37837),i=t(14686),n=t(4624),s=t(53e3),r="src\\avformat\\formats\\mov\\parsing\\hvcc.ts";async function a(d,c,l,h){const o=d.getPos();c.codecpar.codecId=173;const u=(0,e.sY)(l.size),f=await d.readBuffer(l.size,(0,i.JW)(u,l.size));h.foundMoov?(c.sideData[1]=f.slice(),(0,e.Eb)(u)):(c.codecpar.extradata=u,c.codecpar.extradataSize=l.size,c.sideData[1]=f.slice()),s.XC(c,c.sideData[1]);const v=l.size-Number(d.getPos()-o);v>0?await d.skip(v):v<0&&n.z3(`read hevc error, size: ${l.size}, read: ${l.size-v}`,r,63)}},45248:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\mdhd.ts";async function n(s,r,a,d){const c=s.getPos(),l=await s.readUint8();await s.skip(3);let h=BigInt(0),o=BigInt(0),u=0,f=BigInt(0);l===1?(h=await s.readUint64(),o=await s.readUint64(),u=await s.readUint32(),f=await s.readUint64()):(h=BigInt(Math.floor(await s.readUint32())),o=BigInt(Math.floor(await s.readUint32())),u=await s.readUint32(),f=BigInt(Math.floor(await s.readUint32()))),r.duration=f,r.timeBase.den=u,r.timeBase.num=1,r.metadata.creationTime=h,r.metadata.modificationTime=o;const v=await s.readUint16(),y=[];y[0]=v>>10&31,y[1]=v>>5&31,y[2]=31&v;const A=String.fromCharCode(y[0]+96,y[1]+96,y[2]+96);r.metadata.language=v,r.metadata.languageString=A,await s.skip(2);const w=a.size-Number(s.getPos()-c);w>0?await s.skip(w):w<0&&e.z3(`read mdhd error, size: ${a.size}, read: ${a.size-w}`,i,83)}},7018:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\mfhd.ts";async function n(s,r,a,d){const c=s.getPos();await s.readUint8(),await s.skip(3),d.currentFragment.sequence=await s.readUint32();const l=a.size-Number(s.getPos()-c);l>0?await s.skip(l):l<0&&e.z3(`read vpcc error, size: ${a.size}, read: ${a.size-l}`,i,49)}},19354:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\mvhd.ts";async function n(s,r,a,d){const c=s.getPos(),l=await s.readUint8();await s.skip(3),l===1?(d.creationTime=await s.readUint64(),d.modificationTime=await s.readUint64(),d.timescale=await s.readUint32(),d.duration=await s.readUint64()):(d.creationTime=BigInt(Math.floor(await s.readUint32())),d.modificationTime=BigInt(Math.floor(await s.readUint32())),d.timescale=await s.readUint32(),d.duration=BigInt(Math.floor(await s.readUint32()))),d.rate=await s.readUint32(),d.volume=await s.readUint16()>>>8,await s.skip(10),d.matrix=new Uint32Array(9);for(let o=0;o<9;o++)d.matrix[o]=await s.readUint32();await s.skip(24),d.nextTrackId=await s.readUint32();const h=a.size-Number(s.getPos()-c);h>0?await s.skip(h):h<0&&e.z3(`read mvhd error, size: ${a.size}, read: ${a.size-h}`,i,70)}},68361:(g,p,t)=>{t.d(p,{A:()=>P});var e=t(91635),i=t(59299),n=t(63080),s=t(62831),r=t(6570),a=t(34136),d=t(15692),c=t(37213),l=t(45248),h=t(19354),o=t(27436),u=t(40179),f=t(35173),v=t(25778),y=t(7018),A=t(61807),w=t(67523),k=t(58996),T=t(65977);const P={[(0,T.A)("stts")]:e.A,[(0,T.A)("ctts")]:i.A,[(0,T.A)("stss")]:n.A,[(0,T.A)("stsz")]:s.A,[(0,T.A)("stz2")]:r.A,[(0,T.A)("stsc")]:a.A,[(0,T.A)("stco")]:d.A,[(0,T.A)("co64")]:c.A,[(0,T.A)("mdhd")]:l.A,[(0,T.A)("mvhd")]:h.A,[(0,T.A)("tkhd")]:o.A,[(0,T.A)("hdlr")]:u.A,[(0,T.A)("stsd")]:f.A,[(0,T.A)("trex")]:v.A,[(0,T.A)("mfhd")]:y.A,[(0,T.A)("tfhd")]:A.A,[(0,T.A)("tfdt")]:w.A,[(0,T.A)("trun")]:k.A}},15692:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\stco.ts";async function n(s,r,a,d){const c=s.getPos(),l=await s.readUint8();await s.skip(3);const h=[],o=await s.readUint32();if(l===0)for(let f=0;f<o;f++)h.push(BigInt(Math.floor(await s.readUint32())));r.privData.chunkOffsets=h;const u=a.size-Number(s.getPos()-c);u>0?await s.skip(u):u<0&&e.z3(`read stco error, size: ${a.size}, read: ${a.size-u}`,i,56)}},34136:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\stsc.ts";async function n(s,r,a,d){const c=s.getPos(),l=await s.readUint8();await s.skip(3);const h=r.privData,o=[],u=[],f=[],v=await s.readUint32();if(l===0)for(let A=0;A<v;A++)o.push(await s.readUint32()),u.push(await s.readUint32()),f.push(await s.readUint32());h.stscFirstChunk=o,h.stscSamplesPerChunk=u,h.stscSampleDescriptionIndex=f;const y=a.size-Number(s.getPos()-c);y>0?await s.skip(y):y<0&&e.z3(`read stsc error, size: ${a.size}, read: ${a.size-y}`,i,65)}},35173:(g,p,t)=>{t.d(p,{A:()=>y});var e=t(4624),i=t(65977),n=t(6660),s=t(73840),r=t(31421),a=t(60703),d=t(83561),c=t(38582),l=t(28412),h=t(28460),o=t(86528),u=t(41781),f=t(12869),v="src\\avformat\\formats\\mov\\parsing\\stsd.ts";async function y(A,w,k,T){const P=A.getPos(),b=await A.readUint8();await A.skip(3);const x=w.privData,I=await A.readUint32();for(let z=0;z<I;z++){const V=await A.readUint32(),L=await A.readUint32(),C=A.getPos()+BigInt(Math.floor(V-8));if(n.uf[L]&&(w.codecpar.codecId=n.uf[L]),V===0){e.R8("stsd entry invalid box size 0, skip",v,70),await A.skip(Number(C-A.getPos()));break}if(V>=16?(await A.skip(6),await A.skip(2)):V<=7&&e.h2(`invalid size: ${V} in stsd`,v,83),w.codecpar.codecType===0){await A.skip(2),await A.skip(2),w.metadata.vendorId=await A.readString(4),await A.skip(4),await A.skip(4),w.codecpar.width=await A.readUint16(),w.codecpar.height=await A.readUint16(),await A.skip(4),await A.skip(4),await A.skip(4),await A.skip(2);let F=await A.readUint8();for(F>31&&(F=31),w.metadata.encoder=await A.readString(F),F<31&&await A.skip(31-F),await A.skip(2),await A.skip(2);A.getPos()<C;){const H=await A.readUint32(),M=await A.readUint32();H!==0?M===(0,i.A)("avcC")?await(0,s.A)(A,w,{type:M,size:H-8},T):M===(0,i.A)("hvcC")?await(0,r.A)(A,w,{type:M,size:H-8},T):M===(0,i.A)("vvcC")?await(0,a.A)(A,w,{type:M,size:H-8},T):M===(0,i.A)("av1C")?await(0,c.A)(A,w,{type:M,size:H-8},T):M===(0,i.A)("vpcC")?await(0,d.A)(A,w,{type:M,size:H-8},T):M===(0,i.A)("esds")?await(0,l.A)(A,w,{type:M,size:H-8},T):M===(0,i.A)("wave")?await(0,h.A)(A,w,{type:M,size:H-8},T):M===(0,i.A)("colr")?await(0,f.A)(A,w,{type:M,size:H-8},T):await A.skip(Math.min(H-8,Number(C-A.getPos()))):(e.R8("stsd video invalid box size 0, skip",v,132),await A.skip(Number(C-A.getPos())))}}else if(w.codecpar.codecType===1){const F=await A.readUint16();for(await A.skip(2),w.metadata.vendorId=await A.readString(4),w.codecpar.chLayout.nbChannels=await A.readUint16(),w.codecpar.bitsPerCodedSample=await A.readUint16(),x.audioCid=await A.readUint16(),await A.skip(2),w.codecpar.sampleRate=await A.readUint32()>>>16,(!T.isom||b===0&&F>0)&&(F===1?(x.samplesPerFrame=await A.readUint32(),await A.skip(4),x.bytesPerFrame=await A.readUint32(),await A.skip(4)):F===2&&(await A.skip(4),w.codecpar.sampleRate=Number(await A.readUint64()),w.codecpar.chLayout.nbChannels=await A.readUint32(),await A.skip(4),w.codecpar.bitsPerCodedSample=await A.readUint32(),await A.skip(4),x.bytesPerFrame=await A.readUint32(),x.samplesPerFrame=await A.readUint32()));A.getPos()<C;){const H=await A.readUint32(),M=await A.readUint32();H!==0?M===(0,i.A)("esds")?await(0,l.A)(A,w,{type:M,size:H-8},T):M===(0,i.A)("dfLa")?await(0,o.A)(A,w,{type:M,size:H-8},T):M===(0,i.A)("dOps")?await(0,u.A)(A,w,{type:M,size:H-8},T):M===(0,i.A)("wave")?await(0,h.A)(A,w,{type:M,size:H-8},T):await A.skip(Math.min(H-8,Number(C-A.getPos()))):(e.R8("stsd audio invalid box size 0, skip",v,279),await A.skip(Number(C-A.getPos())))}}else w.codecpar.codecType===3?((L===(0,i.A)("stpp")||L===(0,i.A)("wvtt")||L===(0,i.A)("tx3g")||L===(0,i.A)("text")||L===(0,i.A)("c608"))&&w.codecpar.codecId,await A.skip(Math.min(V-8,Number(C-A.getPos())))):await A.skip(Math.min(V-8,Number(C-A.getPos())))}const S=k.size-Number(A.getPos()-P);S>0?await A.skip(S):S<0&&e.z3(`read stsd error, size: ${k.size}, read: ${k.size-S}`,v,358)}},63080:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(80662),i=t.n(e),n=t(4624),s="src\\avformat\\formats\\mov\\parsing\\stss.ts";async function r(a,d,c,l){const h=a.getPos(),o=await a.readUint8();await a.skip(3);const u=new(i()),f=await a.readUint32();if(o===0)for(let y=0;y<f;y++)u.set(await a.readUint32(),!0);d.privData.stssSampleNumbersMap=u;const v=c.size-Number(a.getPos()-h);v>0?await a.skip(v):v<0&&n.z3(`read stss error, size: ${c.size}, read: ${c.size-v}`,s,57)}},62831:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\stsz.ts";async function n(s,r,a,d){const c=s.getPos(),l=await s.readUint8();await s.skip(3);const h=[];let o=0,u=0;if(l===0){o=await s.readUint32(),u=await s.readUint32();for(let v=0;v<u;v++)o===0?h.push(await s.readUint32()):h[v]=o}r.privData.sampleSizes=h;const f=a.size-Number(s.getPos()-c);f>0?await s.skip(f):f<0&&e.z3(`read stsz error, size: ${a.size}, read: ${a.size-f}`,i,65)}},91635:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\stts.ts";async function n(s,r,a,d){const c=s.getPos(),l=await s.readUint8();await s.skip(3);const h=r.privData,o=[],u=[],f=await s.readUint32();let v=1;if(l===0)for(let A=0;A<f;A++)o.push(await s.readUint32()),v=await s.readInt32(),v<0&&e.R8("File uses negative stts sample delta, using value 1 instead, sync may be lost!",i,53),u.push(v);h.sttsSampleCounts=o,h.sttsSampleDeltas=u;const y=a.size-Number(s.getPos()-c);y>0?await s.skip(y):y<0&&e.z3(`read stts error, size: ${a.size}, read: ${a.size-y}`,i,67)}},6570:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\stz2.ts";async function n(s,r,a,d){const c=s.getPos(),l=await s.readUint8();await s.skip(3);const h=[];let o=0,u=0;if(l===0)if(await s.skip(3),u=await s.readUint8(),o=await s.readUint32(),u===4)for(let v=0;v<o;v+=2){const y=await s.readUint8();h[v]=y>>4&15,h[v+1]=15&y}else if(u===8)for(let v=0;v<o;v++)h[v]=await s.readUint8();else if(u===16)for(let v=0;v<o;v++)h[v]=await s.readUint16();else e.z3("Error in length field in stz2 box",i,67);r.privData.sampleSizes=h;const f=a.size-Number(s.getPos()-c);f>0?await s.skip(f):f<0&&e.z3(`read stz2 error, size: ${a.size}, read: ${a.size-f}`,i,78)}},67523:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\tfdt.ts";async function n(s,r,a,d){const c=s.getPos(),l=await s.readUint8();await s.skip(3);const h=d.currentFragment.currentTrack;h&&(h.baseMediaDecodeTime=l===1?await s.readUint64():BigInt(Math.floor(await s.readUint32())));const o=a.size-Number(s.getPos()-c);o>0?await s.skip(o):o<0&&e.z3(`read vpcc error, size: ${a.size}, read: ${a.size-o}`,i,57)}},61807:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\tfhd.ts";async function n(s,r,a,d){const c=s.getPos(),l=(await s.readUint8(),await s.readUint24()),h=await s.readUint32(),o=d.currentFragment.currentTrack;o.trackId=h,o&&(1&l&&(o.baseDataOffset=await s.readUint64()),2&l&&await s.skip(4),8&l&&(o.defaultSampleDuration=await s.readUint32()),16&l&&(o.defaultSampleSize=await s.readUint32()),32&l&&(o.defaultSampleFlags=await s.readUint32()),131072&l&&(o.baseIsMoof=!0));const u=a.size-Number(s.getPos()-c);u>0?await s.skip(u):u<0&&e.z3(`read vpcc error, size: ${a.size}, read: ${a.size-u}`,i,75)}},27436:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\tkhd.ts";async function n(s,r,a,d){const c=r.privData,l=s.getPos(),h=await s.readUint8();c.flags=await s.readUint24(),h===1?(r.metadata.creationTime=await s.readUint64(),r.metadata.modificationTime=await s.readUint64(),c.trackId=await s.readUint32(),await s.skip(4),c.duration=await s.readUint64()):(r.metadata.creationTime=BigInt(Math.floor(await s.readUint32())),r.metadata.modificationTime=BigInt(Math.floor(await s.readUint32())),c.trackId=await s.readUint32(),await s.skip(4),c.duration=BigInt(Math.floor(await s.readUint32()))),await s.skip(8),c.layer=await s.readInt16(),c.alternateGroup=await s.readInt16(),c.volume=await s.readInt16()>>8,await s.skip(2),c.matrix=new Uint32Array(9);for(let u=0;u<9;u++)c.matrix[u]=await s.readUint32();c.width=await s.readUint32()>>16,c.height=await s.readUint32()>>16;const o=a.size-Number(s.getPos()-l);o>0?await s.skip(o):o<0&&e.z3(`read tkhd error, size: ${a.size}, read: ${a.size-o}`,i,77)}},25778:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\trex.ts";async function n(s,r,a,d){const c=s.getPos();await s.readUint8(),await s.skip(3);const l=await s.readUint32();await s.skip(4);const h=await s.readUint32(),o=await s.readUint32(),u=await s.readUint32();d.trexs.push({trackId:l,duration:h,size:o,flags:u});const f=a.size-Number(s.getPos()-c);f>0?await s.skip(f):f<0&&e.z3(`read trex error, size: ${a.size}, read: ${a.size-f}`,i,61)}},58996:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\parsing\\trun.ts";async function n(s,r,a,d){const c=s.getPos(),l=await s.readUint8(),h=await s.readUint24(),o=d.currentFragment.currentTrack;if(o){o.sampleCount=await s.readUint32(),1&h&&(o.dataOffset=await s.readInt32()),4&h&&(o.firstSampleFlags=await s.readUint32());for(let f=0;f<o.sampleCount;f++)256&h&&o.sampleDurations.push(await s.readUint32()),512&h&&o.sampleSizes.push(await s.readUint32()),1024&h&&o.sampleFlags.push(await s.readUint32()),2048&h&&(l===0?o.sampleCompositionTimeOffset.push(await s.readUint32()):o.sampleCompositionTimeOffset.push(await s.readInt32()))}const u=a.size-Number(s.getPos()-c);u>0?await s.skip(u):u<0&&e.z3(`read vpcc error, size: ${a.size}, read: ${a.size-u}`,i,79)}},83561:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(37837),i=t(14686),n=t(4624),s=t(58919),r="src\\avformat\\formats\\mov\\parsing\\vpcc.ts";async function a(d,c,l,h){const o=d.getPos();c.codecpar.codecId=167;const u=(0,e.sY)(l.size),f=await d.readBuffer(l.size,(0,i.JW)(u,l.size));h.foundMoov?(c.sideData[1]=f.slice(),(0,e.Eb)(u)):(c.codecpar.extradata=u,c.codecpar.extradataSize=l.size,c.sideData[1]=f.slice()),s.X(c,c.sideData[1]);const v=l.size-Number(d.getPos()-o);v>0?await d.skip(v):v<0&&n.z3(`read vpcc error, size: ${l.size}, read: ${l.size-v}`,r,63)}},60703:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(37837),i=t(14686),n=t(4624),s=t(55611),r="src\\avformat\\formats\\mov\\parsing\\vvcc.ts";async function a(d,c,l,h){const o=d.getPos();await d.readUint8(),await d.skip(3),c.codecpar.codecId=196;const u=(0,e.sY)(l.size-4),f=await d.readBuffer(l.size-4,(0,i.JW)(u,l.size-4));h.foundMoov?(c.sideData[1]=f.slice(),(0,e.Eb)(u)):(c.codecpar.extradata=u,c.codecpar.extradataSize=l.size-4,c.sideData[1]=f.slice()),s.XC(c,c.sideData[1]);const v=l.size-Number(d.getPos()-o);v>0?await d.skip(v):v<0&&n.z3(`read vvcc error, size: ${l.size}, read: ${l.size-v}`,r,67)}},28460:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(4624),i=t(65977),n=t(28412),s="src\\avformat\\formats\\mov\\parsing\\wave.ts";async function r(a,d,c,l){const h=a.getPos(),o=h+BigInt(Math.floor(c.size));for(;a.getPos()<o;){const f=await a.readUint32(),v=await a.readUint32();f!==0?v===(0,i.A)("esds")?await(0,n.A)(a,d,{type:v,size:f-8},l):await a.skip(Math.min(f-8,Number(o-a.getPos()))):(e.R8("wave invalid box size 0, skip",s,47),await a.skip(Number(o-a.getPos())))}const u=c.size-Number(a.getPos()-h);u>0?await a.skip(u):u<0&&e.z3(`read vpcc error, size: ${c.size}, read: ${c.size-u}`,s,73)}},39878:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(14686);function i(n,s,r){var a;n.writeUint32((a=8+s.codecpar.extradataSize)!==null&&a!==void 0?a:0),n.writeString("av1C"),r.fragment&&s.sideData[1]?(n.writeBuffer(s.sideData[1]),delete s.sideData[1]):s.codecpar.extradata&&n.writeBuffer((0,e.s3)(s.codecpar.extradata,s.codecpar.extradataSize))}},61600:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(14686);function i(n,s,r){var a;n.writeUint32((a=8+s.codecpar.extradataSize)!==null&&a!==void 0?a:0),n.writeString("avcC"),r.fragment&&s.sideData[1]?(n.writeBuffer(s.sideData[1]),delete s.sideData[1]):s.codecpar.extradata&&n.writeBuffer((0,e.s3)(s.codecpar.extradata,s.codecpar.extradataSize))}},93861:(g,p,t)=>{function e(i,n,s){i.writeUint32(20),i.writeString("btrt"),i.writeUint32(0),i.writeUint32(0),i.writeUint32(0)}t.d(p,{A:()=>e})},34445:(g,p,t)=>{function e(i,n,s){const r=n.privData.chunkOffsets||[];i.writeUint32(8+8*r.length),i.writeString("co64"),i.writeUint8(0),i.writeUint24(0),i.writeUint32(r.length);for(let a=0;a<r.length;a++)i.writeUint64(r[a])}t.d(p,{A:()=>e})},853:(g,p,t)=>{function e(i,n,s){const r=n.sideData[28];if(r)i.writeUint32(12+r.length),i.writeString("colr"),i.writeString("prof"),i.writeBuffer(r);else{const a=n.codecpar.colorRange===2;i.writeUint32(19),i.writeString("colr"),i.writeString("nclx"),i.writeUint16(n.codecpar.colorPrimaries),i.writeUint16(n.codecpar.colorTrc),i.writeUint16(n.codecpar.colorSpace),i.writeUint8(a?128:0)}}t.d(p,{A:()=>e})},18387:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\writing\\ctts.ts";function n(s,r,a){const d=r.privData,c=d.cttsSampleCounts||[],l=d.cttsSampleOffsets||[];c.length!==l.length&&e.R8("ctts sampleCounts's length is not match sampleOffsets's length",i,39);const h=Math.min(c.length,l.length);s.writeUint32(16+8*h),s.writeString("ctts"),s.writeUint8(1),s.writeUint24(0),s.writeUint32(h);for(let o=0;o<h;o++)s.writeUint32(c[o]),s.writeInt32(l[o])}},47280:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(14686),i=t(4624),n="src\\avformat\\formats\\mov\\writing\\dfla.ts";function s(r,a,d){let c;d.fragment&&a.sideData[1]?(c=a.sideData[1],delete a.sideData[1]):a.codecpar.extradata&&(c=(0,e.s3)(a.codecpar.extradata,a.codecpar.extradataSize)),c?(r.writeUint32(c.length+16),r.writeString("dfLa"),r.writeUint8(0),r.writeUint24(0),r.writeUint8(128),r.writeUint24(c.length),r.writeBuffer(c)):i.z3("invalid extradata",n,56)}},82181:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(14686),i=t(31865);function n(s,r,a){let d;if(a.fragment&&r.sideData[1]?(d=r.sideData[1],delete r.sideData[1]):r.codecpar.extradata&&(d=(0,e.s3)(r.codecpar.extradata,r.codecpar.extradataSize)),!d||d.length<19)s.writeUint32(19),s.writeString("dOps"),s.writeUint8(0),s.writeUint8(r.codecpar.chLayout.nbChannels),s.writeUint16(r.codecpar.initialPadding),s.writeUint32(r.codecpar.sampleRate),s.writeUint16(0),s.writeUint8(0);else{const c=new i.A(d,!1);s.writeUint32(d.length),s.writeString("dOps"),s.writeUint8(0),c.seek(9),s.writeUint8(c.readUint8()),s.writeUint16(c.readUint16()),s.writeUint32(c.readUint32()),s.writeUint16(c.readUint16()),s.writeBuffer(d.subarray(18))}}},12412:(g,p,t)=>{function e(i,n,s){i.writeUint32(28),i.writeString("dref"),i.writeUint32(0),i.writeUint32(1),i.writeUint32(12),i.writeString("url "),i.writeUint32(1)}t.d(p,{A:()=>e})},44473:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(77231),i=t(44328);function n(s,r,a){const d=r.privData;let c=(0,i.k)(d.lastPts,r.timeBase,{den:a.timescale,num:1}),l=d.startCT;const h=(0,i.k)(d.startDts+BigInt(Math.floor(l)),r.timeBase,{den:d.timescale,num:1});let o=c<e.go?0:1;o|=h<e.go?0:1;const u=1+(h>0?1:0),f=24+u*(o===1?20:12);s.writeUint32(f),s.writeString("edts"),s.writeUint32(f-8),s.writeString("elst"),s.writeUint8(o),s.writeUint24(0),s.writeUint32(u),h>0?(o===1?(s.writeUint64(h),s.writeInt64(e.Dh)):(s.writeUint32(Number(h)),s.writeInt32(-1)),s.writeUint32(65536)):(l=-Math.min(Number(d.startDts),0),c+=h),a.fragment&&(c=BigInt(0)),o===1?(s.writeUint64(c),s.writeInt64(BigInt(Math.floor(l)))):(s.writeUint32(Number(c)),s.writeInt32(l)),s.writeUint32(65536)}},4652:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(6660),i=t(14686);function n(r,a,d){r.writeUint8(a);for(let c=3;c>0;c--)r.writeUint8(d>>7*c|128);r.writeUint8(127&d)}function s(r,a,d){const c=a.privData,l=a.codecpar.extradata?5+a.codecpar.extradataSize:0,h=r.getPos();r.writeUint32(0),r.writeString("esds"),r.writeUint32(0),n(r,3,21+l+5+1),r.writeUint16(c.trackId),r.writeUint8(0),n(r,4,13+l),(a.codecpar.codecId===86016||a.codecpar.codecId===86017)&&a.codecpar.sampleRate>24e3?r.writeUint8(107):r.writeUint8(e.zs[a.codecpar.codecId]),a.codecpar.codecId===94208?r.writeUint8(225):a.codecpar.codecType===1?r.writeUint8(21):r.writeUint8(17),r.writeUint24(0),r.writeUint32(0),r.writeUint32(0),a.codecpar.extradata&&(n(r,5,a.codecpar.extradataSize),r.writeBuffer((0,i.s3)(a.codecpar.extradata,a.codecpar.extradataSize))),n(r,6,1),r.writeUint8(2),d.boxsPositionInfo.push({pos:h,type:"esds",size:Number(r.getPos()-h)})}},87384:(g,p,t)=>{function e(i,n,s,r,a,d,c){i.writeUint32(n<<16),i.writeUint32(s<<16),i.writeUint32(0),i.writeUint32(r<<16),i.writeUint32(a<<16),i.writeUint32(0),i.writeUint32(d<<16),i.writeUint32(c<<16),i.writeUint32(1073741824)}t.d(p,{A:()=>e})},17923:(g,p,t)=>{function e(i,n,s){const r=i.getPos();i.writeUint32(0),i.writeString("hdlr"),i.writeUint8(0),i.writeUint24(0);let a="dhlr",d="url ",c="DataHandler";n&&(a="mhlr",n.codecpar.codecType===1?(d="soun",c="SoundHandler"):n.codecpar.codecType===0?(d="vide",c="VideoHandler"):n.codecpar.codecType===3?(d="text",c="SubtitleHandler"):(n.metadata.handlerName&&(c=n.metadata.handlerName),n.metadata.hdlrType&&(d=n.metadata.hdlrType))),i.writeString(a),i.writeString(d),i.writeUint32(0),i.writeUint32(0),i.writeUint32(0),n&&!s.isom||i.writeUint8(c.length),i.writeString(c),n&&!s.isom&&i.writeUint8(0),s.boxsPositionInfo.push({pos:r,type:"hdlr",size:Number(i.getPos()-r)})}t.d(p,{A:()=>e})},78669:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(14686);function i(n,s,r){var a;n.writeUint32((a=8+s.codecpar.extradataSize)!==null&&a!==void 0?a:0),n.writeString("hvcC"),r.fragment&&s.sideData[1]?(n.writeBuffer(s.sideData[1]),delete s.sideData[1]):s.codecpar.extradata&&n.writeBuffer((0,e.s3)(s.codecpar.extradata,s.codecpar.extradataSize))}},6e3:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(77231);function i(n,s,r){const a=s.privData.lastPts,d=s.metadata.creationTime||0,c=s.metadata.modificationTime||0,l=s.metadata.language||21956;let h=a<BigInt(e.f7)?0:1;h=d<e.f7?0:1,h=c<e.f7?0:1,n.writeUint32(h===1?44:32),n.writeString("mdhd"),n.writeUint8(h),n.writeUint24(0),h===1?(n.writeUint64(d),n.writeUint64(c)):(n.writeUint32(Number(d)),n.writeUint32(Number(c))),n.writeUint32(s.timeBase.den),h===1?n.writeUint64(a):n.writeUint32(Number(a)),n.writeUint16(l),n.writeUint16(0)}},31130:(g,p,t)=>{function e(i,n,s){i.writeUint32(16),i.writeString("mfhd"),i.writeUint8(0),i.writeUint24(0),i.writeUint32(s.currentFragment.sequence)}t.d(p,{A:()=>e})},48669:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(17923);function i(n,s,r){(0,e.A)(n,null,r)}},7114:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(77231),i=t(87384);function n(s,r,a){const d=a.duration,c=a.creationTime||0,l=a.modificationTime||0,h=a.timescale||0;let o=a.nextTrackId||1;a.fragment&&(o=2);let u=d<BigInt(e.f7)?0:1;u=c<e.f7?0:1,u=l<e.f7?0:1,s.writeUint32(u===1?120:108),s.writeString("mvhd"),s.writeUint8(u),s.writeUint24(0),u===1?(s.writeUint64(c),s.writeUint64(l)):(s.writeUint32(Number(c)),s.writeUint32(Number(l))),s.writeUint32(h),u===1?s.writeUint64(d):s.writeUint32(Number(d)),s.writeUint32(65536),s.writeUint16(256),s.writeUint16(0),s.writeUint32(0),s.writeUint32(0),(0,i.A)(s,1,0,0,1,0,0),s.writeUint32(0),s.writeUint32(0),s.writeUint32(0),s.writeUint32(0),s.writeUint32(0),s.writeUint32(0),s.writeUint32(o)}},65629:(g,p,t)=>{function e(i,n,s){i.writeUint32(16),i.writeString("pasp"),i.writeUint32(1),i.writeUint32(1)}t.d(p,{A:()=>e})},11573:(g,p,t)=>{function e(i,n,s){i.writeUint32(16),i.writeString("smhd"),i.writeUint32(0),i.writeUint16(0),i.writeUint16(0)}t.d(p,{A:()=>e})},2204:(g,p,t)=>{function e(i,n,s){const r=n.privData.chunkOffsets||[];i.writeUint32(16+4*r.length),i.writeString("stco"),i.writeUint8(0),i.writeUint24(0),i.writeUint32(r.length);for(let a=0;a<r.length;a++)i.writeUint32(Number(r[a]))}t.d(p,{A:()=>e})},84360:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\writing\\stsc.ts";function n(s,r,a){const d=r.privData,c=d.stscFirstChunk,l=d.stscSamplesPerChunk,h=d.stscSampleDescriptionIndex;c.length===l.length&&c.length===h.length||e.R8("ctts firstChunk's length is not match samplesPerChunk's length or sampleDescriptionIndex's length",i,42);const o=Math.min(c.length,l.length,h.length);s.writeUint32(16+12*o),s.writeString("stsc"),s.writeUint8(0),s.writeUint24(0),s.writeUint32(o);for(let u=0;u<o;u++)s.writeUint32(c[u]),s.writeUint32(l[u]),s.writeUint32(h[u])}},69301:(g,p,t)=>{t.d(p,{A:()=>w});var e=t(61600),i=t(78669),n=t(1263),s=t(99193),r=t(39878),a=t(47280),d=t(82181),c=t(4652),l=t(853),h=t(65629),o=t(93861),u=t(57756),f=t(14686),v=t(61619);const y={27:"avc1",173:"hvc1",196:"vvc1",225:"av01",167:"vp09"};function A(k){if(k.codecTag)return(0,v.A)(k.codecTag);let T=y[k.codecId];return T||(T=k.codecType===0?"mp4v":k.codecType===1?k.codecId===86076?"Opus":k.codecId===86028?"fLaC":"mp4a":k.codecType===3?"text":"none"),T}function w(k,T,P){const b=k.getPos();k.writeUint32(0),k.writeString("stsd"),k.writeUint8(0),k.writeUint24(0),k.writeUint32(1),T.codecpar.codecType===1?function(x,I,S){const z=x.getPos(),V=A(I.codecpar),L=S.isom?1:0;x.writeUint32(0),x.writeString(V),x.writeUint32(0),x.writeUint16(0),x.writeUint16(1),x.writeUint16(L),x.writeUint16(0),x.writeUint32(0),S.isom?(x.writeUint16(I.codecpar.chLayout.nbChannels),I.codecpar.codecId===65541||I.codecpar.codecId===65540?x.writeUint16(8):I.codecpar.codecId===69643?x.writeUint16(I.codecpar.bitsPerCodedSample):x.writeUint16(16),x.writeUint16(-2)):(I.codecpar.codecId===86028||I.codecpar.codecId===86032||I.codecpar.codecId===86076?x.writeUint16(I.codecpar.chLayout.nbChannels):x.writeUint16(2),I.codecpar.codecId===86028||I.codecpar.codecId===86032?x.writeUint16(I.codecpar.bitsPerCodedSample):x.writeUint16(16),x.writeUint16(0)),x.writeUint16(0),I.codecpar.codecId===86076?x.writeUint16(48e3):I.codecpar.codecId===86060?x.writeUint32(I.codecpar.sampleRate):x.writeUint16(I.codecpar.sampleRate),I.codecpar.codecId!==86060&&x.writeUint16(0),L===1&&(x.writeUint32(I.codecpar.frameSize),x.writeUint32(0),x.writeUint32(0),x.writeUint32(2)),!S.isom||I.codecpar.codecId!==86018&&I.codecpar.codecId!==86019&&I.codecpar.codecId!==86056&&I.codecpar.codecId!==73728&&I.codecpar.codecId!==86032&&I.codecpar.codecId!==69638&&I.codecpar.codecId!==69633&&I.codecpar.codecId!==86035?I.codecpar.codecId===86028?(0,a.A)(x,I,S):I.codecpar.codecId===86076?(0,d.A)(x,I,S):V=="mp4a"&&(0,c.A)(x,I,S):(0,u.A)(x,I,S),S.isom||(0,o.A)(x,I,S),S.boxsPositionInfo.push({pos:z,type:V,size:Number(x.getPos()-z)})}(k,T,P):T.codecpar.codecType===0?function(x,I,S){const z=x.getPos(),V=A(I.codecpar),L=I.codecpar.codecId==13&&I.codecpar.format==15||I.codecpar.codecId==13&&I.codecpar.format==1||I.codecpar.codecId==202||I.codecpar.codecId==203||I.codecpar.codecId==156||I.codecpar.codecId==127;x.writeUint32(0),x.writeString(V),x.writeUint32(0),x.writeUint16(0),x.writeUint16(1),x.writeUint16(L?2:0),x.writeUint16(0),S.isom?(x.writeString("FFMP"),I.codecpar.codecId===13||L?(x.writeUint32(0),x.writeUint32(1024)):(x.writeUint32(512),x.writeUint32(512))):(x.writeUint32(0),x.writeUint32(0),x.writeUint32(0)),x.writeUint16(I.codecpar.width),x.writeUint16(I.codecpar.height),x.writeUint32(4718592),x.writeUint32(4718592),x.writeUint32(0),x.writeUint16(1);let C=I.metadata.compressorName||"";if(C=C.slice(0,31),x.writeUint8(C.length),x.writeString(C),C.length<31){let F=31-C.length;for(;F>0;)x.writeUint8(0),F--}S.isom&&I.codecpar.bitsPerCodedSample?x.writeUint16(I.codecpar.bitsPerCodedSample):x.writeUint16(24),x.writeUint16(65535),V==="mp4v"?(0,c.A)(x,I,S):I.codecpar.codecId===27?(0,e.A)(x,I,S):I.codecpar.codecId===173?(0,i.A)(x,I,S):I.codecpar.codecId===196?(0,n.A)(x,I,S):I.codecpar.codecId===167?(0,s.A)(x,I,S):I.codecpar.codecId===225&&(0,r.A)(x,I,S),(0,l.A)(x,I,S),(0,h.A)(x,I,S),S.isom||(0,o.A)(x,I,S),S.boxsPositionInfo.push({pos:z,type:V,size:Number(x.getPos()-z)})}(k,T,P):T.codecpar.codecType===3&&function(x,I,S){const z=x.getPos(),V=A(I.codecpar);x.writeUint32(0),x.writeString(V),x.writeUint32(0),x.writeUint16(0),x.writeUint16(1),I.codecpar.codecId===94208?(0,c.A)(x,I,S):I.codecpar.extradata&&x.writeBuffer((0,f.s3)(I.codecpar.extradata,I.codecpar.extradataSize)),S.isom||(0,o.A)(x,I,S),S.boxsPositionInfo.push({pos:z,type:V,size:Number(x.getPos()-z)})}(k,T,P),P.boxsPositionInfo.push({pos:b,type:"esds",size:Number(k.getPos()-b)})}},20184:(g,p,t)=>{function e(i,n,s){const r=n.privData.stssSampleNumbers;i.writeUint32(16+4*r.length),i.writeString("stss"),i.writeUint8(0),i.writeUint24(0),i.writeUint32(r.length);for(let a=0;a<r.length;a++)i.writeUint32(r[a])}t.d(p,{A:()=>e})},57247:(g,p,t)=>{function e(i,n,s){const r=n.privData.sampleSizes;i.writeUint32(20+4*r.length),i.writeString("stsz"),i.writeUint8(0),i.writeUint24(0),i.writeUint32(0),i.writeUint32(r.length);for(let a=0;a<r.length;a++)i.writeUint32(r[a])}t.d(p,{A:()=>e})},86051:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\formats\\mov\\writing\\stts.ts";function n(s,r,a){const d=r.privData,c=d.sttsSampleCounts||[],l=d.sttsSampleDeltas||[];c.length!==l.length&&e.R8("stts sampleCounts's length is not match sampleDeltas's length",i,39);const h=Math.min(c.length,l.length);s.writeUint32(16+8*h),s.writeString("stts"),s.writeUint8(0),s.writeUint24(0),s.writeUint32(h);for(let o=0;o<h;o++)s.writeUint32(c[o]),s.writeInt32(l[o])}},11251:(g,p,t)=>{function e(i,n,s){const r=s.currentFragment.tracks.find(d=>d.trackId===n.privData.trackId),a=r?r.baseMediaDecodeTime:BigInt(0);i.writeUint32(20),i.writeString("tfdt"),i.writeUint8(1),i.writeUint24(0),i.writeUint64(a)}t.d(p,{A:()=>e})},11903:(g,p,t)=>{function e(i,n,s){const r=s.currentFragment.tracks.find(c=>c.trackId===n.privData.trackId);let a=57;r.baseIsMoof&&(a&=-2,a|=131072);const d=i.getPos();i.writeUint32(0),i.writeString("tfhd"),i.writeUint8(0),i.writeUint24(a),i.writeUint32(r.trackId),1&a&&i.writeUint64(r.baseDataOffset),8&a&&i.writeUint32(r.defaultSampleDuration),16&a&&i.writeUint32(r.defaultSampleSize),32&a&&i.writeUint32(r.defaultSampleFlags),s.boxsPositionInfo.push({pos:d,type:"tfhd",size:Number(i.getPos()-d)})}t.d(p,{A:()=>e})},59868:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(77231),i=t(87384),n=t(44328);function s(r,a,d){const c=a.privData,l=(0,n.k)(c.lastPts,a.timeBase,{den:d.timescale,num:1}),h=a.metadata.creationTime||0,o=a.metadata.modificationTime||0,u=c.layer||0,f=c.alternateGroup||0;let v=a.codecpar.width>0?a.codecpar.width:0,y=a.codecpar.height>0?a.codecpar.height:0;v<e.zg&&(v<<=16),y<e.zg&&(y<<=16);let A=l<BigInt(e.f7)?0:1;A=h<e.f7?0:1,A=o<e.f7?0:1;let w=2;1&c.flags&&(w|=1),r.writeUint32(A===1?100:92),r.writeString("tkhd"),r.writeUint8(A),r.writeUint24(w),A===1?(r.writeUint64(h),r.writeUint64(o)):(r.writeUint32(Number(h)),r.writeUint32(Number(o))),r.writeUint32(c.trackId),r.writeUint32(0),A===1?r.writeUint64(l):r.writeUint32(Number(l)),r.writeUint32(0),r.writeUint32(0),r.writeInt16(u),r.writeInt16(c.perStreamGrouping?f:a.codecpar.codecType),a.codecpar.codecType===1?r.writeInt16(256):r.writeInt16(0),r.writeInt16(0),(0,i.A)(r,1,0,0,1,0,0),r.writeUint32(v),r.writeUint32(y)}},35010:(g,p,t)=>{function e(i,n,s){var r,a,d;const c=s.currentFragment.tracks.find(f=>f.trackId===n.privData.trackId),l=s.trexs.find(f=>{f.trackId,n.privData.trackId}),h=(r=l==null?void 0:l.duration)!==null&&r!==void 0?r:0,o=(a=l==null?void 0:l.size)!==null&&a!==void 0?a:0,u=(d=l==null?void 0:l.flags)!==null&&d!==void 0?d:0;i.writeUint32(32),i.writeString("trex"),i.writeUint8(0),i.writeUint24(0),i.writeUint32(c.trackId),i.writeUint32(1),i.writeUint32(h),i.writeUint32(o),i.writeUint32(u)}t.d(p,{A:()=>e})},48516:(g,p,t)=>{function e(i,n,s){const r=n.privData,a=s.currentFragment.tracks.find(b=>b.trackId===r.trackId),d=a.firstSampleFlags||0,c=a.dataOffset||0,l=a.sampleDurations,h=a.sampleSizes,o=a.sampleFlags,u=a.sampleCompositionTimeOffset,f=a.sampleCount,v=l.length>0,y=h.length>0,A=o.length>0,w=u.length>0,k=d!==0;let T=1;k&&(T|=4),v&&(T|=256),y&&(T|=512),A&&(T|=1024),w&&(T|=2048);const P=i.getPos();i.writeUint32(0),i.writeString("trun"),i.writeUint8(1),i.writeUint24(T),i.writeUint32(f),a.dataOffsetPos=i.getPos(),i.writeInt32(c),k&&i.writeUint32(d);for(let b=0;b<f;b++)v&&i.writeUint32(l[b]||0),y&&i.writeUint32(h[b]||0),A&&i.writeUint32(o[b]||0),w&&i.writeInt32(u[b]||0);s.boxsPositionInfo.push({pos:P,type:"trun",size:Number(i.getPos()-P)})}t.d(p,{A:()=>e})},54012:(g,p,t)=>{function e(i,n,s){i.writeUint32(20),i.writeString("vmhd"),i.writeUint8(0),i.writeUint24(1),i.writeUint64(BigInt(0))}t.d(p,{A:()=>e})},99193:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(14686);function i(n,s,r){var a;n.writeUint32((a=8+s.codecpar.extradataSize)!==null&&a!==void 0?a:0),n.writeString("vpcC"),r.fragment&&s.sideData[1]?(n.writeBuffer(s.sideData[1]),delete s.sideData[1]):s.codecpar.extradata&&n.writeBuffer((0,e.s3)(s.codecpar.extradata,s.codecpar.extradataSize))}},1263:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(14686);function i(n,s,r){var a;n.writeUint32((a=8+s.codecpar.extradataSize)!==null&&a!==void 0?a:0),n.writeString("vvcC"),n.writeUint8(0),n.writeUint24(0),r.fragment&&s.sideData[1]?(n.writeBuffer(s.sideData[1]),delete s.sideData[1]):s.codecpar.extradata&&n.writeBuffer((0,e.s3)(s.codecpar.extradata,s.codecpar.extradataSize))}},57756:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(14686),i=t(4652);function n(s,r,a){const d=s.getPos();s.writeUint32(0),s.writeString("wave"),r.codecpar.codecId!==86035&&(s.writeUint32(12),s.writeString("frma"),s.writeUint32(r.codecpar.codecTag)),r.codecpar.codecId===86018?(s.writeUint32(12),s.writeString("mp4a"),s.writeUint32(0),(0,i.A)(s,r,a)):a.fragment&&r.sideData[1]?(s.writeBuffer(r.sideData[1]),delete r.sideData[1]):r.codecpar.extradata&&s.writeBuffer((0,e.s3)(r.codecpar.extradata,r.codecpar.extradataSize)),s.writeUint32(8),s.writeUint32(0),a.boxsPositionInfo.push({pos:d,type:"wave",size:Number(s.getPos()-d)})}},80025:(g,p,t)=>{t.d(p,{A:()=>I});var e=t(86051),i=t(18387),n=t(20184),s=t(57247),r=t(84360),a=t(2204),d=t(34445),c=t(6e3),l=t(7114),h=t(59868),o=t(17923),u=t(69301),f=t(54012),v=t(44473),y=t(11573),A=t(12412),w=t(35010),k=t(31130),T=t(11903),P=t(11251),b=t(48516),x=t(48669);const I={stts:e.A,ctts:i.A,stss:n.A,stsz:s.A,stsc:r.A,stco:a.A,co64:d.A,mdhd:c.A,mvhd:l.A,tkhd:h.A,hdlr:o.A,stsd:u.A,vmhd:f.A,edts:v.A,smhd:y.A,dref:A.A,trex:w.A,mfhd:k.A,tfhd:T.A,tfdt:P.A,trun:b.A,minf_hdlr:x.A}},75294:(g,p,t)=>{t.d(p,{CM:()=>r,Vz:()=>n,qg:()=>s});var e=t(134),i=t(89088);class n{constructor(){(0,e.A)(this,"version",void 0),(0,e.A)(this,"layer",void 0),(0,e.A)(this,"protection",void 0),(0,e.A)(this,"bitrateIndex",void 0),(0,e.A)(this,"samplingFrequency",void 0),(0,e.A)(this,"padding",void 0),(0,e.A)(this,"private",void 0),(0,e.A)(this,"mode",void 0),(0,e.A)(this,"modeExtension",void 0),(0,e.A)(this,"copyright",void 0),(0,e.A)(this,"original",void 0),(0,e.A)(this,"emphasis",void 0)}}function s(a,d){a.version=d>>19&3,a.layer=d>>17&3,a.protection=d>>16&1,a.bitrateIndex=d>>12&15,a.samplingFrequency=d>>10&3,a.padding=d>>9&1,a.mode=d>>6&3,a.modeExtension=d>>4&3,a.copyright=d>>3&1,a.original=d>>2&1,a.emphasis=3&d}function r(a,d){let c=i.oz(a.version,a.layer,a.bitrateIndex);switch(a.layer){case 1:default:c=144e3*c/(d<<(a.version===3?0:1))>>>0,c+=a.padding;break;case 2:c=144e3*c/d>>>0,c+=a.padding;break;case 3:c=12e3*c/d>>>0,c=4*(c+a.padding)}return c}},19028:(g,p,t)=>{t.d(p,{q:()=>s});var e=t(4624),i="src\\avformat\\formats\\mp3\\id3v2.ts";function n(r,a){let d="utf-8";return r===0?d="iso-8859-1":r===1?d="utf-16":r===2&&(d="utf-16be"),new TextDecoder(d).decode(a)}async function s(r,a,d,c){const l=d.version!==2,h=l?10:6;let o=r.getPos()+BigInt(a>>>0);async function u(){await r.seek(o)}if(l&&64&d.flags){let f=await async function(v,y){let A=0;for(;y--;)A=(A<<7)+(127&await v.readUint8());return A}(r,4);if(d.version===4&&(f-=4),f<0)return e.z3("invalid extended header length",i,92),await u();if(await r.skip(f),(a-=f+4)<0)return e.z3("extended header too long",i,98),await r.seek(o),await u()}for(;a>h;){let f,v;if(l){if(f=await r.readString(4),v=await r.readUint32(),!v){e.z3("invalid frame size",i,112);break}await r.readUint16()}else f=await r.readString(3),v=await r.readUint24();if(f==="APIC")c.poster=await r.readBuffer(v);else if(f==="USLT"){const y=await r.readUint8(),A=await r.readString(3),w=await r.readBuffer(v-4);c.lyrics=`${A} ${n(y,w)}`}else if(f==="COMM"||f==="COM"){const y=await r.readUint8(),A=await r.readString(3),w=await r.readBuffer(v-4);c.comment=`${A} ${n(y,w)}`}else{let y;switch(y=f[0]==="T"?n(await r.readUint8(),await r.readBuffer(v-1)):await r.readBuffer(v),f){case"TIT2":case"TT2":c.title=y;break;case"TPE1":case"TP1":c.artist=y;break;case"TPE2":case"TP2":c.albumArtist=y;break;case"TPOS":c.disc=y;break;case"TCOP":c.copyright=y;break;case"TALB":case"TAL":c.album=y;break;case"TRCK":case"TRK":c.track=y;break;case"TYER":case"TDRL":case"TDRC":c.date=y;break;case"COMM":case"COM":c.comment=y;break;case"TCON":case"TCO":c.genre=y;break;case"TSSE":case"TEN":c.encoder=y;break;case"TCOM":c.composer=y;break;case"TENC":c.encodedBy=y;break;case"TLAN":c.language=y;break;case"TPE3":case"TP3":c.performer=y;break;case"TPUB":c.publisher=y;break;case"TCMP":case"TCP":c.compilation=y;break;case"TDEN":c.creationTime=y;break;case"TSOA":c.albumSort=y;break;case"TSOP":c.artistSort=y;break;case"TSOT":c.titleSort=y;break;case"TIT1":c.grouping=y;break;default:c[f]=y}}a-=v+h}d.version==4&&16&d.flags&&(o+=BigInt(10)),await r.seek(o)}},31608:(g,p,t)=>{t.d(p,{W8:()=>e,c1:()=>i});const e=100,i=128},89564:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(27274);function i(n,s,r){const a=new Uint8Array(e.GV);let d=0,c=0;for(let l=0;l<n.length-3;l++)if(n[l]===71){const h=8191&(n[l+1]<<8|n[l+2]);let o=48&n[l+3];if(!r||h===8191||o){const u=l%s;a[u]++,d++,a[u]>c&&(c=a[u])}}return c-Math.max(d-10*c,0)/10}},52088:(g,p,t)=>{function e(i){i.slices=[],i.totalLength=0,i.expectedLength=-1}t.d(p,{A:()=>e})},19770:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(80662),i=t.n(e),n=t(77231),s=t(6403);function r(){return{currentProgram:n.N_,currentPmtPid:n.N_,tsPacketSize:n.N_,hasPAT:!1,hasPMT:!1,tsSliceQueueMap:new(i()),pat:new s.Cd,pmt:new s.I4,program2Pmt:new(i()),ioEnd:!1,startPid:256,delay:BigInt(0)}}},76538:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(77231);function i(){return{pid:e.N_,filter:null,tsPacket:null,pes:null,continuityCounter:0,pesSlices:{total:0,buffers:[]},latm:!1}}},39e3:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(6403),i=t(52088),n=t(63599);function s(r,a){const d=a.tsSliceQueueMap.get(r.pid);if(r.payloadUnitStartIndicator){const h=r.payload[0];if(d&&d.totalLength>0){const o=r.payload.slice(1,Math.min(1+h,r.payload.length));d.slices.push(o),d.totalLength+=o.length,d.totalLength===d.expectedLength?((0,n.A)(r.pid,d,a),(0,i.A)(d)):((0,i.A)(d),a.tsSliceQueueMap.delete(r.pid))}for(let o=1+h;o<r.payload.length;){var c,l;if(r.payload[o]===255)break;const u=(15&r.payload[o+1])<<8|r.payload[o+2],f=new e.pi;f.pid=r.pid,f.expectedLength=u+3,f.randomAccessIndicator=(c=(l=r.adaptationFieldInfo)===null||l===void 0?void 0:l.randomAccessIndicator)!==null&&c!==void 0?c:0;const v=r.payload.slice(o,Math.min(o+f.expectedLength-f.totalLength,r.payload.length));f.slices.push(v),f.totalLength+=v.length,a.tsSliceQueueMap.set(r.pid,f),f.totalLength===f.expectedLength?((0,n.A)(r.pid,f,a),(0,i.A)(f)):((0,i.A)(f),a.tsSliceQueueMap.delete(r.pid)),o+=v.length}}else if(d&&d.totalLength!==0){const h=r.payload.slice(0,Math.min(d.expectedLength-d.totalLength,r.payload.length));d.slices.push(h),d.totalLength+=h.length,d.totalLength===d.expectedLength?((0,n.A)(r.pid,d,a),(0,i.A)(d)):((0,i.A)(d),a.tsSliceQueueMap.delete(r.pid))}}},86191:(g,p,t)=>{t.d(p,{A:()=>h});var e=t(61499),i=t(76538),n=t(27274),s=t(50848),r=t(36488),a=t(61702),d=t(65451),c=t(37837),l=t(14686);function h(o,u,f){u.timeBase.den=9e4,u.timeBase.num=1;const v=(0,i.A)();v.pid=o,u.privData=v;const y=f.pmt.pid2StreamType.get(o);if(y===6){const k=f.pmt.pid2ESDescriptor.get(o);if(u.codecpar.codecType=2,k){var A;const T=k.find(P=>P.tag===5);if(T&&((A=T.buffer)===null||A===void 0?void 0:A.length)>=4&&(String.fromCharCode(T.buffer[0])==="O"||String.fromCharCode(T.buffer[1])==="p"||String.fromCharCode(T.buffer[2])==="u"||String.fromCharCode(T.buffer[3])==="s")){u.codecpar.codecType=1,u.codecpar.codecId=86076,u.codecpar.sampleRate=48e3;const P=k.find(b=>b.tag===127);if(P&&P.buffer[0]===128){u.codecpar.chLayout.nbChannels=15&P.buffer[1]?15&P.buffer[1]:2;const b=d.Ij(u.codecpar);b&&(u.codecpar.extradata=(0,c.sY)(b.length),(0,l.lW)(u.codecpar.extradata,b.length,b),u.codecpar.extradataSize=b.length)}}}}else{const k=n.$x[y];k?(u.codecpar.codecType=k[0],u.codecpar.codecId=k[1]):u.codecpar.codecType=2}let w;switch(y){case 15:w=new s.A;break;case 17:w=new r.A;break;case 27:case 36:break;case 6:u.codecpar.codecId===86076&&(w=new a.A)}return w&&(u.privData.filter=w,w.init(u.codecpar[e.o9],u.timeBase[e.o9])),u}},52888:(g,p,t)=>{function e(i,n,s){return i>n?s>n&&(n=s>i?i:s):n>s&&(n=s>i?s:i),n}t.d(p,{y:()=>e})},31239:(g,p,t)=>{function e(i,n){let s=0,r=i[s++];if(n.adaptationFieldInfo.discontinuityIndicator=r>>7&1,n.adaptationFieldInfo.randomAccessIndicator=r>>6&1,n.adaptationFieldInfo.elementaryStreamPriorityIndicator=r>>5&1,n.adaptationFieldInfo.pcrFlag=r>>4&1,n.adaptationFieldInfo.opcrFlag=r>>3&1,n.adaptationFieldInfo.splicingPointFlag=r>>2&1,n.adaptationFieldInfo.transportPrivateDataFlag=r>>1&1,n.adaptationFieldInfo.adaptationFieldExtensionFlag=1&r,n.adaptationFieldInfo.pcrFlag){const a=BigInt(Math.floor(i[s++]<<25|i[s++]<<17|i[s++]<<9|i[s++]<<1|i[s]>>7)),d=BigInt(Math.floor((1&i[s++])<<8|i[s++]));n.adaptationFieldInfo.pcr=a*BigInt(300)+d}if(n.adaptationFieldInfo.opcrFlag){const a=BigInt(Math.floor(i[s++]<<25|i[s++]<<17|i[s++]<<9|i[s++]<<1|i[s]>>7)),d=BigInt(Math.floor((1&i[s++])<<8|i[s++]));n.adaptationFieldInfo.pcr=a*BigInt(300)+d}if(n.adaptationFieldInfo.splicingPointFlag&&(n.adaptationFieldInfo.spliceCountDown=i[s++]),n.adaptationFieldInfo.transportPrivateDataFlag){const a=i[s++];n.adaptationFieldInfo.transportPrivateData=i.subarray(s,s+a),s+=a}if(n.adaptationFieldInfo.adaptationFieldExtensionFlag){const a=i[s++];n.adaptationFieldInfo.extension=i.subarray(s,s+a),s+=a}}t.d(p,{A:()=>e})},20549:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(31865),i=t(6403),n=t(92647),s=t(4624),r="src\\avformat\\formats\\mpegts\\function\\parsePAT.ts";function a(d,c){let l=0;const h=new e.A((0,n.A)(Uint8Array,d.slices),!0),o=h.readUint8();o!==0&&s.z3(`parsePAT: table_id ${o} is not corresponded to PAT!`,r,40);const u=4095&h.readUint16();h.readUint16(),l=h.readUint8();const f=l>>1&31,v=1&l,y=h.readUint8();let A;if(h.readUint8(),v===1&&y===0)A=new i.Cd,A.versionNumber=f;else if(A=c.pat,!A)return void s.z3("can not found PAT in mpegts context",r,64);const w=u-5-4,k=(0|Number(0xffffffffn&h.getPos()))+w;let T=-1,P=-1;for(;h.getPos()<k;){const b=h.readUint16(),x=8191&h.readUint16();b===0?A.networkPid=x:(A.program2PmtPid.set(b,x),T===-1&&(T=b),P===-1&&(P=x))}v===1&&y===0&&(c.pat||s.pq("parsed first PAT",r,100),c.pat=A,c.currentProgram=T,c.currentPmtPid=P,c.hasPAT=!0)}},51660:(g,p,t)=>{t.d(p,{A:()=>d});var e=t(63939),i=t(50932),n=t(71517),s=t(37837),r=t(14686),a=t(77231);function d(c,l,h){c.randomAccessIndicator&&i.M[15](l+36,1|e.f[15](l+36));const o=h.codecpar.codecId;o!==27&&o!==173||i.M[15](l+80,2),i.M[15](l+32,h.index),i.M[17](l+16,c.dts),i.M[17](l+8,c.pts),i.M[17](l+56,c.pos),i.M[15](l+76,9e4),i.M[15](l+72,1),h.startTime===a.Dh&&(h.startTime=e.f[17](l+8)||e.f[17](l+16));const u=(0,s.sY)(c.payload.length);(0,r.lW)(u,c.payload.length,c.payload),(0,n.NX)(l,u,c.payload.length)}},39144:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(6403),i=t(4624),n=t(77231),s="src\\avformat\\formats\\mpegts\\function\\parsePESSlice.ts";function r(a){let d=new Uint8Array(a.totalLength);for(let o=0,u=0;o<a.slices.length;o++){let f=a.slices[o];d.set(f,u),u+=f.byteLength}const c=d[3],l=d[4]<<8|d[5],h=new e.xf;if(h.data=d,h.pid=a.pid,h.streamId=c,h.streamType=a.streamType,h.pos=a.pos,h.randomAccessIndicator=a.randomAccessIndicator,c!==188&&c!==190&&c!==191&&c!==240&&c!==241&&c!==255&&c!==242&&c!==248){const o=(192&d[7])>>>6,u=d[8];let f=n.Dh,v=n.Dh;o!==2&&o!==3||(f=BigInt(Math.floor(536870912*(14&d[9])+4194304*(255&d[10])+16384*(254&d[11])+128*(255&d[12])+(254&d[13])/2)),v=o===3?BigInt(Math.floor(536870912*(14&d[14])+4194304*(255&d[15])+16384*(254&d[16])+128*(255&d[17])+(254&d[18])/2)):f),h.dts=v,h.pts=f;const y=9+u;let A=0;if(l!==0){if(l<3+u)return void i.z3("Malformed PES: PES_packet_length < 3 + PES_header_data_length",s,93);A=l-3-u}else A=d.byteLength-y;h.payload=d.subarray(y,y+A)}else if((c===188||c===191||c===240||c===241||c===255||c===242||c===248)&&h.streamId===6){let o=0;o=l!==0?l:d.byteLength-6,h.payload=d.subarray(6,6+o)}return h}},65945:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(31865),i=t(6403),n=t(92647),s=t(4624),r="src\\avformat\\formats\\mpegts\\function\\parsePMT.ts";function a(d,c){let l=0;const h=new e.A((0,n.A)(Uint8Array,d.slices),!0),o=h.readUint8();o!==2&&s.z3(`parse PMT: table_id ${o} is not corresponded to PAT!`,r,40);const u=4095&h.readUint16(),f=h.readUint16();l=h.readUint8();const v=l>>1&31,y=1&l,A=h.readUint8();let w;if(h.readUint8(),y===1&&A===0)w=new i.I4,w.programNumber=f,w.versionNumber=v,c.program2Pmt.set(f,w),c.hasPMT=!0;else if(w=c.program2Pmt.get(f),!w)return void s.z3("can not found PMT in mpegts context",r,68);w.pcrPid=8191&h.readUint16();const k=4095&h.readUint16();h.skip(k);let T=(0|Number(0xffffffffn&h.getPos()))+(u-9-k-4);for(;h.getPos()<T;){const P=h.readUint8(),b=8191&h.readUint16(),x=4095&h.readUint16();if(w.pid2StreamType.set(b,P),x>0){const I=[],S=(0|Number(0xffffffffn&h.getPos()))+x;for(;h.getPos()<S;){const z=new i.kJ;z.tag=h.readUint8();const V=h.readUint8();V>0&&(z.buffer=h.readBuffer(V)),I.push(z)}w.pid2ESDescriptor.set(b,I)}}f===c.currentProgram&&(c.pmt||s.pq("parsed first PMT",r,111),c.pmt=w)}},43383:(g,p,t)=>{function e(i,n){}t.d(p,{A:()=>e})},63599:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(20549),i=t(65945),n=t(43383);function s(r,a,d){r===0?(0,e.A)(a,d):r===d.currentPmtPid?(0,i.A)(a,d):d.pmt&&d.pmt.pid2StreamType.get(r)===134&&(0,n.A)(a,d)}},53783:(g,p,t)=>{t.d(p,{n:()=>l,q:()=>c});var e=t(27274),i=t(89564),n=t(52888),s=t(4624),r=t(6403),a=t(31239),d="src\\avformat\\formats\\mpegts\\impegts.ts";async function c(h){let o;try{o=await h.peekBuffer(e.pm)}catch{h.error!==-1048576&&(o=await h.peekBuffer(h.remainingLength()))}if(o&&o.length>=e.ZT){const u=(0,i.A)(o,e.ZT,!1),f=(0,i.A)(o,e.VG,!1),v=(0,i.A)(o,e.eR,!1);let y=(0,n.y)(u,v,f);o.length<e.pm&&(y+=e.hY);let A=e.ZT;return u>y?A=e.ZT:f>y?A=e.VG:v>y&&(A=e.eR),s.Yz(`got ts packet size: ${A}`,d,72),A}return 0}async function l(h,o){const u=h.getPos();let f=0;o.tsPacketSize===e.VG&&await h.skip(4);const v=await h.readUint8();v!==71&&s.h2(`found syncByte not 0x47, value: ${v.toString(16)}`,d,94);const y=new r.am;y.pos=u,f=await h.readUint16(),y.payloadUnitStartIndicator=f>>14&1,y.transportPriority=f>>13&1,y.pid=8191&f,f=await h.readUint8(),y.adaptationFieldControl=f>>4&3,y.continuityCounter=15&f;let A=4;if(y.adaptationFieldControl===2||y.adaptationFieldControl===3){const w=await h.readUint8();if(5+w===e.ZT)return(0,a.A)(await h.readBuffer(w),y),o.tsPacketSize===e.eR&&await h.skip(16),y;w>0&&(0,a.A)(await h.readBuffer(w),y),A=5+w}return y.adaptationFieldControl!==1&&y.adaptationFieldControl!==3||(y.payload=await h.readBuffer(e.ZT-A)),o.tsPacketSize===e.eR&&await h.skip(16),y}},27274:(g,p,t)=>{t.d(p,{$x:()=>d,GV:()=>s,VG:()=>i,ZT:()=>n,eR:()=>e,hY:()=>a,pm:()=>r});const e=204,i=192,n=188,s=204,r=8192,a=5,d={15:[1,86018],17:[1,86018],3:[1,86017],4:[1,86017],27:[0,27],36:[0,173],51:[0,196],129:[1,86019],135:[1,86056]}},6403:(g,p,t)=>{t.d(p,{Cd:()=>c,I4:()=>h,am:()=>a,kJ:()=>l,pi:()=>d,xf:()=>o});var e=t(134),i=t(80662),n=t.n(i),s=t(77231);class r{constructor(){(0,e.A)(this,"discontinuityIndicator",0),(0,e.A)(this,"randomAccessIndicator",0),(0,e.A)(this,"elementaryStreamPriorityIndicator",0),(0,e.A)(this,"pcrFlag",0),(0,e.A)(this,"opcrFlag",0),(0,e.A)(this,"splicingPointFlag",0),(0,e.A)(this,"transportPrivateDataFlag",0),(0,e.A)(this,"adaptationFieldExtensionFlag",0),(0,e.A)(this,"pcr",BigInt(0)),(0,e.A)(this,"opcr",BigInt(0)),(0,e.A)(this,"spliceCountDown",0),(0,e.A)(this,"transportPrivateData",null),(0,e.A)(this,"extension",null)}}class a{constructor(){(0,e.A)(this,"pos",s.Dh),(0,e.A)(this,"payloadUnitStartIndicator",0),(0,e.A)(this,"transportPriority",0),(0,e.A)(this,"pid",s.N_),(0,e.A)(this,"adaptationFieldControl",0),(0,e.A)(this,"continuityCounter",0),(0,e.A)(this,"transportScramblingControl",0),(0,e.A)(this,"adaptationFieldInfo",new r),(0,e.A)(this,"payload",null)}}class d{constructor(){(0,e.A)(this,"slices",[]),(0,e.A)(this,"totalLength",0),(0,e.A)(this,"expectedLength",s.N_),(0,e.A)(this,"randomAccessIndicator",0),(0,e.A)(this,"pid",s.N_),(0,e.A)(this,"streamType",0),(0,e.A)(this,"pos",s.Dh)}}class c{constructor(){(0,e.A)(this,"versionNumber",0),(0,e.A)(this,"networkPid",s.N_),(0,e.A)(this,"program2PmtPid",new(n()))}}class l{constructor(){(0,e.A)(this,"tag",void 0),(0,e.A)(this,"buffer",void 0)}}class h{constructor(){(0,e.A)(this,"versionNumber",0),(0,e.A)(this,"programNumber",0),(0,e.A)(this,"pcrPid",0),(0,e.A)(this,"pid2StreamType",new(n())),(0,e.A)(this,"pid2ESDescriptor",new(n()))}}class o{constructor(){(0,e.A)(this,"pid",s.N_),(0,e.A)(this,"streamType",0),(0,e.A)(this,"streamId",s.N_),(0,e.A)(this,"dts",s.Dh),(0,e.A)(this,"pts",s.Dh),(0,e.A)(this,"pos",s.Dh),(0,e.A)(this,"payload",null),(0,e.A)(this,"data",null),(0,e.A)(this,"randomAccessIndicator",0)}}},69584:(g,p,t)=>{t.d(p,{B:()=>n});var e=t(134),i=t(77231);class n{constructor(){(0,e.A)(this,"capturePattern",void 0),(0,e.A)(this,"streamStructureVersion",void 0),(0,e.A)(this,"headerTypeFlag",void 0),(0,e.A)(this,"granulePosition",void 0),(0,e.A)(this,"serialNumber",void 0),(0,e.A)(this,"pageSequenceNumber",void 0),(0,e.A)(this,"crcCheckSum",void 0),(0,e.A)(this,"numberPageSegments",void 0),(0,e.A)(this,"segmentTable",void 0),(0,e.A)(this,"payload",void 0),this.reset()}reset(){this.capturePattern="OggS",this.streamStructureVersion=0,this.headerTypeFlag=0,this.granulePosition=i.Dh,this.serialNumber=0,this.pageSequenceNumber=0,this.crcCheckSum=0,this.numberPageSegments=0,this.segmentTable=[]}async read(r){await this.readPageHeader(r);const a=this.segmentTable.reduce((d,c)=>d+c,0);a&&(this.payload=await r.readBuffer(a))}async readPageHeader(r){if(this.capturePattern=await r.readString(4),this.streamStructureVersion=await r.readUint8(),this.headerTypeFlag=await r.readUint8(),this.granulePosition=await r.readUint64(),this.serialNumber=await r.readUint32(),this.pageSequenceNumber=await r.readUint32(),this.crcCheckSum=await r.readUint32(),this.numberPageSegments=await r.readUint8(),this.numberPageSegments)for(let a=0;a<this.numberPageSegments;a++){const d=await r.readUint8();this.segmentTable.push(d)}}write(r){if(r.writeString(this.capturePattern),r.writeUint8(this.streamStructureVersion),r.writeUint8(this.headerTypeFlag),r.writeUint64(this.granulePosition),r.writeUint32(this.serialNumber),r.writeUint32(this.pageSequenceNumber),r.writeUint32(this.crcCheckSum),this.payload){this.numberPageSegments=Math.ceil(this.payload.length/255);const a=this.payload.length%255;r.writeUint8(this.numberPageSegments);for(let d=0;d<this.numberPageSegments-1;d++)r.writeUint8(255);r.writeUint8(a),r.writeBuffer(this.payload)}else r.writeUint8(0)}}},94929:(g,p,t)=>{t.d(p,{o:()=>r,q:()=>n});var e=t(134);class i{constructor(){(0,e.A)(this,"streamCount",void 0),(0,e.A)(this,"coupledStreamCount",void 0),(0,e.A)(this,"mapping",void 0),this.streamCount=1,this.coupledStreamCount=0,this.mapping=null}read(d){this.streamCount=d.readUint8(),this.coupledStreamCount=d.readUint8(),this.mapping=d.readBuffer(this.streamCount+this.coupledStreamCount)}write(d){d.writeUint8(this.streamCount),d.writeUint8(this.coupledStreamCount),d.writeBuffer(this.mapping)}}class n{constructor(){(0,e.A)(this,"streamIndex",void 0),(0,e.A)(this,"signature",void 0),(0,e.A)(this,"version",void 0),(0,e.A)(this,"channels",void 0),(0,e.A)(this,"preSkip",void 0),(0,e.A)(this,"sampleRate",void 0),(0,e.A)(this,"outputGain",void 0),(0,e.A)(this,"channelMappingFamily",void 0),(0,e.A)(this,"channelMappingTable",void 0),this.signature="OpusHead",this.version=1,this.channels=1,this.preSkip=0,this.sampleRate=48e3,this.outputGain=0,this.channelMappingFamily=0,this.channelMappingTable=new i}read(d){this.signature=d.readString(8),this.version=d.readUint8(),this.channels=d.readUint8(),this.preSkip=d.readUint16(),this.sampleRate=d.readUint32(),this.outputGain=d.readInt16(),this.channelMappingFamily=d.readUint8(),this.channelMappingFamily!==0&&this.channelMappingTable.read(d)}write(d){d.writeString(this.signature),d.writeUint8(this.version),d.writeUint8(this.channels),d.writeUint16(this.preSkip),d.writeUint32(this.sampleRate),d.writeInt16(this.outputGain),d.writeUint8(this.channelMappingFamily),this.channelMappingFamily!==0&&this.channelMappingTable.write(d)}setCodec(d){this.sampleRate=d.sampleRate,this.channels=d.chLayout.nbChannels}}class s{constructor(){(0,e.A)(this,"list",void 0),this.list=[]}read(d,c){for(let l=0;l<c;l++){const h=d.readUint32();this.list.push(d.readString(h))}}write(d){for(let c=0;c<this.list.length;c++){const l=d.encodeString(this.list[c]);d.writeUint32(l.length),d.writeBuffer(l)}}addComment(d){this.list.push(d)}}class r{constructor(){(0,e.A)(this,"streamIndex",void 0),(0,e.A)(this,"signature",void 0),(0,e.A)(this,"vendorStringLength",void 0),(0,e.A)(this,"vendorString",void 0),(0,e.A)(this,"userCommentListLength",void 0),(0,e.A)(this,"comments",void 0),this.signature="OpusTags",this.vendorString="libmedia.0.0.1",this.vendorStringLength=this.vendorString.length,this.userCommentListLength=0,this.comments=new s}read(d){this.signature=d.readString(8),this.vendorStringLength=d.readUint32(),this.vendorString=d.readString(this.vendorStringLength),this.userCommentListLength=d.readUint32(),this.userCommentListLength&&this.comments.read(d,this.userCommentListLength)}write(d){d.writeString(this.signature);const c=d.encodeString(this.vendorString);d.writeUint32(c.length),d.writeBuffer(c),d.writeUint32(this.comments.list.length),this.comments.write(d)}addComment(d){this.comments.addComment(d)}setCodec(d){}}},797:(g,p,t)=>{t.d(p,{G:()=>s,m:()=>i});var e=t(134);class i{constructor(){(0,e.A)(this,"streamIndex",void 0),(0,e.A)(this,"packetType",void 0),(0,e.A)(this,"signature",void 0),(0,e.A)(this,"version",void 0),(0,e.A)(this,"channels",void 0),(0,e.A)(this,"sampleRate",void 0),(0,e.A)(this,"bitrateMaximum",void 0),(0,e.A)(this,"bitrateNominal",void 0),(0,e.A)(this,"bitrateMinimum",void 0),(0,e.A)(this,"blocksize0",void 0),(0,e.A)(this,"blocksize1",void 0),(0,e.A)(this,"framingFlag",void 0),this.signature="vorbis",this.version=0,this.channels=1,this.sampleRate=48e3,this.bitrateMaximum=0,this.bitrateNominal=0,this.bitrateMinimum=0}read(a){this.packetType=a.readUint8(),this.signature=a.readString(6),this.version=a.readUint32(),this.channels=a.readUint8(),this.sampleRate=a.readInt32(),this.bitrateMaximum=a.readInt32(),this.bitrateNominal=a.readInt32(),this.bitrateMinimum=a.readInt32();const d=255&a.readUint8();this.blocksize0=Math.pow(2,d>>>4),this.blocksize1=Math.pow(2,15&d),this.framingFlag=a.readUint8()}write(a){a.writeUint8(1),a.writeString(this.signature),a.writeUint32(this.version),a.writeUint8(this.channels),a.writeInt32(this.sampleRate),a.writeInt32(this.bitrateMaximum),a.writeInt32(this.bitrateNominal),a.writeInt32(this.bitrateMinimum),a.writeUint8(Math.log2(this.blocksize0)<<4|Math.log2(this.blocksize1)),a.writeUint8(1)}setCodec(a){this.sampleRate=a.sampleRate,this.channels=a.chLayout.nbChannels}}class n{constructor(){(0,e.A)(this,"list",void 0),this.list=[]}read(a,d){for(let c=0;c<d;c++){const l=a.readUint32();this.list.push(a.readString(l))}}write(a){for(let d=0;d<this.list.length;d++){const c=a.encodeString(this.list[d]);a.writeUint32(c.length),a.writeBuffer(c)}}addComment(a){this.list.push(a)}}class s{constructor(){(0,e.A)(this,"streamIndex",void 0),(0,e.A)(this,"packetType",void 0),(0,e.A)(this,"signature",void 0),(0,e.A)(this,"vendorStringLength",void 0),(0,e.A)(this,"vendorString",void 0),(0,e.A)(this,"userCommentListLength",void 0),(0,e.A)(this,"comments",void 0),(0,e.A)(this,"framingFlag",void 0),this.signature="vorbis",this.vendorString="libmedia.0.0.1",this.vendorStringLength=this.vendorString.length,this.userCommentListLength=0,this.comments=new n}read(a){this.packetType=a.readUint8(),this.signature=a.readString(6),this.vendorStringLength=a.readUint32(),this.vendorString=a.readString(this.vendorStringLength),this.userCommentListLength=a.readUint32(),this.userCommentListLength&&this.comments.read(a,this.userCommentListLength),this.framingFlag=a.readUint8()}write(a){a.writeString(this.signature);const d=a.encodeString(this.vendorString);a.writeUint32(d.length),a.writeBuffer(d),a.writeUint32(this.comments.list.length),this.comments.write(a),a.writeUint8(1)}addComment(a){this.comments.addComment(a)}setCodec(a){}}},35531:(g,p,t)=>{t.d(p,{y:()=>o});var e=t(63939),i=t(50932),n=t(4624),s=t(9705),r=t(53260),a=t(95644),d=t(37837),c=t(14686),l=t(39381),h="src\\avformat\\formats\\riff\\iriff.ts";async function o(u,f,v){if(v<14)return n.z3("wav format size < 14",h,36),s.LR;i.M[15](f,1);const y=await u.readUint16();let A=await u.readUint16();const w=await u.readUint32();let k=8*await u.readUint32();const T=await u.readUint16();if(i.M[15](f+136,w),i.M[15](f+140,T),v===14?i.M[15](f+40,8):i.M[15](f+40,await u.readUint16()),y===65534?i.M[8](f+8,0):(i.M[8](f+8,y),i.M[15](f+4,function(P,b){let x=r.g[P];return x?(x===65541?x=(0,a.uU)(b,!1,!1,-2):x===65557&&(x=(0,a.uU)(b,!0,!1,0)),x===69633&&b===8&&(x=69676),x):0}(y,e.f[15](f+40)))),v>=18&&y!==357){let P=await u.readUint16();v-=18,P=Math.min(v,P),P>=22&&y===65534&&(await u.skip(22),P-=22,v-=22),P>0&&(i.M[20](f+12,(0,d.sY)(P)),i.M[15](f+16,P),await u.readBuffer(P,(0,c.JW)(e.f[20](f+12),P)),v-=P),v>0&&await u.skip(v)}else if(y===357&&v>=32){v-=4,i.M[20](f+12,(0,d.sY)(v)),i.M[15](f+16,v),await u.readBuffer(v,(0,c.JW)(e.f[20](f+12),v));const P=l.E3(e.f[20](f+12)+4);if(i.M[15](f+136,l.Y0(e.f[20](f+12)+12)),A=0,k=0,v<8+20*P)return s.LR;for(let b=0;b<P;b++)A+=e.f[2](e.f[20](f+12)+(8+20*b+17))}return i.M[17](f+32,BigInt(k)),e.f[15](f+136)<0?(n.z3(`Invalid sample rate: ${e.f[15](f+136)}`,h,116),s.LR):(e.f[15](f+4)===86065&&(A=0,i.M[15](f+136,0)),e.f[15](f+4)==69643&&e.f[15](f+136)&&i.M[15](f+40,(0|Number(0xffffffffn&e.f[17](f+32)))/e.f[15](f+136)),A!=e.f[15](f+116)&&(i.M[15](f+112,0),i.M[15](f+116,A)),0)}},53260:(g,p,t)=>{t.d(p,{g:()=>e});const e={1:65541,2:69638,3:65557,6:65543,7:65542,10:86052,16:69664,17:69633,23:69664,32:69646,34:86037,49:86046,50:86046,56:73728,66:86068,69:69643,20:69643,64:69643,97:69635,98:69634,100:69643,105:69633,117:86079,131:86069,255:86018,273:86068,5632:86018,5634:86065,8192:86019}},59989:(g,p,t)=>{function e(i,n=0){if(!i)return!1;if(i.length<2)return!0;let s=i[n],r=n+1;for(;r<i.length&&s===i[r];r++);return r===i.length}t.d(p,{A:()=>e})},31425:(g,p,t)=>{t.d(p,{$:()=>s});var e=t(77231),i=t(72739),n=t(44328);function s(r){let a=!0;return i.__(r.streams,d=>{switch(d.codecpar.codecType){case 1:d.codecpar.chLayout.nbChannels!==e.N_&&d.codecpar.sampleRate!==e.N_&&d.codecpar.frameSize!==e.N_&&d.codecpar.bitRate!==BigInt(0)||(a=!1);break;case 0:(0,n.lb)(d.codecpar.framerate)!==0&&d.codecpar.width!==e.N_&&d.codecpar.height!==e.N_&&d.codecpar.bitRate!==BigInt(0)||(a=!1),d.codecpar.codecId!==27&&d.codecpar.codecId!==173&&d.codecpar.codecId!==196&&d.codecpar.codecId!==12||d.codecpar.profile!==e.N_&&d.codecpar.level!==e.N_||(a=!1)}}),a}},61619:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(67672);function i(n,s=4){let r="";for(let a=0;a<s;a++)e.ai(n)?(r=String.fromCharCode(255&n)+r,n>>>=8):(r=String.fromCharCode(Number(n&BigInt(255)))+r,n>>=BigInt(8));return r}},2187:(g,p,t)=>{t.d(p,{d:()=>s});var e=t(72739),i=t(44328),n=t(77231);function s(r,a,d){let c=BigInt(0);return e.__(r,l=>{c+=l.codecpar.bitRate*(0,i.k)(a,d,n.i0)/BigInt(8e3)}),c}},65977:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(4624),i="src\\avformat\\function\\mktag.ts";function n(s){s.length!==4&&e.R8(`tag length is not 4, tag: ${s}`,i,30);let r=0;for(let a=0;a<4;a++)r=r<<8|s.charCodeAt(a);return r}},20841:(g,p,t)=>{function e(i,n,s,r){const a=i.getPos(),d=i.getPointer(),c=a-BigInt(Math.floor(d));let l=!1;switch(n<a&&n>=c?(i.seekInline(d+Number(n-a)),l=!0):i.seek(n),r){case"uint8":i.writeUint8(255&s);break;case"int8":i.writeInt8(s);break;case"uint16":i.writeUint16(65535&s);break;case"int16":i.writeInt16(s);break;case"uint32":i.writeUint32(s>>>0);break;case"int32":i.writeInt32(s);break;case"uint64":i.writeUint64(BigInt.asUintN(64,s));break;case"int64":i.writeInt64(s);break;case"float":i.writeFloat(s);break;case"double":i.writeDouble(s)}l?i.seekInline(d):i.seek(a)}t.d(p,{A:()=>e})},52071:(g,p,t)=>{t.d(p,{A:()=>o});var e=t(63939),i=t(9599),n=t(29170),s=t(77231),r=t(44328),a=t(2187),d=t(71517),c=t(9705),l=t(4624),h="src\\avformat\\function\\seekInBytes.ts";async function o(u,f,v,y,A,w){const k=u.ioReader.getPos(),T=await u.ioReader.fileSize();let P=s.Dh,b=v;f.startTime!==s.Dh?b-=f.startTime:b-=f.firstDTS;const x=(0,r.k)(v,f.timeBase,s.i0);if(x<BigInt(1e4))return l.Yz(`seek pts is earlier then 10s, seek to first packet pos(${y}) directly`,h,63),await u.ioReader.seek(y),k;let I=(0,a.d)(u.streams,b,f.timeBase);const S=T-(0,a.d)(u.streams,BigInt(5e3),s.i0),z=(0,a.d)(u.streams,BigInt(1e4),s.i0);if(I>S&&(I=S),I<y)return await u.ioReader.seek(y),k;const V=(0,d._5)();let L=T,C=BigInt(0);for(;;){if(L-C<z){P=C;break}await u.ioReader.seek(I),await w(u);const F=u.ioReader.getPos();if(!(await A(u,V)>=0))break;{const H=(0,r.k)(e.f[17](V+8),(0,n.A)(V+72,i.P),s.i0),M=H-x;if(l.Yz(`try to seek to pos: ${I}, got packet pts: ${e.f[17](V+8)}(${H}ms), diff: ${M}ms`,h,98),M<=BigInt(0)&&-M<BigInt(1e4)){P=F;break}M>BigInt(0)?(L=I,I=C+L>>BigInt(1)):(C=I,I=C+L>>BigInt(1))}}return(0,d.Qe)(V),P!==s.Dh?(l.Yz(`finally seek to pos ${P}`,h,124),await u.ioReader.seek(P),await w(u),k):(await u.ioReader.seek(k),BigInt(c.E$))}},92174:(g,p,t)=>{t.d(p,{XA:()=>o,bX:()=>f,bx:()=>h,dJ:()=>u,ho:()=>l});var e=t(80662),i=t.n(e),n=t(63939),s=t(50932),r=t(95335),a=t(4624),d="src\\avformat\\mux.ts";const c={paddingZero:!1};function l(v,y={}){const A=r.X$({},c,y);return v.ioWriter||a.h2("need ioWriter",d,46),v.oformat||a.h2("need oformat",d,49),v.options=A,v.processPrivateData={first:new(i())},v.oformat.init(v)}function h(v){v.oformat.writeHeader(v)}function o(v,y){const A=v.processPrivateData;return A.first.has(n.f[15](y+32))||(n.f[17](y+16)>BigInt(0)?A.first.set(n.f[15](y+32),n.f[17](y+16)):A.first.set(n.f[15](y+32),BigInt(0))),v.options.paddingZero&&(s.M[17](y+16,n.f[17](y+16)-A.first.get(n.f[15](y+32))),s.M[17](y+8,n.f[17](y+8)-A.first.get(n.f[15](y+32)))),v.oformat.writeAVPacket(v,y)}function u(v){v.oformat.writeTrailer(v)}function f(v){v.oformat.flush(v)}},70509:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(134);class i{constructor(){(0,e.A)(this,"onFlush",void 0)}}},97801:(g,p,t)=>{t.d(p,{A:()=>o});var e=t(134),i=t(70509),n=t(13258),s=t(51678),r=t(13724),a=t(4624),d="src\\avnetwork\\bsp\\aes\\AESDecryptPipe.ts";const c=16;let l=!0;const h=new Uint8Array(c).fill(c);class o extends i.A{constructor(f=1048576){super(),(0,e.A)(this,"buffer",void 0),(0,e.A)(this,"aesSoftDecryptor",void 0),(0,e.A)(this,"aesWebDecryptor",void 0),(0,e.A)(this,"aesTargetDecryptor",void 0),(0,e.A)(this,"pointer",void 0),(0,e.A)(this,"endPointer",void 0),(0,e.A)(this,"size",void 0),(0,e.A)(this,"ended",void 0),(0,e.A)(this,"iv",void 0),(0,e.A)(this,"key",void 0),this.size=f,this.pointer=0,this.endPointer=0,this.ended=!1,this.buffer=new Uint8Array(f),this.aesSoftDecryptor=new n.A,s.A.isSupport()&&l&&(this.aesWebDecryptor=new s.A),this.aesTargetDecryptor=this.aesWebDecryptor||this.aesSoftDecryptor}remainingLength(){return this.endPointer-this.pointer}async expandKey(f,v){this.key=f,this.iv=v,this.aesWebDecryptor&&await this.aesWebDecryptor.expandKey(f),this.aesSoftDecryptor.expandKey(f)}async flush_(f){for(;;){const v=await this.onFlush(f);if(v!==-1048575)return v;await new r.A(0)}}async flush(){if(this.size-this.remainingLength()<=0)return;this.pointer<this.endPointer?this.pointer&&(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer):this.endPointer=0,this.pointer=0;const f=await this.flush_(this.buffer.subarray(this.endPointer));if(f<0){if(f===-1048576)return void(this.ended=!0);a.h2(`AESPipe error, flush failed, ret: ${f}`,d,120)}this.endPointer+=f}removePadding(f){const v=f.length,y=v&&new DataView(f.buffer).getUint8(v-1);return y?f.subarray(0,v-y):f}async decrypt(f){let v,y=0;this.aesTargetDecryptor!==this.aesWebDecryptor||this.ended||(v=this.buffer.subarray(this.pointer+f,this.pointer+f+c).slice(),this.buffer.set((await this.aesWebDecryptor.encryptPadding(h,this.buffer.subarray(this.pointer+f-c,this.pointer+f))).subarray(0,c),this.pointer+f),y=c);try{const A=this.buffer.subarray(this.pointer,this.pointer+f+y),w=await this.aesTargetDecryptor.decrypt(A,this.iv);return this.iv=A.slice(A.length-c-y,A.length-y).buffer,v&&this.buffer.set(v,this.pointer+f),this.pointer+=f,new Uint8Array(w)}catch{if(this.aesTargetDecryptor=this.aesWebDecryptor)return a.R8("web aes decrypt failed, try to use soft decryptor",d,169),v&&this.buffer.set(v,this.pointer+f),this.aesTargetDecryptor=this.aesSoftDecryptor,l=!1,this.decrypt(f);a.h2("aes decrypt failed",d,179)}}async read(f){for(;!this.ended&&this.remainingLength()<48;)await this.flush();if(this.remainingLength()===0)return-1048576;const v=Math.min(Math.floor((this.remainingLength()-(this.ended?0:32))/c)*c,f.length);let y=await this.decrypt(v);return this.ended&&this.aesTargetDecryptor===this.aesSoftDecryptor&&(y=this.removePadding(y)),f.set(y),y.length}}},41576:(g,p,t)=>{t.d(p,{A:()=>v});var e=t(134),i=t(54001),n=t.n(i),s=t(80662),r=t.n(s),a=t(13724),d=t(82800),c=t(95335),l=t(4624),h=t(78417),o=t(77580),u=t(86932),f="src\\avnetwork\\ioLoader\\DashIOLoader.ts";class v extends d.A{constructor(...A){super(...A),(0,e.A)(this,"info",void 0),(0,e.A)(this,"range",void 0),(0,e.A)(this,"mediaPlayList",void 0),(0,e.A)(this,"fetchedMap",void 0),(0,e.A)(this,"fetchedHistoryList",void 0),(0,e.A)(this,"audioLoader",void 0),(0,e.A)(this,"videoLoader",void 0),(0,e.A)(this,"audioSegmentIndex",void 0),(0,e.A)(this,"videoSegmentIndex",void 0),(0,e.A)(this,"audioCurrentUri",void 0),(0,e.A)(this,"videoCurrentUri",void 0),(0,e.A)(this,"audioSelectedIndex",void 0),(0,e.A)(this,"videoSelectedIndex",void 0),(0,e.A)(this,"audioSegments",void 0),(0,e.A)(this,"videoSegments",void 0),(0,e.A)(this,"audioInitSegmentPadding",void 0),(0,e.A)(this,"videoInitSegmentPadding",void 0),(0,e.A)(this,"subtitleInitSegmentPadding",void 0),(0,e.A)(this,"audioInitedSegment",void 0),(0,e.A)(this,"videoInitedSegment",void 0),(0,e.A)(this,"fetchMediaPlayListPromise",void 0),(0,e.A)(this,"minBuffer",void 0)}async fetchMediaPlayList(A){if(!A){if(this.fetchMediaPlayListPromise)return;this.fetchMediaPlayListPromise=new(n())(P=>{A=P})}const w={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};this.info.headers&&c.__(this.info.headers,(P,b)=>{w.headers[b]=P}),this.info.withCredentials&&(w.credentials="include"),this.info.referrerPolicy&&(w.referrerPolicy=this.info.referrerPolicy);try{const P=await fetch(this.info.url,w),b=await P.text();if(this.mediaPlayList=(0,h.A)(b,this.info.url),this.minBuffer=this.mediaPlayList.minBufferTime,this.options.isLive){var k,T;const x=this.mediaPlayList.minBufferTime/this.mediaPlayList.maxSegmentDuration,I=Math.max(this.mediaPlayList.mediaList.audio&&((k=this.mediaPlayList.mediaList.audio[0])===null||k===void 0?void 0:k.mediaSegments.length)||0,this.mediaPlayList.mediaList.video&&((T=this.mediaPlayList.mediaList.video[0])===null||T===void 0?void 0:T.mediaSegments.length)||0);if(I<x)return await new a.A((x-I)*this.mediaPlayList.maxSegmentDuration),l.R8(`wait for min buffer time, buffer: ${I*this.mediaPlayList.maxSegmentDuration}, need: ${x*this.mediaPlayList.maxSegmentDuration}`,f,131),this.fetchMediaPlayList(A)}if(this.mediaPlayList.type==="vod"?this.options.isLive=!1:this.options.isLive=!0,this.mediaPlayList.mediaList.audio.length){const x=this.mediaPlayList.mediaList.audio[this.audioSelectedIndex];x.file?this.audioSegments=[x.file]:this.options.isLive&&this.audioInitedSegment===x.initSegment?this.audioSegments=x.mediaSegments.map(I=>I.url):(this.audioSegments=[x.initSegment].concat(x.mediaSegments.map(I=>I.url)),this.audioInitedSegment=x.initSegment)}if(this.mediaPlayList.mediaList.video.length){this.videoSelectedIndex=this.mediaPlayList.mediaList.video.length-1;const x=this.mediaPlayList.mediaList.video[this.videoSelectedIndex];x.file?this.videoSegments=[x.file]:this.options.isLive&&this.videoInitedSegment===x.initSegment?this.videoSegments=x.mediaSegments.map(I=>I.url):(this.videoSegments=[x.initSegment].concat(x.mediaSegments.map(I=>I.url)),this.videoInitedSegment=x.initSegment)}return A(),this.fetchMediaPlayListPromise=null,this.status=2,this.retryCount=0,this.mediaPlayList}catch(P){if(this.retryCount<this.options.retryCount)return this.retryCount++,l.z3(`failed fetch mpd file, retry(${this.retryCount}/3)`,f,189),await new a.A(this.status===2?this.options.retryInterval:5),this.fetchMediaPlayList(A);this.status=3,A(),l.h2(`DashLoader: exception, fetch slice error, error: ${P.message}`,f,197)}}async open(A,w){this.status===0&&(this.info=A,this.range=w,this.range.to||(this.range.to=-1),this.range.from=Math.max(this.range.from,0),this.audioSegmentIndex=0,this.videoSegmentIndex=0,this.audioSelectedIndex=0,this.videoSelectedIndex=0,this.fetchedMap=new(r()),this.fetchedHistoryList=[],this.status=1,this.retryCount=0,await this.fetchMediaPlayList())}async readAudio(A){let w=0;if(this.audioLoader){if(w=await this.audioLoader.read(A),w!==-1048576)return w;if(this.options.isLive)this.fetchedMap.set(this.audioCurrentUri,!0),this.fetchedHistoryList.length===10&&this.fetchedMap.delete(this.fetchedHistoryList.shift()),this.fetchedHistoryList.push(this.audioCurrentUri);else if(this.audioSegmentIndex++,this.audioSegmentIndex>=this.audioSegments.length)return-1048576;this.audioLoader=null}if(this.options.isLive){const k=this.audioSegments.filter(T=>!this.fetchedMap.get(T));if(!k.length){if(this.mediaPlayList.isEnd)return-1048576;const T=(this.mediaPlayList.duration||this.mediaPlayList.minimumUpdatePeriod)-((0,u.A)()-this.mediaPlayList.timestamp)/1e3;if(T>0&&await new a.A(T),this.fetchMediaPlayListPromise){if(await this.fetchMediaPlayListPromise,this.status===3)return-1048576}else await this.fetchMediaPlayList();return this.readAudio(A)}return this.audioCurrentUri=k[0],this.audioLoader=new o.A(c.X$({},this.options,{disableSegment:!0,loop:!1})),await this.audioLoader.open({url:this.audioCurrentUri},{from:0,to:-1}),this.audioLoader.read(A)}return this.audioLoader=new o.A(c.X$({},this.options,{disableSegment:!0,loop:!1})),this.audioInitSegmentPadding?(await this.audioLoader.open({url:this.audioInitSegmentPadding},{from:0,to:-1}),this.audioInitSegmentPadding=null,this.audioSegmentIndex--):await this.audioLoader.open({url:this.audioSegments[this.audioSegmentIndex]},{from:0,to:-1}),this.audioLoader.read(A)}async readVideo(A){let w=0;if(this.videoLoader){if(w=await this.videoLoader.read(A),w!==-1048576)return w;if(this.options.isLive)this.fetchedMap.set(this.videoCurrentUri,!0),this.fetchedHistoryList.length===10&&this.fetchedMap.delete(this.fetchedHistoryList.shift()),this.fetchedHistoryList.push(this.videoCurrentUri);else if(this.videoSegmentIndex++,this.videoSegmentIndex>=this.videoSegments.length)return-1048576;this.videoLoader=null}if(this.options.isLive){const k=this.videoSegments.filter(T=>!this.fetchedMap.get(T));if(!k.length){if(this.mediaPlayList.isEnd)return-1048576;const T=(this.mediaPlayList.duration||this.mediaPlayList.minimumUpdatePeriod)-((0,u.A)()-this.mediaPlayList.timestamp)/1e3;if(T>0&&await new a.A(Math.max(T,2)),this.fetchMediaPlayListPromise){if(await this.fetchMediaPlayListPromise,this.status===3)return-1048576}else await this.fetchMediaPlayList();return this.readVideo(A)}return this.videoCurrentUri=k[0],this.videoLoader=new o.A(c.X$({},this.options,{disableSegment:!0,loop:!1})),await this.videoLoader.open({url:this.videoCurrentUri},{from:0,to:-1}),this.videoLoader.read(A)}return this.videoLoader=new o.A(c.X$({},this.options,{disableSegment:!0,loop:!1})),this.videoInitSegmentPadding?(await this.videoLoader.open({url:this.videoInitSegmentPadding},{from:0,to:-1}),this.videoInitSegmentPadding=null,this.videoSegmentIndex--):await this.videoLoader.open({url:this.videoSegments[this.videoSegmentIndex]},{from:0,to:-1}),this.videoLoader.read(A)}async read(A,w){return w.mediaType==="audio"?this.readAudio(A):this.readVideo(A)}async seek(A,w){this.audioLoader&&w.mediaType==="audio"&&(await this.audioLoader.abort(),this.audioLoader=null),this.videoLoader&&w.mediaType==="video"&&(await this.videoLoader.abort(),this.videoLoader=null);let k=Number(A);if(this.audioSegments&&w.mediaType==="audio"){let T=0;const P=this.mediaPlayList.mediaList.audio[this.audioSelectedIndex].mediaSegments;if(P!=null&&P.length){for(let b=0;b<P.length;b++)if(k>=1e3*P[b].start&&k<1e3*P[b].end){T=b;break}}this.audioSegmentIndex=T+(this.mediaPlayList.mediaList.audio[this.audioSelectedIndex].initSegment?1:0)}if(this.videoSegments&&w.mediaType==="video"){let T=0;const P=this.mediaPlayList.mediaList.video[this.videoSelectedIndex].mediaSegments;if(P!=null&&P.length){for(let b=0;b<P.length;b++)if(k>=1e3*P[b].start&&k<1e3*P[b].end){T=b;break}}this.videoSegmentIndex=T+(this.mediaPlayList.mediaList.video[this.videoSelectedIndex].initSegment?1:0)}this.status===4&&(this.status=2)}async size(){return BigInt(0)}async abort(){this.videoLoader&&(await this.videoLoader.abort(),this.videoLoader=null),this.audioLoader&&(await this.audioLoader.abort(),this.audioLoader=null)}async stop(){await this.abort(),this.status=0}getDuration(){return this.mediaPlayList.duration}hasVideo(){var A;return((A=this.mediaPlayList)===null||A===void 0?void 0:A.mediaList.video.length)>0}hasAudio(){var A;return((A=this.mediaPlayList)===null||A===void 0?void 0:A.mediaList.audio.length)>0}hasSubtitle(){var A;return((A=this.mediaPlayList)===null||A===void 0?void 0:A.mediaList.subtitle.length)>0}getVideoList(){return this.hasVideo()?{list:this.mediaPlayList.mediaList.video.map(A=>({width:A.width,height:A.height,frameRate:A.frameRate})),selectedIndex:this.videoSelectedIndex}:{list:[],selectedIndex:0}}getAudioList(){return this.hasAudio()?{list:this.mediaPlayList.mediaList.audio.map(A=>({lang:A.lang})),selectedIndex:this.audioSelectedIndex}:{list:[],selectedIndex:0}}getSubtitleList(){return this.hasSubtitle()?{list:this.mediaPlayList.mediaList.subtitle.map(A=>({lang:A.lang,codecs:A.codecs})),selectedIndex:0}:{list:[],selectedIndex:0}}selectVideo(A){if(A!==this.videoSelectedIndex&&this.hasVideo()&&A>=0&&A<this.mediaPlayList.mediaList.video.length){this.videoSelectedIndex=A;const w=this.mediaPlayList.mediaList.video[this.videoSelectedIndex];w.file?this.videoSegments=[w.file]:(this.videoSegments=[w.initSegment].concat(w.mediaSegments.map(k=>k.url)),this.videoInitSegmentPadding=w.initSegment)}}selectAudio(A){if(A!==this.audioSelectedIndex&&this.hasAudio()&&A>=0&&A<this.mediaPlayList.mediaList.audio.length){this.audioSelectedIndex=A;const w=this.mediaPlayList.mediaList.audio[this.audioSelectedIndex];w.file?this.audioSegments=[w.file]:(this.audioSegments=[w.initSegment].concat(w.mediaSegments.map(k=>k.url)),this.audioInitSegmentPadding=w.initSegment)}}selectSubtitle(A){}getMinBuffer(){return this.minBuffer}}},77580:(g,p,t)=>{t.d(p,{A:()=>l});var e=t(134),i=t(29967),n=t.n(i),s=t(13724),r=t(82800),a=t(95335),d=t(4624),c="src\\avnetwork\\ioLoader\\FetchIOLoader.ts";class l extends r.A{constructor(o={}){super(o),(0,e.A)(this,"contentLength",void 0),(0,e.A)(this,"receivedLength",void 0),(0,e.A)(this,"info",void 0),(0,e.A)(this,"range",void 0),(0,e.A)(this,"startBytes",void 0),(0,e.A)(this,"endBytes",void 0),(0,e.A)(this,"eofIndex",void 0),(0,e.A)(this,"abortController",void 0),(0,e.A)(this,"reader",void 0),(0,e.A)(this,"buffers",void 0)}async open(o,u){var f;if(this.info=o,this.range=u,this.range.to||(this.range.to=-1),this.range.from=Math.max(this.range.from,0),this.eofIndex<0&&(this.eofIndex=u.to),this.startBytes=0,this.endBytes=-1,this.receivedLength=0,this.buffers=[],this.range&&!this.options.isLive&&(this.startBytes=(f=this.range.from)!==null&&f!==void 0?f:0),this.status=1,!this.options.isLive&&!this.options.disableSegment){const v={method:"HEAD",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};this.info.headers&&a.__(this.info.headers,(y,A)=>{v.headers[A]=y}),this.info.withCredentials&&(v.credentials="include"),this.info.referrerPolicy&&(v.referrerPolicy=this.info.referrerPolicy),AbortController&&(this.abortController=new AbortController,v.signal=this.abortController.signal);try{const y=await fetch(this.info.url,v);if(y.ok&&y.status>=200&&y.status<=299){const A=y.headers.get("X-Content-Length")||y.headers.get("Content-Length");A!=null&&(this.contentLength=n()(A),this.range.to<0&&(this.eofIndex=this.contentLength+this.range.to)),this.endBytes=Math.min(this.startBytes+this.options.preload-1,this.eofIndex),this.status=2}else this.endBytes=-1}catch{this.endBytes=-1}}}async openReader(){const o={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};this.info.headers&&a.__(this.info.headers,(u,f)=>{o.headers[f]=u}),this.options.isLive||this.options.disableSegment||(o.headers.range=`bytes=${this.startBytes}-${this.endBytes>0?this.endBytes:""}`),this.info.withCredentials&&(o.credentials="include"),this.info.referrerPolicy&&(o.referrerPolicy=this.info.referrerPolicy),this.abortController&&this.abortController.abort(),typeof AbortController=="function"&&(this.abortController=new AbortController,o.signal=this.abortController.signal);try{const u=await fetch(this.info.url,o);u.ok&&u.status>=200&&u.status<=299?this.reader=u.body.getReader():(this.status=3,d.h2(`FetchStreamLoader: Http code invalid, ${u.status} ${u.statusText}`,c,189))}catch(u){if(this.retryCount<this.options.retryCount&&(!this.options.isLive||!this.receivedLength))return this.retryCount++,this.status=1,await new s.A(this.options.retryInterval),this.openReader();d.h2(`FetchStreamLoader: exception ${u.message}`,c,202)}}async readInterval(o,u=0){let f=0;for(;this.buffers.length&&f<o.length;){const A=this.buffers.shift();A.length>o.length-f?(o.set(A.subarray(0,o.length-f),f),this.buffers.unshift(A.subarray(o.length-f)),f=o.length):(o.set(A,f),f+=A.length)}if(f>=o.length)return o.length+u;if(this.status===4)return f>0?f+u:u>0?u:-1048576;this.reader||await this.openReader();const{value:v,done:y}=await this.reader.read();return y?this.contentLength!==null&&this.receivedLength+this.range.from<this.endBytes+1?(this.status=3,void d.h2("Fetch stream meet Early-EOF",c,241)):this.options.isLive||this.options.disableSegment||this.receivedLength+this.range.from>=this.eofIndex?(this.status=4,this.startBytes=0,f>0?f+u:u>0?u:-1048576):(await this.reader.cancel(),this.abortController&&this.abortController.abort(),this.reader=null,this.startBytes=this.endBytes+1,this.endBytes=Math.min(this.startBytes+this.options.preload-1,this.eofIndex),this.readInterval(o.subarray(f),f)):(this.receivedLength+=v.length,v.length>o.length-f?(o.set(v.subarray(0,o.length-f),f),this.buffers.push(v.subarray(o.length-f)),o.length+u):(o.set(v,f),f+=v.length,f+u))}async read(o){return this.readInterval(o)}async seek(o){await this.abort(),this.receivedLength=Number(o)-this.range.from,this.startBytes=Number(o),this.options.disableSegment||(this.endBytes=Math.min(this.startBytes+this.options.preload,this.eofIndex)),this.buffers.length=0,this.status===4&&(this.status=2)}async size(){return this.options.isLive?BigInt(0):BigInt(Math.floor(this.contentLength))}async abort(){this.reader&&(await this.reader.cancel(),this.abortController&&this.abortController.abort(),this.reader=null)}async stop(){await this.abort(),this.status=0}}},79686:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(134),i=t(54001),n=t.n(i),s=t(82800),r=t(67672);class a extends s.A{constructor(...c){super(...c),(0,e.A)(this,"info",void 0),(0,e.A)(this,"range",void 0),(0,e.A)(this,"readPos",void 0),(0,e.A)(this,"endPos",void 0),(0,e.A)(this,"reader",void 0),(0,e.A)(this,"readerResolve",void 0)}async open(c,l){this.info=c,this.range=l,this.readPos=0,this.endPos=this.info.file.size,l.from>0&&(this.readPos=l.from),l.to>0&&(this.endPos=l.to),this.status=2}async readBufferByReader(c){this.reader||(this.reader=new FileReader,this.reader.onloadend=h=>{this.readerResolve&&this.readerResolve(h.target.result)});const l=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice;return new(n())(h=>{this.readerResolve=h,this.reader.readAsArrayBuffer(l.call(this.info.file,this.readPos,this.readPos+c))})}async read(c){if(this.readPos>=this.endPos)return this.status,-1048576;const l=Math.min(c.length,this.endPos-this.readPos);return r.Pc(Blob.prototype.arrayBuffer)?c.set(new Uint8Array(await this.info.file.slice(this.readPos,this.readPos+l).arrayBuffer()),0):c.set(new Uint8Array(await this.readBufferByReader(l)),0),this.readPos+=l,this.readPos>=this.endPos&&(this.status=4),l}async seek(c){return await this.abort(),this.readPos=Number(c),this.status===4&&(this.status=2),0}async size(){return BigInt(Math.floor(this.info.file.size))}async abort(){}async stop(){await this.abort(),this.status=0}}},15433:(g,p,t)=>{t.d(p,{A:()=>y});var e=t(134),i=t(80662),n=t.n(i),s=t(13724),r=t(82800),a=t(95335),d=t(8507),c=t(48182),l=t(77580),h=t(86932),o=t(4624),u=t(97801),f=t(67672),v="src\\avnetwork\\ioLoader\\HlsIOLoader.ts";class y extends r.A{constructor(...w){super(...w),(0,e.A)(this,"info",void 0),(0,e.A)(this,"range",void 0),(0,e.A)(this,"masterPlaylist",void 0),(0,e.A)(this,"mediaPlayList",void 0),(0,e.A)(this,"mediaPlayListIndex",void 0),(0,e.A)(this,"fetchedMap",void 0),(0,e.A)(this,"fetchedHistoryList",void 0),(0,e.A)(this,"mediaListUrl",void 0),(0,e.A)(this,"segmentIndex",void 0),(0,e.A)(this,"currentUri",void 0),(0,e.A)(this,"loader",void 0),(0,e.A)(this,"minBuffer",void 0),(0,e.A)(this,"keyMap",void 0),(0,e.A)(this,"currentIV",void 0),(0,e.A)(this,"currentKey",void 0),(0,e.A)(this,"aesDecryptPipe",void 0),(0,e.A)(this,"initLoaded",void 0)}async fetchMasterPlayList(){const w={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};this.info.headers&&a.__(this.info.headers,(T,P)=>{w.headers[P]=T}),this.info.withCredentials&&(w.credentials="include"),this.info.referrerPolicy&&(w.referrerPolicy=this.info.referrerPolicy);try{const T=await fetch(this.info.url,w),P=await T.text(),b=(0,c.A)(P);if(b.isMasterPlaylist)this.masterPlaylist=b;else{if(this.mediaPlayList=b,this.options.isLive&&(!this.mediaPlayList.segments||this.mediaPlayList.segments.length<2)){var k;let x=5;return(k=this.mediaPlayList.segments)!==null&&k!==void 0&&k.length&&(x=this.mediaPlayList.segments[0].duration*(2-this.mediaPlayList.segments.length)),o.R8(`wait for min buffer time, now segments: ${this.mediaPlayList.segments.length}`,v,122),await new s.A(x),this.fetchMasterPlayList()}this.minBuffer=this.mediaPlayList.duration||0,this.mediaPlayList.endlist&&(this.options.isLive=!1),this.mediaListUrl=this.info.url}return b}catch{if(this.retryCount<this.options.retryCount)return this.retryCount++,o.z3(`failed fetch m3u8 file, retry(${this.retryCount}/3)`,v,139),await new s.A(5),this.fetchMasterPlayList();this.status=3,o.h2("HLSLoader: exception, fetch slice error",v,145)}}async fetchMediaPlayList(){let w;if(this.masterPlaylist){const P=this.masterPlaylist.variants[this.mediaPlayListIndex];P||o.h2("no media playlist",v,157),w=P.uri}else w=this.mediaListUrl;/^https?/.test(w)||(w=d.ll(this.info.url,w)),this.mediaListUrl=w;const k={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};this.info.headers&&a.__(this.info.headers,(P,b)=>{k.headers[b]=P}),this.info.withCredentials&&(k.credentials="include"),this.info.referrerPolicy&&(k.referrerPolicy=this.info.referrerPolicy);try{const P=await fetch(w,k),b=await P.text();if(this.mediaPlayList=(0,c.A)(b),this.options.isLive&&(!this.mediaPlayList.segments||this.mediaPlayList.segments.length<2)){var T;let x=5;return(T=this.mediaPlayList.segments)!==null&&T!==void 0&&T.length&&(x=this.mediaPlayList.segments[0].duration*(2-this.mediaPlayList.segments.length)),o.R8(`wait for min buffer time, now segments: ${this.mediaPlayList.segments.length}`,v,202),await new s.A(x),this.fetchMediaPlayList()}return this.minBuffer=this.mediaPlayList.duration||0,this.mediaPlayList.endlist&&(this.options.isLive=!1),this.status=2,this.retryCount=0,this.mediaPlayList}catch{if(this.retryCount<this.options.retryCount)return this.retryCount++,o.z3(`failed fetch m3u8 file, retry(${this.retryCount}/3)`,v,221),await new s.A(this.options.retryInterval),this.fetchMasterPlayList();this.status=3,o.h2("HLSLoader: exception, fetch slice error",v,227)}}async open(w,k){this.info=w,this.range=k,this.range.to||(this.range.to=-1),this.range.from=Math.max(this.range.from,0),this.mediaPlayListIndex=0,this.segmentIndex=0,this.fetchedMap=new(n()),this.fetchedHistoryList=[],this.status=1,this.retryCount=0,this.keyMap=new(n()),await this.fetchMasterPlayList(),!this.mediaPlayList&&this.masterPlaylist&&await this.fetchMediaPlayList(),this.initLoaded=!0,this.mediaPlayList.segments.length&&this.mediaPlayList.segments[0].map&&(this.initLoaded=!1)}async checkNeedDecrypt(w,k){if(!w.key)return;const T=w.key.uri;if(this.keyMap.has(T)?this.currentKey=this.keyMap.get(T):(this.currentKey=await(await fetch((0,d.ll)(this.mediaListUrl,T))).arrayBuffer(),this.keyMap.set(T,this.currentKey)),w.key.iv)this.currentIV=w.key.iv.buffer;else{const P=new Uint8Array(16);new DataView(P.buffer).setUint32(12,k,!1),this.currentIV=P.buffer}this.aesDecryptPipe=new u.A,this.aesDecryptPipe.onFlush=async P=>this.loader.read(P),await this.aesDecryptPipe.expandKey(this.currentKey,this.currentIV)}async read(w){let k=0;if(this.loader){if(k=this.aesDecryptPipe?await this.aesDecryptPipe.read(w):await this.loader.read(w),k!==-1048576)return k;if(this.initLoaded){if(this.options.isLive)this.fetchedMap.set(this.currentUri,!0),this.fetchedHistoryList.length===10&&this.fetchedMap.delete(this.fetchedHistoryList.shift()),this.fetchedHistoryList.push(this.currentUri),this.segmentIndex++;else if(this.segmentIndex++,this.segmentIndex>=this.mediaPlayList.segments.length)return o.pq("hls segments ended",v,321),this.status=4,-1048576}else this.initLoaded=!0;this.loader=null}if(this.options.isLive){const T=this.mediaPlayList.segments.filter(I=>!this.fetchedMap.get(I.uri));if(!T.length){if(this.mediaPlayList.endlist)return this.status=4,-1048576;const I=(this.minBuffer-((0,h.A)()-this.mediaPlayList.timestamp)/1e3)/2;return I>0&&await new s.A(I),await this.fetchMediaPlayList(),this.read(w)}this.currentUri=T[0].uri,this.initLoaded&&await this.checkNeedDecrypt(T[0],this.segmentIndex),this.loader=new l.A(a.X$({},this.options,{disableSegment:!0,loop:!1}));const P=(0,d.ll)(this.mediaListUrl,this.initLoaded?this.currentUri:T[0].map.uri),b={from:0,to:-1},x=this.initLoaded?T[0].byterange:T[0].map.byterange;return x&&(b.from=x.offset,b.to=x.offset+x.length),await this.loader.open({url:P},b),this.aesDecryptPipe?this.aesDecryptPipe.read(w):this.loader.read(w)}{this.loader=new l.A(a.X$({},this.options,{disableSegment:!0,loop:!1}));let T=this.mediaPlayList.segments[this.segmentIndex];for(;!T.uri;)T=this.mediaPlayList.segments[++this.segmentIndex];this.initLoaded&&await this.checkNeedDecrypt(T,this.segmentIndex);const P=(0,d.ll)(this.mediaListUrl,this.initLoaded?T.uri:T.map.uri),b={from:0,to:-1},x=this.initLoaded?T.byterange:T.map.byterange;return x&&(b.from=x.offset,b.to=x.offset+x.length),await this.loader.open({url:P},b),this.aesDecryptPipe?this.aesDecryptPipe.read(w):this.loader.read(w)}}async seek(w){this.loader&&(await this.loader.abort(),this.loader=null);let k=0,T=Number(w),P=0;for(let b=0;b<this.mediaPlayList.segments.length;b++)if(f.ai(this.mediaPlayList.segments[b].duration)&&(k+=this.mediaPlayList.segments[b].duration,1e3*k>=T)){P=b;break}this.segmentIndex=P,this.status===4&&(this.status=2)}async size(){return BigInt(0)}async abort(){this.loader&&(await this.loader.abort(),this.loader=null)}async stop(){await this.abort(),this.status=0}getDuration(){return this.mediaPlayList.duration}getVideoList(){var w,k;return{list:(w=(k=this.masterPlaylist)===null||k===void 0?void 0:k.variants.map(T=>{var P,b,x,I,S;return{width:(P=(b=T.resolution)===null||b===void 0?void 0:b.width)!==null&&P!==void 0?P:0,height:(x=(I=T.resolution)===null||I===void 0?void 0:I.height)!==null&&x!==void 0?x:0,frameRate:(S=T.frameRate)!==null&&S!==void 0?S:0}}))!==null&&w!==void 0?w:[],selectedIndex:0}}selectVideo(w){this.mediaPlayListIndex=w,this.fetchMediaPlayList()}getMinBuffer(){return this.minBuffer}}},82800:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(134),i=t(95335);const n={isLive:!0,preload:5242880,retryCount:20,retryInterval:1};class s{constructor(a={}){(0,e.A)(this,"options",void 0),(0,e.A)(this,"status",void 0),(0,e.A)(this,"retryCount",void 0),(0,e.A)(this,"retryTimeout",void 0),this.options=a,this.status=0,this.retryCount=0,this.options=i.X$({},n),i.X$(this.options,a)}}},18667:(g,p,t)=>{t.d(p,{A:()=>x});var e=t(54001),i=t.n(e),n=t(63939),s=t(50932),r=t(12264),a=t(29170),d=t(9599),c=t(44527),l=t(9705),h=t(84149),o=t(75742),u=t(4624),f=t(16041),v=t(77104),y=t(84290),A=t(72739),w=t(86932),k=t(36204),T=t(44328),P=t(77231),b="src\\avpipeline\\AudioDecodePipeline.ts";class x extends c.A{constructor(){super()}createWebcodecDecoder(S){return new v.A({onError:z=>{u.z3(`audio decode error, taskId: ${S.taskId}, error: ${z}`,b,82),S.openReject&&(S.openReject(z),S.openReject=null)},onReceiveFrame(z){const V=(0,k.t)(z,S.avframePool.alloc());s.M[17](V+104,(0,T.k)(n.f[17](V+104),P.KR,S.timeBase)),S.frameCaches.push(V),s.M[17](S.stats+56,n.f[17](S.stats+56)+BigInt(1)),S.lastDecodeTimestamp&&s.M[15](S.stats+232,Math.max((0,w.A)()-S.lastDecodeTimestamp,n.f[15](S.stats+232))),S.lastDecodeTimestamp=(0,w.A)(),z.close()}})}createTask(S){const z=new h.Ay(S.leftPort),V=new h.Ay(S.rightPort),L=[],C=new f.A((0,a.A)(S.avframeList,r.A),S.avframeListMutex),F={...S,frameCaches:L,inputEnd:!1,decoder:null,parameters:0,lastDecodeTimestamp:0,avframePool:C,avpacketPool:new y.A((0,a.A)(S.avpacketList,r.A),S.avpacketListMutex)};return S.resource?F.decoder=new o.A({resource:S.resource,onError:H=>{u.z3(`audio decode error, taskId: ${S.taskId}, error: ${H}`,b,134);const M=this.tasks.get(S.taskId);M.openReject&&(M.openReject(H),M.openReject=null)},onReceiveFrame(H){L.push(H),s.M[17](F.stats+56,n.f[17](F.stats+56)+BigInt(1)),F.lastDecodeTimestamp&&s.M[15](F.stats+232,Math.max((0,w.A)()-F.lastDecodeTimestamp,n.f[15](F.stats+232))),F.lastDecodeTimestamp=(0,w.A)()},avframePool:C}):F.decoder=this.createWebcodecDecoder(F),this.tasks.set(S.taskId,F),V.on(h.S3,async H=>{switch(H.method){case"pull":if(L.length){const M=L.shift();V.reply(H,M);break}if(!F.inputEnd){for(;;){if(L.length){const G=L.shift();V.reply(H,G);break}const M=await z.request("pull");if(M===-1048576){if(await F.decoder.flush(),F.inputEnd=!0,L.length){const G=L.shift();V.reply(H,G);break}u.pq(`audio decoder ended, taskId: ${F.taskId}`,b,188),V.reply(H,-1048576);break}if(!(M>0)){u.z3(`audio decode pull avpacket error, taskId: ${S.taskId}, ret: ${M}`,b,208),V.reply(H,M);break}{const G=F.decoder.decode(M,(0,T.k)(n.f[17](M+8),(0,a.A)(M+72,d.P),P.KR));if(F.avpacketPool.release(M),G<0){s.M[15](F.stats+48,n.f[15](F.stats+48)+1),u.z3(`audio decode error, taskId: ${S.taskId}, ret: ${G}`,b,201),V.reply(H,G);break}}}break}V.reply(H,-1048576)}}),0}async open(S,z){const V=this.tasks.get(S);if(V)return new(i())(async(L,C)=>{V.openReject=C,await V.decoder.open(z),V.parameters=z,L()});u.h2("task not found",b,234)}async resetTask(S){const z=this.tasks.get(S);z&&(z.decoder&&await z.decoder.flush(),A.__(z.frameCaches,V=>{z.avframePool.release(V)}),z.frameCaches.length=0,z.inputEnd=!1,z.lastDecodeTimestamp=(0,w.A)(),u.pq(`reset audio decoder, taskId: ${z.taskId}`,b,250))}async registerTask(S){return this.tasks.has(S.taskId)?l.lh:this.createTask(S)}async unregisterTask(S){const z=this.tasks.get(S);z&&(z.rightPort.close(),z.leftPort.close(),z.decoder.close(),z.frameCaches.forEach(V=>{z.avframePool.release(V)}),this.tasks.delete(S))}}},59377:(g,p,t)=>{t.d(p,{A:()=>H});var e=t(134),i=t(80662),n=t.n(i),s=t(54001),r=t.n(s),a=t(61499),d=t(74503),c=t(12264),l=t(29170),h=t(63939),o=t(50932),u=t(94300),f=t(44527),v=t(9705),y=t(84149),A=t(4624),w=t(16041),k=t(92246),T=t(10278),P=t(47442),b=t(37837),x=t(70089),I=t(14686),S=t(44328),z=t(77231),V=t(86932),L=t(13724),C=t(43607),F="src\\avpipeline\\AudioRenderPipeline.ts";class H extends f.A{constructor(){super(),(0,e.A)(this,"avPCMBufferPool",void 0),(0,e.A)(this,"avPCMBufferList",void 0),this.avPCMBufferList=(0,d.A)(c.A),this.avPCMBufferPool=new P.A(this.avPCMBufferList)}async createTask(G){const D=new y.Ay(G.leftPort),W=new y.Ay(G.rightPort),X=new y.Ay(G.controlPort),U={...G,leftIPCPort:D,rightIPCPort:W,controlIPCPort:X,resampler:null,stretchpitcher:new(n()),outPCMBuffer:null,waitPCMBuffer:0,waitAVFrame:0,waitPCMBufferPos:0,frameEnded:!1,stretchpitcherEnded:!1,playRate:1,playTempo:1,playPitch:1,useStretchpitcher:!1,lastNotifyPTS:BigInt(0),currentPTS:z.Dh,firstPlayed:!1,seeking:!1,pausing:!1,seekSync:null,receivePCMSync:null,paddingAVFrame:0,fakePlayStartTimestamp:0,fakePlaySamples:BigInt(0),fakePlayTimer:null,fakePlay:!1,lastRenderTimestamp:0,avframePool:new w.A((0,l.A)(G.avframeList,c.A),G.avframeListMutex)};U.startPTS=(0,S.k)(U.startPTS,U.timeBase,z.i0);for(let O=0;O<G.playChannels;O++){const R=new x.A({resource:G.stretchpitcherResource});U.stretchpitcher.set(O,R),await R.open({sampleRate:G.playSampleRate,channels:1}),R.setTempo(U.playTempo),R.setPitch(U.playPitch),R.setRate(U.playRate)}const Q=this;async function N(){let O;if(U.paddingAVFrame?(O=U.paddingAVFrame,U.paddingAVFrame=0):O=await U.leftIPCPort.request("pull"),O===-1048576){for(let R=0;R<U.playChannels;R++)U.stretchpitcher.get(R).flush();return A.pq(`audio render ended, taskId: ${U.taskId}`,F,201),-1048576}if(O<0)return A.z3(`pull audio frame failed, taskId: ${U.taskId}`,F,205),O;{if(U.playRate!==1||U.playTempo!==1||U.playPitch!==1||U.enableJitterBuffer?U.useStretchpitcher=!0:U.useStretchpitcher=!1,!U.firstPlayed){const j=(0,S.k)(h.f[17](O+104),U.timeBase,z.i0);U.firstPlayed=!0,A.Yz(`got first audio frame, pts: ${h.f[17](O+104)}(${j}ms), taskId: ${U.taskId}`,F,227)}U.currentPTS=(0,S.k)(h.f[17](O+104),U.timeBase,z.i0),o.M[17](U.stats+72,h.f[17](U.stats+72)+BigInt(1)),U.lastRenderTimestamp&&o.M[15](U.stats+236,Math.max((0,V.A)()-U.lastRenderTimestamp,h.f[15](U.stats+236))),U.lastRenderTimestamp=(0,V.A)();let R=!0;if(h.f[15](O+152)!==U.playSampleRate||h.f[15](O+80)!==U.playFormat){if(U.resampler){const Y=U.resampler.getInputPCMParameters();Y.format===h.f[15](O+80)&&Y.sampleRate===h.f[15](O+152)||(U.resampler.close(),U.resampler=null)}U.resampler||(U.resampler=new k.A({resource:U.resamplerResource}),await U.resampler.open({sampleRate:h.f[15](O+152),format:h.f[15](O+80),channels:h.f[15](O+292)},{sampleRate:U.playSampleRate,format:U.playFormat,channels:h.f[15](O+292)}));let j=Q.avPCMBufferPool.alloc(),B=U.resampler.resample(h.f[20](O+64),j,h.f[15](O+76));if(B<0)return A.z3(`resample error, ret: ${B}, taskId: ${U.taskId}`,F,274),B;if(U.useStretchpitcher){for(let Y=0;Y<U.playChannels;Y++)U.stretchpitcher.get(Y).sendSamples(h.f[20](h.f[20](j)+4*Y),h.f[15](j+4));Q.avPCMBufferPool.release(j)}else U.waitPCMBuffer=j,U.waitPCMBufferPos=0}else if(U.useStretchpitcher)for(let j=0;j<U.playChannels;j++)U.stretchpitcher.get(j).sendSamples(h.f[20](h.f[20](O+64)+4*j),h.f[15](O+76));else{let j=Q.avPCMBufferPool.alloc();o.M[15](j+4,h.f[15](O+76)),o.M[15](j+8,h.f[15](O+76)),o.M[15](j+16,h.f[15](O+152)),o.M[15](j+12,h.f[15](O+292)),o.M[20](j,h.f[20](O+64)),U.waitAVFrame=O,U.waitPCMBuffer=j,U.waitPCMBufferPos=0,R=!1}o.M[15](U.stats+4,h.f[15](O+152)),o.M[15](U.stats,h.f[15](O+292)),o.M[15](U.stats+8,h.f[15](O+76)),R&&U.avframePool.release(O)}return 0}async function _(O){let R=0;if(U.seeking&&await new(r())(j=>{U.receivePCMSync=j}),U.enableJitterBuffer&&h.f[15](U.stats+32)/h.f[15](U.stats+228)*1e3<=h.f[15](U.jitterBuffer)&&Q.setPlayRate(U.taskId,1),U.frameEnded&&U.useStretchpitcher){let j=0;for(let B=0;B<U.playChannels;B++){const Y=U.stretchpitcher.get(B);h.f[20](h.f[20](O)+4*B)&&(j=Y.receiveSamples(h.f[20](h.f[20](O)+4*B)+4*R,h.f[15](O+8)-R))}if(R+j<h.f[15](O+8)){U.stretchpitcherEnded=!0;for(let B=0;B<U.playChannels;B++)(0,I.sO)(h.f[20](h.f[20](O)+4*B)+R,0,4*(h.f[15](O+8)-R))}return o.M[15](O+4,R),0}for(;R<h.f[15](O+8);){let j=0;if(U.useStretchpitcher)for(let B=0;B<U.playChannels;B++){const Y=U.stretchpitcher.get(B);h.f[20](h.f[20](O)+4*B)&&(j=Y.receiveSamples(h.f[20](h.f[20](O)+4*B)+4*R,h.f[15](O+8)-R))}else if(U.waitPCMBuffer){if(j=Math.min(h.f[15](U.waitPCMBuffer+4)-U.waitPCMBufferPos,h.f[15](O+8)-R),j){for(let B=0;B<U.playChannels;B++)(0,I.Mr)(h.f[20](h.f[20](O)+4*B)+4*R,h.f[20](h.f[20](U.waitPCMBuffer)+4*B)+4*U.waitPCMBufferPos,4*j);U.waitPCMBufferPos+=j}h.f[15](U.waitPCMBuffer+4)===U.waitPCMBufferPos&&(U.waitAVFrame&&(o.M[20](U.waitPCMBuffer,0),o.M[15](U.waitPCMBuffer+8,0),U.avframePool.release(U.waitAVFrame),U.waitAVFrame=0),Q.avPCMBufferPool.release(U.waitPCMBuffer),U.waitPCMBuffer=0)}if(R+=j,R<h.f[15](O+8)){let B=await N();if(B===-1048576){if(U.frameEnded=!0,U.useStretchpitcher){for(let Y=0;Y<U.playChannels;Y++){const Z=U.stretchpitcher.get(Y);h.f[20](h.f[20](O)+4*Y)&&(Z.flush(),B=Z.receiveSamples(h.f[20](h.f[20](O)+4*Y)+4*R,h.f[15](O+8)-R))}if(R+B<h.f[15](O+8)){U.stretchpitcherEnded=!0;for(let Y=0;Y<U.playChannels;Y++)(0,I.sO)(h.f[20](h.f[20](O)+4*Y)+R,0,4*(h.f[15](O+8)-R))}R+=B}break}if(B<0)return B}}if(o.M[15](O+4,R),U.currentPTS-U.lastNotifyPTS>=BigInt(1e3)){U.lastNotifyPTS=U.currentPTS;const j=((U.useStretchpitcher?U.stretchpitcher.get(0).getLatency():0)+(3*h.f[15](O+8)>>>1))/U.playSampleRate*1e3>>>0;U.controlIPCPort.notify("syncPts",{pts:C.T9(U.currentPTS-BigInt(Math.floor(j)),BigInt(0))})}return U.seekSync&&(U.seekSync(),U.seekSync=null),0}return W.on(y.S3,async O=>{switch(O.method){case"pull":{if(U.fakePlay&&(U.fakePlay=!1,U.fakePlayTimer&&(clearTimeout(U.fakePlayTimer),U.fakePlayTimer=null),U.fakePlaySamples=BigInt(0),U.fakePlayStartTimestamp=0),U.frameEnded&&(U.stretchpitcherEnded||!U.useStretchpitcher))return void W.reply(O,-1048576);const R=O.params.buffer,j=await _(R);W.reply(O,j);break}case"pullBuffer":{if(U.fakePlay&&(U.fakePlay=!1,U.fakePlayTimer&&(clearTimeout(U.fakePlayTimer),U.fakePlayTimer=null),U.fakePlaySamples=BigInt(0),U.fakePlayStartTimestamp=0),U.frameEnded&&(U.stretchpitcherEnded||!U.useStretchpitcher))return void W.reply(O,-1048576);const R=O.params.nbSamples;if(!U.outPCMBuffer||U.outPCMBuffer.maxnbSamples!==R){U.outPCMBuffer&&((0,b.aI)(U.outPCMBuffer.data),(0,b.aI)(U.outPCMBuffer[a.o9]),(0,u.A)(U.outPCMBuffer)),U.outPCMBuffer=(0,d.A)(T.A),U.outPCMBuffer.data=(0,b.sY)(4*U.playChannels);const Y=(0,b.Gy)(4*R*U.playChannels);for(let Z=0;Z<U.playChannels;Z++)o.M[20](U.outPCMBuffer.data+4*Z,Y+4*R*Z);U.outPCMBuffer.maxnbSamples=R}const j=await _(U.outPCMBuffer[a.o9]);if(j<0)return void W.reply(O,j);const B=(0,I.s3)(h.f[20](U.outPCMBuffer.data),4*U.outPCMBuffer.nbSamples*U.playChannels).slice();W.reply(O,B.buffer,null,[B.buffer]);break}}}),this.tasks.set(G.taskId,U),0}checkUseStretchpitcher(G){const D=G.playRate!==1||G.playTempo!==1||G.playPitch!==1||G.enableJitterBuffer;if(G.useStretchpitcher&&!D)for(let W=0;W<G.playChannels;W++)G.stretchpitcher.get(W).flush()}setPlayRate(G,D){const W=this.tasks.get(G);if(W){W.enableJitterBuffer&&h.f[15](W.stats+32)/h.f[15](W.stats+228)*1e3<=h.f[15](W.jitterBuffer)&&(D=1),W.playRate=D;for(let X=0;X<W.playChannels;X++)W.stretchpitcher.get(X).setRate(D);this.checkUseStretchpitcher(W)}}async setPlayTempo(G,D){const W=this.tasks.get(G);if(W){W.playTempo=D;for(let X=0;X<W.playChannels;X++)W.stretchpitcher.get(X).setTempo(D);this.checkUseStretchpitcher(W)}}setPlayPitch(G,D){const W=this.tasks.get(G);if(W){W.playPitch=D;for(let X=0;X<W.playChannels;X++)W.stretchpitcher.get(X).setPitch(D);this.checkUseStretchpitcher(W)}}async beforeSeek(G){const D=this.tasks.get(G);if(D){if(D.fakePlay?D.fakePlayTimer&&(clearTimeout(D.fakePlayTimer),D.fakePlayTimer=null):(A.Yz(`wait current pull front frame before seek, taskId: ${D.taskId}`,F,608),await new(r())(W=>{D.seekSync=W})),D.seeking=!0,D.stretchpitcher.size)for(const W of D.stretchpitcher.keys())D.stretchpitcher.get(W).clear();D.waitPCMBuffer&&(D.waitAVFrame&&(o.M[20](D.waitPCMBuffer,0),o.M[15](D.waitPCMBuffer+8,0),D.avframePool.release(D.waitAVFrame),D.waitAVFrame=0),this.avPCMBufferPool.release(D.waitPCMBuffer),D.waitPCMBuffer=0),A.Yz(`before seek end, taskId: ${D.taskId}`,F,639)}}async syncSeekTime(G,D,W){const X=this.tasks.get(G);if(X){let U=!1;for(;;){let Q=(0,V.A)(),N=h.f[15](X.stats+120);for(;!U&&W&&h.f[15](X.stats+120)>W;)await new L.A(0),(0,V.A)()-Q>200&&N===h.f[15](X.stats+120)&&(U=!0),N!==h.f[15](X.stats+120)&&(N=h.f[15](X.stats+120),Q=(0,V.A)());let _=await X.leftIPCPort.request("pull");if(_<0){A.R8(`pull audio frame end after seek, taskId: ${G}`,F,671),X.frameEnded=!0;break}if(D<BigInt(0)){A.pq(`use the first audio frame because of the seek time${D} < 0`,F,677);break}const O=(0,S.k)(h.f[17](_+104),X.timeBase,z.i0);if(O-X.startPTS>=D){X.paddingAVFrame=_,X.frameEnded=!1,X.lastNotifyPTS=O;break}X.avframePool.release(_)}A.Yz(`sync seek time end, taskId: ${X.taskId}`,F,701)}}async afterSeek(G,D){const W=this.tasks.get(G);W&&(W.seeking=!1,W.receivePCMSync&&(W.receivePCMSync(),W.receivePCMSync=null),W.pausing||(W.fakePlay&&(W.fakePlayStartTimestamp=(0,V.A)(),W.fakePlaySamples=BigInt(0),this.fakePlayNext(W)),W.lastRenderTimestamp=(0,V.A)()),A.Yz(`after seek end, taskId: ${W.taskId}`,F,723))}async restart(G){const D=this.tasks.get(G);if(D){var W;if(D.lastNotifyPTS=BigInt(0),D.frameEnded=!1,D.firstPlayed=!1,D.stretchpitcherEnded=!1,(W=D.stretchpitcher)!==null&&W!==void 0&&W.size)for(let U=0;U<D.playChannels;U++){var X;(X=D.stretchpitcher.get(U))===null||X===void 0||X.clear()}D.fakePlayTimer&&clearTimeout(D.fakePlayTimer),D.fakePlaySamples=BigInt(0),D.fakePlayStartTimestamp=0,D.lastRenderTimestamp=(0,V.A)(),A.Yz(`restart task, taskId: ${D.taskId}`,F,746)}}async fakePlayNext(G){const D=await G.leftIPCPort.request("pull");if(D<0)return G.frameEnded=!0,A.pq(`audio fake render ended, taskId: ${G.taskId}`,F,757),void G.controlIPCPort.notify("ended");if(!G.fakePlay||G.pausing)return void G.avframePool.release(D);let W=h.f[15](D+76)/h.f[15](D+152)*1e3>>>0;W/=G.playRate*G.playTempo;const X=BigInt(Math.floor((0,V.A)()-G.fakePlayStartTimestamp))*BigInt(h.f[15](D+152)>>>0)/BigInt(1e3);W-=Number(X-G.fakePlaySamples)/h.f[15](D+152)*1e3>>>0,G.fakePlaySamples+=BigInt(h.f[15](D+76)>>>0),G.avframePool.release(D),G.fakePlayTimer=setTimeout(()=>{G.fakePlayTimer=null,this.fakePlayNext(G)},W)}async fakePlay(G){const D=this.tasks.get(G);D&&(D.fakePlayStartTimestamp=(0,V.A)(),D.fakePlay=!0,D.fakePlaySamples=BigInt(0),this.fakePlayNext(D),A.pq(`start fake play, taskId: ${D.taskId}`,F,795))}async pause(G){const D=this.tasks.get(G);D&&(D.pausing=!0,D.fakePlay&&D.fakePlayTimer&&(clearTimeout(D.fakePlayTimer),D.fakePlayTimer=null),A.pq(`task paused, taskId: ${D.taskId}`,F,810))}async unpause(G){const D=this.tasks.get(G);D&&(D.pausing=!1,D.fakePlay&&(D.fakePlayStartTimestamp=(0,V.A)(),D.fakePlaySamples=BigInt(0),D.lastRenderTimestamp=(0,V.A)(),this.fakePlayNext(D)),A.pq(`task unpaused, taskId: ${D.taskId}`,F,825))}async registerTask(G){return this.tasks.has(G.taskId)?v.lh:await this.createTask(G)}async unregisterTask(G){const D=this.tasks.get(G);if(D){if(D.resampler&&D.resampler.close(),D.stretchpitcher.size){for(const W of D.stretchpitcher.keys())D.stretchpitcher.get(W).close();D.stretchpitcher.clear()}D.outPCMBuffer&&((0,b.aI)(D.outPCMBuffer.data),(0,b.aI)(D.outPCMBuffer[a.o9]),(0,u.A)(D.outPCMBuffer)),D.waitPCMBuffer&&(D.waitAVFrame&&(o.M[20](D.waitPCMBuffer,0),o.M[15](D.waitPCMBuffer+8,0),D.avframePool.release(D.waitAVFrame)),this.avPCMBufferPool.release(D.waitPCMBuffer),D.waitPCMBuffer=0),D.paddingAVFrame&&D.avframePool.release(D.paddingAVFrame),D.leftIPCPort.destroy(),D.rightIPCPort.destroy(),this.tasks.delete(G)}}async clear(){await super.clear(),this.avPCMBufferList.clear(G=>{h.f[20](G)&&((0,b.aI)(h.f[20](G)),(0,b.aI)(G))},20),(0,u.A)(this.avPCMBufferList)}}},72480:(g,p,t)=>{t.d(p,{A:()=>U});var e=t(80662),i=t.n(e),n=t(61499),s=t(12264),r=t(29170),a=t(63939),d=t(50932),c=t(9599),l=t(44527),h=t(9705),o=t(84149),u=t(44315),f=t(24175),v=t(75),y=t(37837),A=t(79630),w=t(4624),k=t(84290),T=t(39148),P=t(72739),b=t(44328),x=t(77231),I=t(43607),S=t(28773),z=t(92047),V=t(59331),L=t(16634),C=t(69979),F=t(6839),H=t(34577),M=t(47094),G=t(18453),D=t(3791),W="src\\avpipeline\\DemuxPipeline.ts";const X=-1;class U extends l.A{constructor(){super()}async judgeFormat(N,_=-1){let O=await N.peekString(8);if(/^FLV/.test(O))return 0;if(/^DKIF/.test(O))return 4;if(/^ftyp/.test(O.slice(4,8)))return 1;if(/^OggS/.test(O))return 3;if(/^ID3/.test(O))return 7;if(/^fLaC/.test(O))return 10;if(/^RIFF/.test(O)){const R=(await N.peekString(12)).slice(8);if(/^WAVE/.test(R))return 9}else if(await N.peekUint32()===440786851)return 5;return _}createTask(N){let _;N.mainTaskId?_=this.tasks.get(N.mainTaskId).leftIPCPort:_=new o.Ay(N.leftPort);const O=N.bufferLength||1048576,R=(0,y.sY)(O);if(!R)return h.gR;const j=new A.A(R,O),B=new f.A(O,!0,j);N.isLive||(B.flags|=1),N.flags&&(B.flags|=N.flags),B.onFlush=async Z=>{const rt={pointer:Z.byteOffset,length:Z.length};N.ioloaderOptions&&(rt.ioloaderOptions=N.ioloaderOptions);try{return await _.request("read",rt)}catch{return-1048574}},B.onSeek=async Z=>{try{const rt={pos:Z};return N.ioloaderOptions&&(rt.ioloaderOptions=N.ioloaderOptions),await _.request("seek",rt),0}catch{return-1048574}},B.onSize=async()=>{try{return await _.request("size")}catch{return BigInt(-1048574)}};const Y=(0,u.X)();return Y.ioReader=B,this.tasks.set(N.taskId,{...N,leftIPCPort:_,rightIPCPorts:new(i()),formatContext:Y,ioReader:B,buffer:R,cacheAVPackets:new(i()),cacheRequests:new(i()),realFormat:-1,demuxEnded:!1,loop:null,gopCounter:0,lastKeyFramePts:BigInt(0),lastAudioDts:BigInt(0),lastVideoDts:BigInt(0),avpacketPool:new k.A((0,r.A)(N.avpacketList,s.A),N.avpacketListMutex)}),0}async openStream(N){const _=this.tasks.get(N);if(_){let O,R;await _.leftIPCPort.request("open");try{O=await this.judgeFormat(_.ioReader,_.format),_.format=O}catch{return h.LR}switch(O){case 0:R=new S.A;break;case 1:R=new z.A;break;case 2:R=new V.A;break;case 4:R=new L.A;break;case 3:R=new C.A;break;case 7:R=new F.A;break;case 5:R=new H.A;break;case 8:R=new M.A;break;case 10:R=new G.A;break;case 9:R=new D.A;break;default:return w.z3("format not support",W,366),h.E$}return _.realFormat=O,_.formatContext.iformat=R,await v.ho(_.formatContext,{maxAnalyzeDuration:2,fastOpen:_.isLive})}w.h2("task not found",W,381)}async getFormat(N){const _=this.tasks.get(N);if(_)return _.realFormat;w.h2("task not found",W,391)}async analyzeStreams(N){const _=this.tasks.get(N);if(_){await v.Ib(_.formatContext);const O=[];for(let R=0;R<_.formatContext.streams.length;R++){const j=_.formatContext.streams[R];O.push({index:j.index,id:j.id,codecpar:j.codecpar[n.o9],nbFrames:j.nbFrames,metadata:j.metadata,duration:j.duration,startTime:j.startTime,disposition:j.disposition,timeBase:j.timeBase[n.o9]})}return O}w.h2("task not found",W,419)}async connectStreamTask(N,_,O){const R=this.tasks.get(N);if(R){const j=new o.Ay(O);R.cacheAVPackets.set(_,[]),j.on(o.S3,async B=>{switch(B.method){case"pull":{const Y=R.cacheAVPackets.get(_);if(Y.length){const Z=Y.shift();R.formatContext.streams[a.f[15](Z+32)].codecpar.codecType===1?d.M[15](R.stats+32,a.f[15](R.stats+32)-1):R.formatContext.streams[a.f[15](Z+32)].codecpar.codecType===0&&d.M[15](R.stats+120,a.f[15](R.stats+120)-1),j.reply(B,Z)}else R.demuxEnded?j.reply(B,-1048576):(R.cacheRequests.set(_,B),R.loop&&R.loop.isStarted()&&R.loop.resetInterval());break}}}),R.rightIPCPorts.set(_,j),w.Yz(`connect stream ${_}, taskId: ${R.taskId}`,W,461)}else w.h2("task not found",W,464)}async startDemux(N,_,O){const R=this.tasks.get(N);R?(O=Math.max(O,R.format===2?20:10),R.loop&&R.loop.destroy(),R.loop=new T.A(async()=>{if(!_){let Y=!1;if(R.cacheAVPackets.forEach(Z=>{Z.length<O&&(Y=!0)}),!Y)return void R.loop.emptyTask()}const j=R.avpacketPool.alloc();let B=await v.Cj(R.formatContext,j);if(B){R.avpacketPool.release(j),B!==-1048576&&w.z3(`demux error, ret: ${B}, taskId: ${N}`,W,595),R.demuxEnded=!0,w.pq(`demuxer ended, taskId: ${R.taskId}`,W,600);for(let Y of R.cacheRequests.keys())R.cacheAVPackets.get(Y).length||(R.rightIPCPorts.get(Y).reply(R.cacheRequests.get(Y),-1048576),R.cacheRequests.delete(Y));R.loop.stop()}else{const Y=a.f[15](j+32);if(R.formatContext.streams[Y].codecpar.codecType===1&&R.cacheAVPackets.has(Y)){if(d.M[17](R.stats+24,a.f[17](R.stats+24)+BigInt(1)),d.M[17](R.stats+16,a.f[17](R.stats+16)+BigInt(a.f[15](j+28)>>>0)),a.f[17](R.stats+24)>1&&a.f[17](j+16)>R.lastAudioDts){const Z=R.cacheAVPackets.get(Y);Z&&Z.length?d.M[15](R.stats+228,Math.round(a.f[15](j+76)/a.f[15](j+72)/((0|Number(a.f[17](j+16)-a.f[17](Z[0]+16)&0xffffffffn))/Z.length))):d.M[15](R.stats+228,Math.round(a.f[15](j+76)/a.f[15](j+72)/(0|Number(a.f[17](j+16)-R.lastAudioDts&0xffffffffn))))}R.lastAudioDts=a.f[17](j+16)}else if(R.formatContext.streams[Y].codecpar.codecType===0&&R.cacheAVPackets.has(Y)){if(d.M[17](R.stats+112,a.f[17](R.stats+112)+BigInt(1)),d.M[17](R.stats+104,a.f[17](R.stats+104)+BigInt(a.f[15](j+28)>>>0)),1&a.f[15](j+36)?(d.M[17](R.stats+176,a.f[17](R.stats+176)+BigInt(1)),a.f[17](R.stats+176)>1&&a.f[17](j+8)>R.lastKeyFramePts&&(d.M[15](R.stats+96,R.gopCounter),R.gopCounter=1,d.M[15](R.stats+92,0|Number(0xffffffffn&(0,b.k)(a.f[17](j+8)-R.lastKeyFramePts,(0,r.A)(j+72,c.P),x.i0)))),R.lastKeyFramePts=a.f[17](j+8)):R.gopCounter++,a.f[17](R.stats+112)>1&&a.f[17](j+16)>R.lastVideoDts){const Z=R.cacheAVPackets.get(Y);Z&&Z.length?d.M[15](R.stats+216,Math.round(a.f[15](j+76)/a.f[15](j+72)/((0|Number(a.f[17](j+16)-a.f[17](Z[0]+16)&0xffffffffn))/Z.length))):d.M[15](R.stats+216,Math.round(a.f[15](j+76)/a.f[15](j+72)/(0|Number(a.f[17](j+16)-R.lastVideoDts&0xffffffffn))))}R.lastVideoDts=a.f[17](j+16)}R.cacheRequests.has(Y)?(R.rightIPCPorts.get(Y).reply(R.cacheRequests.get(Y),j),R.cacheRequests.delete(Y)):R.cacheAVPackets.has(Y)?(R.cacheAVPackets.get(Y).push(j),R.formatContext.streams[Y].codecpar.codecType===1?d.M[15](R.stats+32,a.f[15](R.stats+32)+1):R.formatContext.streams[Y].codecpar.codecType===0&&d.M[15](R.stats+120,a.f[15](R.stats+120)+1)):R.rightIPCPorts.has(X)?R.cacheRequests.has(X)?(R.rightIPCPorts.get(X).reply(R.cacheRequests.get(X),j),R.cacheRequests.delete(X)):R.cacheAVPackets.get(X).push(j):R.avpacketPool.release(j)}},0,0,!0,!1),R.loop.start(),w.Yz(`start demux loop, taskId: ${R.taskId}`,W,615)):w.h2("task not found",W,618)}async seek(N,_,O){const R=this.tasks.get(N);if(R){if(R.loop){await R.loop.stopBeforeNextTick();let j=await v.jF(R.formatContext,-1,_,O);if(j>=BigInt(0)){R.cacheAVPackets.forEach(Y=>{P.__(Y,Z=>{R.avpacketPool.release(Z)}),Y.length=0}),d.M[15](R.stats+32,0),d.M[15](R.stats+120,0);const B=R.avpacketPool.alloc();for(;j=await v.Cj(R.formatContext,B),!(j<0||R.cacheAVPackets.has(a.f[15](B+32))););if(j>=0){R.demuxEnded=!1;const Y=a.f[15](B+32);R.cacheAVPackets.get(Y).push(B),R.formatContext.streams[a.f[15](B+32)].codecpar.codecType===1?d.M[15](R.stats+32,a.f[15](R.stats+32)+1):R.formatContext.streams[a.f[15](B+32)].codecpar.codecType===0&&d.M[15](R.stats+120,a.f[15](R.stats+120)+1),R.loop.start();let Z=a.f[17](B+8);return R.formatContext.streams[Y].startTime!==x.Dh?Z-=R.formatContext.streams[Y].startTime:Z-=R.formatContext.streams[Y].firstDTS,(0,b.k)(I.T9(Z,BigInt(0)),(0,r.A)(B+72,c.P),x.i0)}return w.R8(`got first packet failed after seek, taskId: ${R.taskId}`,W,671),R.avpacketPool.release(B),R.demuxEnded=!0,_}return j}{w.pq("seek before demux loop start",W,682);let j=await v.jF(R.formatContext,-1,_,O);return j<0?j:_}}}async croppingAVPacketQueue(N,_){const O=this.tasks.get(N);O&&O.cacheAVPackets.forEach((R,j)=>{const B=a.f[17](R[R.length-1]+16);let Y=R.length-2;for(Y=R.length-2;Y>=0&&!(1&a.f[15](R[Y]+36)&&(0,b.k)(B-a.f[17](R[Y]+16),(0,r.A)(R[Y]+72,c.P),x.i0)>=_);Y--);Y>0&&(R.splice(0,Y).forEach(Z=>{O.avpacketPool.release(Z)}),O.formatContext.streams[j].codecpar.codecType===1?d.M[15](O.stats+32,R.length):O.formatContext.streams[j].codecpar.codecType===0&&d.M[15](O.stats+120,R.length))})}async registerTask(N){return this.tasks.has(N.taskId)?h.lh:this.createTask(N)}async unregisterTask(N){const _=this.tasks.get(N);_&&(_.loop&&(await _.loop.stopBeforeNextTick(),_.loop.destroy()),_.leftIPCPort.destroy(),_.rightIPCPorts.forEach(O=>{O.destroy()}),_.rightIPCPorts.clear(),_.formatContext.destroy(),(0,y.Eb)(_.buffer),_.cacheAVPackets.forEach(O=>{O.forEach(R=>{_.avpacketPool.release(R)})}),this.tasks.delete(N))}}},87243:(g,p,t)=>{t.d(p,{A:()=>f});var e=t(63939),i=t(50932),n=t(44527),s=t(77580),r=t(9705),a=t(84149),d=t(14686),c=t(79686),l=t(4624),h=t(41576),o=t(15433),u="src\\avpipeline\\IOPipeline.ts";class f extends n.A{constructor(){super()}async createTask(y){let A;switch(y.type){case 0:A=new s.A(y.options);break;case 1:A=new c.A(y.options);break;case 2:A=new o.A(y.options);break;case 3:A=new h.A(y.options)}if(!A)return r.UY;const w=new a.Ay(y.rightPort),k={...y,ioLoader:A,ipcPort:w};return w.on(a.S3,async T=>{switch(T.method){case"open":try{await A.open(y.info,y.range),w.reply(T,{})}catch(P){l.z3(`loader open error, ${P}, taskId: ${y.taskId}`,u,118),w.reply(T,null,P)}break;case"read":{const P=T.params.pointer,b=T.params.length,x=T.params.ioloaderOptions,I=(0,d.JW)(P,b);try{const S=await A.read(I,x);i.M[17](k.stats+192,e.f[17](k.stats+192)+BigInt(S>>>0)),w.reply(T,S)}catch(S){l.z3(`loader read error, ${S}, taskId: ${y.taskId}`,u,139),w.reply(T,r.LR)}break}case"seek":{const P=T.params.pos,b=T.params.ioloaderOptions;try{await A.seek(P,b),w.reply(T)}catch(x){l.z3(`loader seek error, ${x}, taskId: ${y.taskId}`,u,157),w.reply(T,null,x)}break}case"size":w.reply(T,await A.size())}}),this.tasks.set(y.taskId,k),0}async open(y){const A=this.tasks.get(y);if(A)return await A.ioLoader.open(A.info,A.range),0}async getDuration(y){const A=this.tasks.get(y);if(A)return A.type===2||A.type===3?A.ioLoader.getDuration():0}async hasAudio(y){const A=this.tasks.get(y);if(A)return A.type===3&&A.ioLoader.hasAudio()}async hasVideo(y){const A=this.tasks.get(y);if(A)return A.type===3&&A.ioLoader.hasVideo()}async hasSubtitle(y){const A=this.tasks.get(y);if(A)return A.type===3&&A.ioLoader.hasSubtitle()}async getVideoList(y){const A=this.tasks.get(y);if(A)return A.type===3||A.type===2?A.ioLoader.getVideoList():{list:[],selectedIndex:0}}async getAudioList(y){const A=this.tasks.get(y);if(A)return A.type===3?A.ioLoader.getAudioList():{list:[],selectedIndex:0}}async getSubtitleList(y){const A=this.tasks.get(y);if(A)return A.type===3?A.ioLoader.getSubtitleList():{list:[],selectedIndex:0}}async selectVideo(y,A){const w=this.tasks.get(y);if(w){if(w.type===3)w.ioLoader.selectVideo(A);else if(w.type===2)return w.ioLoader.selectVideo(A)}}async selectAudio(y,A){const w=this.tasks.get(y);w&&w.type===3&&w.ioLoader.selectAudio(A)}async selectSubtitle(y,A){const w=this.tasks.get(y);w&&w.type===3&&w.ioLoader.selectSubtitle(A)}async getMinBuffer(y){const A=this.tasks.get(y);if(A)return A.type===3||A.type===2?A.ioLoader.getMinBuffer():0}async registerTask(y){return this.tasks.has(y.taskId)?r.lh:this.createTask(y)}async unregisterTask(y){const A=this.tasks.get(y);A&&(await A.ioLoader.stop(),A.ipcPort.destroy(),this.tasks.delete(y))}}},44527:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(134),i=t(80662),n=t.n(i),s=t(4624);class r{constructor(){(0,e.A)(this,"tasks",void 0),this.tasks=new(n())}async clear(){if(this.tasks.size)for(const d of this.tasks.keys())await this.unregisterTask(d)}async setLogLevel(d){s.V$(d)}async getTaskCount(){return this.tasks.size}}},31138:(g,p,t)=>{t.d(p,{A:()=>S});var e=t(54001),i=t.n(e),n=t(63939),s=t(50932),r=t(12264),a=t(29170),d=t(9599),c=t(44527),l=t(9705),h=t(84149),o=t(40417),u=t(71039),f=t(4624),v=t(16041),y=t(67672),A=t(72739),w=t(13724),k=t(84290),T=t(39638),P=t(44328),b=t(86932),x=t(95797),I="src\\avpipeline\\VideoDecodePipeline.ts";class S extends c.A{constructor(){super()}createWebcodecDecoder(V,L=!0){return new u.A({onError:C=>{if(V.hardwareRetryCount>3||!V.firstDecoded)V.targetDecoder=V.softwareDecoder,V.hardwareDecoder.close(),V.hardwareDecoder=null,V.decoderReady=this.openSoftwareDecoder(V),f.R8(`video decode error width hardware(${V.hardwareRetryCount}), taskId: ${V.taskId}, error: ${C}, try to fallback to software decoder`,I,115);else{V.hardwareRetryCount++;try{f.pq(`retry open hardware decoder(${V.hardwareRetryCount}), taskId: ${V.taskId}`,I,120),V.decoderReady=V.hardwareDecoder.open(V.parameters)}catch{f.R8(`retry open hardware decoder failed, fallback to software decoder, taskId: ${V.taskId}`,I,124)}}V.needKeyFrame=!0,V.leftIPCPort.request("requestKeyframe")},onReceiveFrame(C){V.firstDecoded=!0,V.frameCaches.push(C),s.M[17](V.stats+144,n.f[17](V.stats+144)+BigInt(1)),V.lastDecodeTimestamp&&s.M[15](V.stats+240,Math.max((0,b.A)()-V.lastDecodeTimestamp,n.f[15](V.stats+240))),V.lastDecodeTimestamp=(0,b.A)()},enableHardwareAcceleration:L})}createTask(V){const L=new h.Ay(V.leftPort),C=new h.Ay(V.rightPort),F=[],H=new v.A((0,a.A)(V.avframeList,r.A),V.avframeListMutex),M={...V,leftIPCPort:L,rightIPCPort:C,softwareDecoder:null,hardwareDecoder:null,frameCaches:F,inputEnd:!1,targetDecoder:null,needKeyFrame:!0,parameters:0,hardwareRetryCount:0,lastDecodeTimestamp:0,firstDecoded:!1,decoderReady:null,softwareDecoderOpened:!1,avframePool:H,avpacketPool:new k.A((0,a.A)(V.avpacketList,r.A),V.avpacketListMutex)};return M.softwareDecoder=V.resource?new o.A({resource:V.resource,onError:G=>{f.z3(`video decode error, taskId: ${V.taskId}, error: ${G}`,I,182);const D=this.tasks.get(V.taskId);D.openReject&&(D.openReject(G),D.openReject=null)},onReceiveFrame(G){M.firstDecoded=!0,F.push(G),s.M[17](M.stats+144,n.f[17](M.stats+144)+BigInt(1)),M.lastDecodeTimestamp&&s.M[15](M.stats+240,Math.max((0,b.A)()-M.lastDecodeTimestamp,n.f[15](M.stats+240))),M.lastDecodeTimestamp=(0,b.A)()},avframePool:H}):x.A.videoDecoder?this.createWebcodecDecoder(M,!1):null,M.softwareDecoder?(x.A.videoDecoder&&V.enableHardware&&(M.hardwareDecoder=this.createWebcodecDecoder(M)),M.targetDecoder=M.hardwareDecoder||M.softwareDecoder,this.tasks.set(V.taskId,M),C.on(h.S3,async G=>{switch(G.method){case"pull":if(F.length){const D=F.shift();C.reply(G,D,null,y.ai(D)?null:[D]);break}if(!M.inputEnd){for(;;){if(F.length){const W=F.shift();C.reply(G,W,null,y.ai(W)?null:[W]);break}M.decoderReady&&(await M.decoderReady,M.decoderReady=null);const D=await L.request("pull");if(D===-1048576){if(M.targetDecoder===M.hardwareDecoder){let W=await i().race([new w.A(2),M.targetDecoder.flush()]);y.ai(W)&&f.R8(`video hardware decoder flush failed, ignore it, taskId: ${M.taskId}`,I,249)}else await M.targetDecoder.flush();if(M.inputEnd=!0,M.targetDecoder===M.hardwareDecoder&&await new w.A(0),F.length){const W=F.shift();C.reply(G,W,null,M.targetDecoder===M.hardwareDecoder?[W]:null);break}f.pq(`video decoder ended, taskId: ${M.taskId}`,I,266),C.reply(G,-1048576);break}if(!(D>0)){f.z3(`video decode pull avpacket error, taskId: ${V.taskId}, ret: ${D}`,I,325),C.reply(G,D);break}{if(M.needKeyFrame){if(!(1&n.f[15](D+36))){M.avpacketPool.release(D);continue}M.needKeyFrame=!1}let W=M.targetDecoder.decode(D);if(W<0){if(s.M[15](M.stats+136,n.f[15](M.stats+136)+1),M.targetDecoder===M.hardwareDecoder&&M.softwareDecoder){if(M.targetDecoder=M.softwareDecoder,M.hardwareDecoder.close(),M.hardwareDecoder=null,await this.openSoftwareDecoder(M),f.R8(`video decode error width hardware, taskId: ${M.taskId}, error: ${W}, try to fallback to software decoder`,I,295),!(1&n.f[15](D+36))){M.avpacketPool.release(D),M.needKeyFrame=!0,M.leftIPCPort.request("requestKeyframe");continue}if(W=M.targetDecoder.decode(D),W>=0){M.avpacketPool.release(D);continue}}M.avpacketPool.release(D),f.z3(`video decode error, taskId: ${V.taskId}, ret: ${W}`,I,311),C.reply(G,W);break}for(M.avpacketPool.release(D);M.targetDecoder===M.hardwareDecoder&&M.hardwareDecoder.getQueueLength()>20;)await new w.A(0)}}break}f.pq(`video decoder ended, taskId: ${M.taskId}`,I,332),C.reply(G,-1048576)}}),0):(f.z3("software decoder not support",I,206),l.lh)}async openSoftwareDecoder(V){if(V.softwareDecoder&&!V.softwareDecoderOpened){const L=V.parameters;let C=1;if((0,T.A)()){let F=n.f[15](L+56)*n.f[15](L+60),H=(0,P.lb)((0,a.A)(L+72,d.P));F>=2073600&&F<=2211840?(n.f[15](L+4)!==173&&n.f[15](L+4)!==196&&n.f[15](L+4)!==225||(C=2),H>30?(C=2,n.f[15](L+4)!==173&&n.f[15](L+4)!==196&&n.f[15](L+4)!==225||(C=4)):H>60&&(C=4,n.f[15](L+4)!==173&&n.f[15](L+4)!==196&&n.f[15](L+4)!==225||(C=6))):F>2211840&&F<=8294400?(C=4,n.f[15](L+4)!==173&&n.f[15](L+4)!==196&&n.f[15](L+4)!==225||(C=6)):F>8294400&&(C=6,n.f[15](L+4)!==173&&n.f[15](L+4)!==196&&n.f[15](L+4)!==225||(C=8)),C=Math.min(C,navigator.hardwareConcurrency)}await V.softwareDecoder.open(L,C),V.softwareDecoderOpened=!0}}async open(V,L){const C=this.tasks.get(V);if(C)return new(i())(async(F,H)=>{if(C.openReject=H,C.hardwareDecoder)try{await C.hardwareDecoder.open(L)}catch(M){f.z3(`cannot open hardware decoder, ${M}`,I,411),C.hardwareDecoder.close(),C.hardwareDecoder=null,C.targetDecoder=C.softwareDecoder}C.parameters=L,C.targetDecoder===C.softwareDecoder&&await this.openSoftwareDecoder(C),F()});f.h2("task not found",I,427)}async setPlayRate(V,L){const C=this.tasks.get(V);if(C&&C.softwareDecoder){let F=-16,H=(0,P.lb)((0,a.A)(C.parameters+72,d.P));F=H>=120?L<=1?-16:L<1.5||L<3?8:32:H>=60?L<1.5?-16:L<3?8:L<8?24:32:-16,C.softwareDecoder.setSkipFrameDiscard(F)}else f.h2("task not found",I,471)}async resetTask(V){const L=this.tasks.get(V);L&&(L.targetDecoder===L.softwareDecoder?await L.targetDecoder.flush():L.targetDecoder===L.hardwareDecoder&&(L.hardwareDecoder.close(),L.hardwareDecoder=this.createWebcodecDecoder(L),await L.hardwareDecoder.open(L.parameters),L.targetDecoder=L.hardwareDecoder),A.__(L.frameCaches,C=>{y.ai(C)?L.avframePool.release(C):C.close()}),L.frameCaches.length=0,L.needKeyFrame=!0,L.inputEnd=!1,L.lastDecodeTimestamp=(0,b.A)(),f.pq(`reset video decoder, taskId: ${L.taskId}`,I,501))}async registerTask(V){return this.tasks.has(V.taskId)?l.lh:this.createTask(V)}async unregisterTask(V){const L=this.tasks.get(V);L&&(L.rightPort.close(),L.leftPort.close(),L.softwareDecoder&&L.softwareDecoder.close(),L.hardwareDecoder&&L.hardwareDecoder.close(),L.frameCaches.forEach(C=>{y.ai(C)?L.avframePool.release(C):C.close()}),this.tasks.delete(V))}async getTasksInfo(){const V=[];return this.tasks.forEach(L=>{V.push({codecId:n.f[15](L.parameters+4),width:n.f[15](L.parameters+56),height:n.f[15](L.parameters+60),framerate:(0,P.lb)((0,a.A)(L.parameters+72,d.P)),hardware:L.targetDecoder===L.hardwareDecoder})}),V}}},33968:(g,p,t)=>{t.d(p,{A:()=>U});var e=t(54001),i=t.n(e),n=t(12264),s=t(29170),r=t(63939),a=t(50932),d=t(44527),c=t(9705),l=t(84149),h=t(67672),o=t(72739),u=t(16041),f=t(95797),v=t(39148),y=t(86932),A=t(44328),w=t(77231),k=t(86834),T=t(4624),P=t(43607),b=t(88103),x=t(54750),I=t(55196),S=t(43813),z=t(99293),V=t(37977),L=t(1052),C=t(90058),F=t(39638),H=t(7972),M="src\\avpipeline\\VideoRenderPipeline.ts";const G=[V.A,L.A];G.push(C.A);const D=[I.A,S.A];var W;D.push(z.A),function(Q){Q[Q.None=0]="None",Q[Q.Accelerate=1]="Accelerate",Q[Q.Decelerate=2]="Decelerate"}(W||(W={}));const X=["bt2020","bt2100","st2048","p3-dcl","hlg"];class U extends d.A{constructor(){super()}async createTask(N){const _=new l.Ay(N.leftPort),O=new l.Ay(N.controlPort),R={...N,leftIPCPort:_,controlIPCPort:O,render:null,currentPTS:w.Dh,firstPTS:BigInt(0),startTimestamp:BigInt(0),playRate:BigInt(100),targetRate:BigInt(100),frontFrame:null,backFrame:null,renderFrame:null,renderFrameCount:BigInt(0),loop:null,renderRedyed:!1,adjust:W.None,adjustDiff:BigInt(0),lastAdjustTimestamp:BigInt(0),firstRendered:!1,canvasUpdated:!1,renderCreating:!1,pauseTimestamp:0,lastNotifyPTS:BigInt(0),skipRender:!1,isSupport:()=>!1,frontBuffered:!1,ended:!1,seeking:!1,seekSync:null,afterPullResolver:null,pausing:!1,lastRenderTimestamp:0,avframePool:new u.A((0,s.A)(N.avframeList,n.A),N.avframeListMutex)};return R.startPTS=(0,A.k)(R.startPTS,R.timeBase,w.i0),O.on(l.Wo,async j=>{switch(j.method){case"syncPts":{const B=j.params.pts,Y=Math.abs(Number(B-R.currentPTS));Y>100&&R.currentPTS>BigInt(0)&&(B>R.currentPTS?(R.adjust=W.Accelerate,T.Yz(`video render sync pts accelerate, targetPTS: ${B}, currentPTS: ${R.currentPTS}, diff: ${Y}, taskId: ${R.taskId}`,M,231)):(R.adjust=W.Decelerate,T.Yz(`video render sync pts decelerate, targetPTS: ${B}, currentPTS: ${R.currentPTS}, diff: ${Y} taskId: ${R.taskId}`,M,235)),R.adjustDiff=BigInt(Math.floor(Y)));break}case"skipRender":R.skipRender=j.params.skipRender}}),this.tasks.set(N.taskId,R),0}async createRender(N,_){var O,R,j,B;N.renderCreating||(N.renderCreating=!0,N.renderRedyed=!1,N.render&&N.render.destroy(),h.ai(_)?N.enableWebGPU&&f.A.webgpu?o.__(G,Y=>{if(Y.isSupport(_))return N.render=new Y(N.canvas,{devicePixelRatio:N.devicePixelRatio,renderMode:N.renderMode,onRenderContextLost:()=>{N.canvasUpdated=!1,N.renderRedyed=!1,T.R8("render context lost",M,308),N.controlIPCPort.notify("updateCanvas")}}),N.isSupport=Y.isSupport,!1}):o.__(D,Y=>{if(Y.isSupport(_))return N.render=new Y(N.canvas,{devicePixelRatio:N.devicePixelRatio,renderMode:N.renderMode,onRenderContextLost:()=>{N.canvasUpdated=!1,N.renderRedyed=!1,T.R8("render context lost",M,326),N.controlIPCPort.notify("updateCanvas")}}),N.isSupport=Y.isSupport,!1}):N.enableWebGPU&&f.A.webgpu&&((k.A.chrome||k.A.newEdge)&&k.A.checkVersion(k.A.majorVersion,"116",!0)||k.A.safari&&k.A.checkVersion(k.A.majorVersion,"17.4",!0)||k.A.firefox&&k.A.checkVersion(k.A.majorVersion,"129",!0))&&(B=_.colorSpace.primaries,!o.zy(X,B))?(N.render=new x.A(N.canvas,{devicePixelRatio:N.devicePixelRatio,renderMode:N.renderMode,onRenderContextLost:()=>{N.canvasUpdated=!1,N.renderRedyed=!1,T.R8("render context lost",M,282),N.controlIPCPort.notify("updateCanvas")}}),N.isSupport=x.A.isSupport):(N.render=new b.A(N.canvas,{devicePixelRatio:N.devicePixelRatio,renderMode:N.renderMode}),N.isSupport=b.A.isSupport),N.render&&(await N.render.init(),N.render.viewport(N.viewportWidth,N.viewportHeight),N.render.clear(),N.render.setRotate((O=N.renderRotate)!==null&&O!==void 0?O:0),N.render.enableHorizontalFlip((R=N.flipHorizontal)!==null&&R!==void 0&&R),N.render.enableVerticalFlip((j=N.flipVertical)!==null&&j!==void 0&&j),N.renderRedyed=!0),N.renderCreating=!1)}async play(N){const _=this.tasks.get(N);if(_){let O=function(){if(_.seeking)return;if(_.backFrame&&(h.ai(_.backFrame)?_.avframePool.release(_.backFrame):_.backFrame.close()),_.backFrame=null,!_.frontBuffered)return!1;if(_.backFrame=_.frontFrame,_.frontFrame=null,_.ended)return;_.frontBuffered=!1;const Y=(0,y.A)();return _.leftIPCPort.request("pull").then(Z=>{if(_.afterPullResolver&&_.afterPullResolver(),h.ai(Z)&&Z<0)return _.ended=!0,void(_.frontFrame=null);const rt=(0,y.A)()-Y;if(rt>1e3&&(_.startTimestamp+=BigInt(Math.floor(rt))),_.frontFrame=Z,_.frontBuffered=!0,_.seekSync)return _.seekSync(),void(_.seekSync=null);_.backFrame||O()}),!0};if(_.loop&&T.h2("task has already call play",M,355),_.backFrame=await _.leftIPCPort.request("pull"),h.ai(_.backFrame)&&_.backFrame<0)return _.backFrame=0,T.pq(`video render ended, taskId: ${_.taskId}`,M,362),void _.controlIPCPort.notify("ended");_.frontFrame=await _.leftIPCPort.request("pull"),_.frontBuffered=!0,_.ended=!1,h.ai(_.frontFrame)&&_.frontFrame<0&&(_.ended=!0,_.frontBuffered=!1,_.frontFrame=0);const R=this;await this.createRender(_,_.backFrame),_.firstPTS=(0,A.k)(h.ai(_.backFrame)?r.f[17](_.backFrame+104):BigInt(Math.floor(_.backFrame.timestamp)),_.timeBase,w.i0),T.Yz(`got first video frame, pts: ${h.ai(_.backFrame)?r.f[17](_.backFrame+104):BigInt(Math.floor(_.backFrame.timestamp))}(${_.firstPTS}ms), taskId: ${_.taskId}`,M,453),_.firstPTS<BigInt(1e3)&&(_.firstPTS=BigInt(0)),_.currentPTS=_.firstPTS,_.startTimestamp=BigInt(Math.floor((0,y.A)()))-_.firstPTS*BigInt(100)/_.playRate;const j=(0,F.A)(),B=j&&f.A.shareArrayBuffer?0:10;_.loop=new v.A(()=>{if(!_.backFrame)return void(_.ended?(_.render&&_.renderRedyed&&_.render.clear(),_.loop.stop(),_.adjust=W.None,T.pq(`video render ended, taskId: ${_.taskId}`,M,481),_.controlIPCPort.notify("ended")):_.loop.emptyTask());if(!_.isSupport(_.backFrame)){if(_.render)return _.renderRedyed=!1,_.renderFrame=_.backFrame,void _.controlIPCPort.notify("updateCanvas");this.createRender(_,_.backFrame)}const Y=(0,A.k)(h.ai(_.backFrame)?r.f[17](_.backFrame+104):BigInt(Math.floor(_.backFrame.timestamp)),_.timeBase,w.i0);if(Y<_.currentPTS){if(!(_.currentPTS-Y>BigInt(5e3)))return T.R8(`dropping frame with pts ${Y}, which is earlier then the last rendered frame(${_.currentPTS}), taskId: ${_.taskId}`,M,511),void O();_.startTimestamp=BigInt(Math.floor((0,y.A)()))-Y*BigInt(100)/_.targetRate}else Y-_.currentPTS>BigInt(5e3)&&(_.startTimestamp=BigInt(Math.floor((0,y.A)()))-Y*BigInt(100)/_.targetRate);if(_.adjust===W.Accelerate){if(_.adjustDiff<=0)_.adjust=W.None,_.startTimestamp=BigInt(Math.floor((0,y.A)()))-Y*BigInt(100)/_.targetRate,_.lastAdjustTimestamp=BigInt(0);else if(BigInt(Math.floor((0,y.A)()))-_.lastAdjustTimestamp>=BigInt(200)){const rt=_.adjustDiff<=BigInt(100)?_.adjustDiff:P.jk(_.adjustDiff,BigInt(100))*BigInt(100)/_.targetRate;_.startTimestamp-=rt,_.adjustDiff-=rt,T.Yz(`video render accelerate startTimestamp sub: ${rt}, taskId: ${_.taskId}`,M,536),_.lastAdjustTimestamp=BigInt(Math.floor((0,y.A)()))}}else if(_.adjust===W.Decelerate){if(_.adjustDiff<=0)_.adjust=W.None,_.startTimestamp=BigInt(Math.floor((0,y.A)()))-Y*BigInt(100)/_.targetRate,_.lastAdjustTimestamp=BigInt(0);else if(BigInt(Math.floor((0,y.A)()))-_.lastAdjustTimestamp>=BigInt(300)){const rt=_.adjustDiff<BigInt(50)?_.adjustDiff:P.jk(_.adjustDiff,BigInt(50))*BigInt(100)/_.targetRate;_.startTimestamp+=rt,_.adjustDiff-=rt,T.Yz(`video render decelerate startTimestamp add: ${rt}, taskId: ${_.taskId}`,M,557),_.lastAdjustTimestamp=BigInt(Math.floor((0,y.A)()))}}_.enableJitterBuffer&&r.f[15](_.stats+120)/r.f[15](_.stats+216)*1e3<=r.f[15](_.jitterBuffer)&&R.setPlayRate(_.taskId,1);const Z=Y*BigInt(100)/_.playRate+_.startTimestamp-BigInt(Math.floor((0,y.A)()));Z<=0?(_.renderRedyed&&!_.skipRender&&(j||-Z<BigInt(100)||_.renderFrameCount&BigInt(1))?(_.render.render(_.backFrame),a.M[17](_.stats+160,r.f[17](_.stats+160)+BigInt(1)),_.lastRenderTimestamp&&a.M[15](_.stats+244,Math.max((0,y.A)()-_.lastRenderTimestamp,r.f[15](_.stats+244))),_.lastRenderTimestamp=(0,y.A)()):a.M[15](_.stats+168,r.f[15](_.stats+168)+1),_.renderFrameCount++,h.ai(_.backFrame)?(a.M[15](_.stats+84,r.f[15](_.backFrame+68)),a.M[15](_.stats+88,r.f[15](_.backFrame+72))):(a.M[15](_.stats+84,_.backFrame.displayWidth),a.M[15](_.stats+88,_.backFrame.displayHeight)),_.firstRendered||(_.controlIPCPort.notify(_.canvasUpdated?"firstRenderedAfterUpdateCanvas":"firstRendered"),_.firstRendered=!0,_.canvasUpdated=!1),_.playRate!==_.targetRate&&(_.startTimestamp=BigInt(Math.floor((0,y.A)()))-Y*BigInt(100)/_.targetRate,_.playRate=_.targetRate),_.currentPTS=Y,Y-_.lastNotifyPTS>=BigInt(1e3)&&(_.lastNotifyPTS=Y,_.controlIPCPort.notify("syncPts",{pts:Y})),O()):_.loop.emptyTask()},0,B),_.loop.start()}else T.h2("task not found",M,628)}async restart(N){const _=this.tasks.get(N);_&&(_.loop||T.h2("task has not played",M,636),_.loop.isStarted()&&T.h2("task has already run",M,640),_.backFrame&&(h.ai(_.backFrame)?_.avframePool.release(_.backFrame):_.backFrame.close()),_.frontFrame&&(h.ai(_.frontFrame)?_.avframePool.release(_.frontFrame):_.frontFrame.close()),_.backFrame=await _.leftIPCPort.request("pull"),_.frontFrame=await _.leftIPCPort.request("pull"),_.frontBuffered=!0,_.ended=!1,_.adjust=W.None,_.lastNotifyPTS=w.Dh,_.firstRendered=!1,_.firstPTS=(0,A.k)(h.ai(_.backFrame)?r.f[17](_.backFrame+104):BigInt(Math.floor(_.backFrame.timestamp)),_.timeBase,w.i0),_.currentPTS=_.firstPTS,_.firstPTS<BigInt(1e3)&&(_.firstPTS=BigInt(0)),_.startTimestamp=BigInt(Math.floor((0,y.A)()))-_.firstPTS*BigInt(100)/_.playRate,_.loop.start())}async pause(N){const _=this.tasks.get(N);_?(_.loop||T.h2("task has not played",M,691),_.pauseTimestamp=(0,y.A)(),_.loop.stop(),_.pausing=!0):T.h2("task not found",M,698)}async unpause(N){const _=this.tasks.get(N);if(_){if(_.seeking)return;_.loop||T.h2("task has not played",M,709),_.startTimestamp+=BigInt(Math.floor((0,y.A)()-_.pauseTimestamp)),_.seeking||_.loop.start(),_.pausing=!1,_.lastRenderTimestamp=(0,y.A)()}else T.h2("task not found",M,719)}async updateCanvas(N,_){const O=this.tasks.get(N);O?(O.canvas=_,O.render&&(O.render.destroy(),O.render=null),O.isSupport=()=>!1,O.canvasUpdated=!0,O.firstRendered=!1,O.renderRedyed=!1):T.h2("task not found",M,737)}async setPlayRate(N,_){const O=this.tasks.get(N);O?(O.enableJitterBuffer&&r.f[15](O.stats+120)/r.f[15](O.stats+216)*1e3<=r.f[15](O.jitterBuffer)&&(_=1),O.targetRate=BigInt(Math.floor(Math.floor(100*_)))):T.h2("task not found",M,753)}async setRenderMode(N,_){const O=this.tasks.get(N);O?O.render&&(O.renderMode=_,O.render.setRenderMode(_),(0,H.A)(()=>{O.pausing&&O.backFrame&&O.render&&O.render.render(O.backFrame)})):T.h2("task not found",M,771)}async setRenderRotate(N,_){const O=this.tasks.get(N);O?O.render&&(O.renderRotate=_,O.render.setRotate(_),(0,H.A)(()=>{O.pausing&&O.backFrame&&O.render&&O.render.render(O.backFrame)})):T.h2("task not found",M,789)}async enableHorizontalFlip(N,_){const O=this.tasks.get(N);O?O.render&&(O.flipHorizontal=_,O.render.enableHorizontalFlip(_),(0,H.A)(()=>{O.pausing&&O.backFrame&&O.render&&O.render.render(O.backFrame)})):T.h2("task not found",M,807)}async enableVerticalFlip(N,_){const O=this.tasks.get(N);O?O.render&&(O.flipVertical=_,O.render.enableVerticalFlip(_),(0,H.A)(()=>{O.pausing&&O.backFrame&&O.render&&O.render.render(O.backFrame)})):T.h2("task not found",M,825)}async resize(N,_,O){const R=this.tasks.get(N);R?R.render&&(R.render.viewport(_,O),(0,H.A)(()=>{R.pausing&&R.backFrame&&R.render&&R.render.render(R.backFrame)})):T.h2("task not found",M,842)}async setSkipRender(N,_){const O=this.tasks.get(N);O?O.skipRender=_:T.h2("task not found",M,852)}async beforeSeek(N){const _=this.tasks.get(N);_&&(_.ended||_.frontBuffered||(T.Yz(`wait current pull front frame before seek, taskId: ${_.taskId}`,M,861),await new(i())(O=>{_.seekSync=O})),_.seeking=!0,_.loop.stop(),_.backFrame&&(h.ai(_.backFrame)?_.avframePool.release(_.backFrame):_.backFrame.close()),_.frontFrame&&(h.ai(_.frontFrame)?_.avframePool.release(_.frontFrame):_.frontFrame.close()),_.frontFrame=null,_.backFrame=null,_.currentPTS=w.Dh,T.Yz(`before seek end, taskId: ${_.taskId}`,M,889))}async syncSeekTime(N,_,O){const R=this.tasks.get(N);if(R){for(;;){if(R.backFrame=await R.leftIPCPort.request("pull"),h.ai(R.backFrame)&&R.backFrame<0)return R.ended=!0,R.seeking=!1,R.adjust=W.None,T.R8(`pull video frame end after seek, taskId: ${N}`,M,904),void R.controlIPCPort.notify("ended");if(_<BigInt(0)){T.pq(`use the first video frame because of the seek time${_} < 0`,M,910);break}if((0,A.k)(h.ai(R.backFrame)?r.f[17](R.backFrame+104):BigInt(Math.floor(R.backFrame.timestamp)),R.timeBase,w.i0)-R.startPTS>=_)break;h.ai(R.backFrame)?R.avframePool.release(R.backFrame):R.backFrame.close()}T.Yz(`sync seek time end, taskId: ${R.taskId}`,M,937)}}async afterSeek(N,_){const O=this.tasks.get(N);O&&(O.startTimestamp=BigInt(Math.floor((0,y.A)()))-(_+O.startPTS)*BigInt(100)/O.playRate,O.frontFrame=await O.leftIPCPort.request("pull"),h.ai(O.frontFrame)&&O.frontFrame<0?(O.frontFrame=null,O.frontBuffered=!1,O.ended=!0):O.frontBuffered=!0,O.ended=!1,O.adjust=W.None,O.lastRenderTimestamp=(0,y.A)(),O.currentPTS=(0,A.k)(h.ai(O.backFrame)?r.f[17](O.backFrame+104):BigInt(Math.floor(O.backFrame.timestamp)),O.timeBase,w.i0),T.Yz(`got first video frame, pts: ${h.ai(O.backFrame)?r.f[17](O.backFrame+104):BigInt(Math.floor(O.backFrame.timestamp))}(${O.currentPTS}ms), taskId: ${O.taskId}`,M,966),O.seeking=!1,O.pausing||O.loop.start(),T.Yz(`after seek end, taskId: ${O.taskId}`,M,975))}async registerTask(N){return this.tasks.has(N.taskId)?c.lh:await this.createTask(N)}async unregisterTask(N){const _=this.tasks.get(N);_&&(_.loop&&(await _.loop.stopBeforeNextTick(),_.loop.destroy(),_.loop=null),_.ended||_.frontFrame||await new(i())(O=>{_.afterPullResolver=O}),_.render&&(_.render.destroy(),_.render=null),_.backFrame&&(h.ai(_.backFrame)&&_.backFrame>0?_.avframePool.release(_.backFrame):_.backFrame.close(),_.backFrame=null),_.frontFrame&&(h.ai(_.frontFrame)&&_.frontFrame>0?_.avframePool.release(_.frontFrame):_.frontFrame.close(),_.frontFrame=null),_.leftIPCPort.destroy(),_.controlIPCPort.destroy(),this.tasks.delete(N))}}},69721:(g,p,t)=>{t.d(p,{n:()=>c});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085);class c{constructor(){(0,n.A)(this,"min",void 0),(0,n.A)(this,"max",void 0)}}e=c.prototype,(i=new(r())).set("min",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("max",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,4),(0,d.A)(e,a.g7,8),(0,d.A)(e,a.JY,i)},30128:(g,p,t)=>{t.d(p,{A:()=>c});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085);class c{constructor(){(0,n.A)(this,"channels",void 0),(0,n.A)(this,"sampleRate",void 0),(0,n.A)(this,"audioFrameSize",void 0),(0,n.A)(this,"audioPacketBytes",void 0),(0,n.A)(this,"audioPacketCount",void 0),(0,n.A)(this,"audioPacketQueueLength",void 0),(0,n.A)(this,"audioDropPacketCount",void 0),(0,n.A)(this,"audioDecodeErrorPacketCount",void 0),(0,n.A)(this,"audioEncodeErrorFrameCount",void 0),(0,n.A)(this,"audioFrameDecodeCount",void 0),(0,n.A)(this,"audioPacketEncodeCount",void 0),(0,n.A)(this,"audioFrameRenderCount",void 0),(0,n.A)(this,"audioFrameDropCount",void 0),(0,n.A)(this,"width",void 0),(0,n.A)(this,"height",void 0),(0,n.A)(this,"keyFrameInterval",void 0),(0,n.A)(this,"gop",void 0),(0,n.A)(this,"videoPacketBytes",void 0),(0,n.A)(this,"videoPacketCount",void 0),(0,n.A)(this,"videoPacketQueueLength",void 0),(0,n.A)(this,"videoDropPacketCount",void 0),(0,n.A)(this,"videoDecodeErrorPacketCount",void 0),(0,n.A)(this,"videoEncodeErrorFrameCount",void 0),(0,n.A)(this,"videoFrameDecodeCount",void 0),(0,n.A)(this,"videoPacketEncodeCount",void 0),(0,n.A)(this,"videoFrameRenderCount",void 0),(0,n.A)(this,"videoFrameDropCount",void 0),(0,n.A)(this,"keyFrameCount",void 0),(0,n.A)(this,"bufferDropBytes",void 0),(0,n.A)(this,"bufferReceiveBytes",void 0),(0,n.A)(this,"audioBitrate",void 0),(0,n.A)(this,"videoBitrate",void 0),(0,n.A)(this,"videoDecodeFramerate",void 0),(0,n.A)(this,"videoRenderFramerate",void 0),(0,n.A)(this,"videoEncodeFramerate",void 0),(0,n.A)(this,"audioDecodeFramerate",void 0),(0,n.A)(this,"audioRenderFramerate",void 0),(0,n.A)(this,"audioEncodeFramerate",void 0),(0,n.A)(this,"audioFrameDecodeIntervalMax",void 0),(0,n.A)(this,"audioFrameRenderIntervalMax",void 0),(0,n.A)(this,"videoFrameDecodeIntervalMax",void 0),(0,n.A)(this,"videoFrameRenderIntervalMax",void 0),(0,n.A)(this,"bandwidth",void 0),(0,n.A)(this,"jitter",void 0),(0,n.A)(this,"audioStutter",void 0),(0,n.A)(this,"videoStutter",void 0),(0,n.A)(this,"audiocodec",void 0),(0,n.A)(this,"videocodec",void 0)}}e=c.prototype,(i=new(r())).set("channels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("audioFrameSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("audioPacketBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("audioPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),i.set("audioPacketQueueLength",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),i.set("audioDropPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),i.set("audioDecodeErrorPacketCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),i.set("audioEncodeErrorFrameCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:52,8:0}),i.set("audioFrameDecodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),i.set("audioPacketEncodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),i.set("audioFrameRenderCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),i.set("audioFrameDropCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),i.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),i.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),i.set("keyFrameInterval",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),i.set("gop",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:96,8:0}),i.set("videoPacketBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),i.set("videoPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),i.set("videoPacketQueueLength",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:120,8:0}),i.set("videoDropPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:128,8:0}),i.set("videoDecodeErrorPacketCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),i.set("videoEncodeErrorFrameCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),i.set("videoFrameDecodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),i.set("videoPacketEncodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),i.set("videoFrameRenderCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:160,8:0}),i.set("videoFrameDropCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:168,8:0}),i.set("keyFrameCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:176,8:0}),i.set("bufferDropBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:184,8:0}),i.set("bufferReceiveBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:192,8:0}),i.set("audioBitrate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:200,8:0}),i.set("videoBitrate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:204,8:0}),i.set("videoDecodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:208,8:0}),i.set("videoRenderFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:212,8:0}),i.set("videoEncodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:216,8:0}),i.set("audioDecodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:220,8:0}),i.set("audioRenderFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:224,8:0}),i.set("audioEncodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:228,8:0}),i.set("audioFrameDecodeIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:232,8:0}),i.set("audioFrameRenderIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:236,8:0}),i.set("videoFrameDecodeIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:240,8:0}),i.set("videoFrameRenderIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:244,8:0}),i.set("bandwidth",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:248,8:0}),i.set("jitter",{0:19,1:0,2:0,3:0,4:0,5:0,6:0,7:256,8:0}),i.set("audioStutter",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:264,8:0}),i.set("videoStutter",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:268,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,8),(0,d.A)(e,a.g7,272),(0,d.A)(e,a.JY,i)},61634:(g,p,t)=>{t.d(p,{default:()=>tt});var e=t(134),i=t(80662),n=t.n(i),s=t(54001),r=t.n(s),a=t(73146),d=t.n(a),c=t(61499),l=t(12085),h=t(12264),o=t(73783),u=t(69721),f=t(74503),v=t(63939),y=t(9599),A=t(29170),w=t(94300),k=t(87243),T=t(72480),P=t(31138),b=t(18667),x=t(88506),I=t(96172),S=t(8284),z=t(67672),V=t(95335),L=t(76045),C=t(56024),F=t(71517),H=t(59377),M=t(33968),G=t(8507),D=t(26429),W=t(41324),X=t(88397),U=t(11473),Q=t(11628),N=t(28090),_=t(47595),O=t(4624),R=t(95797),j=t(48641),B=t(36),Y=t(86834),Z=t(44328),rt=t(77231),ot=t(30128),ft=t(14686),ut=t(67593),At=t(94663),vt=t(10333),et=t(85224),st=t(25115),at=t(21233),ct=t(13724),mt=t(78201),It=t(43607),bt=t(76750),dt=t(2368),ht=t(1984),gt=t(62751),lt="src\\avplayer\\AVPlayer.ts";const Mt={1:"cover",0:"contain"},jt={enableHardware:!0,enableWebGPU:!0,loop:!1,jitterBufferMax:10,jitterBufferMin:4,lowLatency:!1};class Jt{constructor(){(0,e.A)(this,"avpacketList",void 0),(0,e.A)(this,"avframeList",void 0),(0,e.A)(this,"avpacketListMutex",void 0),(0,e.A)(this,"avframeListMutex",void 0),(0,e.A)(this,"jitterBuffer",void 0)}}var ce,ie;ce=Jt.prototype,(ie=new(n())).set("avpacketList",{0:h.A,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),ie.set("avframeList",{0:h.A,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),ie.set("avpacketListMutex",{0:o.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),ie.set("avframeListMutex",{0:o.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),ie.set("jitterBuffer",{0:u.n,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),(0,l.A)(ce,c.Og,!0),(0,l.A)(ce,c.dc,4),(0,l.A)(ce,c.g7,40),(0,l.A)(ce,c.JY,ie);class tt extends I.A{constructor(it){super(!0),(0,e.A)(this,"VideoDecoderThread",void 0),(0,e.A)(this,"GlobalData",void 0),(0,e.A)(this,"taskId",void 0),(0,e.A)(this,"subTaskId",void 0),(0,e.A)(this,"ext",void 0),(0,e.A)(this,"source",void 0),(0,e.A)(this,"options",void 0),(0,e.A)(this,"ioloader2DemuxerChannel",void 0),(0,e.A)(this,"demuxer2VideoDecoderChannel",void 0),(0,e.A)(this,"demuxer2AudioDecoderChannel",void 0),(0,e.A)(this,"videoDecoder2VideoRenderChannel",void 0),(0,e.A)(this,"audioDecoder2AudioRenderChannel",void 0),(0,e.A)(this,"audioRender2AudioWorkletChannel",void 0),(0,e.A)(this,"audioSourceNode",void 0),(0,e.A)(this,"gainNode",void 0),(0,e.A)(this,"streams",void 0),(0,e.A)(this,"canvas",void 0),(0,e.A)(this,"updateCanvas",void 0),(0,e.A)(this,"video",void 0),(0,e.A)(this,"audio",void 0),(0,e.A)(this,"controller",void 0),(0,e.A)(this,"volume",void 0),(0,e.A)(this,"playRate",void 0),(0,e.A)(this,"renderMode",void 0),(0,e.A)(this,"renderRotate",void 0),(0,e.A)(this,"flipHorizontal",void 0),(0,e.A)(this,"flipVertical",void 0),(0,e.A)(this,"useMSE",void 0),(0,e.A)(this,"audioEnded",void 0),(0,e.A)(this,"videoEnded",void 0),(0,e.A)(this,"status",void 0),(0,e.A)(this,"lastStatus",void 0),(0,e.A)(this,"stats",void 0),(0,e.A)(this,"statsController",void 0),(0,e.A)(this,"jitterBufferController",void 0),this.options=V.X$({},jt,it),this.taskId=(0,S.A)(),this.status=0,this.volume=1,this.playRate=1,this.renderMode=0,this.renderRotate=0,this.flipHorizontal=!1,this.flipVertical=!1,this.stats=(0,f.A)(ot.A),this.statsController=new mt.A(this.stats[c.o9]),this.GlobalData=(0,f.A)(Jt),o.Ts(this.GlobalData[c.o9]+24),o.Ts(this.GlobalData[c.o9]+28),O.pq(`create player, taskId: ${this.taskId}`,lt,217)}async checkUseMSE(){{if(!R.A.mse)return!1;if(!R.A.wasmBaseSupported)return!0;const it=this.streams.find(xt=>v.f[15](xt.codecpar)===0),pt=this.streams.find(xt=>v.f[15](xt.codecpar)===1);if(it&&!(0,bt.A)().isTypeSupported((0,vt.A)(it.codecpar)))return O.R8(`can not support mse for codec: ${(0,vt.A)(it.codecpar)}, taskId: ${this.taskId}`,lt,240),!1;if(pt&&!(0,bt.A)().isTypeSupported((0,et.A)(pt.codecpar)))return O.R8(`can not support mse for codec: ${(0,et.A)(pt.codecpar)}, taskId: ${this.taskId}`,lt,244),!1;if(this.options.checkUseMES)return this.options.checkUseMES(this.streams);if(it){if(v.f[15](it.codecpar+56)*v.f[15](it.codecpar+60)>2073600){if(!R.A.videoDecoder)return!0;let xt=null;if(v.f[20](it.codecpar+12)!==0&&(xt=(0,ft.s3)(v.f[20](it.codecpar+12),v.f[15](it.codecpar+16))),!(await VideoDecoder.isConfigSupported({codec:(0,At.A)(it.codecpar),codedWidth:v.f[15](it.codecpar+56),codedHeight:v.f[15](it.codecpar+60),description:xt,hardwareAcceleration:(0,at.C)(!0)})).supported)return!0}else if(v.f[15](it.codecpar+56)*v.f[15](it.codecpar+60)==2073600&&Y.A.safari&&!Y.A.checkVersion(Y.A.version,"16.1",!0)&&(0,Z.lb)((0,A.A)(it.codecpar+72,y.P))>30)return!0}}return!1}createCanvas(){const it=document.createElement("canvas");return it.className="avplayer-canvas",it.width=this.options.container.offsetWidth*devicePixelRatio,it.height=this.options.container.offsetHeight*devicePixelRatio,it.style.cssText=`
      width: 100%;
      height: 100%;
    `,it.ondragstart=()=>!1,it}createVideo(){this.video&&this.options.container.removeChild(this.video);const it=document.createElement("video");it.autoplay=!0,it.className="avplayer-video",it.style.cssText=`
      width: 100%;
      height: 100%;
    `,this.options.container.appendChild(it),this.video=it}createAudio(){this.audio&&this.options.container.removeChild(this.audio);const it=document.createElement("audio");it.autoplay=!0,it.className="avplayer-audio",this.options.container.appendChild(it),this.audio=it}handleTimeupdate(it){let pt=0;it.ontimeupdate=()=>{const xt=it.currentTime;Math.abs(xt-pt)>=1&&(this.status===4&&(this.fire(N.E9,[BigInt(Math.floor(1e3*xt))]),tt.MSEThread.setCurrentTime(this.taskId,xt)),pt=xt)},it.onended=()=>{this.audioEnded=!0,this.videoEnded=!0,this.handleEnded()},it.onwaiting=()=>{this.audio===it?this.stats.audioStutter++:(this.stats.audioStutter++,this.stats.videoStutter++)}}async handleEnded(){var it;if(this.audioEnded&&this.videoEnded)if(O.pq(`player ended, taskId: ${this.taskId}`,lt,361),this.options.loop&&!this.options.isLive)if(O.pq(`loop play, taskId: ${this.taskId}`,lt,365),this.isHls()?await tt.DemuxerThread.seek(this.taskId,BigInt(0),16):this.isDash()?(await tt.DemuxerThread.seek(this.taskId,BigInt(0),16),this.subTaskId&&await tt.DemuxerThread.seek(this.subTaskId,BigInt(0),16)):await tt.DemuxerThread.seek(this.taskId,BigInt(0),8),this.fire(N.E9,[BigInt(0)]),this.useMSE){var pt;(pt=this.video||this.audio)!==null&&pt!==void 0&&pt.src&&URL.revokeObjectURL((this.video||this.audio).src),await tt.MSEThread.restart(this.taskId);const Ct=await tt.MSEThread.getMediaSource(this.taskId);var xt,Rt;Ct&&(R.A.workerMSE&&Ct instanceof MediaSourceHandle?(this.video||this.audio).srcObject=Ct:(this.video||this.audio).src=URL.createObjectURL(Ct),this.video?(this.video.currentTime=0,this.video.playbackRate=this.playRate):this.audio&&(this.audio.currentTime=0,this.audio.playbackRate=this.playRate),await r().all([(xt=this.video)===null||xt===void 0?void 0:xt.play(),(Rt=this.audio)===null||Rt===void 0?void 0:Rt.play()]))}else this.audioDecoder2AudioRenderChannel&&(await tt.AudioDecoderThread.resetTask(this.taskId),await tt.AudioRenderThread.restart(this.taskId)),this.audioSourceNode&&(await this.audioSourceNode.request("restart"),tt.audioContext.state==="suspended"&&await tt.AudioRenderThread.fakePlay(this.taskId),this.audioEnded=!1),this.videoDecoder2VideoRenderChannel&&(await this.VideoDecoderThread.resetTask(this.taskId),await tt.VideoRenderThread.restart(this.taskId),this.videoEnded=!1);else(it=this.video||this.audio)!==null&&it!==void 0&&it.src&&URL.revokeObjectURL((this.video||this.audio).src),this.video&&(this.options.container.removeChild(this.video),this.video=null),this.audio&&(this.options.container.removeChild(this.audio),this.audio=null),this.canvas&&(this.options.container.removeChild(this.canvas),this.canvas=null),await this.stop(),this.fire(N.hV)}isHls(){return this.ext==="m3u8"||this.ext==="m3u"}isDash(){return this.ext==="mpd"}async load(it){O.pq(`call load, taskId: ${this.taskId}`,lt,466),this.status=1,this.fire(N.F5),this.controller=new Q.A(this),this.ioloader2DemuxerChannel=(0,ut.A)(),(0,ft.sO)(this.stats[c.o9],0,272),await tt.startDemuxPipeline();let pt=0;var xt;if(z.Yj(it)?(this.ext=G.qg(it).file.split(".").pop(),pt=await tt.IOThread.registerTask.transfer(this.ioloader2DemuxerChannel.port1).invoke({type:(xt=gt.$$[this.ext])!==null&&xt!==void 0?xt:0,info:{url:it},range:{from:-1,to:-1},taskId:this.taskId,options:{isLive:this.options.isLive},rightPort:this.ioloader2DemuxerChannel.port1,stats:this.stats[c.o9]})):(this.options.isLive=!1,this.ext=it.name.split(".").pop(),pt=await tt.IOThread.registerTask.transfer(this.ioloader2DemuxerChannel.port1).invoke({type:1,info:{file:it},range:{from:-1,to:-1},taskId:this.taskId,options:{isLive:!1},rightPort:this.ioloader2DemuxerChannel.port1,stats:this.stats[c.o9]})),pt<0&&O.h2(`register io task failed, ret: ${pt}, taskId: ${this.taskId}`,lt,526),this.isDash()){await tt.IOThread.open(this.taskId);const kt=await tt.IOThread.hasAudio(this.taskId),wt=await tt.IOThread.hasVideo(this.taskId);kt&&wt?(this.subTaskId=(0,S.A)(),await tt.DemuxerThread.registerTask.transfer(this.ioloader2DemuxerChannel.port2).invoke({taskId:this.taskId,leftPort:this.ioloader2DemuxerChannel.port2,format:gt.HR[this.ext],stats:this.stats[c.o9],isLive:this.options.isLive,flags:2,ioloaderOptions:{mediaType:"audio"},avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24}),await tt.DemuxerThread.registerTask({taskId:this.subTaskId,mainTaskId:this.taskId,flags:2,format:gt.HR[this.ext],stats:this.stats[c.o9],isLive:this.options.isLive,ioloaderOptions:{mediaType:"video"},avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24})):await tt.DemuxerThread.registerTask.transfer(this.ioloader2DemuxerChannel.port2).invoke({taskId:this.taskId,leftPort:this.ioloader2DemuxerChannel.port2,format:gt.HR[this.ext],stats:this.stats[c.o9],isLive:this.options.isLive,flags:2,ioloaderOptions:{mediaType:kt?"audio":"video"},avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24})}else await tt.DemuxerThread.registerTask.transfer(this.ioloader2DemuxerChannel.port2).invoke({taskId:this.taskId,leftPort:this.ioloader2DemuxerChannel.port2,format:gt.HR[this.ext],stats:this.stats[c.o9],isLive:this.options.isLive,flags:this.isHls()?2:0,avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24});pt=await tt.DemuxerThread.openStream(this.taskId),pt<0&&O.h2(`open stream failed, ret: ${pt}, taskId: ${this.taskId}`,lt,601);let Rt=await tt.DemuxerThread.analyzeStreams(this.taskId);if(Rt.length||O.h2(`analyze stream failed, ret: ${Rt}`,lt,605),this.subTaskId){pt=await tt.DemuxerThread.openStream(this.subTaskId),pt<0&&O.h2(`open stream failed, ret: ${pt}, taskId: ${this.taskId}`,lt,611);const kt=await tt.DemuxerThread.analyzeStreams(this.subTaskId);kt.length||O.h2(`analyze stream failed, ret: ${Rt}`,lt,615),Rt=Rt.concat(kt)}this.streams=Rt,this.source=it;let Ct=`
      taskId: ${this.taskId}
      input: ${z.Yj(it)?it:it.name}
      stream:
    `;if(this.streams.forEach(kt=>{v.f[15](kt.codecpar)===1?this.stats.audiocodec=(0,ht.A)(kt.codecpar):v.f[15](kt.codecpar)===0&&(this.stats.videocodec=(0,At.A)(kt.codecpar)),Ct+=`
        #${kt.index}(und): ${v.f[15](kt.codecpar)===1?"Audio":"Video"}: ${v.f[15](kt.codecpar)===1?this.stats.audiocodec:this.stats.videocodec}
      `}),O.pq(Ct,lt,640),this.isHls()||this.isDash()){const kt=1e3*await tt.IOThread.getDuration(this.taskId);if(kt>0)for(let wt=0;wt<this.streams.length;wt++)this.streams[wt].duration=(0,Z.k)(BigInt(Math.floor(kt)),rt.i0,(0,A.A)(this.streams[wt].timeBase,y.P))}if(this.options.isLive&&this.options.lowLatency){const kt=Math.max(await tt.IOThread.getMinBuffer(this.taskId),this.options.jitterBufferMin);let wt=this.options.jitterBufferMax;wt<=kt&&(wt=kt+(this.isHls()||this.isDash()?kt:1)),this.jitterBufferController=new dt.A({stats:this.stats[c.o9],jitterBuffer:this.GlobalData[c.o9]+32,lowLatencyStart:!(this.isHls()||this.isDash()),useMse:this.useMSE,max:wt,min:kt,observer:{onCroppingBuffer:St=>{var Ut;O.Yz(`cropping buffer by jitter buffer, max: ${St}, taskId: ${this.taskId}`,lt,673),(Ut=tt.DemuxerThread)===null||Ut===void 0||Ut.croppingAVPacketQueue(this.taskId,BigInt(St>>>0))},onSetPlayRate:St=>{O.Yz(`set play rate by jitter buffer, rate: ${St}, taskId: ${this.taskId}`,lt,677),this.useMSE?(tt.MSEThread.setPlayRate(this.taskId,St),this.video?this.video.playbackRate=St:this.audio&&(this.audio.playbackRate=St)):(this.audioDecoder2AudioRenderChannel&&tt.AudioRenderThread.setPlayTempo(this.taskId,St),this.videoDecoder2VideoRenderChannel&&tt.VideoRenderThread.setPlayRate(this.taskId,St))}}})}this.status=2,this.fire(N.S2)}async play(it={audio:!0,video:!0}){if(O.pq(`call play, options: ${d()(it)}, status: ${this.status} taskId: ${this.taskId}`,lt,713),this.status===4)return;it.audio||it.video||(O.R8(`video and audio must play one, ignore options, we will try to play video and audio, taskId: ${this.taskId}`,lt,720),it.audio=!0,it.video=!0);const pt=[];if(this.status===5)return this.useMSE?(pt.push(tt.MSEThread.unpause(this.taskId)),this.audio?this.audio.play():this.video&&this.video.play()):(this.audioSourceNode&&(pt.push(this.audioSourceNode.request("unpause")),tt.audioContext.state==="suspended"&&pt.push(tt.AudioRenderThread.unpause(this.taskId))),this.videoDecoder2VideoRenderChannel&&pt.push(tt.VideoRenderThread.unpause(this.taskId))),r().all(pt).then(()=>{this.status=4,this.fire(N.CN),this.jitterBufferController&&this.jitterBufferController.start()});if(this.status=3,this.fire(N.d6),this.useMSE=await this.checkUseMSE(),this.audioEnded=!0,this.videoEnded=!0,this.useMSE){await tt.startMSEPipeline(),await tt.MSEThread.registerTask.transfer(this.controller.getMuxerRenderControlPort()).invoke({taskId:this.taskId,stats:this.stats[c.o9],format:await tt.DemuxerThread.getFormat(this.taskId),controlPort:this.controller.getMuxerRenderControlPort(),isLive:this.options.isLive,avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24,enableJitterBuffer:!!this.jitterBufferController,jitterBuffer:this.GlobalData[c.o9]+32});let Rt=!1;for(let kt=0;kt<this.streams.length;kt++){const wt=this.streams[kt];v.f[15](wt.codecpar)===0&&it.video?(Rt=!0,this.videoEnded=!1,this.demuxer2VideoDecoderChannel=(0,ut.A)(),await tt.DemuxerThread.connectStreamTask.transfer(this.demuxer2VideoDecoderChannel.port1).invoke(this.subTaskId||this.taskId,wt.index,this.demuxer2VideoDecoderChannel.port1),await tt.MSEThread.addStream.transfer(this.demuxer2VideoDecoderChannel.port2).invoke(this.taskId,wt.index,wt.codecpar,wt.timeBase,wt.startTime,this.demuxer2VideoDecoderChannel.port2)):v.f[15](wt.codecpar)===1&&it.audio&&(this.audioEnded=!1,this.demuxer2AudioDecoderChannel=(0,ut.A)(),await tt.DemuxerThread.connectStreamTask.transfer(this.demuxer2AudioDecoderChannel.port1).invoke(this.taskId,wt.index,this.demuxer2AudioDecoderChannel.port1),await tt.MSEThread.addStream.transfer(this.demuxer2AudioDecoderChannel.port2).invoke(this.taskId,wt.index,wt.codecpar,wt.timeBase,wt.startTime,this.demuxer2AudioDecoderChannel.port2))}Rt?this.createVideo():this.createAudio();const Ct=await tt.MSEThread.getMediaSource(this.taskId);Ct&&(R.A.workerMSE&&Ct instanceof MediaSourceHandle?(this.video||this.audio).srcObject=Ct:(this.video||this.audio).src=URL.createObjectURL(Ct),this.handleTimeupdate(this.video||this.audio))}else{let Rt=BigInt(0),Ct=BigInt(0);for(let kt=0;kt<this.streams.length;kt++){const wt=this.streams[kt];if(v.f[15](wt.codecpar)===0&&it.video){await this.createVideoDecoderThread(),await tt.startVideoRenderPipeline(),Ct=(0,Z.k)(wt.startTime,(0,A.A)(wt.timeBase,y.P),rt.i0),this.demuxer2VideoDecoderChannel=(0,ut.A)(),this.videoDecoder2VideoRenderChannel=(0,ut.A)();const St=this.options.getWasm("decoder",v.f[15](wt.codecpar+4));let Ut;St?z.Yj(St)||z.sv(St)?(Ut=await(0,L.A)({source:St}),D._7&&(Ut.threadModule=await(0,L.A)({source:Y.A.firefox?St:Ut.buffer},{child:!0})),delete Ut.buffer):Ut=St:R.A.videoDecoder?(await VideoDecoder.isConfigSupported({codec:(0,At.A)(wt.codecpar)})).supported||O.h2(`codecId ${v.f[15](wt.codecpar+4)} not support`,lt,888):O.h2(`codecId ${v.f[15](wt.codecpar+4)} not support`,lt,892),await this.VideoDecoderThread.registerTask.transfer(this.demuxer2VideoDecoderChannel.port2,this.videoDecoder2VideoRenderChannel.port1).invoke({taskId:this.taskId,resource:Ut,leftPort:this.demuxer2VideoDecoderChannel.port2,rightPort:this.videoDecoder2VideoRenderChannel.port1,stats:this.stats[c.o9],enableHardware:this.options.enableHardware,avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24,avframeList:this.GlobalData[c.o9]+12,avframeListMutex:this.GlobalData[c.o9]+28}),await this.VideoDecoderThread.open(this.taskId,wt.codecpar),await tt.DemuxerThread.connectStreamTask.transfer(this.demuxer2VideoDecoderChannel.port1).invoke(this.subTaskId||this.taskId,wt.index,this.demuxer2VideoDecoderChannel.port1)}else if(v.f[15](wt.codecpar)===1&&it.audio){await tt.startAudioPipeline(),tt.audioContext.state==="suspended"&&await r().race([tt.audioContext.resume(),new ct.A(.1)]),Rt=(0,Z.k)(wt.startTime,(0,A.A)(wt.timeBase,y.P),rt.i0),this.demuxer2AudioDecoderChannel=(0,ut.A)(),this.audioDecoder2AudioRenderChannel=(0,ut.A)();const St=this.options.getWasm("decoder",v.f[15](wt.codecpar+4));let Ut;St?Ut=z.Yj(St)||z.sv(St)?await(0,L.A)({source:St}):St:R.A.audioDecoder?(await AudioDecoder.isConfigSupported({codec:(0,ht.A)(wt.codecpar),sampleRate:v.f[15](wt.codecpar+136),numberOfChannels:v.f[15](wt.codecpar+116)})).supported||O.h2(`codecId ${v.f[15](wt.codecpar+4)} not support`,lt,953):O.h2(`codecId ${v.f[15](wt.codecpar+4)} not support`,lt,957),await tt.AudioDecoderThread.registerTask.transfer(this.demuxer2AudioDecoderChannel.port2,this.audioDecoder2AudioRenderChannel.port1).invoke({taskId:this.taskId,resource:Ut,leftPort:this.demuxer2AudioDecoderChannel.port2,rightPort:this.audioDecoder2AudioRenderChannel.port1,stats:this.stats[c.o9],timeBase:{num:v.f[15](wt.timeBase),den:v.f[15](wt.timeBase+4)},avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24,avframeList:this.GlobalData[c.o9]+12,avframeListMutex:this.GlobalData[c.o9]+28}),await tt.AudioDecoderThread.open(this.taskId,wt.codecpar),await tt.DemuxerThread.connectStreamTask.transfer(this.demuxer2AudioDecoderChannel.port1).invoke(this.taskId,wt.index,this.demuxer2AudioDecoderChannel.port1)}}if(this.videoDecoder2VideoRenderChannel){this.canvas=this.createCanvas(),this.options.container.appendChild(this.canvas);const kt=(0,_.A)()&&D._7?this.canvas.transferControlToOffscreen():this.canvas,wt=this.streams.find(St=>v.f[15](St.codecpar)===0);await tt.VideoRenderThread.registerTask.transfer(this.videoDecoder2VideoRenderChannel.port2,this.controller.getVideoRenderControlPort(),kt).invoke({taskId:this.taskId,leftPort:this.videoDecoder2VideoRenderChannel.port2,controlPort:this.controller.getVideoRenderControlPort(),canvas:kt,renderMode:this.renderMode,renderRotate:this.renderRotate,flipHorizontal:this.flipHorizontal,flipVertical:this.flipVertical,timeBase:{num:v.f[15](wt.timeBase),den:v.f[15](wt.timeBase+4)},viewportWidth:this.options.container.offsetWidth,viewportHeight:this.options.container.offsetHeight,devicePixelRatio,stats:this.stats[c.o9],enableWebGPU:this.options.enableWebGPU,startPTS:wt.startTime,avframeList:this.GlobalData[c.o9]+12,avframeListMutex:this.GlobalData[c.o9]+28,enableJitterBuffer:!!this.jitterBufferController&&!this.audioDecoder2AudioRenderChannel,jitterBuffer:this.GlobalData[c.o9]+32}),this.videoEnded=!1,await tt.VideoRenderThread.setPlayRate(this.taskId,this.playRate),pt.push(tt.VideoRenderThread.play(this.taskId))}if(this.audioDecoder2AudioRenderChannel){const kt=this.streams.find(de=>v.f[15](de.codecpar)===1);this.audioRender2AudioWorkletChannel=new MessageChannel;const wt=this.options.getWasm("resampler"),St=this.options.getWasm("stretchpitcher");let Ut,re,se;wt?Ut=z.Yj(wt)||z.sv(wt)?await(0,L.A)({source:wt}):wt:O.h2("resampler not found",lt,1058),St?re=z.Yj(St)||z.sv(St)?await(0,L.A)({source:St}):St:O.h2("stretch pitcher not found",lt,1072),await tt.AudioRenderThread.registerTask.transfer(this.audioDecoder2AudioRenderChannel.port2,this.audioRender2AudioWorkletChannel.port1,this.controller.getAudioRenderControlPort()).invoke({taskId:this.taskId,leftPort:this.audioDecoder2AudioRenderChannel.port2,rightPort:this.audioRender2AudioWorkletChannel.port1,controlPort:this.controller.getAudioRenderControlPort(),playFormat:8,playSampleRate:tt.audioContext.sampleRate,playChannels:v.f[15](kt.codecpar+116),resamplerResource:Ut,stretchpitcherResource:re,stats:this.stats[c.o9],timeBase:{num:v.f[15](kt.timeBase),den:v.f[15](kt.timeBase+4)},startPTS:kt.startTime,avframeList:this.GlobalData[c.o9]+12,avframeListMutex:this.GlobalData[c.o9]+28,enableJitterBuffer:!!this.jitterBufferController,jitterBuffer:this.GlobalData[c.o9]+32}),se=R.A.audioWorklet?X.A:j.A,this.audioSourceNode=new se(tt.audioContext,{onEnded:()=>{this.onAudioEnded()},onFirstRendered:()=>{this.onFirstAudioRendered()},onStutter:()=>{this.onStutter()}},{numberOfInputs:1,numberOfOutputs:1,outputChannelCount:[v.f[15](kt.codecpar+116)]}),D._7&&R.A.audioWorklet&&(!Y.A.safari||Y.A.checkVersion(Y.A.version,"16.1",!0))&&await this.audioSourceNode.request("init",{memory:U.ce}),await tt.AudioRenderThread.setPlayTempo(this.taskId,this.playRate),this.gainNode=tt.audioContext.createGain(),this.gainNode.connect(tt.audioContext.destination),this.audioSourceNode.connect(this.gainNode),this.setVolume(this.volume),this.audioEnded=!1,pt.push(this.audioSourceNode.request("start",{port:this.audioRender2AudioWorkletChannel.port2,channels:v.f[15](kt.codecpar+116)},[this.audioRender2AudioWorkletChannel.port2]))}this.audioDecoder2AudioRenderChannel?this.controller.setTimeUpdateListenType(1):this.videoDecoder2VideoRenderChannel&&this.controller.setTimeUpdateListenType(0),this.videoDecoder2VideoRenderChannel&&this.audioDecoder2AudioRenderChannel&&It.tn(Ct-Rt)>BigInt(1e4)&&this.controller.setEnableAudioVideoSync(!1)}let xt=10;return z.Yj(this.source)&&!this.options.isLive&&this.streams.forEach(Rt=>{xt=Math.max(Math.ceil(4*(0,Z.lb)((0,A.A)(Rt.codecpar+72,y.P))),xt)}),pt.push(tt.DemuxerThread.startDemux(this.taskId,this.options.isLive,xt)),this.subTaskId&&pt.push(tt.DemuxerThread.startDemux(this.subTaskId,this.options.isLive,xt)),r().all(pt).then(async()=>{var Rt,Ct;if(this.status=4,this.useMSE)await r().all([(Rt=this.video)===null||Rt===void 0?void 0:Rt.play(),(Ct=this.audio)===null||Ct===void 0?void 0:Ct.play()]).catch(kt=>{if(this.video)return this.video.muted=!0,this.fire(N.IY),O.R8("the audioContext was not started. It must be resumed after a user gesture",lt,1195),this.video.play();throw kt});else if(this.audioSourceNode&&tt.audioContext.state==="suspended"){if(tt.audioContext.state==="suspended"&&(this.fire(N.IY),O.R8("the audioContext was not started. It must be resumed after a user gesture",lt,1207)),!this.videoDecoder2VideoRenderChannel)throw new Error("the audioContext was not started. It must be resumed after a user gesture");tt.AudioRenderThread.fakePlay(this.taskId),this.controller.setTimeUpdateListenType(0)}this.fire(N.CN),this.statsController.start(),this.jitterBufferController&&this.jitterBufferController.start()})}async pause(){if(O.pq(`call pause, taskId: ${this.taskId}`,lt,1232),!this.options.isLive){const it=[];return this.useMSE?(this.audio&&this.audio.pause(),this.video&&this.video.pause(),it.push(tt.MSEThread.pause(this.taskId))):(this.audioSourceNode&&(it.push(this.audioSourceNode.request("pause")),tt.audioContext.state==="suspended"&&it.push(tt.AudioRenderThread.pause(this.taskId))),this.videoDecoder2VideoRenderChannel&&it.push(tt.VideoRenderThread.pause(this.taskId))),r().all(it).then(()=>{this.status===6?this.lastStatus=5:this.status=5,this.fire(N.NN),this.jitterBufferController&&this.jitterBufferController.stop()})}O.R8(`pause can only used in vod, taskId: ${this.taskId}`,lt,1271)}async seek(it){if(O.pq(`call seek, timestamp: ${it}, taskId: ${this.taskId}`,lt,1283),this.streams.length)if(this.status!==6)if(this.fire(N.Nz),this.options.isLive)O.R8(`seek can only used in vod, taskId: ${this.taskId}`,lt,1397);else{this.lastStatus=this.status,this.status=6;const Gt=BigInt(Math.floor(it));var pt,xt;this.useMSE?await tt.MSEThread.beforeSeek(this.taskId):await r().all([(pt=tt.AudioRenderThread)===null||pt===void 0?void 0:pt.beforeSeek(this.taskId),(xt=tt.VideoRenderThread)===null||xt===void 0?void 0:xt.beforeSeek(this.taskId)]);let Ot=-BigInt(1);if(this.isHls()?Ot=await tt.DemuxerThread.seek(this.taskId,Gt,16):this.isDash()?(Ot=await tt.DemuxerThread.seek(this.taskId,Gt,16),this.subTaskId&&await tt.DemuxerThread.seek(this.subTaskId,Gt,16)):Ot=await tt.DemuxerThread.seek(this.taskId,Gt,8),Ot>=BigInt(0)?O.Yz(`seeked to packet timestamp: ${Ot}, taskId: ${this.taskId}`,lt,1328):O.z3(`demuxer seek failed, code: ${Ot}, taskId: ${this.taskId}`,lt,1331),this.useMSE){if(Ot>=BigInt(0)){const Kt=await tt.MSEThread.afterSeek(this.taskId,Ot>Gt?Ot:Gt);this.video?this.video.currentTime=Kt:this.audio&&(this.audio.currentTime=Kt)}else await tt.MSEThread.afterSeek(this.taskId,rt.Dh);this.status=this.lastStatus,this.fire(N.mQ)}else{let Kt=20;var Rt,Ct,kt,wt,St,Ut,re,se,de,Ue;this.streams.forEach(Ci=>{v.f[15](Ci.codecpar)===0&&(Kt=Math.max(Math.ceil((0,Z.lb)((0,A.A)(Ci.codecpar+72,y.P))),Kt))}),Ot>=BigInt(0)?(await r().all([(Rt=tt.AudioDecoderThread)===null||Rt===void 0?void 0:Rt.resetTask(this.taskId),(Ct=this.VideoDecoderThread)===null||Ct===void 0?void 0:Ct.resetTask(this.taskId)]),await r().all([(kt=tt.AudioRenderThread)===null||kt===void 0?void 0:kt.syncSeekTime(this.taskId,Ot>Gt?Ot:Gt,Kt),(wt=tt.VideoRenderThread)===null||wt===void 0?void 0:wt.syncSeekTime(this.taskId,Ot>Gt?Ot:Gt,Kt)]),await r().all([(St=tt.AudioRenderThread)===null||St===void 0?void 0:St.afterSeek(this.taskId,Ot>Gt?Ot:Gt),(Ut=tt.VideoRenderThread)===null||Ut===void 0?void 0:Ut.afterSeek(this.taskId,Ot>Gt?Ot:Gt)])):(await r().all([(re=tt.AudioRenderThread)===null||re===void 0?void 0:re.syncSeekTime(this.taskId,rt.Dh,Kt),(se=tt.VideoRenderThread)===null||se===void 0?void 0:se.syncSeekTime(this.taskId,rt.Dh,Kt)]),await r().all([(de=tt.AudioRenderThread)===null||de===void 0?void 0:de.afterSeek(this.taskId,rt.Dh),(Ue=tt.VideoRenderThread)===null||Ue===void 0?void 0:Ue.afterSeek(this.taskId,rt.Dh)])),this.status=this.lastStatus,this.jitterBufferController&&this.jitterBufferController.reset()}}else O.R8(`player is seeking now, taskId: ${this.taskId}`,lt,1291);else O.z3(`cannot found any stream to seek, taskId: ${this.taskId}`,lt,1286)}getStreams(){return this.streams}getDuration(){if(!this.options.isLive){let it=BigInt(0);return this.streams.forEach(pt=>{const xt=(0,Z.k)(pt.duration,{den:v.f[15](pt.timeBase+4),num:v.f[15](pt.timeBase)},rt.i0);xt>it&&(it=xt)}),it}return BigInt(0)}async stop(){var it;O.pq(`call stop, taskId: ${this.taskId}`,lt,1433),this.status!==0?(this.audioSourceNode&&(await this.audioSourceNode.request("stop"),this.audioSourceNode.disconnect(),this.audioSourceNode=null),tt.VideoRenderThread&&await tt.VideoRenderThread.unregisterTask(this.taskId),tt.AudioRenderThread&&await tt.AudioRenderThread.unregisterTask(this.taskId),this.VideoDecoderThread&&await this.VideoDecoderThread.unregisterTask(this.taskId),tt.AudioDecoderThread&&await tt.AudioDecoderThread.unregisterTask(this.taskId),tt.MSEThread&&await tt.MSEThread.unregisterTask(this.taskId),tt.DemuxerThread&&(await tt.DemuxerThread.unregisterTask(this.taskId),this.subTaskId&&await tt.DemuxerThread.unregisterTask(this.subTaskId)),tt.IOThread&&await tt.IOThread.unregisterTask(this.taskId),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),this.controller&&this.controller.destroy(),(it=this.video||this.audio)!==null&&it!==void 0&&it.src&&URL.revokeObjectURL((this.video||this.audio).src),this.video&&(this.options.container.removeChild(this.video),this.video=null),this.audio&&(this.options.container.removeChild(this.audio),this.audio=null),this.canvas&&(this.options.container.removeChild(this.canvas),this.canvas=null),this.ioloader2DemuxerChannel=null,this.demuxer2VideoDecoderChannel=null,this.demuxer2AudioDecoderChannel=null,this.videoDecoder2VideoRenderChannel=null,this.audioDecoder2AudioRenderChannel=null,this.audioRender2AudioWorkletChannel=null,this.statsController.stop(),this.jitterBufferController&&this.jitterBufferController.stop(),this.fire(N.yd),this.status=0):O.R8(`player has already stopped, taskId: ${this.taskId}`,lt,1436)}setPlaybackRate(it){var pt,xt,Rt;this.options.isLive?O.R8(`setPlaybackRate can only used in playback, taskId: ${this.taskId}`,lt,1535):(this.playRate=(0,B.A)(it,.5,2),this.useMSE?(tt.MSEThread.setPlayRate(this.taskId,this.playRate),this.video?this.video.playbackRate=this.playRate:this.audio&&(this.audio.playbackRate=this.playRate)):((pt=tt.AudioRenderThread)===null||pt===void 0||pt.setPlayTempo(this.taskId,this.playRate),(xt=tt.VideoRenderThread)===null||xt===void 0||xt.setPlayRate(this.taskId,this.playRate),(Rt=this.VideoDecoderThread)===null||Rt===void 0||Rt.setPlayRate(this.taskId,this.playRate)),O.pq(`player call setPlaybackRate, set ${this.playRate}, taskId: ${this.taskId}`,lt,1532))}getPlaybackRate(){return this.playRate}async resume(){var it;((it=tt.audioContext)===null||it===void 0?void 0:it.state)==="suspended"&&(await r().race([tt.audioContext.resume(),new ct.A(.1)]),tt.audioContext.state==="suspended"?O.R8("the audioContext was not allowed to start. It must be resumed after a user gesture",lt,1558):(this.audioSourceNode&&this.controller.setTimeUpdateListenType(1),this.video&&(this.video.muted=!1))),this.video?(this.video.muted=!1,this.video.played||await this.video.play()):this.audio&&(this.audio.muted=!1,this.audio.played||await this.audio.play()),O.pq(`call resume, taskId: ${this.taskId}`,lt,1582)}getVolume(){return this.volume}setVolume(it,pt=!1){this.volume=(0,B.A)(it,0,3),this.gainNode&&tt.audioContext?(this.gainNode.gain.cancelScheduledValues(tt.audioContext.currentTime),Y.A.firefox&&!pt?this.gainNode.gain.setValueAtTime(this.volume,tt.audioContext.currentTime+1):this.gainNode.gain.value===0||this.volume===0||pt?this.gainNode.gain.value=this.volume:this.gainNode.gain.exponentialRampToValueAtTime(this.volume,tt.audioContext.currentTime+1)):this.video?this.video.volume=this.volume:this.audio&&(this.audio.volume=this.volume),O.pq(`player call setVolume, set ${it}, used ${this.volume}, taskId: ${this.taskId}`,lt,1624)}getRenderMode(){return this.renderMode}setRenderMode(it){var pt;this.renderMode=it,this.useMSE&&this.video?this.video.style["object-fit"]=Mt[this.renderMode]:(pt=tt.VideoRenderThread)===null||pt===void 0||pt.setRenderMode(this.taskId,it),O.pq(`player call setRenderMode, mode: ${it}, taskId: ${this.taskId}`,lt,1654)}getVideoTransformContext(){let it="";return this.renderRotate!==0&&(it+=`rotateZ(${this.renderRotate}deg)`),this.flipHorizontal&&(it+=(it.length?" ":"")+"scaleX(-1)"),this.flipVertical&&(it+=(it.length?" ":"")+"scaleY(-1)"),it}setRotate(it){var pt;this.renderRotate=it,this.useMSE&&this.video?this.video.style.transform=this.getVideoTransformContext():(pt=tt.VideoRenderThread)===null||pt===void 0||pt.setRenderRotate(this.taskId,it),O.pq(`player call setRotate, angle: ${it}, taskId: ${this.taskId}`,lt,1684)}enableHorizontalFlip(it){var pt;this.flipHorizontal=it,this.useMSE&&this.video?this.video.style.transform=this.getVideoTransformContext():(pt=tt.VideoRenderThread)===null||pt===void 0||pt.enableHorizontalFlip(this.taskId,it),O.pq(`player call enableHorizontalFlip, enable: ${it}, taskId: ${this.taskId}`,lt,1695)}enableVerticalFlip(it){var pt;this.flipVertical=it,this.useMSE&&this.video?this.video.style.transform=this.getVideoTransformContext():(pt=tt.VideoRenderThread)===null||pt===void 0||pt.enableVerticalFlip(this.taskId,it),O.pq(`player call enableVerticalFlip, enable: ${it}, taskId: ${this.taskId}`,lt,1706)}setLoop(it){this.options.loop=it,O.pq(`call setLoop, enable: ${it}, taskId: ${this.taskId}`,lt,1718)}resize(it,pt){var xt;this.useMSE||(xt=tt.VideoRenderThread)===null||xt===void 0||xt.resize(this.taskId,it,pt),O.pq(`player call resize, width: ${it}, height: ${pt}, taskId: ${this.taskId}`,lt,1731)}isMSE(){return this.useMSE}async getVideoList(){var it;return(it=tt.IOThread)===null||it===void 0?void 0:it.getVideoList(this.taskId)}async getAudioList(){var it;return(it=tt.IOThread)===null||it===void 0?void 0:it.getAudioList(this.taskId)}async getSubtitleList(){var it;return(it=tt.IOThread)===null||it===void 0?void 0:it.getSubtitleList(this.taskId)}async selectVideo(it){var pt;return(pt=tt.IOThread)===null||pt===void 0?void 0:pt.selectVideo(this.taskId,it)}async selectAudio(it){var pt;return(pt=tt.IOThread)===null||pt===void 0?void 0:pt.selectAudio(this.taskId,it)}async selectSubtitle(it){var pt;return(pt=tt.IOThread)===null||pt===void 0?void 0:pt.selectSubtitle(this.taskId,it)}enterFullscreen(){const it=this.useMSE?this.video:this.canvas;it.requestFullscreen?it.requestFullscreen():it.mozRequestFullScreen?it.mozRequestFullScreen():it.webkitRequestFullscreen?it.webkitRequestFullscreen():it.msRequestFullscreen&&it.msRequestFullscreen(),O.pq(`player call enterFullscreen, taskId: ${this.taskId}`,lt,1779)}exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozExitFullScreen?document.mozExitFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),O.pq(`player call exitFullscreen, taskId: ${this.taskId}`,lt,1795)}snapshot(it="png",pt=1){if(this.useMSE&&this.video){const xt=document.createElement("canvas");return xt.width=this.video.videoWidth,xt.height=this.video.videoHeight,xt.getContext("2d").drawImage(this.video,0,0),xt.toDataURL(`image/${it}`,pt)}if(this.canvas)return this.canvas.toDataURL(`image/${it}`,pt)}getStats(){return this.stats}async destroy(){O.pq(`call destroy, taskId: ${this.taskId}`,lt,1824),this.status!==8?(await this.stop(),(0,w.A)(this.stats),this.stats=null,this.VideoDecoderThread&&(await this.VideoDecoderThread.clear(),(0,x.nE)(this.VideoDecoderThread),this.VideoDecoderThread=null),this.GlobalData&&(this.GlobalData.avframeList.clear(it=>{(0,C.to)(it)},20),this.GlobalData.avpacketList.clear(it=>{(0,F.Up)(it)},20),o.zr(this.GlobalData[c.o9]+24),o.zr(this.GlobalData[c.o9]+28),(0,w.A)(this.GlobalData),this.GlobalData=null),this.status=8):O.R8(`player has already destroyed, taskId: ${this.taskId}`,lt,1827)}onVideoEnded(){this.videoEnded=!0,this.handleEnded()}onAudioEnded(){this.audioEnded=!0,this.handleEnded()}onCanvasUpdated(){this.updateCanvas=this.createCanvas();const it=(0,_.A)()&&D._7?this.updateCanvas.transferControlToOffscreen():this.updateCanvas;tt.VideoRenderThread.updateCanvas.transfer(it).invoke(this.taskId,it)}onFirstVideoRendered(){O.pq(`first video frame rendered, taskId: ${this.taskId}`,lt,1880),this.fire(N.NX)}onFirstAudioRendered(){O.pq(`first audio frame rendered, taskId: ${this.taskId}`,lt,1885),this.fire(N.NX)}onStutter(){this.stats.audioStutter++}onFirstVideoRenderedAfterUpdateCanvas(){this.updateCanvas&&(this.canvas&&this.options.container.removeChild(this.canvas),this.canvas=this.updateCanvas,this.options.container.appendChild(this.canvas),this.updateCanvas=null)}onTimeUpdate(it){this.fire(N.E9,[it])}onMSESeek(it){this.audio?this.audio.currentTime=it:this.video&&(this.video.currentTime=it)}async createVideoDecoderThread(){this.VideoDecoderThread||(this.VideoDecoderThread=await(0,x.pt)(P.A,{name:"VideoDecoderThread",disableWorker:Y.A.safari&&!Y.A.checkVersion(Y.A.version,"16.1",!0)},31138).run(),this.VideoDecoderThread.setLogLevel(tt.level))}static async startDemuxPipeline(){return tt.DemuxThreadReady?tt.DemuxThreadReady:tt.DemuxThreadReady=new(r())(async it=>{tt.IOThread=await(0,x.pt)(k.A,{name:"IOThread"},87243).run(),tt.IOThread.setLogLevel(tt.level),tt.DemuxerThread=await(0,x.pt)(T.A,{name:"DemuxerThread"},72480).run(),tt.DemuxerThread.setLogLevel(tt.level),it()})}static async startAudioPipeline(){return tt.AudioThreadReady?tt.AudioThreadReady:tt.AudioThreadReady=new(r())(async it=>{tt.audioContext=new(AudioContext||webkitAudioContext),R.A.audioWorklet&&await(0,W.A)(tt.audioContext,!D._7||Y.A.safari&&!Y.A.checkVersion(Y.A.version,"16.1",!0)?34268:5676),tt.AudioDecoderThread=await(0,x.pt)(b.A,{name:"AudioDecoderThread",disableWorker:Y.A.safari&&!Y.A.checkVersion(Y.A.version,"16.1",!0)},18667).run(),tt.AudioDecoderThread.setLogLevel(tt.level),tt.AudioRenderThread=await(0,x.pt)(H.A,{name:"AudioRenderThread",disableWorker:Y.A.safari&&!Y.A.checkVersion(Y.A.version,"16.1",!0)},59377).run(),tt.AudioRenderThread.setLogLevel(tt.level),it()})}static async startVideoRenderPipeline(){return tt.VideoThreadReady?tt.VideoThreadReady:tt.VideoThreadReady=new(r())(async it=>{tt.VideoRenderThread=await(0,x.pt)(M.A,{name:"VideoRenderThread",disableWorker:!(0,_.A)()},33968).run(),tt.VideoRenderThread.setLogLevel(tt.level),it()})}static async startMSEPipeline(){return tt.MSEThreadReady?tt.MSEThreadReady:tt.MSEThreadReady=new(r())(async it=>{tt.MSEThread=await(0,x.pt)(st.A,{name:"MSEThread",disableWorker:!R.A.workerMSE},25115).run(),tt.MSEThread.setLogLevel(tt.level),it()})}static async startPipelines(){await tt.startDemuxPipeline(),await tt.startAudioPipeline(),await tt.startVideoRenderPipeline(),await tt.startMSEPipeline(),O.pq("AVPlayer pipelines started",lt,2016)}static async stopPipelines(){tt.VideoRenderThread&&(await tt.VideoRenderThread.clear(),(0,x.nE)(tt.VideoRenderThread)),tt.AudioRenderThread&&(await tt.AudioRenderThread.clear(),(0,x.nE)(tt.AudioRenderThread)),tt.AudioDecoderThread&&(await tt.AudioDecoderThread.clear(),(0,x.nE)(tt.AudioDecoderThread)),tt.DemuxerThread&&(await tt.DemuxerThread.clear(),(0,x.nE)(tt.DemuxerThread)),tt.IOThread&&(await tt.IOThread.clear(),(0,x.nE)(tt.IOThread)),tt.MSEThread&&(await tt.MSEThread.clear(),(0,x.nE)(tt.MSEThread)),tt.AudioDecoderThread=null,tt.DemuxerThread=null,tt.IOThread=null,tt.audioContext=null,tt.MSEThread=null,O.pq("AVPlayer pipelines stopped",lt,2053)}static setLogLevel(it){tt.level=it,O.V$(it),tt.IOThread&&tt.IOThread.setLogLevel(it),tt.DemuxerThread&&tt.DemuxerThread.setLogLevel(it),tt.AudioDecoderThread&&tt.AudioDecoderThread.setLogLevel(it),tt.AudioRenderThread&&tt.AudioRenderThread.setLogLevel(it),tt.VideoRenderThread&&tt.VideoRenderThread.setLogLevel(it),tt.MSEThread&&tt.MSEThread.setLogLevel(it),O.pq(`set log level: ${it}`,lt,2080)}}(0,e.A)(tt,"level",O.rD),(0,e.A)(tt,"DemuxThreadReady",void 0),(0,e.A)(tt,"AudioThreadReady",void 0),(0,e.A)(tt,"VideoThreadReady",void 0),(0,e.A)(tt,"MSEThreadReady",void 0),(0,e.A)(tt,"IOThread",void 0),(0,e.A)(tt,"DemuxerThread",void 0),(0,e.A)(tt,"AudioDecoderThread",void 0),(0,e.A)(tt,"AudioRenderThread",void 0),(0,e.A)(tt,"VideoRenderThread",void 0),(0,e.A)(tt,"MSEThread",void 0),(0,e.A)(tt,"audioContext",void 0)},11628:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(134),i=t(84149),n=t(67593);class s{constructor(a){(0,e.A)(this,"videoRenderControlChannel",void 0),(0,e.A)(this,"audioRenderControlChannel",void 0),(0,e.A)(this,"muxerControlChannel",void 0),(0,e.A)(this,"videoRenderControlIPCPort",void 0),(0,e.A)(this,"audioRenderControlIPCPort",void 0),(0,e.A)(this,"muxerControlIPCPort",void 0),(0,e.A)(this,"observer",void 0),(0,e.A)(this,"visibilityHidden",void 0),(0,e.A)(this,"onVisibilityChange",void 0),(0,e.A)(this,"timeUpdateListenType",void 0),(0,e.A)(this,"enableAudioVideoSync",void 0),this.observer=a,this.videoRenderControlChannel=(0,n.A)(),this.audioRenderControlChannel=(0,n.A)(),this.muxerControlChannel=(0,n.A)(),this.videoRenderControlIPCPort=new i.Ay(this.videoRenderControlChannel.port2),this.audioRenderControlIPCPort=new i.Ay(this.audioRenderControlChannel.port2),this.muxerControlIPCPort=new i.Ay(this.muxerControlChannel.port2),this.enableAudioVideoSync=!0,this.videoRenderControlIPCPort.on(i.Wo,d=>{switch(d.method){case"ended":this.observer.onVideoEnded();break;case"updateCanvas":this.observer.onCanvasUpdated();break;case"firstRendered":this.observer.onFirstVideoRendered();break;case"firstRenderedAfterUpdateCanvas":this.observer.onFirstVideoRenderedAfterUpdateCanvas();break;case"syncPts":this.timeUpdateListenType===0&&this.observer.onTimeUpdate(d.params.pts)}}),this.audioRenderControlIPCPort.on(i.Wo,d=>{switch(d.method){case"syncPts":this.enableAudioVideoSync&&this.videoRenderControlIPCPort.notify("syncPts",d.params),this.timeUpdateListenType===1&&this.observer.onTimeUpdate(d.params.pts);break;case"ended":this.observer.onAudioEnded()}}),this.muxerControlIPCPort.on(i.Wo,d=>{d.method==="seek"&&this.observer.onMSESeek(d.params.time)}),this.onVisibilityChange=d=>{this.visibilityHidden=document.visibilityState==="hidden",this.videoRenderControlIPCPort.notify("skipRender",{skipRender:this.visibilityHidden})},this.visibilityHidden=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.onVisibilityChange)}getVideoRenderControlPort(){return this.videoRenderControlChannel.port1}getAudioRenderControlPort(){return this.audioRenderControlChannel.port1}getMuxerRenderControlPort(){return this.muxerControlChannel.port1}setTimeUpdateListenType(a){this.timeUpdateListenType=a}setEnableAudioVideoSync(a){this.enableAudioVideoSync=a}destroy(){this.videoRenderControlIPCPort&&this.videoRenderControlIPCPort.destroy(),this.audioRenderControlIPCPort&&this.audioRenderControlIPCPort.destroy(),this.muxerControlIPCPort&&this.muxerControlIPCPort.destroy(),this.onVisibilityChange&&(document.removeEventListener("visibilitychange",this.onVisibilityChange),this.onVisibilityChange=null),this.videoRenderControlIPCPort=this.audioRenderControlIPCPort=this.muxerControlIPCPort=this.videoRenderControlChannel=this.audioRenderControlChannel=this.muxerControlChannel=null}}},2368:(g,p,t)=>{t.d(p,{A:()=>d});var e=t(134),i=t(63939),n=t(50932),s=t(54058),r=t(38724);const a=200;class d{constructor(l){(0,e.A)(this,"timer",void 0),(0,e.A)(this,"interval",void 0),(0,e.A)(this,"data",void 0),(0,e.A)(this,"lastIncomingPacketCount",void 0),(0,e.A)(this,"shutterCount",void 0),(0,e.A)(this,"lastShutterCount",void 0),(0,e.A)(this,"isFirst",void 0),(0,e.A)(this,"max",void 0),(0,e.A)(this,"min",void 0),(0,e.A)(this,"targetPlaybackRate",void 0),(0,e.A)(this,"currentPlaybackRate",void 0),(0,e.A)(this,"playbackRateTimer",void 0),(0,e.A)(this,"options",void 0),this.options=l,this.interval=1e3,this.isFirst=!0,this.data=[],this.lastIncomingPacketCount=BigInt(0),this.shutterCount=0,this.lastShutterCount=0,this.max=1e3*l.max>>>0,this.min=1e3*l.min>>>0,n.M[15](this.options.jitterBuffer,this.min),n.M[15](this.options.jitterBuffer+4,this.max),l.lowLatencyStart&&n.M[15](this.options.jitterBuffer+4,this.min+a),this.targetPlaybackRate=1,this.currentPlaybackRate=1,this.playbackRateTimer=new s.A(()=>{if(this.currentPlaybackRate>this.targetPlaybackRate){const h=Math.max(this.targetPlaybackRate,this.currentPlaybackRate-.01);this.options.observer.onSetPlayRate(h),this.currentPlaybackRate=h}else if(this.currentPlaybackRate<this.targetPlaybackRate){const h=Math.min(this.targetPlaybackRate,this.currentPlaybackRate+.01);this.options.observer.onSetPlayRate(h),this.currentPlaybackRate=h}else this.playbackRateTimer.stop()},0,200),this.timer=new r.A(this.onTimer.bind(this),1e3,this.interval)}start(){this.timer.start(),this.isFirst=!0,this.lastIncomingPacketCount=i.f[17](this.options.stats+24)+i.f[17](this.options.stats+112),this.shutterCount=0,this.lastShutterCount=i.f[15](this.options.stats+268)+i.f[15](this.options.stats+264),this.computePlayRate()}stop(){this.timer.stop(),this.data.length=0,this.isFirst=!0,this.playbackRateTimer.isStarted()&&(this.playbackRateTimer.stop(),this.targetPlaybackRate=this.currentPlaybackRate=1,this.options.observer.onSetPlayRate(1))}reset(){this.data.length=0,this.isFirst=!0,this.lastIncomingPacketCount=i.f[17](this.options.stats+24)+i.f[17](this.options.stats+112),this.shutterCount=0,this.lastShutterCount=i.f[15](this.options.stats+268)+i.f[15](this.options.stats+264),this.targetPlaybackRate=this.currentPlaybackRate=1}setPlayRate(l){this.targetPlaybackRate=l,this.options.useMse?(this.options.observer.onSetPlayRate(this.targetPlaybackRate),this.currentPlaybackRate=this.targetPlaybackRate):this.currentPlaybackRate===l||this.playbackRateTimer.isStarted()||this.playbackRateTimer.start()}computePlayRate(){let l=i.f[15](this.options.stats+228)?i.f[15](this.options.stats+32)/i.f[15](this.options.stats+228)*1e3:i.f[15](this.options.stats+216)?i.f[15](this.options.stats+120)/i.f[15](this.options.stats+216)*1e3:0;l<i.f[15](this.options.jitterBuffer)>>1&&l<2?this.setPlayRate(.8):l<i.f[15](this.options.jitterBuffer)-a&&l<2?this.setPlayRate(.95):l>i.f[15](this.options.jitterBuffer+4)+a?this.setPlayRate(1.05):this.setPlayRate(1),l>this.max<<1&&this.options.observer.onCroppingBuffer(i.f[15](this.options.jitterBuffer+4))}process(){const l=this.data.reduce((v,y,A)=>v+y*(A+1),0)/55,h=this.data.reduce((v,y)=>v+Math.pow(y-l,2),0)/this.data.length,o=Math.sqrt(h),u=Math.round(l/(this.interval/1e3)),f=i.f[15](this.options.stats+216)+i.f[15](this.options.stats+228);u<f>>1||this.shutterCount>3?(n.M[15](this.options.jitterBuffer,Math.min(2*i.f[15](this.options.jitterBuffer),this.max-a)),n.M[15](this.options.jitterBuffer+4,Math.min(2*i.f[15](this.options.jitterBuffer+4),this.max))):u>=f&&o<50?(n.M[15](this.options.jitterBuffer,Math.max(i.f[15](this.options.jitterBuffer)-a,this.min)),n.M[15](this.options.jitterBuffer+4,Math.max(i.f[15](this.options.jitterBuffer+4)-a,this.min+a))):o>100?(n.M[15](this.options.jitterBuffer,Math.min(i.f[15](this.options.jitterBuffer)+a,this.max-a)),n.M[15](this.options.jitterBuffer+4,Math.min(i.f[15](this.options.jitterBuffer+4)+a,this.max))):o<20?i.f[15](this.options.jitterBuffer)===this.min?n.M[15](this.options.jitterBuffer+4,Math.max(i.f[15](this.options.jitterBuffer+4)-a,this.min+a)):n.M[15](this.options.jitterBuffer,Math.max(i.f[15](this.options.jitterBuffer)-a,this.min)):i.f[15](this.options.jitterBuffer+4)===this.max?n.M[15](this.options.jitterBuffer,Math.min(i.f[15](this.options.jitterBuffer)+a,this.max-a)):n.M[15](this.options.jitterBuffer+4,Math.min(i.f[15](this.options.jitterBuffer+4)+a,this.max)),this.computePlayRate(),n.M[19](this.options.stats+256,o)}onTimer(){const l=i.f[17](this.options.stats+24)+i.f[17](this.options.stats+112);this.isFirst?this.isFirst=!1:this.data.push(0|Number(l-this.lastIncomingPacketCount&0xffffffffn)),this.lastIncomingPacketCount=l,i.f[15](this.options.stats+268)+i.f[15](this.options.stats+264)>this.lastShutterCount?this.shutterCount++:this.shutterCount=0,this.lastShutterCount=i.f[15](this.options.stats+268)+i.f[15](this.options.stats+264),this.data.length>10&&this.data.shift(),this.data.length===10&&this.process()}}},78201:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(134),i=t(63939),n=t(50932),s=t(54058);class r{constructor(d){(0,e.A)(this,"stats",void 0),(0,e.A)(this,"timer",void 0),(0,e.A)(this,"videoFrameRenderCount",void 0),(0,e.A)(this,"videoFrameDecodeCount",void 0),(0,e.A)(this,"audioFrameRenderCount",void 0),(0,e.A)(this,"audioFrameDecodeCount",void 0),(0,e.A)(this,"videoPacketBytes",void 0),(0,e.A)(this,"audioPacketBytes",void 0),(0,e.A)(this,"bufferReceiveBytes",void 0),this.stats=d,this.timer=new s.A(this.onTimer.bind(this),1e3,1e3)}reset(){this.videoFrameRenderCount=i.f[17](this.stats+160),this.videoFrameDecodeCount=i.f[17](this.stats+144),this.audioFrameRenderCount=i.f[17](this.stats+72),this.audioFrameDecodeCount=i.f[17](this.stats+56),this.videoPacketBytes=i.f[17](this.stats+104),this.audioPacketBytes=i.f[17](this.stats+16),this.bufferReceiveBytes=i.f[17](this.stats+192)}start(){this.reset(),this.timer.start()}stop(){this.timer.stop()}onTimer(){n.M[15](this.stats+232,0),n.M[15](this.stats+236,0),n.M[15](this.stats+240,0),n.M[15](this.stats+244,0),n.M[15](this.stats+212,0|Number(i.f[17](this.stats+160)-this.videoFrameRenderCount&0xffffffffn)),n.M[15](this.stats+208,0|Number(i.f[17](this.stats+144)-this.videoFrameDecodeCount&0xffffffffn)),n.M[15](this.stats+224,0|Number(i.f[17](this.stats+72)-this.audioFrameRenderCount&0xffffffffn)),n.M[15](this.stats+220,0|Number(i.f[17](this.stats+56)-this.audioFrameDecodeCount&0xffffffffn)),n.M[15](this.stats+204,0|Number(i.f[17](this.stats+104)-this.videoPacketBytes&0xffffffffn)),n.M[15](this.stats+200,0|Number(i.f[17](this.stats+16)-this.audioPacketBytes&0xffffffffn)),n.M[15](this.stats+248,0|Number(i.f[17](this.stats+192)-this.bufferReceiveBytes&0xffffffffn)),document.visibilityState==="visible"&&(i.f[15](this.stats+212)<.5*i.f[15](this.stats+216)||i.f[15](this.stats+244)>6e3/i.f[15](this.stats+216))&&n.M[15](this.stats+268,i.f[15](this.stats+268)+1),this.reset()}}},28090:(g,p,t)=>{t.d(p,{CN:()=>s,E9:()=>h,F5:()=>e,IY:()=>o,NN:()=>r,NX:()=>u,Nz:()=>c,S2:()=>i,d6:()=>n,hV:()=>d,mQ:()=>l,yd:()=>a});const e="loading",i="loaded",n="playing",s="played",r="paused",a="stopped",d="ended",c="seeking",l="seeked",h="time",o="resume",u="firstVideoRendered"},67593:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(26429),i=t(42577);function n(){return e._7?new MessageChannel:new i.A}},76750:(g,p,t)=>{function e(){if(typeof MediaSource=="function")return MediaSource;if(typeof ManagedMediaSource=="function")return ManagedMediaSource;throw new Error("not support mse")}t.d(p,{A:()=>e})},47595:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(95797),i=t(44690),n=t(86834);function s(){let r=e.A.offscreenCanvas;return i.A.mac&&n.A.safari&&(i.A.version<"12"||n.A.version<"17")&&(r=!1),r}},25115:(g,p,t)=>{t.d(p,{A:()=>_});var e=t(54001),i=t.n(e),n=t(14686),s=t(61499),r=t(63939),a=t(9599),d=t(29170),c=t(50932),l=t(12264),h=t(44315),o=t(44527),u=t(9705),f=t(84149),v=t(4624),y=t(35336),A=t(92174),w=t(69765),k=t(71766),T=t(39148),P=t(60120),b=t(84290),x=t(77231),I=t(44328),S=t(86932),z=t(85224),V=t(10333),L=t(50400),C=t(67672),F=t(71517),H=t(37837),M=t(86834),G=t(85103),D=t(13724),W=t(43607),X=t(65977),U=t(76750),Q="src\\avplayer\\mse\\MSEPipeline.ts";function N(O,R,j,B){if(R!==B)return!0;let Y=!1;for(let Z=0;Z<R;Z++)if(r.f[2](O+Z)!==r.f[2](j+Z)){Y=!0;break}return Y}class _ extends o.A{constructor(){super()}async syncToKeyframe(R){let j=!0;if(R.video)for(;;){if(R.video.backPacket=await this.pullAVPacket(R.video,R),R.video.backPacket<0){R.video.packetEnded=!0,R.video.backPacket=0;break}if(R.audio&&!R.audio.packetEnded&&(!R.audio.backPacket||(0,I.k)(r.f[17](R.audio.backPacket+16),(0,d.A)(R.audio.backPacket+72,a.P),x.i0)<(0,I.k)(r.f[17](R.video.backPacket+16),(0,d.A)(R.video.backPacket+72,a.P),x.i0)))for(;;){if(R.audio.backPacket>0&&R.avpacketPool.release(R.audio.backPacket),R.audio.backPacket=await this.pullAVPacket(R.audio,R),R.audio.backPacket<0){R.audio.packetEnded=!0,R.audio.backPacket=0;break}if((0,I.k)(r.f[17](R.audio.backPacket+16),(0,d.A)(R.audio.backPacket+72,a.P),x.i0)>(0,I.k)(r.f[17](R.video.backPacket+16),(0,d.A)(R.video.backPacket+72,a.P),x.i0))break}if(1&r.f[15](R.video.backPacket+36))break;j=!1,R.avpacketPool.release(R.video.backPacket)}return j}getSourceOpenHandler(R){return async()=>{await this.syncToKeyframe(R);const j=[];R.audio&&(R.audio.track.setSourceBuffer(this.createSourceBuffer(R.mediaSource,R.audio.oformatContext.streams[0].codecpar[s.o9])),R.audio.enableRawMpeg||(A.ho(R.audio.oformatContext,{paddingZero:!0}),A.bx(R.audio.oformatContext)),j.push(this.startMux(R.audio,R))),R.video&&(R.video.track.setSourceBuffer(this.createSourceBuffer(R.mediaSource,R.video.oformatContext.streams[0].codecpar[s.o9])),R.video.enableRawMpeg||(A.ho(R.video.oformatContext,{paddingZero:!0}),A.bx(R.video.oformatContext)),j.push(this.startMux(R.video,R))),await i().all(j);let B=!1,Y=!1;R.audio&&(R.audio.backPacket=await this.pullAVPacket(R.audio,R),R.audio.backPacket>0?(B=!0,R.audio.frontPacket=await this.pullAVPacket(R.audio,R),R.audio.frontPacket>0?R.audio.frontBuffered=!0:(R.audio.frontPacket=0,R.audio.packetEnded=!0)):R.audio.packetEnded=!0,R.audio.enableRawMpeg||R.audio.oformatContext.ioWriter.flush(),R.audio.track.addBuffer(R.audio.bufferQueue.flush())),R.video&&(R.video.backPacket=await this.pullAVPacket(R.video,R),R.video.backPacket>0?(Y=!0,R.video.frontPacket=await this.pullAVPacket(R.video,R),R.video.frontPacket>0?R.video.frontBuffered=!0:(R.video.frontPacket=0,R.video.packetEnded=!0)):R.video.packetEnded=!0,R.video.enableRawMpeg||R.video.oformatContext.ioWriter.flush(),R.video.track.addBuffer(R.video.bufferQueue.flush())),R.audio&&(B?(this.createLoop(R.audio,R),R.audio.loop.start()):R.audio.track.end()),R.video&&(Y?(this.createLoop(R.video,R),R.video.loop.start()):R.video.track.end()),await new D.A(.1);let Z=0;R.audio?Z=R.video?Math.max(R.audio.track.getBufferedStart(),R.video.track.getBufferedStart()):R.audio.track.getBufferedStart():R.video&&(Z=R.video.track.getBufferedStart()),(M.A.safari||Z>.2)&&R.controlIPCPort.notify("seek",{time:Z})}}createSourceBuffer(R,j){let B="";return r.f[15](j)===1?B=(0,z.A)(j):r.f[15](j)===0&&(B=(0,V.A)(j)),B||v.h2("invalid stream",Q,343),R.addSourceBuffer(B)}mixExtradata(R,j,B,Y){j.oformatContext.streams[0].codecpar.codecId;const Z=j.oformatContext.streams[0].codecpar;Z.extradata&&(0,H.Eb)(Z.extradata),Z.extradata=(0,H.sY)(Y),(0,n.Mr)(Z.extradata,B,Y),Z.extradataSize=Y}async pullAVPacket(R,j){const B=R.pullQueue;if(B.ended&&!B.queue.length)return-1048576;const Y=B.queue.length?B.queue.shift():await R.pullIPC.request("pull");if(Y<0)return B.ended=!0,-1048576;if(r.f[17](Y+16)<B.lastDTS&&v.R8(`got packet with dts ${r.f[17](Y+16)}, which is earlier then the last packet(${B.lastDTS})`,Q,386),R.type==="audio"&&r.f[17](Y+16)>0)c.M[17](Y+8,r.f[17](Y+16));else if(R.type==="video"&&!j.isLive)if(1&r.f[15](Y+36))if(r.f[17](Y+8)<B.lastPTS){v.R8(`got packet with pts ${r.f[17](Y+8)}, which is earlier then the last packet(${B.lastPTS}), try to fix it!`,Q,400),c.M[17](Y+8,B.lastPTS+(r.f[17](Y+16)-B.lastDTS));const Z=await R.pullIPC.request("pull");if(Z<0)B.ended=!0;else{B.queue.push(Z);let rt=r.f[17](Z+8);const ot=r.f[17](Z+8);for(;;){const ft=await R.pullIPC.request("pull");if(ft<0){B.ended=!0;break}if(B.queue.push(ft),r.f[17](ft+8)>ot)break;rt=W.jk(rt,r.f[17](ft+8))}rt<r.f[17](Y+8)&&(B.diff=r.f[17](Y+16)-B.lastDTS)}}else B.diff=BigInt(0);else c.M[17](Y+8,r.f[17](Y+8)+B.diff);return r.f[17](Y+8)>B.lastPTS&&(B.lastPTS=r.f[17](Y+8)),B.lastDTS=r.f[17](Y+16),R.type==="audio"&&B.useSampleRateTimeBase&&(B.frameCount===x.Dh?(B.frameCount=(0,I.k)(r.f[17](Y+16),(0,d.A)(Y+72,a.P),R.oformatContext.streams[0].timeBase),c.M[17](Y+16,B.frameCount),c.M[17](Y+8,B.frameCount)):(B.frameCount=B.frameCount+BigInt(r.f[15](R.codecpar+144)>>>0),c.M[17](Y+16,B.frameCount),c.M[17](Y+8,B.frameCount)),(0,n.Mr)(Y+72,R.oformatContext.streams[0].timeBase[s.o9],8)),Y}writeAVPacket(R,j,B=!1){if(j.enableRawMpeg){if(!j.timestampOffsetUpdated){const Y=(0,I.k)(r.f[17](R+8),(0,d.A)(R+72,a.P),x.i0);j.track.updateTimestampOffset((0|Number(0xffffffffn&Y))/1e3),j.timestampOffsetUpdated=!0}j.bufferQueue.push((0,n.s3)(r.f[20](R+24),r.f[15](R+28)).slice())}else A.XA(j.oformatContext,R),B&&j.oformatContext.ioWriter.flush()}swap(R,j){if(R.backPacket&&j.avpacketPool.release(R.backPacket),R.backPacket=0,!R.frontBuffered)return!1;R.backPacket=R.frontPacket,R.frontPacket=0,R.frontBuffered=!1;const B=(0,S.A)();return this.pullAVPacket(R,j).then(Y=>{if(Y<0)return R.packetEnded=!0,void(R.frontPacket=0);const Z=(0,S.A)()-B;Z>5&&(R.startTimestamp+=BigInt(Math.floor(Z))),R.frontPacket=Y,R.frontBuffered=!0,R.seekSync&&(R.seekSync(),R.seekSync=null),R.backPacket||this.swap(R,j)}),!0}createLoop(R,j){R.loop=new T.A(()=>{const B=R.track.getBufferedEnd()-(j.currentTime+((0,S.A)()-j.currentTimeNTP)/1e3);if(B>1*(j.playRate>BigInt(100)?Number(j.playRate)/100:1))return void R.loop.emptyTask();if(!R.backPacket)return void(R.packetEnded&&!R.frontPacket?(R.ended=!0,R.loop.stop(),R.enableRawMpeg||(A.dJ(R.oformatContext),A.bX(R.oformatContext)),R.bufferQueue.size&&R.track.addBuffer(R.bufferQueue.flush()),R.track.end()):R.loop.emptyTask());let Y=R.backPacket;const Z=(0,I.k)(r.f[17](Y+16),(0,d.A)(Y+72,a.P),x.i0);if(j.enableJitterBuffer&&(r.f[15](j.stats+228)?r.f[15](j.stats+32)/r.f[15](j.stats+228)*1e3:r.f[15](j.stats+216)?r.f[15](j.stats+120)/r.f[15](j.stats+216)*1e3:0)<=r.f[15](j.jitterBuffer)&&this.setPlayRate(j.taskId,1),Z*BigInt(100)/j.playRate+R.startTimestamp-BigInt(Math.floor((0,S.A)()))<=0||B<.5*(j.playRate>BigInt(100)?Number(j.playRate)/100:1)){R.track.isPaused()&&R.track.enqueue(),c.M[15](Y+32,R.oformatContext.streams[0].index);const rt=(0,F.rU)(Y,1);rt&&N(R.oformatContext.streams[0].codecpar.extradata,R.oformatContext.streams[0].codecpar.extradataSize,r.f[20](rt),r.f[15](rt+4))&&this.mixExtradata(Y,R,r.f[20](rt),r.f[15](rt+4)),this.writeAVPacket(Y,R,!0),R.track.addBuffer(R.bufferQueue.flush());const ot=R.oformatContext.streams[0].codecpar.codecType;if(ot===0?(c.M[17](j.stats+144,r.f[17](j.stats+144)+BigInt(1)),c.M[17](j.stats+160,r.f[17](j.stats+160)+BigInt(1))):ot===1&&(c.M[17](j.stats+56,r.f[17](j.stats+56)+BigInt(1)),c.M[17](j.stats+72,r.f[17](j.stats+72)+BigInt(1))),j.playRate!==j.targetRate&&(R.startTimestamp=BigInt(Math.floor((0,S.A)()))-Z*BigInt(100)/j.targetRate,j.playRate=j.targetRate),R.packetEnded&&!R.frontPacket)return R.ended=!0,R.loop.stop(),R.enableRawMpeg||(A.dJ(R.oformatContext),A.bX(R.oformatContext)),R.bufferQueue.size&&R.track.addBuffer(R.bufferQueue.flush()),void R.track.end();this.swap(R,j)}else R.loop.emptyTask()},0,0)}async startMux(R,j){let B,Y=x.Dh,Z=x.Dh,rt=BigInt(0);const ot=R.oformatContext.streams[0].timeBase;for(R.backPacket>0&&(Y=r.f[17](R.backPacket+16),Z=r.f[17](R.backPacket+8),c.M[15](R.backPacket+32,R.oformatContext.streams[0].index),this.writeAVPacket(R.backPacket,R),j.avpacketPool.release(R.backPacket),R.backPacket=0);Y<BigInt(0)||(0,I.k)(rt-Y,ot,x.i0)<j.cacheDuration;){if(B=await this.pullAVPacket(R,j),B<0){R.packetEnded=!0;break}if(rt=r.f[17](B+16),Y<BigInt(0)&&(Y=rt,Z=r.f[17](B+8)),r.f[17](B+8)<Z&&(Z=r.f[17](B+8)),j.video&&j.video.streamIndex===r.f[15](B+32)){const ft=(0,F.rU)(B,1);ft&&N(R.oformatContext.streams[0].codecpar.extradata,R.oformatContext.streams[0].codecpar.extradataSize,r.f[20](ft),r.f[15](ft+4))&&this.mixExtradata(B,R,r.f[20](ft),r.f[15](ft+4))}c.M[15](B+32,R.oformatContext.streams[0].index),this.writeAVPacket(B,R),j.avpacketPool.release(B)}Z!==x.Dh&&R.startPTS<=BigInt(0)&&(R.startPTS=Z),R.pullQueue.diff=BigInt(0),j.currentTimeNTP=(0,S.A)(),j.currentTime=0,R.startTimestamp=BigInt(Math.floor((0,S.A)()))-(0,I.k)(rt,ot,x.i0)*BigInt(100)/j.playRate}resetResource(R,j){R.bufferQueue.flush();const B=new w.A({fragmentMode:1,fragment:!0,fastOpen:!0,movMode:0,defaultBaseIsMoof:!0});R.oformatContext.oformat=B;const Y=new P.A;Y.onQuotaExceededError=()=>{R.startTimestamp-=BigInt(100)},Y.onEnded=()=>{j.audio&&!j.audio.ended||j.video&&!j.video.ended||(j.mediaSource.endOfStream(),v.pq(`muxer ended, taskId: ${j.taskId}`,Q,718))},R.track=Y,R.packetEnded=!1,R.ended=!1,R.startTimestamp=BigInt(0),R.frontBuffered=!1,R.seekSync=null,R.loop&&(R.loop.destroy(),R.loop=null),R.frontPacket&&(j.avpacketPool.release(R.frontPacket),R.frontPacket=0),R.backPacket&&(j.avpacketPool.release(R.backPacket),R.backPacket=0),R.pullQueue.ended=!1,R.pullQueue.index=0,R.pullQueue.frameCount=x.Dh,R.pullQueue.lastPTS=BigInt(0),R.pullQueue.lastDTS=BigInt(0),R.pullQueue.diff=BigInt(0)}async addStream(R,j,B,Y,Z,rt){const ot=this.tasks.get(R);if(ot){const ft=new y.A(1048576),ut=(0,h.f)(),At=new w.A({fragmentMode:1,fragment:!0,fastOpen:!0,movMode:0,defaultBaseIsMoof:!0}),vt=new L.A;ft.onFlush=mt=>(vt.push(mt.slice()),0),ft.onSeek=mt=>vt.seek(mt)?0:u.lh;const et=ut.createStream();(0,k.Yi)(et.codecpar[s.o9],B),r.f[15](B+4)===86017&&(et.codecpar.codecTag=(0,X.A)(".mp3"));const st=r.f[15](B)===1&&r.f[15](B+144)&&!ot.isLive&&(0,I.Vt)(Y)>(0,I.lb)({num:1,den:r.f[15](B+136)});st?(et.timeBase.den=r.f[15](B+136),et.timeBase.num=1):(et.timeBase.den=r.f[15](Y+4),et.timeBase.num=r.f[15](Y)),ut.oformat=At,ut.ioWriter=ft;const at=new P.A,ct={type:"audio",codecpar:B,ioWriter:ft,oformatContext:ut,oformat:At,track:at,bufferQueue:vt,streamIndex:j,pullIPC:new f.Ay(rt),loop:null,frontPacket:0,backPacket:0,frontBuffered:!1,startTimestamp:BigInt(0),packetEnded:!1,ended:!1,seekSync:null,startPTS:Z,pullQueue:{queue:[],index:0,frameCount:x.Dh,diff:BigInt(0),lastPTS:BigInt(0),lastDTS:BigInt(0),ended:!1,useSampleRateTimeBase:st},enableRawMpeg:r.f[15](B+4)===86017&&!M.A.firefox,timestampOffsetUpdated:!1};at.onQuotaExceededError=()=>{ct.startTimestamp-=BigInt(100)},at.onEnded=()=>{ot.audio&&!ot.audio.ended||ot.video&&!ot.video.ended||(ot.mediaSource.endOfStream(),v.pq(`muxer ended, taskId: ${ot.taskId}`,Q,851))},r.f[15](B)===1?(ot.audio=ct,c.M[15](ot.stats+4,r.f[15](B+136)),c.M[15](ot.stats,r.f[15](B+116))):r.f[15](B)===0&&(ct.type="video",ot.video=ct,c.M[15](ot.stats+84,r.f[15](B+56)),c.M[15](ot.stats+88,r.f[15](B+60)),r.f[15](ot.stats+84)*r.f[15](ot.stats+88)>8294400&&M.A.safari&&(ot.cacheDuration=W.T9(BigInt(3e3),ot.cacheDuration)))}else v.h2("task not found",Q,872)}async pause(R){const j=this.tasks.get(R);var B,Y,Z,rt;j?((B=j.audio)!==null&&B!==void 0&&B.loop||(Y=j.video)!==null&&Y!==void 0&&Y.loop||v.h2("task has not played",Q,880),j.pausing=!0,j.pauseTimestamp=(0,S.A)(),(Z=j.audio)===null||Z===void 0||Z.loop.stop(),(rt=j.video)===null||rt===void 0||rt.loop.stop()):v.h2("task not found",Q,888)}async unpause(R){const j=this.tasks.get(R);var B,Y;j?((B=j.audio)!==null&&B!==void 0&&B.loop||(Y=j.video)!==null&&Y!==void 0&&Y.loop||v.h2("task has not played",Q,896),j.pausing=!1,j.seeking||(j.audio&&(j.audio.startTimestamp+=BigInt(Math.floor((0,S.A)()-j.pauseTimestamp)),j.audio.loop.start()),j.video&&(j.video.startTimestamp+=BigInt(Math.floor((0,S.A)()-j.pauseTimestamp)),j.video.loop.start()))):v.h2("task not found",Q,913)}async beforeSeek(R){const j=this.tasks.get(R);if(j){var B,Y;const Z=[];j.audio&&(j.audio.ended||j.audio.frontBuffered||Z.push(new(i())(rt=>{j.audio.seekSync=rt}))),j.video&&(j.video.ended||j.video.frontBuffered||Z.push(new(i())(rt=>{j.video.seekSync=rt}))),await i().all(Z),j.seeking=!0,(B=j.audio)===null||B===void 0||B.loop.stop(),(Y=j.video)===null||Y===void 0||Y.loop.stop(),j.audio&&(j.audio.enableRawMpeg||A.bX(j.audio.oformatContext),j.audio.bufferQueue.flush(),M.A.safari&&await new(i())(rt=>{j.audio.track.removeAllBuffer(()=>{rt()})}),j.audio.track.reset(),j.audio.packetEnded=!1,j.audio.timestampOffsetUpdated=!1,j.audio.backPacket&&(j.avpacketPool.release(j.audio.backPacket),j.audio.backPacket=0),j.audio.frontPacket&&(j.avpacketPool.release(j.audio.frontPacket),j.audio.frontPacket=0),j.audio.pullQueue.queue.length&&j.audio.pullQueue.queue.forEach(rt=>{j.avpacketPool.release(rt)}),j.audio.pullQueue.queue.length=0,j.audio.pullQueue.ended=!1,j.audio.pullQueue.index=0,j.audio.pullQueue.lastPTS=BigInt(0),j.audio.pullQueue.lastDTS=BigInt(0),j.audio.pullQueue.diff=BigInt(0),j.audio.pullQueue.frameCount=x.Dh),j.video&&(j.video.enableRawMpeg||A.bX(j.video.oformatContext),j.video.bufferQueue.flush(),M.A.safari&&await new(i())(rt=>{j.video.track.removeAllBuffer(()=>{rt()})}),j.video.track.reset(),j.video.packetEnded=!1,j.video.timestampOffsetUpdated=!1,j.video.backPacket&&(j.avpacketPool.release(j.video.backPacket),j.video.backPacket=0),j.video.frontPacket&&(j.avpacketPool.release(j.video.frontPacket),j.video.frontPacket=0),j.video.pullQueue.queue.length&&j.video.pullQueue.queue.forEach(rt=>{j.avpacketPool.release(rt)}),j.video.pullQueue.queue.length=0,j.video.pullQueue.ended=!1,j.video.pullQueue.index=0,j.video.pullQueue.diff=BigInt(0),j.video.pullQueue.lastPTS=BigInt(0),j.video.pullQueue.lastDTS=BigInt(0))}}async afterSeek(R,j){const B=this.tasks.get(R);if(B){let Y=j,Z=await this.syncToKeyframe(B);for(B.audio&&B.audio.backPacket>0&&(j<BigInt(0)&&(Y=(0,I.k)(r.f[17](B.audio.backPacket+8)-B.audio.startPTS,(0,d.A)(B.audio.backPacket+72,a.P),x.i0)),c.M[15](B.audio.backPacket+32,B.audio.oformatContext.streams[0].index),this.writeAVPacket(B.audio.backPacket,B.audio),B.avpacketPool.release(B.audio.backPacket),B.audio.backPacket=0),B.video&&B.video.backPacket>0&&((!Z||j<BigInt(0))&&(Y=(0,I.k)(r.f[17](B.video.backPacket+8)-B.video.startPTS,(0,d.A)(B.video.backPacket+72,a.P),x.i0)),c.M[15](B.video.backPacket+32,B.video.oformatContext.streams[0].index),this.writeAVPacket(B.video.backPacket,B.video),B.avpacketPool.release(B.video.backPacket),B.video.backPacket=0);;){if(B.audio&&!B.audio.packetEnded){if(B.audio.backPacket=await this.pullAVPacket(B.audio,B),B.audio.backPacket<0&&(B.audio.packetEnded=!0,B.audio.backPacket=0,!B.video||B.video.packetEnded)||(Y<BigInt(0)&&(Y=(0,I.k)(r.f[17](B.audio.backPacket+8)-B.audio.startPTS,(0,d.A)(B.audio.backPacket+72,a.P),x.i0)),!((0,I.k)(r.f[17](B.audio.backPacket+8)-B.audio.startPTS,(0,d.A)(B.audio.backPacket+72,a.P),x.i0)<Y+B.cacheDuration)))break;c.M[15](B.audio.backPacket+32,B.audio.oformatContext.streams[0].index),this.writeAVPacket(B.audio.backPacket,B.audio),B.audio.enableRawMpeg||A.bX(B.audio.oformatContext),B.audio.track.addBuffer(B.audio.bufferQueue.flush()),B.avpacketPool.release(B.audio.backPacket),B.audio.backPacket=0}if(B.video&&!B.video.packetEnded){if(B.video.backPacket=await this.pullAVPacket(B.video,B),B.video.backPacket<0&&(B.video.packetEnded=!0,B.video.backPacket=0,!B.audio||B.audio.packetEnded)||!((0,I.k)(r.f[17](B.video.backPacket+8)-B.video.startPTS,(0,d.A)(B.video.backPacket+72,a.P),x.i0)<Y+B.cacheDuration))break;c.M[15](B.video.backPacket+32,B.video.oformatContext.streams[0].index),this.writeAVPacket(B.video.backPacket,B.video),B.video.enableRawMpeg||A.bX(B.video.oformatContext),B.video.track.addBuffer(B.video.bufferQueue.flush()),B.avpacketPool.release(B.video.backPacket),B.video.backPacket=0}}const rt=[];B.audio&&(B.audio.enableRawMpeg||A.bX(B.audio.oformatContext),rt.push(new(i())(At=>{B.audio.track.addBuffer(B.audio.bufferQueue.flush(),()=>{At()})}))),B.video&&(B.video.enableRawMpeg||A.bX(B.video.oformatContext),rt.push(new(i())(At=>{B.video.track.addBuffer(B.video.bufferQueue.flush(),()=>{At()})}))),await i().all(rt),B.audio&&!B.audio.packetEnded&&(B.audio.backPacket<=0&&(B.audio.backPacket=await this.pullAVPacket(B.audio,B),B.audio.backPacket<0&&(B.audio.packetEnded=!0,B.audio.backPacket=0)),B.audio.packetEnded||(B.audio.frontPacket=await this.pullAVPacket(B.audio,B),B.audio.frontPacket<0?(B.audio.frontPacket=0,B.audio.packetEnded=!0,B.audio.frontBuffered=!1):(B.audio.packetEnded=!1,B.audio.frontBuffered=!0),B.audio.startTimestamp=BigInt(Math.floor((0,S.A)()))-(Y+B.cacheDuration+(0,I.k)(B.audio.startPTS,B.audio.oformatContext.streams[0].timeBase,x.i0))*BigInt(100)/B.playRate,B.pausing?B.pauseTimestamp=(0,S.A)():B.audio.loop.start())),B.video&&!B.video.packetEnded&&(B.video.backPacket<=0&&(B.video.backPacket=await this.pullAVPacket(B.video,B),B.video.backPacket<0&&(B.video.packetEnded=!0,B.video.backPacket=0)),B.video.packetEnded||(B.video.frontPacket=await this.pullAVPacket(B.video,B),B.video.frontPacket<0?(B.video.packetEnded=!0,B.video.frontBuffered=!1,B.video.frontPacket=0):(B.video.packetEnded=!1,B.video.frontBuffered=!0),B.video.startTimestamp=BigInt(Math.floor((0,S.A)()))-(Y+B.cacheDuration+(0,I.k)(B.video.startPTS,B.video.oformatContext.streams[0].timeBase,x.i0))*BigInt(100)/B.playRate,B.pausing?B.pauseTimestamp=(0,S.A)():B.video.loop.start())),Z||await new D.A(.5);let ot=0,ft=0;B.audio?B.video?(ot=Math.max(B.audio.track.getBufferedStart(),B.video.track.getBufferedStart()),ft=Math.min(B.audio.track.getBufferedEnd(),B.video.track.getBufferedEnd())):(ot=B.audio.track.getBufferedStart(),ft=B.audio.track.getBufferedEnd()):B.video&&(ot=B.video.track.getBufferedStart(),ft=B.video.track.getBufferedEnd());let ut=(0,G.yw)(Y);return ut>=ot&&ut<=ft||(ut=Math.abs(ut-ot)>Math.abs(ut-ft)?ft:ot),B.currentTimeNTP=(0,S.A)(),B.currentTime=ut,B.seeking=!1,ut}}async setPlayRate(R,j){const B=this.tasks.get(R);if(B){if(B.enableJitterBuffer){let Y=r.f[15](B.stats+228)?r.f[15](B.stats+32)/r.f[15](B.stats+228)*1e3:r.f[15](B.stats+216)?r.f[15](B.stats+120)/r.f[15](B.stats+216)*1e3:0;Y&&Y<=r.f[15](B.jitterBuffer)&&(j=1)}B.targetRate=BigInt(Math.floor(Math.floor(100*j))),B.enableJitterBuffer||(B.audio&&B.audio.loop.resetInterval(),B.video&&B.video.loop.resetInterval())}else v.h2("task not found",Q,1269)}async restart(R){const j=this.tasks.get(R);if(j){j.audio&&this.resetResource(j.audio,j),j.video&&this.resetResource(j.video,j);const B=new((0,U.A)());B.onsourceopen=this.getSourceOpenHandler(j),j.mediaSource=B}}async setCurrentTime(R,j){const B=this.tasks.get(R);B?(B.audio&&B.audio.track.removeBuffer(j),B.video&&r.f[15](B.stats+92)>0&&(B.video.track.setMediaBufferMax(Math.max(B.video.track.getMediaBufferMax(),Math.ceil(r.f[15](B.stats+92)/1e3*1.5),10)),B.video.track.removeBuffer(j)),B.currentTime=j,B.currentTimeNTP=(0,S.A)()):v.h2("task not found",Q,1311)}async getMediaSource(R){const j=this.tasks.get(R);if(j)return j.mediaSource.handle?(C.YO(arguments[arguments.length-1])&&arguments[arguments.length-1].push(j.mediaSource.handle),j.mediaSource.handle):j.mediaSource;v.h2("task not found",Q,1329)}createTask(R){const j=new f.Ay(R.controlPort),B=new MediaSource||new ManagedMediaSource,Y={...R,mediaSource:B,audio:null,video:null,playRate:BigInt(100),targetRate:BigInt(100),pauseTimestamp:0,seeking:!1,pausing:!1,controlIPCPort:j,currentTime:0,currentTimeNTP:0,cacheDuration:BigInt(Math.floor(500)),avpacketPool:new b.A((0,d.A)(R.avpacketList,l.A),R.avpacketListMutex)};return this.tasks.set(R.taskId,Y),B.onsourceopen=this.getSourceOpenHandler(Y),0}async registerTask(R){return this.tasks.has(R.taskId)?u.lh:this.createTask(R)}async unregisterTask(R){const j=this.tasks.get(R);j&&(j.audio&&(j.audio.loop&&(j.audio.oformatContext.destroy(),j.audio.loop.destroy()),j.audio.pullIPC&&j.audio.pullIPC.destroy(),j.audio.pullQueue.queue.length&&(j.audio.pullQueue.queue.forEach(B=>{j.avpacketPool.release(B)}),j.audio.pullQueue.queue.length=0)),j.video&&(j.video.loop&&(j.video.oformatContext.destroy(),j.video.loop.destroy()),j.video.pullIPC&&j.video.pullIPC.destroy(),j.video.pullQueue.queue.length&&(j.video.pullQueue.queue.forEach(B=>{j.avpacketPool.release(B)}),j.video.pullQueue.queue.length=0)),j.controlIPCPort&&j.controlIPCPort.destroy(),this.tasks.delete(R))}}},78417:(g,p,t)=>{t.d(p,{A:()=>u});var e=t(88032),i=t.n(e),n=t(29967),s=t.n(n),r=t(79331),a=t(67672),d=t(62100),c=t(86932);function l(f){let v=0,y=0,A=0;return(f=f.slice(f.indexOf("PT")+2)).indexOf("H")>-1&&f.indexOf("M")>-1&&f.indexOf("S")>-1?(v=i()(f.slice(0,f.indexOf("H"))),y=i()(f.slice(f.indexOf("H")+1,f.indexOf("M"))),A=i()(f.slice(f.indexOf("M")+1,f.indexOf("S")))):f.indexOf("H")<0&&f.indexOf("M")>0&&f.indexOf("S")>-1?(y=i()(f.slice(0,f.indexOf("M"))),A=i()(f.slice(f.indexOf("M")+1,f.indexOf("S")))):f.indexOf("H")<0&&f.indexOf("M")<0&&f.indexOf("S")>-1&&(A=i()(f.slice(0,f.indexOf("S")))),3600*v+60*y+A}function h(f,v){return(Array(v).join("0")+f).slice(-v)}function o(f){if(!f)return 0;if(f.indexOf("/")>-1){const v=f.split("/");return i()(v[0])/i()(v[1])}return i()(f)}function u(f,v){const y={source:f,mediaList:{audio:[],video:[],subtitle:[]},type:"live",isEnd:!1,duration:0,minBufferTime:0,maxSegmentDuration:0,minimumUpdatePeriod:0,timestamp:(0,c.A)()},A=[],w=(k=f,k?(0,r.A)(k):null).MPD;var k;w.type==="static"&&(y.type="vod",y.isEnd=!0),w.minBufferTime&&(y.minBufferTime=l(w.minBufferTime)),w.maxSegmentDuration&&(y.maxSegmentDuration=l(w.maxSegmentDuration)),w.minimumUpdatePeriod&&(y.minimumUpdatePeriod=l(w.minimumUpdatePeriod)),w.mediaPresentationDuration&&(y.duration=l(w.mediaPresentationDuration));let T="";w.BaseURL&&(T=w.BaseURL);const P=a.YO(w.Period)?w.Period[0]:w.Period;return!y.duration&&P&&P.duration&&(y.duration=l(P.duration)),(a.YO(P.AdaptationSet)?P.AdaptationSet:[P.AdaptationSet]).forEach((b,x)=>{let I="video/mp4",S="avc1.64001E",z=640,V=360,L=640,C=360,F=25,H="1:1",M="1",G=588633,D=T,W="und";b.BaseURL&&(D+=b.BaseURL),b.lang&&(W=b.lang),b.mimeType?(I=b.mimeType,I==="video/mp4"?(S=b.codecs,z=i()(b.width),V=i()(b.height),b.maxWidth&&(L=i()(b.maxWidth)),b.maxHeight&&(C=i()(b.maxHeight)),b.frameRate&&(F=o(b.frameRate)),H=b.sar,M=b.startWithSAP,G=i()(b.bandwidth)):I==="audio/mp4"&&(S=b.codecs,M=b.startWithSAP,G=i()(b.bandwidth))):(b.maxWidth&&(L=i()(b.maxWidth)),b.maxHeight&&(C=i()(b.maxHeight)),b.frameRate&&(F=o(b.frameRate))),(a.YO(b.Representation)?b.Representation:[b.Representation]).forEach((X,U)=>{A.indexOf(X.id)>-1&&(X.id=(s()(A[A.length-1])+1).toString()),A.push(X.id);let Q="";const N=[];let _=0,O=0,R=v.slice(0,v.lastIndexOf("/")+1)+D;X.mimeType&&(I=X.mimeType),I==="video/mp4"?(X.codecs&&(S=X.codecs),X.width&&(z=i()(X.width)),X.height&&(V=i()(X.height)),X.maxWidth&&(L=i()(X.maxWidth)),X.maxHeight&&(C=i()(X.maxHeight)),X.frameRate&&(F=i()(X.frameRate)),X.sar&&(H=X.sar),X.startWithSAP&&(M=X.startWithSAP),X.bandwidth&&(G=i()(X.bandwidth))):(X.codecs&&(S=X.codecs),X.startWithSAP&&(M=X.startWithSAP),X.bandwidth&&(G=i()(X.bandwidth))),X.BaseURL&&(R+=X.BaseURL);let j=!1;if((b.ContentProtection||X.ContentProtection)&&(j=!0),X.SegmentBase)I==="video/mp4"?y.mediaList.video.push({id:X.id,file:R,mimeType:I,codecs:S,width:z,height:V,maxWidth:L,maxHeight:C,frameRate:F,sar:H,startWithSAP:M==="1",bandwidth:G,timescale:_,duration:O,encrypted:j}):I==="audio/mp4"?y.mediaList.audio.push({id:X.id,file:R,mimeType:I,codecs:S,startWithSAP:M==="1",bandwidth:G,timescale:_,duration:O,encrypted:j,lang:W}):I==="application/mp4"&&y.mediaList.subtitle.push({id:X.id,file:R,mimeType:I,codecs:S,startWithSAP:M==="1",bandwidth:G,timescale:_,duration:O,encrypted:j,lang:W});else{let B;if(b.SegmentTemplate&&(B=a.YO(b.SegmentTemplate)?b.SegmentTemplate[0]:b.SegmentTemplate),X.SegmentTemplate&&(B=a.YO(X.SegmentTemplate)?X.SegmentTemplate[0]:X.SegmentTemplate),B){const Y=s()(B.startNumber);if(Q=B.initialization,_=i()(B.timescale||"1"),B.duration&&!B.SegmentTimeline){O=i()(B.duration);let Z=O/_;const rt=Y+Math.ceil((y.duration||Z)/Z)-1;for(let ot=Y;ot<=rt;ot++){const ft=Z*(ot-Y);let ut=Z*(ot-Y+1);ot===rt&&(Z=y.duration-Z*(rt-Y),ut=y.duration),N.push({idx:ot,start:ft,end:ut,url:R+B.media.replace(/\$RepresentationID\$/g,X.id).replace(/\$Number(%(\d+)d)?\$/g,(At,vt,et)=>et?h(ot,+et):(0,d.A)(ot)),segmentDuration:Z})}}else if(B.SegmentTimeline&&B.SegmentTimeline.S){const Z=a.YO(B.SegmentTimeline.S)?B.SegmentTimeline.S:[B.SegmentTimeline.S];let rt=0,ot=Y;for(let ft=0;ft<Z.length;ft++){let ut=i()(Z[ft].d);Z[ft].t&&(rt=i()(Z[0].t));let At=1;Z[ft].r&&(At=s()(Z[ft].r)+1);for(let vt=0;vt<At;vt++)N.push({idx:ot,start:rt/_,end:(rt+ut)/_,url:R+B.media.replace(/\$RepresentationID\$/g,X.id).replace(/\$Number(%(\d+)d)?\$/g,(et,st,at)=>at?h(ot,+at):(0,d.A)(ot)).replace(/\$Time\$/g,(0,d.A)(rt)),segmentDuration:ut/_}),ot++,rt+=ut}}}else if(X.SegmentList){const Y=a.YO(X.SegmentList.SegmentURL)?X.SegmentList.SegmentURL:[X.SegmentList.SegmentURL];let Z=0,rt=i()(X.SegmentList.duration);for(let ot=0;ot<Y.length;ot++)N.push({idx:ot,start:Z/_,end:(Z+rt)/_,url:R+Y[ot].media,segmentDuration:rt/_}),Z+=rt}I==="video/mp4"?y.mediaList.video.push({id:X.id,baseURL:R,initSegment:R+Q.replace(/\$RepresentationID\$/g,X.id).replace(/\$Bandwidth\$/g,(0,d.A)(G)),mediaSegments:N,mimeType:I,codecs:S,width:z,height:V,maxWidth:L,maxHeight:C,frameRate:F,sar:H,startWithSAP:M==="1",bandwidth:G,timescale:_,duration:O,encrypted:j}):I==="audio/mp4"?y.mediaList.audio.push({id:X.id,baseURL:R,initSegment:R+Q.replace(/\$RepresentationID\$/g,X.id).replace(/\$Bandwidth\$/g,(0,d.A)(G)),mediaSegments:N,mimeType:I,codecs:S,startWithSAP:M==="1",bandwidth:G,timescale:_,duration:O,encrypted:j,lang:W}):I==="application/mp4"&&y.mediaList.subtitle.push({id:X.id,baseURL:R,initSegment:R+Q.replace(/\$RepresentationID\$/g,X.id).replace(/\$Bandwidth\$/g,(0,d.A)(G)),mediaSegments:N,mimeType:I,codecs:S,startWithSAP:M==="1",bandwidth:G,timescale:_,duration:O,encrypted:j,lang:W})}})}),["video","audio"].forEach(b=>{y.mediaList[b].sort((x,I)=>x.bandwidth-I.bandwidth)}),y}},48182:(g,p,t)=>{t.d(p,{A:()=>F});var e=t(7210),i=t.n(e),n=t(43929),s=t.n(n),r=t(69736),a=t.n(r),d=t(80662),c=t.n(d),l=t(67756),h=t(64608),o=t(4624),u="src\\avprotocol\\m3u8\\parser.ts";function f(H){return l.Bq(H,'"')}function v(H){const M=l.gI(H,",");return{duration:l.Ro(M[0]),title:decodeURIComponent(escape(M[1]))}}function y(H){const M=l.gI(H,"@");return{length:l.Ro(M[0]),offset:M[1]?l.Ro(M[1]):-1}}function A(H){const M=l.gI(H,"x");return{width:l.Ro(M[0]),height:l.Ro(M[1])}}function w(H){const M="ALLOWED-CPC: Each entry must consit of KEYFORMAT and Content Protection Configuration",G=H.split(",");G.length===0&&o.z3(M,u,102);const D=[];for(const W of G){const[X,U]=l.gI(W,":");X&&U?D.push({format:X,cpcList:U.split("/")}):o.z3(M,u,108)}return D}function k(H){const M=l.m2(H);return M.length!==16&&o.z3("IV must be a 128-bit unsigned integer",u,119),M}function T(H,M){M.IV&&H.compatibleVersion<2&&(H.compatibleVersion=2),(M.KEYFORMAT||M.KEYFORMATVERSIONS)&&H.compatibleVersion<5&&(H.compatibleVersion=5)}function P(H){const M={};for(const D of l.HG(H)){const[W,X]=l.gI(D,"="),U=f(X);switch(W){case"URI":M[W]=U;break;case"START-DATE":case"END-DATE":M[W]=new Date(U);break;case"IV":M[W]=k(U);break;case"BYTERANGE":M[W]=y(U);break;case"RESOLUTION":M[W]=A(U);break;case"ALLOWED-CPC":M[W]=w(U);break;case"END-ON-NEXT":case"DEFAULT":case"AUTOSELECT":case"FORCED":case"PRECISE":case"CAN-BLOCK-RELOAD":case"INDEPENDENT":case"GAP":M[W]=U==="YES";break;case"DURATION":case"PLANNED-DURATION":case"BANDWIDTH":case"AVERAGE-BANDWIDTH":case"FRAME-RATE":case"TIME-OFFSET":case"CAN-SKIP-UNTIL":case"HOLD-BACK":case"PART-HOLD-BACK":case"PART-TARGET":case"BYTERANGE-START":case"BYTERANGE-LENGTH":case"LAST-MSN":case"LAST-PART":case"SKIPPED-SEGMENTS":case"SCORE":case"PROGRAM-ID":M[W]=l.Ro(U);break;default:W.startsWith("SCTE35-")?M[W]=l.m2(U):W.startsWith("X-")?M[W]=(G=X).startsWith('"')?f(G):G.startsWith("0x")||G.startsWith("0X")?l.m2(G):l.Ro(G):(W==="VIDEO-RANGE"&&U!=="SDR"&&U!=="HLG"&&U!=="PQ"&&o.h2(`VIDEO-RANGE: unknown value "${U}"`,u,206),M[W]=U)}}var G;return M}function b(H,M,G){const D=function({attributes:U}){return new h.ru({type:U.TYPE,uri:U.URI,groupId:U["GROUP-ID"],language:U.LANGUAGE,assocLanguage:U["ASSOC-LANGUAGE"],name:U.NAME,isDefault:U.DEFAULT,autoselect:U.AUTOSELECT,forced:U.FORCED,instreamId:U["INSTREAM-ID"],characteristics:U.CHARACTERISTICS,channels:U.CHANNELS})}(M),W=H[l.Th(G)],X=function(U,Q){let N=!1;for(const _ of U){if(_.name===Q.name)return"All EXT-X-MEDIA tags in the same Group MUST have different NAME attributes.";_.isDefault&&(N=!0)}return N&&Q.isDefault?"EXT-X-MEDIA A Group MUST NOT have more than one member with a DEFAULT attribute of YES.":""}(W,D);X&&o.h2(X,u,315),W.push(D),D.isDefault&&(H.currentRenditions[l.Th(G)]=W.length-1)}function x(H,M,G,D,W){const X=new h.KT({uri:G,bandwidth:M.BANDWIDTH,averageBandwidth:M["AVERAGE-BANDWIDTH"],score:M.SCORE,codecs:M.CODECS,resolution:M.RESOLUTION,frameRate:M["FRAME-RATE"],hdcpLevel:M["HDCP-LEVEL"],allowedCpc:M["ALLOWED-CPC"],videoRange:M["VIDEO-RANGE"],stableVariantId:M["STABLE-VARIANT-ID"],programId:M["PROGRAM-ID"]});for(const U of H)if(U.name==="EXT-X-MEDIA"){const Q=U.attributes,N=Q.TYPE;if(N&&Q["GROUP-ID"]||o.h2("EXT-X-MEDIA TYPE attribute is REQUIRED.",u,355),M[N]===Q["GROUP-ID"]&&(b(X,U,N),N==="CLOSED-CAPTIONS")){for(const{instreamId:_}of X.closedCaptions)if(_&&_.startsWith("SERVICE")&&W.compatibleVersion<7){W.compatibleVersion=7;break}}}return function(U,Q,N){for(const _ of["AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS"])_==="CLOSED-CAPTIONS"&&U[_]==="NONE"?(N.isClosedCaptionsNone=!0,Q.closedCaptions=[]):U[_]&&!Q[l.Th(_)].some(O=>O.groupId===U[_])&&o.h2(`${_} attribute MUST match the value of the GROUP-ID attribute of an EXT-X-MEDIA tag whose TYPE attribute is ${_}.`,u,330)}(M,X,W),X.isIFrameOnly=D,X}function I(H,M){if(H.method!==M.method||H.uri!==M.uri)return!1;if(H.iv){if(!M.iv||H.iv.length!==M.iv.length)return!1;for(let G=0;G<H.iv.length;G++)if(H.iv[G]!==M.iv[G])return!1}else if(M.iv)return!1;return H.format===M.format&&H.formatVersion===M.formatVersion}function S(H,M,G,D,W,X,U){const Q=new h.Y4({uri:M,mediaSequenceNumber:W,discontinuitySequence:X});let N=!1,_=!1;for(let O=G;O<=D;O++){const{name:R,value:j,attributes:B}=H[O];if(R==="EXTINF")!s()(j.duration)&&U.compatibleVersion<3&&(U.compatibleVersion=3),Math.round(j.duration)>U.targetDuration&&o.h2("EXTINF duration, when rounded to the nearest integer, MUST be less than or equal to the target duration",u,517),Q.duration=j.duration,Q.title=j.title;else if(R==="EXT-X-BYTERANGE")U.compatibleVersion<4&&(U.compatibleVersion=4),Q.byterange=j;else if(R==="EXT-X-DISCONTINUITY")Q.parts.length>0&&o.h2("EXT-X-DISCONTINUITY must appear before the first EXT-X-PART tag of the Parent Segment.",u,530),Q.discontinuity=!0;else if(R==="EXT-X-KEY")Q.parts.length>0&&o.h2("EXT-X-KEY must appear before the first EXT-X-PART tag of the Parent Segment.",u,536),B.METHOD!=="NONE"&&(T(U,B),Q.key=new h.Uz({method:B.METHOD,uri:B.URI,iv:B.IV,format:B.KEYFORMAT,formatVersion:B.KEYFORMATVERSIONS}));else if(R==="EXT-X-MAP")Q.parts.length>0&&o.h2("EXT-X-MAP must appear before the first EXT-X-PART tag of the Parent Segment.",u,552),U.compatibleVersion<5&&(U.compatibleVersion=5),U.hasMap=!0,Q.map=new h.qP({uri:B.URI,byterange:B.BYTERANGE});else if(R==="EXT-X-PROGRAM-DATE-TIME")Q.programDateTime=j;else if(R==="EXT-X-DATERANGE"){const Y={};for(const Z of a()(B))(Z.startsWith("SCTE35-")||Z.startsWith("X-"))&&(Y[Z]=B[Z]);Q.dateRange=new h.ad({id:B.ID,classId:B.CLASS,start:B["START-DATE"],end:B["END-DATE"],duration:B.DURATION,plannedDuration:B["PLANNED-DURATION"],endOnNext:B["END-ON-NEXT"],attributes:Y})}else if(R==="EXT-X-CUE-OUT")Q.markers.push(new h.xC({type:"OUT",duration:B&&B.DURATION||j}));else if(R==="EXT-X-CUE-IN")Q.markers.push(new h.xC({type:"IN"}));else if(R==="EXT-X-CUE-OUT-CONT"||R==="EXT-X-CUE"||R==="EXT-OATCLS-SCTE35"||R==="EXT-X-ASSET"||R==="EXT-X-SCTE35")Q.markers.push(new h.xC({type:"RAW",tagName:R,value:j}));else if(R!=="EXT-X-PRELOAD-HINT"||B.TYPE)if(R==="EXT-X-PRELOAD-HINT"&&B.TYPE==="PART"&&_)o.h2("Servers should not add more than one EXT-X-PRELOAD-HINT tag with the same TYPE attribute to a Playlist.",u,612);else if(R!=="EXT-X-PART"&&R!=="EXT-X-PRELOAD-HINT"||B.URI){if(R==="EXT-X-PRELOAD-HINT"&&B.TYPE==="MAP")N&&o.h2("Servers should not add more than one EXT-X-PRELOAD-HINT tag with the same TYPE attribute to a Playlist.",u,619),N=!0,U.hasMap=!0,Q.map=new h.qP({hint:!0,uri:B.URI,byterange:{length:B["BYTERANGE-LENGTH"],offset:B["BYTERANGE-START"]||0}});else if(R==="EXT-X-PART"||R==="EXT-X-PRELOAD-HINT"&&B.TYPE==="PART"){R!=="EXT-X-PART"||B.DURATION||o.h2("EXT-X-PART: DURATION attribute is mandatory",u,631),R==="EXT-X-PRELOAD-HINT"&&(_=!0);const Y=new h.nw({hint:R==="EXT-X-PRELOAD-HINT",uri:B.URI,byterange:R==="EXT-X-PART"?B.BYTERANGE:{length:B["BYTERANGE-LENGTH"],offset:B["BYTERANGE-START"]||0},duration:B.DURATION,independent:B.INDEPENDENT,gap:B.GAP});Q.parts.push(Y)}}else o.h2("EXT-X-PART / EXT-X-PRELOAD-HINT: URI attribute is mandatory",u,615);else o.h2("EXT-X-PRELOAD-HINT: TYPE attribute is mandatory",u,609)}return Q}function z(H,M,G,D,W,X,U){const Q=new h.Vd({uri:M,mediaSequenceNumber:W,discontinuitySequence:X});for(let N=G;N<=D;N++){const{name:_,attributes:O}=H[N];_==="EXTINF"?o.h2("A prefetch segment must not be advertised with an EXTINF tag.",u,663):_==="EXT-X-DISCONTINUITY"?o.h2("A prefetch segment must not be advertised with an EXT-X-DISCONTINUITY tag.",u,666):_==="EXT-X-PREFETCH-DISCONTINUITY"?Q.discontinuity=!0:_==="EXT-X-KEY"?O.METHOD!=="NONE"&&(T(U,O),Q.key=new h.Uz({method:O.METHOD,uri:O.URI,iv:O.IV,format:O.KEYFORMAT,formatVersion:O.KEYFORMATVERSIONS})):_==="EXT-X-MAP"&&o.h2("Prefetch segments must not be advertised with an EXT-X-MAP tag.",u,684)}return Q}function V(H,M,G,D,W){const{discontinuity:X,key:U,map:Q,byterange:N,uri:_}=M;if(X&&(M.discontinuitySequence=G+1),U||(M.key=D),Q||(M.map=W),N&&N.offset===-1){const{segments:O}=H;if(O.length>0){const R=O[O.length-1];R.byterange&&R.uri===_?N.offset=R.byterange.offset+R.byterange.length:o.h2("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST be a sub-range of the same media resource",u,900)}else o.h2("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST appear in the Playlist file",u,904)}return/\/video\/adjump/.test(M.uri)||H.segments.push(M),[M.discontinuitySequence,M.key,M.map]}function L(H,M){const[G,D]=function(Q){const N=Q.indexOf(":");return N===-1?[Q.slice(1).trim(),null]:[Q.slice(1,N).trim(),Q.slice(N+1).trim()]}(H),W=function(Q){switch(Q){case"EXTM3U":case"EXT-X-VERSION":return"Basic";case"EXTINF":case"EXT-X-BYTERANGE":case"EXT-X-DISCONTINUITY":case"EXT-X-PREFETCH-DISCONTINUITY":case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-PROGRAM-DATE-TIME":case"EXT-X-DATERANGE":case"EXT-X-CUE-OUT":case"EXT-X-CUE-IN":case"EXT-X-CUE-OUT-CONT":case"EXT-X-CUE":case"EXT-OATCLS-SCTE35":case"EXT-X-ASSET":case"EXT-X-SCTE35":case"EXT-X-PART":case"EXT-X-PRELOAD-HINT":return"Segment";case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":case"EXT-X-ENDLIST":case"EXT-X-PLAYLIST-TYPE":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-SERVER-CONTROL":case"EXT-X-PART-INF":case"EXT-X-PREFETCH":case"EXT-X-RENDITION-REPORT":case"EXT-X-SKIP":return"MediaPlaylist";case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":return"MasterPlaylist";case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-START":return"MediaorMasterPlaylist";default:return"Unknown"}}(G);if(function(Q,N){if(Q==="Segment"||Q==="MediaPlaylist")return N.isMasterPlaylist===void 0?void(N.isMasterPlaylist=!1):void(N.isMasterPlaylist&&o.h2("The file contains both media and master playlist tags.",u,1015));if(Q==="MasterPlaylist"){if(N.isMasterPlaylist===void 0)return void(N.isMasterPlaylist=!0);N.isMasterPlaylist===!1&&o.h2("The file contains both media and master playlist tags.",u,1025)}}(W,M),W==="Unknown")return null;W==="MediaPlaylist"&&G!=="EXT-X-RENDITION-REPORT"&&G!=="EXT-X-PREFETCH"&&(M.hash[G]&&o.h2("There MUST NOT be more than one Media Playlist tag of each type in any Media Playlist",u,1046),M.hash[G]=!0);const[X,U]=function(Q,N){switch(Q){case"EXTM3U":case"EXT-X-DISCONTINUITY":case"EXT-X-ENDLIST":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-CUE-IN":return[null,null];case"EXT-X-VERSION":case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":return[l.Ro(N),null];case"EXT-X-CUE-OUT":return i()(Number(N))?[null,P(N)]:[l.Ro(N),null];case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-DATERANGE":case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":case"EXT-X-START":case"EXT-X-SERVER-CONTROL":case"EXT-X-PART-INF":case"EXT-X-PART":case"EXT-X-PRELOAD-HINT":case"EXT-X-RENDITION-REPORT":case"EXT-X-SKIP":return[null,P(N)];case"EXTINF":return[v(N),null];case"EXT-X-BYTERANGE":return[y(N),null];case"EXT-X-PROGRAM-DATE-TIME":return[new Date(N),null];default:return[N,null]}}(G,D);return{name:G,category:W,value:X,attributes:U}}function C(H,M){let G;return M.isMasterPlaylist?G=function(D,W){const X=new h.ts;let U=!1;for(const[Q,{name:N,value:_,attributes:O}]of D.entries())if(N==="EXT-X-VERSION")X.version=_;else if(N==="EXT-X-STREAM-INF"){const R=D[Q+1];(typeof R!="string"||R.startsWith("#EXT"))&&o.h2("EXT-X-STREAM-INF must be followed by a URI line",u,417);const j=x(D,O,R,!1,W);j&&(typeof j.score=="number"&&(U=!0,j.score<0&&o.h2("SCORE attribute on EXT-X-STREAM-INF must be positive decimal-floating-point number.",u,424)),X.variants.push(j))}else if(N==="EXT-X-I-FRAME-STREAM-INF"){const R=x(D,O,O.URI,!0,W);R&&X.variants.push(R)}else if(N==="EXT-X-SESSION-DATA"){const R=new h.pf({id:O["DATA-ID"],value:O.VALUE,uri:O.URI,language:O.LANGUAGE});X.sessionDataList.some(j=>j.id===R.id&&j.language===R.language)&&o.h2("A Playlist MUST NOT contain more than one EXT-X-SESSION-DATA tag with the same DATA-ID attribute and the same LANGUAGE attribute.",u,444),X.sessionDataList.push(R)}else if(N==="EXT-X-SESSION-KEY"){O.METHOD==="NONE"&&o.h2("EXT-X-SESSION-KEY: The value of the METHOD attribute MUST NOT be NONE",u,450);const R=new h.Uz({method:O.METHOD,uri:O.URI,iv:O.IV,format:O.KEYFORMAT,formatVersion:O.KEYFORMATVERSIONS});X.sessionKeyList.some(j=>I(j,R))&&o.h2("A Master Playlist MUST NOT contain more than one EXT-X-SESSION-KEY tag with the same METHOD, URI, IV, KEYFORMAT, and KEYFORMATVERSIONS attribute values.",u,460),T(W,O),X.sessionKeyList.push(R)}else N==="EXT-X-INDEPENDENT-SEGMENTS"?(X.independentSegments&&o.h2("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist",u,467),X.independentSegments=!0):N==="EXT-X-START"&&(X.start&&o.h2("EXT-X-START tag MUST NOT appear more than once in a Playlist",u,473),typeof O["TIME-OFFSET"]!="number"&&o.h2("EXT-X-START: TIME-OFFSET attribute is REQUIRED",u,476),X.start={offset:O["TIME-OFFSET"],precise:O.PRECISE||!1});if(U)for(const Q of X.variants)typeof Q.score!="number"&&o.h2("If any Variant Stream contains the SCORE attribute, then all Variant Streams in the Master Playlist SHOULD have a SCORE attribute",u,484);if(W.isClosedCaptionsNone)for(const Q of X.variants)Q.closedCaptions.length>0&&o.h2("If there is a variant with CLOSED-CAPTIONS attribute of NONE, all EXT-X-STREAM-INF tags MUST have this attribute with a value of NONE",u,491);return X}(H,M):(G=function(D,W){const X=new h.tk;let U=-1,Q=0,N=!1,_=!1,O=0,R=null,j=null,B=!1;for(const[Z,rt]of D.entries()){const{name:ot,value:ft,attributes:ut,category:At}=rt;if(At!=="Segment"){if(ot==="EXT-X-VERSION")X.version===void 0?X.version=ft:o.h2("A Playlist file MUST NOT contain more than one EXT-X-VERSION tag.",u,716);else if(ot==="EXT-X-TARGETDURATION")X.targetDuration=W.targetDuration=ft;else if(ot==="EXT-X-MEDIA-SEQUENCE")X.segments.length>0&&o.h2("The EXT-X-MEDIA-SEQUENCE tag MUST appear before the first Media Segment in the Playlist.",u,724),X.mediaSequenceBase=Q=ft;else if(ot==="EXT-X-DISCONTINUITY-SEQUENCE")X.segments.length>0&&o.h2("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before the first Media Segment in the Playlist.",u,730),N&&o.h2("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before any EXT-X-DISCONTINUITY tag.",u,733),X.discontinuitySequenceBase=O=ft;else if(ot==="EXT-X-ENDLIST")X.endlist=!0;else if(ot==="EXT-X-PLAYLIST-TYPE")X.playlistType=ft;else if(ot==="EXT-X-I-FRAMES-ONLY")W.compatibleVersion<4&&(W.compatibleVersion=4),X.isIFrame=!0;else if(ot==="EXT-X-INDEPENDENT-SEGMENTS")X.independentSegments&&o.h2("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist",u,751),X.independentSegments=!0;else if(ot==="EXT-X-START")X.start&&o.h2("EXT-X-START tag MUST NOT appear more than once in a Playlist",u,757),typeof ut["TIME-OFFSET"]!="number"&&o.h2("EXT-X-START: TIME-OFFSET attribute is REQUIRED",u,760),X.start={offset:ut["TIME-OFFSET"],precise:ut.PRECISE||!1};else if(ot==="EXT-X-SERVER-CONTROL")ut["CAN-BLOCK-RELOAD"]||o.h2("EXT-X-SERVER-CONTROL: CAN-BLOCK-RELOAD=YES is mandatory for Low-Latency HLS",u,766),X.lowLatencyCompatibility={canBlockReload:ut["CAN-BLOCK-RELOAD"],canSkipUntil:ut["CAN-SKIP-UNTIL"],holdBack:ut["HOLD-BACK"],partHoldBack:ut["PART-HOLD-BACK"]};else if(ot==="EXT-X-PART-INF")ut["PART-TARGET"]||o.h2("EXT-X-PART-INF: PART-TARGET attribute is mandatory",u,777),X.partTargetDuration=ut["PART-TARGET"];else if(ot==="EXT-X-RENDITION-REPORT")ut.URI||o.h2("EXT-X-RENDITION-REPORT: URI attribute is mandatory",u,783),ut.URI.search(/^[a-z]+:/)===0&&o.h2("EXT-X-RENDITION-REPORT: URI must be relative to the playlist uri",u,786),X.renditionReports.push(new h.h4({uri:ut.URI,lastMSN:ut["LAST-MSN"],lastPart:ut["LAST-PART"]}));else if(ot==="EXT-X-SKIP")ut["SKIPPED-SEGMENTS"]||o.h2("EXT-X-SKIP: SKIPPED-SEGMENTS attribute is mandatory",u,796),W.compatibleVersion<9&&(W.compatibleVersion=9),X.skip=ut["SKIPPED-SEGMENTS"],Q+=X.skip;else if(ot==="EXT-X-PREFETCH"){const vt=z(D,ft,U===-1?Z:U,Z-1,Q++,O,W);vt&&(vt.discontinuity&&(vt.discontinuitySequence++,O=vt.discontinuitySequence),vt.key?R=vt.key:vt.key=R,X.prefetchSegments.push(vt)),_=!0,U=-1}else if(typeof rt=="string"){U===-1&&o.h2("A URI line is not preceded by any segment tags",u,833),X.targetDuration||o.h2("The EXT-X-TARGETDURATION tag is REQUIRED",u,836),_&&o.h2("These segments must appear after all complete segments.",u,839);const vt=S(D,rt,U,Z-1,Q++,O,W);vt&&([O,R,j]=V(X,vt,O,R,j),!B&&vt.parts.length>0&&(B=!0)),U=-1}}else U===-1&&(U=Z),ot==="EXT-X-DISCONTINUITY"&&(N=!0)}if(U!==-1){const Z=S(D,"",U,D.length-1,Q++,O,W);if(Z){var Y;const{parts:rt}=Z;!(rt.length>0)||X.endlist||(Y=rt[rt.length-1])!==null&&Y!==void 0&&Y.hint||o.h2("If the Playlist contains EXT-X-PART tags and does not contain an EXT-X-ENDLIST tag, the Playlist must contain an EXT-X-PRELOAD-HINT tag with a TYPE=PART attribute",u,856),V(X,Z,R,j),!B&&Z.parts.length>0&&(B=!0)}}return function(Z){const rt=new(c()),ot=new(c());let ft=!1,ut=!1;for(let At=Z.length-1;At>=0;At--){const{programDateTime:vt,dateRange:et}=Z[At];if(vt&&(ut=!0),et&&et.start){ft=!0,et.endOnNext&&(et.end||et.duration)&&o.h2("An EXT-X-DATERANGE tag with an END-ON-NEXT=YES attribute MUST NOT contain DURATION or END-DATE attributes.",u,928);const st=et.start.getTime(),at=et.duration||0;et.end&&et.duration&&st+1e3*at!==et.end.getTime()&&o.h2("END-DATE MUST be equal to the value of the START-DATE attribute plus the value of the DURATION",u,934),et.endOnNext&&(et.end=rt.get(et.classId)),rt.set(et.classId,et.start);const ct=et.end?et.end.getTime():et.start.getTime()+1e3*(et.duration||0),mt=ot.get(et.classId);if(mt){for(const It of mt)(It.start<=st&&It.end>st||It.start>=st&&It.start<ct)&&o.h2("DATERANGE tags with the same CLASS should not overlap",u,946);mt.push({start:st,end:ct})}else et.classId&&ot.set(et.classId,[{start:st,end:ct}])}}ft&&!ut&&o.h2("If a Playlist contains an EXT-X-DATERANGE tag, it MUST also contain at least one EXT-X-PROGRAM-DATE-TIME tag.",u,957)}(X.segments),X.lowLatencyCompatibility&&function({lowLatencyCompatibility:Z,targetDuration:rt,partTargetDuration:ot,segments:ft,renditionReports:ut},At){const{canSkipUntil:vt,holdBack:et,partHoldBack:st}=Z;if(vt<6*rt&&o.h2("The Skip Boundary must be at least six times the EXT-X-TARGETDURATION.",u,964),et<3*rt&&o.h2("HOLD-BACK must be at least three times the EXT-X-TARGETDURATION.",u,968),At){ot===void 0&&o.h2("EXT-X-PART-INF is required if a Playlist contains one or more EXT-X-PART tags",u,972),st===void 0&&o.h2("EXT-X-PART: PART-HOLD-BACK attribute is mandatory",u,975),st<ot&&o.h2("PART-HOLD-BACK must be at least PART-TARGET",u,978);for(const[at,{parts:ct}]of ft.entries()){ct.length>0&&at<ft.length-3&&o.h2("Remove EXT-X-PART tags from the Playlist after they are greater than three target durations from the end of the Playlist.",u,982);for(const[mt,{duration:It}]of ct.entries())It!==void 0&&(It>ot&&o.h2("PART-TARGET is the maximum duration of any Partial Segment",u,989),mt<ct.length-1&&It<.85*ot&&o.h2("All Partial Segments except the last part of a segment must have a duration of at least 85% of PART-TARGET",u,992))}}for(const at of ut){const ct=ft[ft.length-1];at.lastMSN!==null&&at.lastMSN!==void 0||(at.lastMSN=ct.mediaSequenceNumber),(at.lastPart===null||at.lastPart===void 0)&&ct.parts.length>0&&(at.lastPart=ct.parts.length-1)}}(X,B),X.duration=X.segments.reduce((Z,rt)=>typeof rt.duration=="number"?Z+rt.duration:Z,0),X}(H,M),!G.isIFrame&&M.hasMap&&M.compatibleVersion<6&&(M.compatibleVersion=6)),M.compatibleVersion>1&&(!G.version||G.version<M.compatibleVersion)&&o.h2(`EXT-X-VERSION needs to be ${M.compatibleVersion} or higher.`,u,1096),G}function F(H){const M={version:void 0,isMasterPlaylist:void 0,hasMap:!1,targetDuration:0,compatibleVersion:1,isClosedCaptionsNone:!1,hash:{}},G=function(W,X){const U=[];for(const Q of W.split(`
`)){const N=Q.trim();if(N)if(N.startsWith("#")){if(N.startsWith("#EXT")){const _=L(N,X);_&&U.push(_)}}else U.push(N)}return U.length!==0&&U[0].name==="EXTM3U"||o.h2("The EXTM3U tag MUST be the first line.",u,1078),U}(H,M),D=C(G,M);return D.source=H,D}},64608:(g,p,t)=>{t.d(p,{KT:()=>s,Uz:()=>a,Vd:()=>A,Y4:()=>v,ad:()=>c,h4:()=>w,nw:()=>y,pf:()=>r,qP:()=>d,ru:()=>n,tk:()=>f,ts:()=>u,xC:()=>l});var e=t(134),i=t(86932);class n{constructor({type:T,uri:P,groupId:b,language:x,assocLanguage:I,name:S,isDefault:z,autoselect:V,forced:L,instreamId:C,characteristics:F,channels:H}){(0,e.A)(this,"type",void 0),(0,e.A)(this,"uri",void 0),(0,e.A)(this,"groupId",void 0),(0,e.A)(this,"language",void 0),(0,e.A)(this,"assocLanguage",void 0),(0,e.A)(this,"name",void 0),(0,e.A)(this,"isDefault",void 0),(0,e.A)(this,"autoselect",void 0),(0,e.A)(this,"forced",void 0),(0,e.A)(this,"instreamId",void 0),(0,e.A)(this,"characteristics",void 0),(0,e.A)(this,"channels",void 0),this.type=T,this.uri=P,this.groupId=b,this.language=x,this.assocLanguage=I,this.name=S,this.isDefault=z,this.autoselect=V,this.forced=L,this.instreamId=C,this.characteristics=F,this.channels=H}}class s{constructor({uri:T,isIFrameOnly:P=!1,bandwidth:b,averageBandwidth:x,score:I,codecs:S,resolution:z,frameRate:V,hdcpLevel:L,allowedCpc:C,videoRange:F,stableVariantId:H,programId:M,audio:G=[],video:D=[],subtitles:W=[],closedCaptions:X=[],currentRenditions:U={audio:0,video:0,subtitles:0,closedCaptions:0}}){(0,e.A)(this,"uri",void 0),(0,e.A)(this,"isIFrameOnly",void 0),(0,e.A)(this,"bandwidth",void 0),(0,e.A)(this,"averageBandwidth",void 0),(0,e.A)(this,"score",void 0),(0,e.A)(this,"codecs",void 0),(0,e.A)(this,"resolution",void 0),(0,e.A)(this,"frameRate",void 0),(0,e.A)(this,"hdcpLevel",void 0),(0,e.A)(this,"allowedCpc",void 0),(0,e.A)(this,"videoRange",void 0),(0,e.A)(this,"stableVariantId",void 0),(0,e.A)(this,"programId",void 0),(0,e.A)(this,"audio",void 0),(0,e.A)(this,"video",void 0),(0,e.A)(this,"subtitles",void 0),(0,e.A)(this,"closedCaptions",void 0),(0,e.A)(this,"currentRenditions",void 0),this.uri=T,this.isIFrameOnly=P,this.bandwidth=b,this.averageBandwidth=x,this.score=I,this.codecs=S,this.resolution=z,this.frameRate=V,this.hdcpLevel=L,this.allowedCpc=C,this.videoRange=F,this.stableVariantId=H,this.programId=M,this.audio=G,this.video=D,this.subtitles=W,this.closedCaptions=X,this.currentRenditions=U}}class r{constructor({id:T,value:P,uri:b,language:x}){(0,e.A)(this,"id",void 0),(0,e.A)(this,"value",void 0),(0,e.A)(this,"uri",void 0),(0,e.A)(this,"language",void 0),this.id=T,this.value=P,this.uri=b,this.language=x}}class a{constructor({method:T,uri:P,iv:b,format:x,formatVersion:I}){(0,e.A)(this,"method",void 0),(0,e.A)(this,"uri",void 0),(0,e.A)(this,"iv",void 0),(0,e.A)(this,"format",void 0),(0,e.A)(this,"formatVersion",void 0),this.method=T,this.uri=P,this.iv=b,this.format=x,this.formatVersion=I}}class d{constructor({hint:T=!1,uri:P,mimeType:b,byterange:x}){(0,e.A)(this,"hint",void 0),(0,e.A)(this,"uri",void 0),(0,e.A)(this,"mimeType",void 0),(0,e.A)(this,"byterange",void 0),this.hint=T,this.uri=P,this.mimeType=b,this.byterange=x}}class c{constructor({id:T,classId:P,start:b,end:x,duration:I,plannedDuration:S,endOnNext:z,attributes:V={}}){(0,e.A)(this,"id",void 0),(0,e.A)(this,"classId",void 0),(0,e.A)(this,"start",void 0),(0,e.A)(this,"end",void 0),(0,e.A)(this,"duration",void 0),(0,e.A)(this,"plannedDuration",void 0),(0,e.A)(this,"endOnNext",void 0),(0,e.A)(this,"attributes",void 0),this.id=T,this.classId=P,this.start=b,this.end=x,this.duration=I,this.plannedDuration=S,this.endOnNext=z,this.attributes=V}}class l{constructor({type:T,duration:P,tagName:b,value:x}){(0,e.A)(this,"type",void 0),(0,e.A)(this,"duration",void 0),(0,e.A)(this,"tagName",void 0),(0,e.A)(this,"value",void 0),this.type=T,this.duration=P,this.tagName=b,this.value=x}}class h{constructor(T){(0,e.A)(this,"type",void 0),this.type=T}}class o extends h{constructor({isMasterPlaylist:T,uri:P,version:b,independentSegments:x=!1,start:I,source:S}){super("playlist"),(0,e.A)(this,"isMasterPlaylist",void 0),(0,e.A)(this,"uri",void 0),(0,e.A)(this,"version",void 0),(0,e.A)(this,"independentSegments",void 0),(0,e.A)(this,"start",void 0),(0,e.A)(this,"source",void 0),this.isMasterPlaylist=T,this.uri=P,this.version=b,this.independentSegments=x,this.start=I,this.source=S}}class u extends o{constructor(T={}){super({...T,isMasterPlaylist:!0}),(0,e.A)(this,"variants",void 0),(0,e.A)(this,"currentVariant",void 0),(0,e.A)(this,"sessionDataList",void 0),(0,e.A)(this,"sessionKeyList",void 0);const{variants:P=[],currentVariant:b,sessionDataList:x=[],sessionKeyList:I=[]}=T;this.variants=P,this.currentVariant=b,this.sessionDataList=x,this.sessionKeyList=I}}class f extends o{constructor(T={}){super({...T,isMasterPlaylist:!1}),(0,e.A)(this,"targetDuration",void 0),(0,e.A)(this,"mediaSequenceBase",void 0),(0,e.A)(this,"discontinuitySequenceBase",void 0),(0,e.A)(this,"endlist",void 0),(0,e.A)(this,"playlistType",void 0),(0,e.A)(this,"isIFrame",void 0),(0,e.A)(this,"segments",void 0),(0,e.A)(this,"prefetchSegments",void 0),(0,e.A)(this,"lowLatencyCompatibility",void 0),(0,e.A)(this,"partTargetDuration",void 0),(0,e.A)(this,"renditionReports",void 0),(0,e.A)(this,"skip",void 0),(0,e.A)(this,"hash",void 0),(0,e.A)(this,"duration",void 0),(0,e.A)(this,"timestamp",void 0);const{targetDuration:P,mediaSequenceBase:b=0,discontinuitySequenceBase:x=0,endlist:I=!1,playlistType:S,isIFrame:z,segments:V=[],prefetchSegments:L=[],lowLatencyCompatibility:C,partTargetDuration:F,renditionReports:H=[],skip:M=0,hash:G,duration:D=0}=T;this.targetDuration=P,this.mediaSequenceBase=b,this.discontinuitySequenceBase=x,this.endlist=I,this.playlistType=S,this.isIFrame=z,this.segments=V,this.prefetchSegments=L,this.lowLatencyCompatibility=C,this.partTargetDuration=F,this.renditionReports=H,this.skip=M,this.hash=G,this.duration=D,this.timestamp=(0,i.A)()}}class v extends h{constructor({uri:T,mimeType:P,data:b,duration:x,title:I,byterange:S,discontinuity:z,mediaSequenceNumber:V=0,discontinuitySequence:L=0,key:C,map:F,programDateTime:H,dateRange:M,markers:G=[],parts:D=[]}){super("segment"),(0,e.A)(this,"uri",void 0),(0,e.A)(this,"mimeType",void 0),(0,e.A)(this,"data",void 0),(0,e.A)(this,"duration",void 0),(0,e.A)(this,"title",void 0),(0,e.A)(this,"byterange",void 0),(0,e.A)(this,"discontinuity",void 0),(0,e.A)(this,"mediaSequenceNumber",void 0),(0,e.A)(this,"discontinuitySequence",void 0),(0,e.A)(this,"key",void 0),(0,e.A)(this,"map",void 0),(0,e.A)(this,"programDateTime",void 0),(0,e.A)(this,"dateRange",void 0),(0,e.A)(this,"markers",void 0),(0,e.A)(this,"parts",void 0),this.uri=T,this.mimeType=P,this.data=b,this.duration=x,this.title=I,this.byterange=S,this.discontinuity=z,this.mediaSequenceNumber=V,this.discontinuitySequence=L,this.key=C,this.map=F,this.programDateTime=H,this.dateRange=M,this.markers=G,this.parts=D}}class y extends h{constructor({hint:T=!1,uri:P,duration:b,independent:x,byterange:I,gap:S}){super("part"),(0,e.A)(this,"hint",void 0),(0,e.A)(this,"uri",void 0),(0,e.A)(this,"duration",void 0),(0,e.A)(this,"independent",void 0),(0,e.A)(this,"byterange",void 0),(0,e.A)(this,"gap",void 0),this.hint=T,this.uri=P,this.duration=b,this.independent=x,this.duration=b,this.byterange=I,this.gap=S}}class A extends h{constructor({uri:T,discontinuity:P,mediaSequenceNumber:b=0,discontinuitySequence:x=0,key:I}){super("prefetch"),(0,e.A)(this,"uri",void 0),(0,e.A)(this,"discontinuity",void 0),(0,e.A)(this,"mediaSequenceNumber",void 0),(0,e.A)(this,"discontinuitySequence",void 0),(0,e.A)(this,"key",void 0),this.uri=T,this.discontinuity=P,this.mediaSequenceNumber=b,this.discontinuitySequence=x,this.key=I}}class w{constructor({uri:T,lastMSN:P,lastPart:b}){(0,e.A)(this,"uri",void 0),(0,e.A)(this,"lastMSN",void 0),(0,e.A)(this,"lastPart",void 0),this.uri=T,this.lastMSN=P,this.lastPart=b}}},67756:(g,p,t)=>{t.d(p,{Bq:()=>h,HG:()=>o,Ro:()=>d,Th:()=>u,gI:()=>l,m2:()=>c});var e=t(99704),i=t.n(e),n=t(17735),s=t.n(n),r=t(7210),a=t.n(r);function d(f,v=10){if(typeof f=="number")return f;const y=v===10?i()(f):s()(f,v);return a()(y)?0:y}function c(f){(f.startsWith("0x")||f.startsWith("0X"))&&(f=f.slice(2));const v=[];for(let y=0;y<f.length;y+=2)v.push(d(f.slice(y,y+2),16));return new Uint8Array(v)}function l(f,v,y=0){let A=-1;for(let w=0,k=0;w<f.length;w++)if(f[w]===v){if(k++===y)return[f.slice(0,w),f.slice(w+1)];A=w}return A!==-1?[f.slice(0,A),f.slice(A+1)]:[f]}function h(f,v=" "){return f&&(f=f.trim(),v===" "||(f.startsWith(v)&&(f=f.slice(1)),f.endsWith(v)&&(f=f.slice(0,-1))),f)}function o(f){const v=[];let y=!0,A=0;const w=[];for(let k=0;k<f.length;k++){const T=f[k];y&&T===","?(v.push(f.slice(A,k).trim()),A=k+1):T!=='"'&&T!=="'"||(y?(w.push(T),y=!1):T===w[w.length-1]?(w.pop(),y=!0):w.push(T))}return v.push(f.slice(A).trim()),v}function u(f){const v=[];let y=!1;for(const A of f)A!=="-"&&A!=="_"?y?(v.push(A.toUpperCase()),y=!1):v.push(A.toLowerCase()):y=!0;return v.join("")}},88103:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(43356);class n extends i.A{constructor(r,a){super(r,a),(0,e.A)(this,"context",void 0),(0,e.A)(this,"paddingLeft",void 0),(0,e.A)(this,"paddingTop",void 0),(0,e.A)(this,"flipX",void 0),(0,e.A)(this,"flipY",void 0),this.paddingLeft=0,this.paddingTop=0,this.flipX=1,this.flipY=1}async init(){this.context=this.canvas.getContext("2d")}clear(){const r=this.canvas.width>>1,a=this.canvas.height>>1;this.rotate&&(this.context.translate(r,a),this.context.rotate(-this.rotate*Math.PI/180),this.context.translate(-r,-a)),this.context.clearRect(0,0,this.canvasWidth*this.options.devicePixelRatio,this.canvasHeight*this.options.devicePixelRatio),this.rotate&&(this.context.translate(r,a),this.context.rotate(this.rotate*Math.PI/180),this.context.translate(-r,-a))}checkFrame(r){r.codedWidth===this.textureWidth&&r.codedHeight===this.videoHeight&&r.codedWidth===this.videoWidth||(this.videoWidth=r.codedWidth,this.videoHeight=r.codedHeight,this.textureWidth=r.codedWidth,this.layout())}render(r){this.lost||(this.checkFrame(r),this.context.drawImage(r,this.paddingLeft,this.paddingTop,this.canvasWidth*this.options.devicePixelRatio-2*this.paddingLeft,this.canvasHeight*this.options.devicePixelRatio-2*this.paddingTop))}layout(){let r=this.videoWidth,a=this.videoHeight,d=this.canvasWidth,c=this.canvasHeight,l=0,h=0;this.rotate!==90&&this.rotate!==270||(h=Math.floor((c-d)/2),l=Math.floor((d-c)/2),d=this.canvasHeight,c=this.canvasWidth);const o=r/d,u=a/c;let f;if(f=o>1?!(o<u):o>u,this.renderMode===1&&(f=!f),f){const v=(c-a*d/r)/c;this.paddingTop=(Math.floor(v/2*c)+h)*this.options.devicePixelRatio,this.paddingLeft=l*this.options.devicePixelRatio}else{const v=(d-r*c/a)/d;this.paddingLeft=(Math.floor(v/2*d)+l)*this.options.devicePixelRatio,this.paddingTop=h*this.options.devicePixelRatio}if(this.context){let v=1,y=1;this.flipHorizontal&&(v=-1),this.flipVertical&&(y=-1);const A=this.canvas.width>>1,w=this.canvas.height>>1;this.context.translate(A,w),v!==this.flipX&&this.context.scale(-1,1),y!==this.flipY&&this.context.scale(1,-1),this.context.translate(-A,-w),this.flipX=v,this.flipY=y}}setRotate(r){if((r%=360)===this.rotate)return;const a=this.canvas.width>>1,d=this.canvas.height>>1;this.rotate&&(this.context.translate(a,d),this.context.rotate(-this.rotate*Math.PI/180),this.context.translate(-a,-d)),this.clear(),this.rotate=r,this.context&&(this.context.translate(a,d),this.context.rotate(this.rotate*Math.PI/180),this.context.translate(-a,-d)),this.layout()}destroy(){this.context=null,super.destroy()}static isSupport(r){return r instanceof VideoFrame||r instanceof ImageBitmap}}},43356:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(6110);class n{constructor(r,a){(0,e.A)(this,"canvas",void 0),(0,e.A)(this,"options",void 0),(0,e.A)(this,"textureWidth",void 0),(0,e.A)(this,"videoWidth",void 0),(0,e.A)(this,"videoHeight",void 0),(0,e.A)(this,"canvasWidth",void 0),(0,e.A)(this,"canvasHeight",void 0),(0,e.A)(this,"rotate",void 0),(0,e.A)(this,"renderMode",void 0),(0,e.A)(this,"format",void 0),(0,e.A)(this,"lost",void 0),(0,e.A)(this,"destroyed",void 0),(0,e.A)(this,"srcColorSpace",void 0),(0,e.A)(this,"dstColorSpace",void 0),(0,e.A)(this,"flipHorizontal",void 0),(0,e.A)(this,"flipVertical",void 0),this.canvas=r,this.options=a,this.canvasWidth=r.width,this.canvasHeight=r.height,this.videoWidth=0,this.videoHeight=0,this.textureWidth=0,this.rotate=0,this.renderMode=a.renderMode,this.flipHorizontal=!1,this.flipVertical=!1,this.lost=!1,this.destroyed=!1,a.dstColorSpace?this.dstColorSpace=a.dstColorSpace:this.dstColorSpace=new i.A(1,1,1,1)}getRotateMatrix(r){r=Math.PI*r/180;const a=Math.sin(r),d=Math.cos(r);return[d,-a,0,0,a,d,0,0,0,0,1,0,0,0,0,1]}setRenderMode(r){this.renderMode!==r&&(this.renderMode=r,this.layout(),this.clear())}enableHorizontalFlip(r){this.flipHorizontal!==r&&(this.flipHorizontal=r,this.layout(),this.clear())}enableVerticalFlip(r){this.flipVertical!==r&&(this.flipVertical=r,this.layout(),this.clear())}viewport(r,a){const d=this.options.devicePixelRatio;this.canvasWidth=r,this.canvasHeight=a,this.canvas.width=r*d,this.canvas.height=a*d,this.videoWidth&&this.videoHeight&&this.layout()}getVideoWidth(){return this.videoWidth}getVideoHeight(){return this.videoHeight}destroy(){this.canvas=null,this.destroyed=!0}setDstColorSpace(r){this.dstColorSpace=r}static isSupport(r){return!1}}},43813:(g,p,t)=>{t.d(p,{A:()=>l});var e=t(63939),i=t(67672),n=t(14686),s=t(97317),r=t(25669),a=t(6110),d=t(37653),c=t(32903);class l extends d.A{constructor(o,u){super(o,u)}generateFragmentSource(o,u){const f=(0,r.A)(this.srcColorSpace,this.dstColorSpace,{bitDepth:8,type:0,outputRGB:!0}),v=["r","g","b","a"];let y=`texture2D(rgb_Sampler, v_color.xy).${v[u.comp[0].offset]}`,A=`texture2D(rgb_Sampler, v_color.xy).${v[u.comp[1].offset]}`,w=`texture2D(rgb_Sampler, v_color.xy).${v[u.comp[2].offset]}`,k="1.0";128&u.flags&&u.nbComponents===4&&(k=`texture2D(rgb_Sampler, v_color.xy).${v[u.comp[3].offset]}`),this.fragmentSource=`
      precision highp float;
      varying vec4 v_color;
      uniform sampler2D rgb_Sampler;
      void main () {
        float r = ${y};
        float g = ${A};
        float b = ${w};
        float alpha = ${k};
        vec4 color = vec4(r, g, b, alpha);
        ${f.reduce((T,P)=>T+P,"")}
        gl_FragColor = color;
      }
    `}checkFrame(o){const u=s.g[e.f[15](o+80)];u&&(e.f[15](o+32)===this.textureWidth&&e.f[15](o+72)===this.videoHeight&&e.f[15](o+68)===this.videoWidth||(this.srcColorSpace=new a.A(e.f[15](o+220),e.f[15](o+212),e.f[15](o+216),e.f[15](o+208)),this.generateFragmentSource(e.f[15](o+80),u),this.program=new c.A(this.fragmentSource),this.useProgram(),u.nbComponents===4&&(this.rgbTexture.setFormat(this.gl.RGBA),this.rgbTexture.setInternalformat(this.gl.RGBA)),this.rgbTexture.setSize(e.f[15](o+32),e.f[15](o+72)),this.videoWidth=e.f[15](o+68),this.videoHeight=e.f[15](o+72),this.textureWidth=e.f[15](o+32),this.format=e.f[15](o+80),this.layout()))}render(o){this.lost||(this.checkFrame(o),this.rgbTexture.fill((0,n.s3)(e.f[20](o),this.rgbTexture.width*this.rgbTexture.height)),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4))}static isSupport(o){if(i.ai(o)){const u=s.g[e.f[15](o+80)];if(u)return 32&u.flags&&u.comp[0].depth+7>>>3==1}return!1}}},37653:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(134),i=t(94012),n=t(17397);class s extends i.A{constructor(a,d){super(a,d),(0,e.A)(this,"rgbTexture",void 0)}useProgram(){super.useProgram(),this.rgbTexture=new n.A(this.gl),this.rgbTexture.bind(0),this.rgbTexture.init(),this.program.bindRGBTexture(0)}destroy(){this.rgbTexture&&(this.rgbTexture.destroy(),this.rgbTexture=null),super.destroy()}}},94012:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(134),i=t(4624),n=t(43356),s=t(38469),r="src\\avrender\\image\\WebGLRender.ts";class a extends n.A{constructor(c,l){super(c,l),(0,e.A)(this,"gl",void 0),(0,e.A)(this,"VAO",void 0),(0,e.A)(this,"program",void 0),(0,e.A)(this,"vertex",void 0),(0,e.A)(this,"webglContextLostTimer",void 0),(0,e.A)(this,"onWebglContextLost",void 0),(0,e.A)(this,"onWebglContextRestored",void 0),(0,e.A)(this,"fragmentSource",void 0),(0,e.A)(this,"vertexSource",void 0)}async init(){this.gl=this.canvas.getContext("webgl2",{alpha:!1,antialias:!1,preserveDrawingBuffer:this.options.preserveDrawingBuffer}),this.gl||(this.gl=this.canvas.getContext("webgl",{alpha:!1,antialias:!1,preserveDrawingBuffer:this.options.preserveDrawingBuffer})),this.gl||(this.gl=this.canvas.getContext("experimental-webgl",{alpha:!1,antialias:!1,preserveDrawingBuffer:this.options.preserveDrawingBuffer})),this.gl||i.h2("can not support webgl, got WebGLRenderingContext failed",r,96),this.VAO=this.gl.createBuffer(),this.VAO||i.h2("create vao buffer failed",r,101),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.VAO),this.gl.enable(this.gl.BLEND),this.gl.clearColor(0,0,0,0),this.gl.clearDepth(1),this.viewport(this.canvasWidth||this.canvas.width,this.canvasHeight||this.canvas.height),this.onWebglContextLost=c=>{this.destroyed||(this.webglContextLostTimer=setTimeout(()=>{this.lost=!0,this.webglContextLostTimer=null,i.z3("webgl context lost",r,118),this.options.onRenderContextLost&&this.options.onRenderContextLost()},3e3))},this.onWebglContextRestored=c=>{this.webglContextLostTimer&&(clearTimeout(this.webglContextLostTimer),this.webglContextLostTimer=null)},this.canvas.addEventListener("webglcontextlost",this.onWebglContextLost),this.canvas.addEventListener("webglcontextrestored",this.onWebglContextRestored)}viewport(c,l){this.gl.viewport(0,0,c*this.options.devicePixelRatio,l*this.options.devicePixelRatio),super.viewport(c,l)}useProgram(){this.program.link(this.gl),this.program.bind(),this.program.setRotateMatrix(this.getRotateMatrix(this.rotate))}clear(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}layout(){let c=this.videoWidth,l=this.videoHeight,h=this.canvasWidth,o=this.canvasHeight;this.rotate!==90&&this.rotate!==270||(h=this.canvasHeight,o=this.canvasWidth);const u=c/h,f=l/o;let v;v=u>1?!(u<f):u>f,this.renderMode===1&&(v=!v);let y=0;if(this.textureWidth!==this.videoWidth&&(y=(this.textureWidth-this.videoWidth)/this.textureWidth),v){const A=(o-l*h/c)/o;this.vertex=[-1,1-A,0,0,0,0,0,-1,-1+A,0,0,1,0,0,1,1-A,0,1-y,0,0,0,1,-1+A,0,1-y,1,0,0]}else{const A=(h-c*o/l)/h;this.vertex=[-1+A,1,0,0,0,0,0,-1+A,-1,0,0,1,0,0,1-A,1,0,1-y,0,0,0,1-A,-1,0,1-y,1,0,0]}(0,s.A)(this.vertex,this.flipHorizontal,this.flipVertical),this.gl&&this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.vertex),this.gl.STATIC_DRAW)}setRotate(c){(c%=360)!==this.rotate&&(this.rotate=c,this.gl&&this.program.setRotateMatrix(this.getRotateMatrix(this.rotate)),this.layout(),this.clear())}destroy(){this.program&&this.program.stop(),this.gl=null,this.VAO=null,this.vertex=null,this.onWebglContextLost&&(this.canvas.removeEventListener("webglcontextlost",this.onWebglContextLost),this.onWebglContextLost=null),this.onWebglContextRestored&&(this.canvas.removeEventListener("webglcontextrestored",this.onWebglContextRestored),this.onWebglContextRestored=null),super.destroy()}}},99293:(g,p,t)=>{t.d(p,{A:()=>y});var e=t(134),i=t(74503),n=t(63939),s=t(94300),r=t(14686),a=t(97317),d=t(22594),c=t(25669),l=t(57517),h=t(6110),o=t(20088),u=t(56024),f=t(73039),v=t(67672);class y extends d.A{constructor(w,k){super(w,k),(0,e.A)(this,"hdrMetadata",void 0),(0,e.A)(this,"ext",void 0),this.hdrMetadata=(0,i.A)(o.A),this.hdrMetadata.multiplier=1}async init(){if(await super.init(),this.ext=this.gl.getExtension("EXT_texture_norm16"),!this.ext)throw Error("not support")}generateFragmentSource(w,k,T){T.outputRGB=!0;const P=(0,c.A)(this.srcColorSpace,this.dstColorSpace,T);let b="texture2D(u_Sampler, v_color.xy).x",x="texture2D(v_Sampler, v_color.xy).x",I="1.0";w===23&&(b="texture2D(u_Sampler, v_color.xy).x",x="texture2D(u_Sampler, v_color.xy).y"),128&k.flags&&k.nbComponents===4&&(I="texture2D(a_Sampler, v_color.xy).x"),this.fragmentSource=`
      precision highp float;

      varying vec4 v_color;
      uniform sampler2D y_Sampler;
      uniform sampler2D u_Sampler;
      uniform sampler2D v_Sampler;
      
      uniform float v_max;

      uniform float offset;
      uniform float multiplier;
      uniform float pq_tonemap_a;
      uniform float pq_tonemap_b;
      uniform float hlg_ootf_gamma_minus_one;
      uniform float hlg_dst_max_luminance_relative;
      uniform float nits_to_sdr_relative_factor;
      uniform float sdr_relative_to_nits_factor;

      ${1&k.flags?`
        float swap(float x) {
          int value = int(x * 65535.0);
          int low = value & 0xff;
          int high = (value >> 8) & 0xff;
          value = (low << 8) | high;
          return float(value) / v_max;
        }
      `:""}
      
      void main () {
      
        float y = texture2D(y_Sampler, v_color.xy).x;
        float u = ${b};
        float v = ${x};
        float alpha = ${I};
        
        ${1&k.flags?`
          y = swap(y);
          u = swap(u);
          v = swap(v);
        `:`
          y = y * 65535.0 / v_max;
          u = u * 65535.0 / v_max;
          v = v * 65535.0 / v_max;
        `}
        
        vec4 color = vec4(y, u, v, alpha);

        if (color.a > 0.0) {
          color.r /= color.a;
          color.g /= color.a;
          color.b /= color.a;
        }
        color.r -= offset;
        color.g -= offset;
        color.b -= offset;

        color.r *= multiplier;
        color.g *= multiplier;
        color.b *= multiplier;
        
        ${P.reduce((S,z)=>S+z,"")}

        color.r *= color.a;
        color.g *= color.a;
        color.b *= color.a;

        gl_FragColor = color;
      }
    `}checkFrame(w){const k=a.g[n.f[15](w+80)];if(!k)return;const T=k.comp[0].depth+7>>>3;if(n.f[15](w+32)/T!==this.textureWidth||n.f[15](w+72)!==this.videoHeight||n.f[15](w+68)!==this.videoWidth||n.f[15](w+80)!==this.format){this.srcColorSpace=new h.A(n.f[15](w+220),n.f[15](w+212),n.f[15](w+216),n.f[15](w+208));const P={type:0,bitDepth:k.comp[0].depth,toneMapPQAndHlgToDst:!0,metadata:this.hdrMetadata,dstSdrMaxLuminanceNits:l.kH,dstMaxLuminanceRelative:1},b=(0,u.aH)(w,14);if(b){const x=n.f[20](b+4);n.f[8](x)>0&&(P.maxContentLightLevel=n.f[8](x))}this.generateFragmentSource(n.f[15](w+80),k,P),this.program=new f.A(this.fragmentSource),this.useProgram(),this.program.setMetaData(this.hdrMetadata),this.yTexture.setFormat(this.gl.RED),this.yTexture.setInternalformat(this.ext.R16_EXT),this.yTexture.setDataType(this.gl.UNSIGNED_SHORT),this.uTexture.setFormat(this.gl.RED),this.uTexture.setInternalformat(this.ext.R16_EXT),this.uTexture.setDataType(this.gl.UNSIGNED_SHORT),this.vTexture.setFormat(this.gl.RED),this.vTexture.setInternalformat(this.ext.R16_EXT),this.vTexture.setDataType(this.gl.UNSIGNED_SHORT),this.aTexture.setFormat(this.gl.RED),this.aTexture.setInternalformat(this.ext.R16_EXT),this.aTexture.setDataType(this.gl.UNSIGNED_SHORT),this.yTexture.setSize(n.f[15](w+32)>>>1,n.f[15](w+72)),this.uTexture.setSize(n.f[15](w+32+4)>>>1,n.f[15](w+72)>>>a.g[n.f[15](w+80)].log2ChromaH),k.comp[1].plane!==k.comp[2].plane&&this.vTexture.setSize(n.f[15](w+32+8)>>>1,n.f[15](w+72)>>>a.g[n.f[15](w+80)].log2ChromaH),k.nbComponents===4&&this.aTexture.setSize(n.f[15](w+32+12)>>>1,n.f[15](w+72)),this.program.setMax((1<<k.comp[0].depth)-1),this.videoWidth=n.f[15](w+68),this.videoHeight=n.f[15](w+72),this.textureWidth=n.f[15](w+32)>>>1,this.format=n.f[15](w+80),this.layout()}}render(w){if(this.lost)return;this.checkFrame(w);const k=a.g[n.f[15](w+80)];k&&(this.yTexture.fill((0,r.bg)(n.f[20](w),this.yTexture.width*this.yTexture.height)),this.uTexture.fill((0,r.bg)(n.f[20](w+4),this.uTexture.width*this.uTexture.height)),k.comp[1].plane!==k.comp[2].plane&&this.vTexture.fill((0,r.bg)(n.f[20](w+8),this.vTexture.width*this.vTexture.height)),k.nbComponents===4&&this.aTexture.fill((0,r.bg)(n.f[20](w+12),this.aTexture.width*this.aTexture.height)),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4))}destroy(){this.hdrMetadata&&((0,s.A)(this.hdrMetadata),this.hdrMetadata=null),super.destroy()}static isSupport(w){if(v.ai(w)){const k=a.g[n.f[15](w+80)];if(k)return!(32&k.flags)&&16&k.flags&&k.comp[0].depth+7>>>3==2}return!1}}},55196:(g,p,t)=>{t.d(p,{A:()=>l});var e=t(63939),i=t(67672),n=t(14686),s=t(97317),r=t(22594),a=t(91848),d=t(25669),c=t(6110);class l extends r.A{constructor(o,u){super(o,u)}generateFragmentSource(o,u){const f=(0,d.A)(this.srcColorSpace,this.dstColorSpace,{bitDepth:8,type:0,outputRGB:!0});let v="texture2D(u_Sampler, v_color.xy).x",y="texture2D(v_Sampler, v_color.xy).x",A="1.0";o===23&&(v="texture2D(u_Sampler, v_color.xy).x",y="texture2D(u_Sampler, v_color.xy).y"),128&u.flags&&u.nbComponents===4&&(A="texture2D(a_Sampler, v_color.xy).x"),this.fragmentSource=`
      precision highp float;
      varying vec4 v_color;
      uniform sampler2D y_Sampler;
      uniform sampler2D u_Sampler;
      uniform sampler2D v_Sampler;
      uniform sampler2D a_Sampler;
      void main () {
        float y = texture2D(y_Sampler, v_color.xy).x;
        float u = ${v};
        float v = ${y};
        float alpha = ${A};
        vec4 color = vec4(y, u, v, alpha);
        ${f.reduce((w,k)=>w+k,"")}
        gl_FragColor = color;
      }
    `}checkFrame(o){const u=s.g[e.f[15](o+80)];u&&(e.f[15](o+32)===this.textureWidth&&e.f[15](o+72)===this.videoHeight&&e.f[15](o+68)===this.videoWidth||(this.srcColorSpace=new c.A(e.f[15](o+220),e.f[15](o+212),e.f[15](o+216),e.f[15](o+208)),this.generateFragmentSource(e.f[15](o+80),u),this.program=new a.A(this.fragmentSource),this.useProgram(),this.yTexture.setSize(e.f[15](o+32),e.f[15](o+72)),this.uTexture.setSize(e.f[15](o+32+4),e.f[15](o+72)>>>s.g[e.f[15](o+80)].log2ChromaH),u.comp[1].plane!==u.comp[2].plane&&this.vTexture.setSize(e.f[15](o+32+8),e.f[15](o+72)>>>s.g[e.f[15](o+80)].log2ChromaH),u.nbComponents===4&&this.aTexture.setSize(e.f[15](o+32+12),e.f[15](o+72)),this.videoWidth=e.f[15](o+68),this.videoHeight=e.f[15](o+72),this.textureWidth=e.f[15](o+32),this.format=e.f[15](o+80),this.layout()))}render(o){if(this.lost)return;this.checkFrame(o);const u=s.g[e.f[15](o+80)];u&&(this.yTexture.fill((0,n.s3)(e.f[20](o),this.yTexture.width*this.yTexture.height)),this.uTexture.fill((0,n.s3)(e.f[20](o+4),this.uTexture.width*this.uTexture.height)),u.comp[1].plane!==u.comp[2].plane&&this.vTexture.fill((0,n.s3)(e.f[20](o+8),this.vTexture.width*this.vTexture.height)),u.nbComponents===4&&this.aTexture.fill((0,n.s3)(e.f[20](o+12),this.aTexture.width*this.aTexture.height)),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4))}static isSupport(o){if(i.ai(o)){const u=s.g[e.f[15](o+80)];if(u)return!(32&u.flags)&&16&u.flags&&u.comp[0].depth+7>>>3==1}return!1}}},22594:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(134),i=t(48280),n=t(94012);class s extends n.A{constructor(a,d){super(a,d),(0,e.A)(this,"yTexture",void 0),(0,e.A)(this,"uTexture",void 0),(0,e.A)(this,"vTexture",void 0),(0,e.A)(this,"aTexture",void 0)}useProgram(){super.useProgram(),this.yTexture=new i.A(this.gl),this.yTexture.bind(0),this.yTexture.init(),this.program.bindYTexture(0),this.uTexture=new i.A(this.gl),this.uTexture.bind(1),this.uTexture.init(),this.program.bindUTexture(1),this.vTexture=new i.A(this.gl),this.vTexture.bind(2),this.vTexture.init(),this.program.bindVTexture(2),this.aTexture=new i.A(this.gl),this.aTexture.bind(3),this.aTexture.init(),this.program.bindATexture(3)}destroy(){this.yTexture&&(this.yTexture.destroy(),this.yTexture=null),this.uTexture&&(this.uTexture.destroy(),this.uTexture=null),this.vTexture&&(this.vTexture.destroy(),this.vTexture=null),this.aTexture&&(this.aTexture.destroy(),this.aTexture=null),super.destroy()}}},54750:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(54895),i=t(23195),n=t(15045);class s extends n.A{constructor(a,d){super(a,d),this.vertexSource=e.A,this.fragmentSource=i.A}checkFrame(a){a.codedWidth===this.textureWidth&&a.codedHeight===this.videoHeight&&a.codedWidth===this.videoWidth||(this.videoWidth=a.codedWidth,this.videoHeight=a.codedHeight,this.textureWidth=a.codedWidth,this.layout(),this.generatePipeline())}generateBindGroup(){this.bindGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,externalTexture:{}},{binding:2,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}}]})}render(a){if(this.lost)return;this.checkFrame(a);const d=this.device.createBindGroup({layout:this.renderPipeline.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this.rotateMatrixBuffer,size:16*Float32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.device.importExternalTexture({source:a})},{binding:2,resource:this.sampler}]}),c=this.device.createCommandEncoder(),l={colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"}]},h=c.beginRenderPass(l);h.setPipeline(this.renderPipeline),h.setBindGroup(0,d),h.setVertexBuffer(0,this.vbo),h.draw(4,4,0,0),h.end(),this.device.queue.submit([c.finish()])}destroy(){super.destroy()}static isSupport(a){return a instanceof VideoFrame}}},1052:(g,p,t)=>{t.d(p,{A:()=>c});var e=t(63939),i=t(67672),n=t(97317),s=t(14686),r=t(6110),a=t(25669),d=t(56066);class c extends d.A{constructor(h,o){super(h,o)}generateFragmentSource(h,o){const u=(0,a.A)(this.srcColorSpace,this.dstColorSpace,{bitDepth:8,type:1,outputRGB:!0}),f=["r","g","b","a"];let v=`textureSample(rgbTexture, in_texcoord.xy).${f[o.comp[0].offset]}`,y=`textureSample(rgbTexture, in_texcoord.xy).${f[o.comp[1].offset]}`,A=`textureSample(rgbTexture, in_texcoord.xy).${f[o.comp[2].offset]}`,w="1.0";128&o.flags&&o.nbComponents===4&&(w=`textureSample(rgbTexture, in_texcoord.xy).${f[o.comp[3].offset]}`),this.fragmentSource=`
      @group(0) @binding(1) var s: sampler;
      @group(0) @binding(2) var rgbTexture: texture_2d<f32>;
      
      @fragment
      fn main(@location(0) in_texcoord: vec4<f32>) -> @location(0) vec4<f32> {
        let r = ${v};
        let g = ${y};
        let b = ${A};
        let alpha = ${w};
        var color = vec4(r, g, b, alpha);
        ${u.reduce((k,T)=>k+T,"")}
        return color;
      }
    `}checkFrame(h){const o=n.g[e.f[15](h+80)];o&&(e.f[15](h+32)===this.textureWidth&&e.f[15](h+72)===this.videoHeight&&e.f[15](h+68)===this.videoWidth||(this.rgbTexture&&this.rgbTexture.destroy(),this.rgbTexture=this.device.createTexture({size:[e.f[15](h+32),e.f[15](h+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"}),this.srcColorSpace=new r.A(e.f[15](h+220),e.f[15](h+212),e.f[15](h+216),e.f[15](h+208)),this.generateFragmentSource(e.f[15](h+80),o),this.videoWidth=e.f[15](h+68),this.videoHeight=e.f[15](h+72),this.textureWidth=e.f[15](h+32),this.format=e.f[15](h+80),this.layout(),this.generatePipeline(),this.generateRenderBundleEncoder()))}render(h){if(this.lost)return;this.checkFrame(h),this.device.queue.writeTexture({texture:this.rgbTexture},(0,s.s3)(e.f[20](h),this.rgbTexture.width*this.rgbTexture.height),{offset:0,bytesPerRow:this.rgbTexture.width,rowsPerImage:this.rgbTexture.height},{width:this.rgbTexture.width,height:this.rgbTexture.height,depthOrArrayLayers:1});const o=this.device.createCommandEncoder(),u=o.beginRenderPass({colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"}]});u.executeBundles([this.renderBundle]),u.end(),this.device.queue.submit([o.finish()])}static isSupport(h){if(i.ai(h)){const o=n.g[e.f[15](h+80)];if(o)return 32&o.flags&&o.comp[0].depth+7>>>3==1}return!1}}},56066:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(134),i=t(54895),n=t(15045);class s extends n.A{constructor(a,d){super(a,d),(0,e.A)(this,"rgbTexture",void 0),this.vertexSource=i.A}generateBindGroup(){if(!this.rgbTexture)return;const a=[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}];this.bindGroupLayout=this.device.createBindGroupLayout({entries:a});const d=[{binding:0,resource:{buffer:this.rotateMatrixBuffer,size:16*Float32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.sampler},{binding:2,resource:this.rgbTexture.createView()}];this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:d})}destroy(){this.rgbTexture&&this.rgbTexture.destroy(),super.destroy()}}},15045:(g,p,t)=>{t.d(p,{A:()=>d});var e=t(134),i=t(4624),n=t(43356),s=t(72739),r=t(38469),a="src\\avrender\\image\\WebGPURender.ts";class d extends n.A{constructor(l,h){super(l,h),(0,e.A)(this,"adapter",void 0),(0,e.A)(this,"device",void 0),(0,e.A)(this,"context",void 0),(0,e.A)(this,"vsModule",void 0),(0,e.A)(this,"fsModule",void 0),(0,e.A)(this,"rotateMatrixBuffer",void 0),(0,e.A)(this,"renderPipeline",void 0),(0,e.A)(this,"rotateMatrix",void 0),(0,e.A)(this,"vbo",void 0),(0,e.A)(this,"sampler",void 0),(0,e.A)(this,"vertex",void 0),(0,e.A)(this,"fragmentSource",void 0),(0,e.A)(this,"vertexSource",void 0),(0,e.A)(this,"renderBundleEncoder",void 0),(0,e.A)(this,"renderBundle",void 0),(0,e.A)(this,"bindGroupLayout",void 0),(0,e.A)(this,"bindGroup",void 0),(0,e.A)(this,"pipelineLayout",void 0)}async init(l){var h;this.adapter=await navigator.gpu.requestAdapter({powerPreference:(h=this.options.powerPreference)!==null&&h!==void 0?h:"high-performance"});const o=[];s.__(l,u=>{this.adapter.features.has(u)&&o.push(u)}),this.device=await this.adapter.requestDevice({requiredFeatures:o.length?o:void 0}),this.device.lost.then(()=>{var u;this.destroyed||(this.lost=!0,i.z3("gpu device lost",a,101),(u=this.options)!==null&&u!==void 0&&u.onRenderContextLost&&this.options.onRenderContextLost())}),this.context=this.canvas.getContext("webgpu"),this.context||i.h2("can not support webgpu, got GPUCanvasContext failed",a,110),this.context.configure({device:this.device,format:navigator.gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),this.sampler=this.device.createSampler({magFilter:"linear",minFilter:"linear"}),this.vbo=this.device.createBuffer({size:28*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST}),this.rotateMatrixBuffer=this.device.createBuffer({size:16*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.setRotateMatrix(this.getRotateMatrix(0))}generatePipeline(){this.generateBindGroup(),this.pipelineLayout=this.device.createPipelineLayout({bindGroupLayouts:[this.bindGroupLayout]}),this.vsModule=this.device.createShaderModule({code:this.vertexSource}),this.fsModule=this.device.createShaderModule({code:this.fragmentSource}),this.renderPipeline=this.device.createRenderPipeline({layout:this.pipelineLayout,vertex:{module:this.vsModule,entryPoint:"main",buffers:[{arrayStride:28,attributes:[{shaderLocation:0,offset:0,format:"float32x3"},{shaderLocation:1,offset:12,format:"float32x4"}]}]},fragment:{module:this.fsModule,entryPoint:"main",targets:[{format:navigator.gpu.getPreferredCanvasFormat()}]},primitive:{topology:"triangle-strip"}})}generateRenderBundleEncoder(){this.renderPipeline&&(this.renderBundleEncoder=this.device.createRenderBundleEncoder({colorFormats:[navigator.gpu.getPreferredCanvasFormat()]}),this.renderBundleEncoder.setPipeline(this.renderPipeline),this.renderBundleEncoder.setBindGroup(0,this.bindGroup),this.renderBundleEncoder.setVertexBuffer(0,this.vbo),this.renderBundleEncoder.draw(4,4,0,0),this.renderBundle=this.renderBundleEncoder.finish())}setRotateMatrix(l){this.rotateMatrix=l;const h=new Float32Array(this.rotateMatrix);this.device.queue.writeBuffer(this.rotateMatrixBuffer,0,h.buffer,h.byteOffset,h.byteLength)}setVertices(){const l=new Float32Array(this.vertex);this.device.queue.writeBuffer(this.vbo,0,l.buffer,l.byteOffset,l.byteLength)}clear(){this.context.getCurrentTexture().destroy()}layout(){let l=this.videoWidth,h=this.videoHeight,o=this.canvasWidth,u=this.canvasHeight;this.rotate!==90&&this.rotate!==270||(o=this.canvasHeight,u=this.canvasWidth);const f=l/o,v=h/u;let y;y=f>1?!(f<v):f>v,this.renderMode===1&&(y=!y);let A=0;if(this.textureWidth!==this.videoWidth&&(A=(this.textureWidth-this.videoWidth)/this.textureWidth),y){const w=(u-h*o/l)/u;this.vertex=[-1,1-w,0,0,0,0,0,-1,-1+w,0,0,1,0,0,1,1-w,0,1-A,0,0,0,1,-1+w,0,1-A,1,0,0]}else{const w=(o-l*u/h)/o;this.vertex=[-1+w,1,0,0,0,0,0,-1+w,-1,0,0,1,0,0,1-w,1,0,1-A,0,0,0,1-w,-1,0,1-A,1,0,0]}(0,r.A)(this.vertex,this.flipHorizontal,this.flipVertical),this.setVertices()}viewport(l,h){super.viewport(l,h)}setRotate(l){(l%=360)!==this.rotate&&(this.rotate=l,this.setRotateMatrix(this.getRotateMatrix(l)),this.layout(),this.clear())}destroy(){this.sampler=null,this.vbo&&this.vbo.destroy(),this.rotateMatrixBuffer&&this.rotateMatrixBuffer.destroy(),this.bindGroupLayout=null,this.bindGroup=null,this.pipelineLayout=null,this.renderBundle=null,this.renderBundleEncoder=null,this.fsModule=null,this.vsModule=null,this.renderPipeline=null,this.rotateMatrix=null,this.vertex=null,this.context=null,this.options=null,this.destroyed=!0,this.device&&(this.device.destroy(),this.device=null),this.adapter&&(this.adapter=null),super.destroy()}}},90058:(g,p,t)=>{t.d(p,{A:()=>w});var e=t(134),i=t(61499),n=t(74503),s=t(63939),r=t(94300),a=t(67672),d=t(49393),c=t(97317),l=t(14686),h=t(6110),o=t(62496),u=t(57914),f=t(57517),v=t(25669),y=t(20088),A=t(56024);class w extends d.A{constructor(T,P){super(T,P),(0,e.A)(this,"metaYBuffer",void 0),(0,e.A)(this,"metaUBuffer",void 0),(0,e.A)(this,"metaVBuffer",void 0),(0,e.A)(this,"metaABuffer",void 0),(0,e.A)(this,"computeBindGroupLayout",void 0),(0,e.A)(this,"computeBindGroupY",void 0),(0,e.A)(this,"computeBindGroupU",void 0),(0,e.A)(this,"computeBindGroupV",void 0),(0,e.A)(this,"computeBindGroupA",void 0),(0,e.A)(this,"computePipelineLayout",void 0),(0,e.A)(this,"computePipeline",void 0),(0,e.A)(this,"inputYTexture",void 0),(0,e.A)(this,"inputUTexture",void 0),(0,e.A)(this,"inputVTexture",void 0),(0,e.A)(this,"inputATexture",void 0),(0,e.A)(this,"computeModule",void 0),(0,e.A)(this,"uint2Float",void 0),(0,e.A)(this,"hdrMetadata",void 0),(0,e.A)(this,"hdrMetadataBuffer",void 0),this.hdrMetadata=(0,n.A)(y.A),this.hdrMetadata.multiplier=1}generateFragmentSource(T,P,b){b.outputRGB=!0;const x=(0,v.A)(this.srcColorSpace,this.dstColorSpace,b);let I="textureSample(uTexture, s, in_texcoord.xy).x",S="textureSample(vTexture, s, in_texcoord.xy).x",z="1.0";T===23&&(I="textureSample(uTexture, s, in_texcoord.xy).x",S="textureSample(uTexture, s, in_texcoord.xy).y"),128&P.flags&&P.nbComponents===4&&(z="textureSample(aTexture, s, in_texcoord.xy).x"),this.fragmentSource=`
      struct HdrMetadata {
        offset: f32,
        multiplier: f32,
        pqTonemapA: f32,
        pqTonemapB: f32,
        hlgOOTFGammaMinusOne: f32,
        hlgDstMaxLuminanceRelative: f32,
        nitsToSdrRelativeFactor: f32,
        sdrRelativeToNitsFactor: f32
      };

      @group(0) @binding(1) var s: sampler;
      @group(0) @binding(2) var<uniform> hdrMetadata: HdrMetadata;
      @group(0) @binding(3) var yTexture: texture_2d<f32>;
      @group(0) @binding(4) var uTexture: texture_2d<f32>;

      ${this.vTexture?"@group(0) @binding(5) var vTexture: texture_2d<f32>;":""}
      ${this.aTexture?"@group(0) @binding(6) var aTexture: texture_2d<f32>;":""}

      @fragment
      fn main(@location(0) in_texcoord: vec4<f32>) -> @location(0) vec4<f32> {

        let offset = hdrMetadata.offset;
        let multiplier = hdrMetadata.multiplier;
        let pq_tonemap_a = hdrMetadata.pqTonemapA;
        let pq_tonemap_b = hdrMetadata.pqTonemapB;
        let hlg_ootf_gamma_minus_one = hdrMetadata.hlgOOTFGammaMinusOne;
        let hlg_dst_max_luminance_relative = hdrMetadata.hlgDstMaxLuminanceRelative;
        let nits_to_sdr_relative_factor = hdrMetadata.nitsToSdrRelativeFactor;
        let sdr_relative_to_nits_factor = hdrMetadata.sdrRelativeToNitsFactor;

        let y = textureSample(yTexture, s, in_texcoord.xy).x;
        let u = ${I};
        let v = ${S};
        let alpha = ${z};
        var color = vec4(y, u, v, alpha);

        if (color.a > 0) {
          color.r /= color.a;
          color.g /= color.a;
          color.b /= color.a;
        }
        color.r -= offset;
        color.g -= offset;
        color.b -= offset;

        color.r *= multiplier;
        color.g *= multiplier;
        color.b *= multiplier;
        
        ${x.reduce((V,L)=>V+L,"")}

        color.r *= color.a;
        color.g *= color.a;
        color.b *= color.a;

        return color;
      }
    `}async init(){await super.init(["float32-filterable"]),this.metaYBuffer=this.device.createBuffer({size:4*Uint32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.metaUBuffer=this.device.createBuffer({size:4*Uint32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.metaVBuffer=this.device.createBuffer({size:4*Uint32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.metaABuffer=this.device.createBuffer({size:4*Uint32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.hdrMetadataBuffer=this.device.createBuffer({size:32,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST})}generateComputeBindGroup(){this.computeBindGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"uint"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float"}}]}),this.computeBindGroupY=this.device.createBindGroup({layout:this.computeBindGroupLayout,entries:[{binding:0,resource:{buffer:this.metaYBuffer,size:4*Uint32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.inputYTexture.createView()},{binding:2,resource:this.yTexture.createView()}]}),this.computeBindGroupU=this.device.createBindGroup({layout:this.computeBindGroupLayout,entries:[{binding:0,resource:{buffer:this.metaUBuffer,size:4*Uint32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.inputUTexture.createView()},{binding:2,resource:this.uTexture.createView()}]}),this.vTexture&&(this.computeBindGroupV=this.device.createBindGroup({layout:this.computeBindGroupLayout,entries:[{binding:0,resource:{buffer:this.metaVBuffer,size:4*Uint32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.inputVTexture.createView()},{binding:2,resource:this.vTexture.createView()}]})),this.aTexture&&(this.computeBindGroupA=this.device.createBindGroup({layout:this.computeBindGroupLayout,entries:[{binding:0,resource:{buffer:this.metaABuffer,size:4*Uint32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.inputATexture.createView()},{binding:2,resource:this.aTexture.createView()}]}))}generateComputePipeline(){this.generateComputeBindGroup(),this.computePipelineLayout=this.device.createPipelineLayout({bindGroupLayouts:[this.computeBindGroupLayout]}),this.computeModule=this.device.createShaderModule({code:this.uint2Float}),this.computePipeline=this.device.createComputePipeline({layout:this.computePipelineLayout,compute:{module:this.computeModule,entryPoint:"main"}})}generateBindGroup(){if(!this.yTexture)return;const T=[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}},{binding:3,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}},{binding:4,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}];this.vTexture&&T.push({binding:5,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}),this.aTexture&&T.push({binding:6,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}),this.bindGroupLayout=this.device.createBindGroupLayout({entries:T});const P=[{binding:0,resource:{buffer:this.rotateMatrixBuffer,size:16*Float32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.sampler},{binding:2,resource:{buffer:this.hdrMetadataBuffer,size:this.hdrMetadataBuffer.size}},{binding:3,resource:this.yTexture.createView()},{binding:4,resource:this.uTexture.createView()}];this.vTexture&&P.push({binding:5,resource:this.vTexture.createView()}),this.aTexture&&P.push({binding:6,resource:this.aTexture.createView()}),this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:P})}checkFrame(T){const P=c.g[s.f[15](T+80)];if(P&&(s.f[15](T+32)>>>1!==this.textureWidth||s.f[15](T+72)!==this.videoHeight||s.f[15](T+68)!==this.videoWidth||s.f[15](T+80)!==this.format)){this.yTexture&&this.yTexture.destroy(),this.uTexture&&this.uTexture.destroy(),this.vTexture&&this.vTexture.destroy(),this.aTexture&&this.aTexture.destroy(),this.inputYTexture&&this.inputYTexture.destroy(),this.inputUTexture&&this.inputUTexture.destroy(),this.inputVTexture&&this.inputVTexture.destroy(),this.inputATexture&&this.inputATexture.destroy(),this.yTexture=this.device.createTexture({size:[s.f[15](T+32)>>>1,s.f[15](T+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.STORAGE_BINDING,format:"r32float"}),this.uTexture=this.device.createTexture({size:[s.f[15](T+32+4)>>>1,s.f[15](T+72)>>>P.log2ChromaH],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.STORAGE_BINDING,format:"r32float"}),P.comp[1].plane!==P.comp[2].plane&&(this.vTexture=this.device.createTexture({size:[s.f[15](T+32+8)>>>1,s.f[15](T+72)>>>P.log2ChromaH],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.STORAGE_BINDING,format:"r32float"})),P.nbComponents===4&&(this.aTexture=this.device.createTexture({size:[s.f[15](T+32+12)>>>1,s.f[15](T+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.STORAGE_BINDING,format:"r32float"})),this.inputYTexture=this.device.createTexture({size:[this.yTexture.width,this.yTexture.height],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,format:"r16uint"}),this.inputUTexture=this.device.createTexture({size:[this.uTexture.width,this.uTexture.height],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,format:"r16uint"}),P.comp[1].plane!==P.comp[2].plane&&(this.inputVTexture=this.device.createTexture({size:[this.vTexture.width,this.vTexture.height],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,format:"r16uint"})),P.nbComponents===4&&(this.inputATexture=this.device.createTexture({size:[this.aTexture.width,this.aTexture.height],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,format:"r16uint"}));const b=new Uint32Array([(1<<P.comp[0].depth)-1,this.inputYTexture.width,this.inputYTexture.height]);this.device.queue.writeBuffer(this.metaYBuffer,0,b.buffer,b.byteOffset,b.byteLength);const x=new Uint32Array([(1<<P.comp[1].depth)-1,this.inputUTexture.width,this.inputUTexture.height]);if(this.device.queue.writeBuffer(this.metaUBuffer,0,x.buffer,x.byteOffset,x.byteLength),P.comp[1].plane!==P.comp[2].plane){const V=new Uint32Array([(1<<P.comp[2].depth)-1,this.inputVTexture.width,this.inputVTexture.height]);this.device.queue.writeBuffer(this.metaVBuffer,0,V.buffer,V.byteOffset,V.byteLength)}if(P.nbComponents===4){const V=new Uint32Array([(1<<P.comp[3].depth)-1,this.inputATexture.width,this.inputATexture.height]);this.device.queue.writeBuffer(this.metaABuffer,0,V.buffer,V.byteOffset,V.byteLength)}this.srcColorSpace=new h.A(s.f[15](T+220),s.f[15](T+212),s.f[15](T+216),s.f[15](T+208)),this.videoWidth=s.f[15](T+68),this.videoHeight=s.f[15](T+72),this.textureWidth=s.f[15](T+32)>>>1,this.format=s.f[15](T+80);const I={type:1,bitDepth:P.comp[0].depth,toneMapPQAndHlgToDst:!0,metadata:this.hdrMetadata,dstSdrMaxLuminanceNits:f.kH,dstMaxLuminanceRelative:1},S=(0,A.aH)(T,14);if(S){const V=s.f[20](S+4);s.f[8](V)>0&&(I.maxContentLightLevel=s.f[8](V))}this.generateFragmentSource(s.f[15](T+80),P,I),this.uint2Float=1&P.flags?u.A:o.A,this.layout(),this.generatePipeline(),this.generateRenderBundleEncoder(),this.generateComputePipeline();const z=(0,l.s3)(this.hdrMetadata[i.o9],32).slice();this.device.queue.writeBuffer(this.hdrMetadataBuffer,0,z.buffer,z.byteOffset,z.byteLength)}}render(T){if(this.lost)return;this.checkFrame(T);const P=this.device.createCommandEncoder(),b=P.beginComputePass({});b.setPipeline(this.computePipeline),b.setBindGroup(0,this.computeBindGroupY),this.device.queue.writeTexture({texture:this.inputYTexture},(0,l.s3)(s.f[20](T),this.inputYTexture.width*this.inputYTexture.height<<1),{offset:0,bytesPerRow:this.inputYTexture.width<<1,rowsPerImage:this.inputYTexture.height},{width:this.inputYTexture.width,height:this.inputYTexture.height,depthOrArrayLayers:1}),b.dispatchWorkgroups(this.inputYTexture.width+7>>>3,this.inputYTexture.height+7>>>3),b.setBindGroup(0,this.computeBindGroupU),this.device.queue.writeTexture({texture:this.inputUTexture},(0,l.s3)(s.f[20](T+4),this.inputUTexture.width*this.inputUTexture.height<<1),{offset:0,bytesPerRow:this.inputUTexture.width<<1,rowsPerImage:this.inputUTexture.height},{width:this.inputUTexture.width,height:this.inputUTexture.height,depthOrArrayLayers:1}),b.dispatchWorkgroups(this.inputUTexture.width+7>>>3,this.inputUTexture.height+7>>>3),this.inputVTexture&&(b.setBindGroup(0,this.computeBindGroupV),this.device.queue.writeTexture({texture:this.inputVTexture},(0,l.s3)(s.f[20](T+8),this.inputVTexture.width*this.inputVTexture.height<<1),{offset:0,bytesPerRow:this.inputVTexture.width<<1,rowsPerImage:this.inputVTexture.height},{width:this.inputVTexture.width,height:this.inputVTexture.height,depthOrArrayLayers:1}),b.dispatchWorkgroups(this.inputVTexture.width+7>>>3,this.inputVTexture.height+7>>>3)),this.inputATexture&&(b.setBindGroup(0,this.computeBindGroupA),this.device.queue.writeTexture({texture:this.inputATexture},(0,l.s3)(s.f[20](T+12),this.inputATexture.width*this.inputATexture.height<<1),{offset:0,bytesPerRow:this.inputATexture.width<<1,rowsPerImage:this.inputATexture.height},{width:this.inputATexture.width,height:this.inputATexture.height,depthOrArrayLayers:1}),b.dispatchWorkgroups(this.inputATexture.width+7>>>3,this.inputATexture.height+7>>>3)),b.end();const x=P.beginRenderPass({colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"}]});x.executeBundles([this.renderBundle]),x.end(),this.device.queue.submit([P.finish()])}destroy(){this.inputYTexture&&(this.inputYTexture.destroy(),this.inputYTexture=null),this.inputUTexture&&(this.inputUTexture.destroy(),this.inputUTexture=null),this.inputVTexture&&(this.inputVTexture.destroy(),this.inputVTexture=null),this.metaYBuffer&&(this.metaYBuffer.destroy(),this.metaYBuffer=null),this.metaUBuffer&&(this.metaUBuffer.destroy(),this.metaUBuffer=null),this.metaVBuffer&&(this.metaVBuffer.destroy(),this.metaVBuffer=null),this.hdrMetadata&&((0,r.A)(this.hdrMetadata),this.hdrMetadata=null),this.computeModule=null,this.computeBindGroupY=null,this.computeBindGroupU=null,this.computeBindGroupV=null,this.computeBindGroupLayout=null,this.computePipelineLayout=null,this.computePipeline=null,super.destroy()}static isSupport(T){if(a.ai(T)){const P=c.g[s.f[15](T+80)];if(P)return!(32&P.flags)&&16&P.flags&&P.comp[0].depth+7>>>3==2}return!1}}},37977:(g,p,t)=>{t.d(p,{A:()=>c});var e=t(63939),i=t(67672),n=t(49393),s=t(97317),r=t(14686),a=t(6110),d=t(25669);class c extends n.A{constructor(h,o){super(h,o)}generateFragmentSource(h,o){const u=(0,d.A)(this.srcColorSpace,this.dstColorSpace,{bitDepth:8,type:1,outputRGB:!0});let f="textureSample(uTexture, s, in_texcoord.xy).x",v="textureSample(vTexture, s, in_texcoord.xy).x",y="1.0";h===23&&(f="textureSample(uTexture, s, in_texcoord.xy).x",v="textureSample(uTexture, s, in_texcoord.xy).y"),128&o.flags&&o.nbComponents===4&&(y="textureSample(aTexture, s, in_texcoord.xy).x"),this.fragmentSource=`
      @group(0) @binding(1) var s: sampler;
      @group(0) @binding(2) var yTexture: texture_2d<f32>;
      @group(0) @binding(3) var uTexture: texture_2d<f32>;
      ${this.vTexture?"@group(0) @binding(4) var vTexture: texture_2d<f32>;":""}
      ${this.aTexture?"@group(0) @binding(5) var aTexture: texture_2d<f32>;":""}
      
      @fragment
      fn main(@location(0) in_texcoord: vec4<f32>) -> @location(0) vec4<f32> {
        let y = textureSample(yTexture, s, in_texcoord.xy).x;
        let u = ${f};
        let v = ${v};
        let alpha = ${y};
        var color = vec4(y, u, v, alpha);
        ${u.reduce((A,w)=>A+w,"")}
        return color;
      }
    `}checkFrame(h){const o=s.g[e.f[15](h+80)];o&&(e.f[15](h+32)===this.textureWidth&&e.f[15](h+72)===this.videoHeight&&e.f[15](h+68)===this.videoWidth||(this.yTexture&&this.yTexture.destroy(),this.uTexture&&this.uTexture.destroy(),this.vTexture&&this.vTexture.destroy(),this.aTexture&&this.aTexture.destroy(),this.yTexture=this.device.createTexture({size:[e.f[15](h+32),e.f[15](h+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"}),this.uTexture=this.device.createTexture({size:[e.f[15](h+32+4),e.f[15](h+72)>>>s.g[e.f[15](h+80)].log2ChromaH],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"}),o.comp[1].plane!==o.comp[2].plane&&(this.vTexture=this.device.createTexture({size:[e.f[15](h+32+8),e.f[15](h+72)>>>s.g[e.f[15](h+80)].log2ChromaH],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"})),o.nbComponents===4&&(this.aTexture=this.device.createTexture({size:[e.f[15](h+32+12),e.f[15](h+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"})),this.srcColorSpace=new a.A(e.f[15](h+220),e.f[15](h+212),e.f[15](h+216),e.f[15](h+208)),this.generateFragmentSource(e.f[15](h+80),o),this.videoWidth=e.f[15](h+68),this.videoHeight=e.f[15](h+72),this.textureWidth=e.f[15](h+32),this.format=e.f[15](h+80),this.layout(),this.generatePipeline(),this.generateRenderBundleEncoder()))}render(h){if(this.lost)return;this.checkFrame(h),this.device.queue.writeTexture({texture:this.yTexture},(0,r.s3)(e.f[20](h),this.yTexture.width*this.yTexture.height),{offset:0,bytesPerRow:this.yTexture.width,rowsPerImage:this.yTexture.height},{width:this.yTexture.width,height:this.yTexture.height,depthOrArrayLayers:1}),this.device.queue.writeTexture({texture:this.uTexture},(0,r.s3)(e.f[20](h+4),this.uTexture.width*this.uTexture.height),{offset:0,bytesPerRow:this.uTexture.width,rowsPerImage:this.uTexture.height},{width:this.uTexture.width,height:this.uTexture.height,depthOrArrayLayers:1}),this.vTexture&&this.device.queue.writeTexture({texture:this.vTexture},(0,r.s3)(e.f[20](h+8),this.vTexture.width*this.vTexture.height),{offset:0,bytesPerRow:this.vTexture.width,rowsPerImage:this.vTexture.height},{width:this.vTexture.width,height:this.vTexture.height,depthOrArrayLayers:1}),this.aTexture&&this.device.queue.writeTexture({texture:this.aTexture},(0,r.s3)(e.f[20](h+12),this.aTexture.width*this.aTexture.height),{offset:0,bytesPerRow:this.aTexture.width,rowsPerImage:this.aTexture.height},{width:this.aTexture.width,height:this.aTexture.height,depthOrArrayLayers:1});const o=this.device.createCommandEncoder(),u=o.beginRenderPass({colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"}]});u.executeBundles([this.renderBundle]),u.end(),this.device.queue.submit([o.finish()])}static isSupport(h){if(i.ai(h)){const o=s.g[e.f[15](h+80)];if(o)return!(32&o.flags)&&16&o.flags&&o.comp[0].depth+7>>>3==1}return!1}}},49393:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(134),i=t(54895),n=t(15045);class s extends n.A{constructor(a,d){super(a,d),(0,e.A)(this,"yTexture",void 0),(0,e.A)(this,"uTexture",void 0),(0,e.A)(this,"vTexture",void 0),(0,e.A)(this,"aTexture",void 0),this.vertexSource=i.A}generateBindGroup(){if(!this.yTexture)return;const a=[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}},{binding:3,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}];this.vTexture&&a.push({binding:4,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}),this.aTexture&&a.push({binding:5,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}),this.bindGroupLayout=this.device.createBindGroupLayout({entries:a});const d=[{binding:0,resource:{buffer:this.rotateMatrixBuffer,size:16*Float32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.sampler},{binding:2,resource:this.yTexture.createView()},{binding:3,resource:this.uTexture.createView()}];this.vTexture&&d.push({binding:4,resource:this.vTexture.createView()}),this.aTexture&&d.push({binding:5,resource:this.aTexture.createView()}),this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:d})}destroy(){this.yTexture&&this.yTexture.destroy(),this.uTexture&&this.uTexture.destroy(),this.vTexture&&this.vTexture.destroy(),this.aTexture&&this.aTexture.destroy(),super.destroy()}}},6110:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(134),i=t(12535),n=t(1064),s=t(86141),r=t(91131);class a{constructor(c,l,h,o){(0,e.A)(this,"matrixId",void 0),(0,e.A)(this,"primaryId",void 0),(0,e.A)(this,"transferId",void 0),(0,e.A)(this,"rangeId",void 0),this.matrixId=c,this.primaryId=l,this.transferId=h,this.rangeId=o}getMatrixId(){return this.matrixId}getPrimaryId(){return this.primaryId}getTransferId(){return this.transferId}getRangeId(){return this.rangeId}isWide(){return this.primaryId===9||this.primaryId===11||this.primaryId===12}isHDR(){return this.transferId===18||this.transferId===16}isToneMappedByDefault(){return this.transferId===18||this.transferId===16}isAffectedBySDRWhiteLevel(){return this.transferId===18||this.transferId===16}fullRangeEncodedValues(){return this.transferId===12||this.transferId===11}getTransferMatrix(c){const l=(1<<c-1)/((1<<c)-1);let h=0,o=0;switch(this.matrixId){case 0:return new i.A;case 1:case 2:h=.2126,o=.0722;break;case 4:h=.3,o=.11;break;case 5:case 6:h=.299,o=.114;break;case 7:h=.212,o=.087;break;case 8:return i.A.RowMajor([.25,.5,.25,0,-.25,.5,-.25,l,.5,0,-.5,l,0,0,0,1]);case 10:return h=.2627,o=.0593,i.A.RowMajor([1,0,0,0,h,1-h-o,o,0,0,0,1,0,0,0,0,1]);case 9:h=.2627,o=.0593;break;case 11:return i.A.RowMajor([0,1,0,0,0,-.5,.493283,.5,.5,-.495951,0,.5,0,0,0,1])}let u=1-h-o,f=.5/(1-o),v=.5/(1-h);return i.A.RowMajor([h,u,o,0,f*-h,f*-u,f*(1-o),.5,v*(1-h),v*-u,v*-o,.5,0,0,0,1])}getRangeAdjustMatrix(c){if(this.rangeId===2)return new i.A;const l=c-8,h=(1<<c)-1,o=h/(219<<l);switch(this.matrixId){case 0:case 8:return new i.A().setScale(new n.P([o,o,o])).postTranslate(new n.P([-.0730593607305936,-.0730593607305936,-.0730593607305936]));case 1:case 4:case 5:case 6:case 7:case 9:case 10:case 11:case 2:{const u=224<<l,f=h/u,v=(u-h)/(2*u);return new i.A().setScale(new n.P([o,f,f])).postTranslate(new n.P([-.0730593607305936,v,v]))}}return new i.A}getTransferFunction_(){switch(this.transferId){case 8:return s.Hi;case 4:return s.$_;case 5:return s.J7;case 7:return s.q;case 1:case 6:case 14:case 15:return s.aP;case 17:return s.Cr;case 18:case 12:case 9:case 10:case 16:case 2:return null}}getTransferFunction(c){return this.transferId,this.getTransferFunction_()}getInverseTransferFunction(c){const l=this.getTransferFunction(c);if(l){const h={a:0,b:0,c:0,d:0,e:0,f:0,g:0};if(l.a>0&&l.g>0){const o=Math.pow(l.a,l.g);h.a=1/o,h.b=-l.e/o,h.g=1/l.g}return h.d=l.c*l.d+l.f,h.e=-l.b/l.a,l.c!=0&&(h.c=1/l.c,h.f=-l.f/l.c),h}}hasExtendedSkTransferFn(){return this.matrixId===0}isValid(){return this.matrixId!==2&&this.primaryId!==2&&this.transferId!==2&&this.rangeId!==0}getColorSpacePrimaries(){const c=r.WO;switch(this.primaryId){case 1:return r.P5;case 4:return r.Wc;case 5:return r.cA;case 7:return r.vi;case 8:return r.cp;case 9:return r.Je;case 10:return r.lf;case 11:return r.Rk;case 12:return r.tR}return c}getPrimaryMatrix(){const c=this.getColorSpacePrimaries(),l=r._O(c);return i.A.RowMajor([l.rc(0,0),l.rc(0,1),l.rc(0,2),0,l.rc(1,0),l.rc(1,1),l.rc(1,2),0,l.rc(2,0),l.rc(2,1),l.rc(2,2),0,0,0,0,1])}}},91131:(g,p,t)=>{t.d(p,{Je:()=>h,P5:()=>r,Rk:()=>u,WO:()=>v,Wc:()=>a,_O:()=>y,cA:()=>d,cp:()=>l,lf:()=>o,tR:()=>f,vi:()=>c});var e=t(45726),i=t(1064),n=t(66551),s=t(60153);const r=[.64,.33,.3,.6,.15,.06,.3127,.329],a=[.67,.33,.21,.71,.14,.08,.31,.316],d=[.64,.33,.29,.6,.15,.06,.3127,.329],c=[.63,.34,.31,.595,.155,.07,.3127,.329],l=[.681,.319,.243,.692,.145,.049,.31,.316],h=[.708,.292,.17,.797,.131,.046,.3127,.329],o=[1,0,0,1,0,0,.3333333333333333,.3333333333333333],u=[.68,.32,.265,.69,.15,.06,.314,.351],f=[.68,.32,.265,.69,.15,.06,.3127,.329],v=[0,0,0,0,0,0,0,0];function y(A){const w=e.A.RowMajor([A[0],A[2],A[4],A[1],A[3],A[5],1-A[0]-A[1],1-A[2]-A[3],1-A[4]-A[5]]),k=w.copy().invert(),T=new i.P([A[6]/A[7],1,(1-A[6]-A[7])/A[7]]),P=(0,s.Y3)(k,T);let b=new e.A([P.x,0,0,0,P.y,0,0,0,P.z]);b=(0,n.B)(w,b);const x=function(I,S){const z=new i.P([I/S,1,(1-I-S)/S]),V=new i.P([.96422,1,.82521]),L=e.A.RowMajor([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),C=e.A.RowMajor([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]),F=(0,s.Y3)(L,z),H=(0,s.Y3)(L,V);let M=new e.A([H.x/F.x,0,0,0,H.y/F.y,0,0,0,H.z/F.z]);return M=(0,n.B)(M,L),M=(0,n.B)(C,M),M}(A[6],A[7]);return(0,n.B)(x,b)}},86141:(g,p,t)=>{t.d(p,{$_:()=>e,Cr:()=>a,Hi:()=>s,J7:()=>i,aP:()=>r,q:()=>n});const e={g:2.2,a:1,b:0,c:0,d:0,e:0,f:0},i={g:2.8,a:1,b:0,c:0,d:0,e:0,f:0},n={g:2.222222222222,a:.899626676224,b:.100373323776,c:.25,d:.091286342118,e:0,f:0},s={g:1,a:1,b:0,c:0,d:0,e:0,f:0},r={g:2.4,a:.9478672985781991,b:.05213270142180095,c:.07739938080495357,d:.04045,e:0,f:0},a={g:2.6,a:1.034080527699,b:0,c:0,d:0,e:0,f:0}},89401:(g,p,t)=>{t.d(p,{A:()=>a,U:()=>r});var e=t(57517);const i=.2627,n=.678,s=.0593;function r(d){d.metadata.hlgDstMaxLuminanceRelative=d.dstMaxLuminanceRelative;const c=d.dstSdrMaxLuminanceNits*d.dstMaxLuminanceRelative;d.metadata.hlgOOTFGammaMinusOne=1.2+.42*Math.log10(c/e.hD)/Math.log10(10)-1}function a(d){return d.type===0?`
      {
        vec4 luma_vec = vec4(${i}, ${n}, ${s}, 0.0);
        float L = dot(color, luma_vec);
        if (L > 0.0) {
          color.r *= pow(L, hlg_ootf_gamma_minus_one);
          color.g *= pow(L, hlg_ootf_gamma_minus_one);
          color.b *= pow(L, hlg_ootf_gamma_minus_one);
          color.r *= hlg_dst_max_luminance_relative;
          color.g *= hlg_dst_max_luminance_relative;
          color.b *= hlg_dst_max_luminance_relative;
        }
      }
    `:d.type===1?`
      {
        let luma_vec: vec4<f32> = vec4(${i}, ${n}, ${s}, 0.0);
        let L: f32 = dot(color, luma_vec);
        if (L > 0.0) {
          color.r *= pow(L, hlg_ootf_gamma_minus_one);
          color.g *= pow(L, hlg_ootf_gamma_minus_one);
          color.b *= pow(L, hlg_ootf_gamma_minus_one);
          color.r *= hlg_dst_max_luminance_relative;
          color.g *= hlg_dst_max_luminance_relative;
          color.b *= hlg_dst_max_luminance_relative;
        }
      }
    `:""}},7511:(g,p,t)=>{function e(i,n){let s="",r="";if(n.type===0?(s="mat4",r="vec4"):n.type===1&&(s="mat4x4",r="vec4"),!s||!r)return"";let a=`
      color = ${s}(
        ${i.rc(0,0)}, ${i.rc(1,0)}, ${i.rc(2,0)}, 0,
        ${i.rc(0,1)}, ${i.rc(1,1)}, ${i.rc(2,1)}, 0,
        ${i.rc(0,2)}, ${i.rc(1,2)}, ${i.rc(2,2)}, 0,
        0, 0, 0, 1
      ) * color;
    `;return i.rc(0,3)===0&&i.rc(1,3)===0&&i.rc(2,3)===0||(a+=`
        color += ${r}(${i.rc(0,3)}, ${i.rc(1,3)}, ${i.rc(2,3)}, 0);
      `),a}t.d(p,{A:()=>e})},79955:(g,p,t)=>{function e(n,s){s.metadata.sdrRelativeToNitsFactor=s.dstSdrMaxLuminanceNits/n}function i(n){return`
    color.r *= sdr_relative_to_nits_factor;
    color.g *= sdr_relative_to_nits_factor;
    color.b *= sdr_relative_to_nits_factor;
 `}t.d(p,{A:()=>i,j:()=>e})},64748:(g,p,t)=>{t.d(p,{A:()=>n,n:()=>i});var e=t(57517);function i(s,r,a){let d=a.dstSdrMaxLuminanceNits;r&&(d=e.kH,a.ndwl&&(d=a.ndwl)),a.metadata.nitsToSdrRelativeFactor=s/d}function n(s){return`
    color.r *= nits_to_sdr_relative_factor;
    color.g *= nits_to_sdr_relative_factor;
    color.b *= nits_to_sdr_relative_factor;
  `}},70194:(g,p,t)=>{t.d(p,{A:()=>n,J:()=>i});var e=t(57517);function i(s,r){const a=function(d,c){let l=e.hD;return d.getTransferId()!==18&&c.maxContentLightLevel>0&&(l=c.maxContentLightLevel),l/c.dstSdrMaxLuminanceNits}(s,r);a>r.dstMaxLuminanceRelative?(r.metadata.pqTonemapA=r.dstMaxLuminanceRelative/(a*a),r.metadata.pqTonemapB=1/r.dstMaxLuminanceRelative):(r.metadata.pqTonemapA=0,r.metadata.pqTonemapB=0)}function n(s){return`
    {
      ${s.type===1?"let maximum: f32":"float maximum"} = max(color.r, max(color.g, color.b));
      if (maximum > 0.0) {
        color.r *= (1.0 + pq_tonemap_a * maximum) / (1.0 + pq_tonemap_b * maximum);
        color.g *= (1.0 + pq_tonemap_a * maximum) / (1.0 + pq_tonemap_b * maximum);
        color.b *= (1.0 + pq_tonemap_a * maximum) / (1.0 + pq_tonemap_b * maximum);
      }
    }
 `}},15380:(g,p,t)=>{function e(i){return i===i>>>0?`${i}.0`:i.toString()}t.d(p,{A:()=>e})},25669:(g,p,t)=>{t.d(p,{A:()=>y});var e=t(6110),i=t(57517),n=t(7511),s=t(5361),r=t(63921),a=t(55168),d=t(16307),c=t(89401),l=t(64748),h=t(70194),o=t(79955),u=t(84272),f=t(51025),v=t(40326);function y(A,w,k){const T=[],P=A.getMatrixId()===8,b=(0,n.A)(A.getRangeAdjustMatrix(k.bitDepth),k);if(P||T.push(b),A.getMatrixId()===10||T.push((0,n.A)(A.getTransferMatrix(k.bitDepth).invert(),k)),P&&T.push(b),w.isValid()){if(A.isHDR()){switch(A.getTransferId()){case 18:T.push((0,s.A)(k));break;case 16:T.push((0,r.A)(k));break;default:const I=A.getTransferFunction();I?T.push((0,a.A)(I,A.hasExtendedSkTransferFn(),k)):T.push((0,d.A)(A.getTransferId(),k))}A.getMatrixId()===10&&T.push((0,n.A)(A.getTransferMatrix(k.bitDepth).invert(),k)),T.push((0,n.A)(A.getPrimaryMatrix(),k));const x=new e.A(0,9,8,2);switch(A.getTransferId()){case 18:k.toneMapPQAndHlgToDst?((0,c.U)(k),T.push((0,c.A)(k))):((0,l.n)(12/i.kH,!1,k),T.push((0,l.A)(k)));break;case 16:(0,l.n)(i.th,!0,k),T.push((0,l.A)(k)),k.toneMapPQAndHlgToDst&&(T.push((0,n.A)(x.getPrimaryMatrix().invert(),k)),(0,h.J)(A,k),T.push((0,h.A)(k)),T.push((0,n.A)(x.getPrimaryMatrix(),k)))}switch(T.push((0,n.A)(w.getPrimaryMatrix().invert(),k)),w.getMatrixId()===10&&T.push((0,n.A)(w.getTransferMatrix(k.bitDepth),k)),w.getTransferId()){case 18:(0,o.j)(i.kH,k),T.push((0,o.A)(k)),T.push((0,u.A)(k));break;case 16:(0,o.j)(i.th,k),T.push((0,o.A)(k)),T.push((0,f.A)(k));default:const I=w.getInverseTransferFunction();I?T.push((0,a.A)(I,A.hasExtendedSkTransferFn(),k)):T.push((0,v.A)(A.getTransferId(),k))}}if(!k.outputRGB){const x=w.getMatrixId()===8,I=(0,n.A)(w.getRangeAdjustMatrix(k.bitDepth).invert(),k);x&&T.push(I),w.getMatrixId()===10||T.push((0,n.A)(w.getTransferMatrix(k.bitDepth),k)),x||T.push(I)}}return T}},57517:(g,p,t)=>{t.d(p,{hD:()=>i,kH:()=>e,th:()=>n});const e=203,i=1e3,n=1e4},71323:(g,p,t)=>{function e(i,n,s){return n?`
      {
        ${s.type===1?"var v: f32":"float v"} = abs(color.r);
        ${i()}
        color.r = sign(color.r) * v;
      }
      {
        ${s.type===1?"var v: f32":"float v"} = abs(color.g);
        ${i()}
        color.g = sign(color.g) * v;
      }
      {
        ${s.type===1?"var v: f32":"float v"} = abs(color.b);
        ${i()}
        color.b = sign(color.b) * v;
      }
    `:`
      {
        ${s.type===1?"var v: f32":"float v"} = color.r;
        ${i()}
        color.r = v;
      }
      {
        ${s.type===1?"var v: f32":"float v"} = color.g;
        ${i()}
        color.g = v;
      }
      {
        ${s.type===1?"var v: f32":"float v"} = color.b;
        ${i()}
        color.b = v;
      }
    `}t.d(p,{A:()=>e})},40326:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(71323);function i(n,s){return(0,e.A)(function(){switch(n){case 9:return`
          if (v < 0.0) {
            v = 0.0;
          }
          else {
            v =  1.0 + log(v) / log(10.0) / 2.0;
          }
        `;case 10:return`
          if (v < sqrt(10.0) / 1000.0)
            v = 0.0;
          }
          else {
            v = 1.0 + log(v) / log(10.0) / 2.5;
          }
        `;case 11:return`
          ${s.type===1?"let a: f32":"float a"} = 1.099296826809442;
          ${s.type===1?"let b: f32":"float b"}= 0.018053968510807;
          if (v < -b) {
            v = -a * pow(-v, 0.45) + (a - 1.0);
          }
          else if (v <= b) {
            v = 4.5 * v;
          }
          else {
            v = a * pow(v, 0.45) - (a - 1.0);
          }
        `;case 12:return`
          ${s.type===1?"let a: f32":"float a"} = 1.099;
          ${s.type===1?"let b: f32":"float b"} = 0.018;
          ${s.type===1?"let l: f32":"float l"} = 0.0045;

          if (v < -l) {
            v = -(a * pow(-4.0 * v, 0.45) + (a - 1.0)) / 4.0;
          }
          else if (v <= b) {
            v = 4.5 * v;
          }
          else {
            v = a * pow(v, 0.45) - (a - 1.0);
          }
        `;default:return""}},!1,s)}},5361:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(71323);function i(n){return(0,e.A)(function(){return`
      v = max(0.0, v);
      ${n.type===1?"let a: f32":"float a"} = 0.17883277f;
      ${n.type===1?"let b: f32":"float b"} = 0.28466892f;
      ${n.type===1?"let c: f32":"float c"} = 0.55991073f;
      if (v <= 0.5) {
        v = v * v + 4.0;
      }
      else {
        v = exp((v - c) / a) + b;
      }
      v = v / 12.0;
    `},!1,n)}},84272:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(71323);function i(n){return(0,e.A)(function(){return`
      v = max(0.0, v);
      ${n.type===1?"let a: f32":"float a"} = 0.17883277f;
      ${n.type===1?"let b: f32":"float b"} = 0.28466892f;
      ${n.type===1?"let c: f32":"float c"} = 0.55991073f;
      if (v <= 1.0) {
        v = 0.5 * sqrt(v);
      }
      else {
        v = a * log(v - b) + c;
      }
    `},!1,n)}},63921:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(71323);function i(n){return(0,e.A)(function(){return`
      v = max(0.0, v);
      ${n.type===1?"let m1: f32":"float m1"} = (2610.0 / 4096.0) / 4.0;
      ${n.type===1?"let m2: f32":"float m2"} = (2523.0 / 4096.0) * 128.0;
      ${n.type===1?"let c1: f32":"float c1"} = 3424.0 / 4096.0;
      ${n.type===1?"let c2: f32":"float c2"} = (2413.0 / 4096.0) * 32.0;
      ${n.type===1?"let c3: f32":"float c3"} = (2392.0 / 4096.0) * 32.0;
      
      ${n.type===0?`
        #ifdef GL_FRAGMENT_PRECISION_HIGH
        highp float v2 = v;
        #else
        float v2 = v;
        #endif
      `:"var v2: f32 = v;"}
  
      v2 = pow(max(pow(v2, 1.0 / m2) - c1, 0.0) / (c2 - c3 * pow(v2, 1.0 / m2)), 1.0 / m1);
      v = v2;
    `},!1,n)}},51025:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(71323);function i(n){return(0,e.A)(function(){return`
      v = max(0.0, v);
      ${n.type===1?"let m1: f32":"float m1"} = (2610.0 / 4096.0) / 4.0;
      ${n.type===1?"let m2: f32":"float m2"} = (2523.0 / 4096.0) * 128.0;
      ${n.type===1?"let c1: f32":"float c1"} = 3424.0 / 4096.0;
      ${n.type===1?"let c2: f32":"float c2"} = (2413.0 / 4096.0) * 32.0;
      ${n.type===1?"let c3: f32":"float c3"} = (2392.0 / 4096.0) * 32.0;
      v =  pow((c1 + c2 * pow(v, m1)) / (1.0 + c3 * pow(v, m1)), m2);
    `},!1,n)}},16307:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(71323);function i(n,s){return(0,e.A)(function(){switch(n){case 9:return`
          if (v < 0.0) {
            v = 0.0;
          }
          else {
            v = pow(10.0, (v - 1.0) * 2.0);
          }
        `;case 10:return`
          if (v < 0.0) {
            v = 0.0;
          }
          else {
            v = pow(10.0, (v - 1.0) * 2.5);
          }
        `;case 11:return`
          ${s.type===1?"let a: f32":"float a"} = 1.099296826809442;
          ${s.type===1?"let from_linear_neg_a: f32":"float from_linear_neg_a"} = -1.047844;
          ${s.type===1?"let from_linear_b: f32":"float from_linear_b"} = 0.081243;
          if (v < from_linear_neg_a) {
            v = -pow((a - 1.0 - v) / a, 1.0 / 0.45);
          }
          else if (v <= from_linear_b) {
            v = v / 4.5;
          }
          else {
            v = pow((v + a - 1.0) / a, 1.0 / 0.45);
          }
        `;case 12:return`
          ${s.type===1?"let a: f32":"float a"} = 1.099;
          ${s.type===1?"let from_linear_neg_l: f32":"float from_linear_neg_l"} = -0.020250;
          ${s.type===1?"let from_linear_b: f32":"float from_linear_b"} = 0.081000;
          if (v < from_linear_neg_l) {
            v = -pow((1.0 - a - v * 4.0) / a, 1.0 / 0.45) / 4.0;
          }
          else if (v <= from_linear_b) {
            v = v / 4.5;
          }
          else {
            v = pow((v + a - 1.0) / a, 1.0 / 0.45);
          }
        `;default:return""}},!1,s)}},55168:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(71323),i=t(15380);function n(s,r,a){return(0,e.A)(function(){let d=.0009765625,c="v";Math.abs(s.c-1)>d&&(c=`${(0,i.A)(s.c)} * ${c}`),Math.abs(s.f)>d&&(c=`${c} + ${(0,i.A)(s.f)}`);let l="v";return Math.abs(s.a=1)>d&&(l=`${(0,i.A)(s.a)} * ${l}`),Math.abs(s.b)>d&&(l=`${l} + ${(0,i.A)(s.b)}`),Math.abs(s.g-1)>d&&(l=`pow(${l}, ${(0,i.A)(s.g)})`),Math.abs(s.e)>d&&(l=`${l} + ${(0,i.A)(s.e)}`),`
      if (v < ${(0,i.A)(s.d)}) {
        v = ${c};
      }
      else {
        v = ${l};
      }
    `},!1,a)}},38469:(g,p,t)=>{function e(i,n,s){if(n){let r=i[3],a=i[4];i[3]=i[17],i[4]=i[18],i[17]=r,i[18]=a,r=i[10],a=i[11],i[10]=i[24],i[11]=i[25],i[24]=r,i[25]=a}if(s){let r=i[3],a=i[4];i[3]=i[10],i[4]=i[11],i[10]=r,i[11]=a,r=i[17],a=i[18],i[17]=i[24],i[18]=i[25],i[24]=r,i[25]=a}}t.d(p,{A:()=>e})},20088:(g,p,t)=>{t.d(p,{A:()=>c});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085);class c{constructor(){(0,n.A)(this,"offset",void 0),(0,n.A)(this,"multiplier",void 0),(0,n.A)(this,"pqTonemapA",void 0),(0,n.A)(this,"pqTonemapB",void 0),(0,n.A)(this,"hlgOOTFGammaMinusOne",void 0),(0,n.A)(this,"hlgDstMaxLuminanceRelative",void 0),(0,n.A)(this,"nitsToSdrRelativeFactor",void 0),(0,n.A)(this,"sdrRelativeToNitsFactor",void 0)}}e=c.prototype,(i=new(r())).set("offset",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("multiplier",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("pqTonemapA",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("pqTonemapB",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),i.set("hlgOOTFGammaMinusOne",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("hlgDstMaxLuminanceRelative",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),i.set("nitsToSdrRelativeFactor",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),i.set("sdrRelativeToNitsFactor",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,4),(0,d.A)(e,a.g7,32),(0,d.A)(e,a.JY,i)},36719:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(9188);class n extends i.A{constructor(r,a,d=!0){super(r,a),(0,e.A)(this,"enableColor",void 0),(0,e.A)(this,"aPoint",void 0),(0,e.A)(this,"aColor",void 0),this.enableColor=d}link(r){super.link(r),this.aPoint=this.gl.getAttribLocation(this.program,"point"),this.aColor=this.gl.getAttribLocation(this.program,"color"),this.enableColor?(this.gl.enableVertexAttribArray(this.aPoint),this.gl.enableVertexAttribArray(this.aColor)):this.gl.enableVertexAttribArray(this.aPoint)}bind(){super.bind(),this.enableColor?(this.gl.vertexAttribPointer(this.aPoint,3,this.gl.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,0),this.gl.vertexAttribPointer(this.aColor,4,this.gl.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT)):this.gl.vertexAttribPointer(this.aPoint,3,this.gl.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,0)}}},9188:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(134);class i{constructor(s,r){(0,e.A)(this,"gl",void 0),(0,e.A)(this,"_program",void 0),(0,e.A)(this,"vertexShader",void 0),(0,e.A)(this,"fragmentShader",void 0),this.vertexShader=s,this.fragmentShader=r}link(s){this.gl=s,this.vertexShader&&this.vertexShader.compile(this.gl),this.fragmentShader&&this.fragmentShader.compile(this.gl),this._program=this.gl.createProgram(),this.gl.attachShader(this._program,this.vertexShader.shader),this.gl.attachShader(this._program,this.fragmentShader.shader),this.gl.linkProgram(this._program)}stop(){this.vertexShader.stop(this.gl),this.fragmentShader.stop(this.gl),this.gl.deleteProgram(this._program),this.vertexShader=null,this.fragmentShader=null,this._program=null}bind(){this.gl.useProgram(this._program)}get program(){return this._program}}},32903:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(48091);class i extends e.A{constructor(s){super(s)}}},48091:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(24399);class n extends i.A{constructor(r){super(r),(0,e.A)(this,"rgbSamplerLocation",void 0)}link(r){super.link(r),this.rgbSamplerLocation=this.gl.getUniformLocation(this.program,"rgb_Sampler")}bindRGBTexture(r=0){this.gl.uniform1i(this.rgbSamplerLocation,r)}}},24399:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(134),i=t(36719),n=t(37022),s=t(36200),r=t(14397);class a extends i.A{constructor(c){super(new n.A(r.A),new s.A(c)),(0,e.A)(this,"rotateMatrixLocation",void 0)}link(c){super.link(c),this.rotateMatrixLocation=this.gl.getUniformLocation(this.program,"rotateMatrix")}setRotateMatrix(c){this.gl.uniformMatrix4fv(this.rotateMatrixLocation,!1,new Float32Array(c))}}},73039:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(1706);class n extends i.A{constructor(r){super(r),(0,e.A)(this,"maxUniformLocation",void 0),(0,e.A)(this,"offsetLocation",void 0),(0,e.A)(this,"multiplierLocation",void 0),(0,e.A)(this,"pqTonemapALocation",void 0),(0,e.A)(this,"pqTonemapBLocation",void 0),(0,e.A)(this,"hlgOOTFGammaMinusOneLocation",void 0),(0,e.A)(this,"hlgDstMaxLuminanceRelativeLocation",void 0),(0,e.A)(this,"nitsToSdrRelativeFactorLocation",void 0),(0,e.A)(this,"sdrRelativeToNitsFactorLocation",void 0)}link(r){super.link(r),this.maxUniformLocation=this.gl.getUniformLocation(this.program,"v_max"),this.offsetLocation=this.gl.getUniformLocation(this.program,"offset"),this.multiplierLocation=this.gl.getUniformLocation(this.program,"multiplier"),this.pqTonemapALocation=this.gl.getUniformLocation(this.program,"pq_tonemap_a"),this.pqTonemapBLocation=this.gl.getUniformLocation(this.program,"pq_tonemap_b"),this.hlgOOTFGammaMinusOneLocation=this.gl.getUniformLocation(this.program,"hlg_ootf_gamma_minus_one"),this.hlgDstMaxLuminanceRelativeLocation=this.gl.getUniformLocation(this.program,"hlg_dst_max_luminance_relative"),this.nitsToSdrRelativeFactorLocation=this.gl.getUniformLocation(this.program,"nits_to_sdr_relative_factor"),this.sdrRelativeToNitsFactorLocation=this.gl.getUniformLocation(this.program,"sdr_relative_to_nits_factor")}setMax(r){this.gl.uniform1f(this.maxUniformLocation,r)}setMetaData(r){this.gl.uniform1f(this.offsetLocation,r.offset),this.gl.uniform1f(this.multiplierLocation,r.multiplier),this.gl.uniform1f(this.pqTonemapALocation,r.pqTonemapA),this.gl.uniform1f(this.pqTonemapBLocation,r.pqTonemapB),this.gl.uniform1f(this.hlgOOTFGammaMinusOneLocation,r.hlgOOTFGammaMinusOne),this.gl.uniform1f(this.hlgDstMaxLuminanceRelativeLocation,r.hlgDstMaxLuminanceRelative),this.gl.uniform1f(this.nitsToSdrRelativeFactorLocation,r.nitsToSdrRelativeFactor),this.gl.uniform1f(this.sdrRelativeToNitsFactorLocation,r.sdrRelativeToNitsFactor)}}},91848:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(1706);class i extends e.A{constructor(s){super(s)}}},1706:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(24399);class n extends i.A{constructor(r){super(r),(0,e.A)(this,"ySamplerLocation",void 0),(0,e.A)(this,"uSamplerLocation",void 0),(0,e.A)(this,"vSamplerLocation",void 0),(0,e.A)(this,"aSamplerLocation",void 0)}link(r){super.link(r),this.ySamplerLocation=this.gl.getUniformLocation(this.program,"y_Sampler"),this.uSamplerLocation=this.gl.getUniformLocation(this.program,"u_Sampler"),this.vSamplerLocation=this.gl.getUniformLocation(this.program,"v_Sampler"),this.aSamplerLocation=this.gl.getUniformLocation(this.program,"a_Sampler")}bindYTexture(r=0){this.gl.uniform1i(this.ySamplerLocation,r)}bindUTexture(r=0){this.gl.uniform1i(this.uSamplerLocation,r)}bindVTexture(r=0){this.gl.uniform1i(this.vSamplerLocation,r)}bindATexture(r=0){this.gl.uniform1i(this.aSamplerLocation,r)}}},36200:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(27976);class i extends e.A{constructor(s){super(1,s)}}},27976:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(134);class i{constructor(s,r){(0,e.A)(this,"type",void 0),(0,e.A)(this,"_shader",void 0),(0,e.A)(this,"_source",void 0),(0,e.A)(this,"compiled",void 0),this.type=s,this._shader=null,this._source=r,this.compiled=!1}compile(s){this.compiled||(this._shader=s.createShader(this.type===0?s.VERTEX_SHADER:s.FRAGMENT_SHADER),s.shaderSource(this._shader,this._source),s.compileShader(this._shader),this.compiled=!0)}stop(s){s.deleteShader(this._shader),this._shader=null}get shader(){return this._shader}}},37022:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(27976);class i extends e.A{constructor(s){super(0,s)}}},17397:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(22684);class n extends i.A{constructor(r,a,d){super(r,a,d),(0,e.A)(this,"filter",void 0),(0,e.A)(this,"format",void 0),(0,e.A)(this,"internalformat",void 0),(0,e.A)(this,"dataType",void 0),this.format=this.gl.RGB,this.filter=this.gl.LINEAR,this.internalformat=this.gl.RGB,this.dataType=this.gl.UNSIGNED_BYTE}init(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)}setFormat(r){this.format=r}setInternalformat(r){this.internalformat=r}setDataType(r){this.dataType=r}setFilter(r){this.filter=r}fill(r){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.setUnpackAlignment(),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,this.format,this.dataType,r)}}},22684:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(67672);class n{constructor(r,a,d){(0,e.A)(this,"gl",void 0),(0,e.A)(this,"width",void 0),(0,e.A)(this,"height",void 0),(0,e.A)(this,"texture",void 0),this.gl=r,this.width=a,this.height=d,this.texture=this.gl.createTexture()}getTexture(){return this.texture}bind(r){i.ai(r)&&this.gl.activeTexture(this.gl.TEXTURE0+r),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture)}setSize(r,a){this.width=r,this.height=a}setUnpackAlignment(){this.width%8==0?this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,8):this.width%4==0?this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,4):this.width%2==0?this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,2):this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1)}destroy(){this.texture&&(this.gl.deleteTexture(this.texture),this.texture=null)}}},48280:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(22684);class n extends i.A{constructor(r,a,d){super(r,a,d),(0,e.A)(this,"filter",void 0),(0,e.A)(this,"format",void 0),(0,e.A)(this,"internalformat",void 0),(0,e.A)(this,"dataType",void 0),this.format=this.gl.LUMINANCE,this.filter=this.gl.LINEAR,this.internalformat=this.gl.LUMINANCE,this.dataType=this.gl.UNSIGNED_BYTE}init(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)}setFormat(r){this.format=r}setInternalformat(r){this.internalformat=r}setDataType(r){this.dataType=r}setFilter(r){this.filter=r}fill(r){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.setUnpackAlignment(),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,this.format,this.dataType,r)}}},48641:(g,p,t)=>{t.d(p,{A:()=>l});var e=t(134),i=t(63939),n=t(50932),s=t(37837),r=t(11473),a=t(84149),d=t(4624),c=t(26429);class l{constructor(o,u,f={}){(0,e.A)(this,"context",void 0),(0,e.A)(this,"observer",void 0),(0,e.A)(this,"options",void 0),(0,e.A)(this,"pullIPC",void 0),(0,e.A)(this,"buffer",void 0),(0,e.A)(this,"channels",void 0),(0,e.A)(this,"ended",void 0),(0,e.A)(this,"float32",void 0),(0,e.A)(this,"buffered",void 0),(0,e.A)(this,"pause",void 0),(0,e.A)(this,"startTime",void 0),(0,e.A)(this,"dest",void 0),(0,e.A)(this,"queue",void 0),(0,e.A)(this,"firstRendered",void 0),this.context=o,this.observer=u,this.options=f}async request(o,u,f){switch(o){case"init":break;case"start":{const{port:v,channels:y}=u;this.channels=y,this.pullIPC=new a.Ay(v),this.buffer=this.allocBuffer(),this.float32=new Float32Array((0,r.eq)().buffer),this.queue=[],this.startTime=0,this.ended=!1,this.pause=!1,this.firstRendered=!1,await this.pullIPC.request("pull",{buffer:this.buffer}),this.buffering(),await this.pullIPC.request("pull",{buffer:this.buffer}),this.buffered=!0,this.process();break}case"restart":if(!this.ended)return;this.buffer=this.allocBuffer(),this.queue=[],this.startTime=0,this.ended=!1,this.pause=!1,this.firstRendered=!1,await this.pullIPC.request("pull",{buffer:this.buffer}),this.buffering(),await this.pullIPC.request("pull",{buffer:this.buffer}),this.buffered=!0,this.process();break;case"stop":this.freeBuffer(this.buffer),this.buffer=null,this.ended=!0,this.pullIPC.destroy();break;case"clear":this.queue.forEach(v=>{v.disconnect()}),this.queue.length=0;break;case"pause":this.pause=!0;break;case"unpause":this.pause=!1,this.queue.length||this.process()}}allocBuffer(){const o=(0,s.Gy)(40);n.M[20](o,(0,s.Gy)(4*this.channels));const u=(0,s.Gy)(20480*this.channels);for(let f=0;f<this.channels;f++)n.M[20](i.f[20](o)+4*f,u+20480*f);return n.M[15](o+8,5120),o}freeBuffer(o){o&&((0,s.aI)(i.f[20](o)),(0,s.aI)(o),(0,s.Eb)(o))}async pull(){this.buffered=!1,await this.pullIPC.request("pull",{buffer:this.buffer})<0?this.ended=!0:(this.buffered=!0,this.queue.length||this.process())}buffering(){this.float32.length||(this.float32=new Float32Array((0,r.eq)().buffer));const o=this.context.createBuffer(this.channels,5120,this.context.sampleRate);for(let f=0;f<this.channels;f++)if(i.f[20](i.f[20](this.buffer)+4*f)){let v=i.f[20](i.f[20](this.buffer)+4*f)>>>2;o.copyToChannel&&!c._7?o.copyToChannel(this.float32.subarray(v,v+5120).slice(),f,0):o.getChannelData(f).set(this.float32.subarray(v,v+5120),0)}const u=this.context.createBufferSource();u.buffer=o,u.onended=()=>{if(this.queue.shift(),this.ended&&!this.queue.length)return this.freeBuffer(this.buffer),d.pq("audio source ended","src\\avrender\\pcm\\AudioSourceBufferNode.ts",230),void this.observer.onEnded();this.process(),this.queue.length||this.observer.onStutter(),this.firstRendered||(this.firstRendered=!0,this.observer.onFirstRendered())},this.startTime===0&&(this.startTime=this.context.currentTime),u.start(this.startTime),this.dest&&u.connect(this.dest),this.startTime+=u.buffer.duration,this.queue.push(u)}connect(o){this.dest=o}disconnect(){for(let o=0;o<this.queue.length;o++)this.queue[o].disconnect();this.dest=null,this.queue.length=0}process(){this.buffer&&!this.pause&&this.buffered&&(this.buffering(),this.pull())}}},88397:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(6534);class i extends e.A{constructor(s,r,a={}){super(s,r,"audio-source-processor",a)}}},6534:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(134),i=t(84149),n=t(67672);class s{constructor(a,d,c,l={}){(0,e.A)(this,"audioWorkletNode",void 0),(0,e.A)(this,"ipcPort",void 0),(0,e.A)(this,"observer",void 0),this.observer=d,this.audioWorkletNode=new AudioWorkletNode(a,c,l),this.ipcPort=new i.Ay(this.audioWorkletNode.port),this.ipcPort.on(i.Wo,h=>{switch(h.method){case"ended":this.observer.onEnded();break;case"firstRendered":this.observer.onFirstRendered();break;case"stutter":this.observer.onStutter()}})}async request(a,d,c){return this.ipcPort.request(a,d,c)}connect(a){this.audioWorkletNode.connect(a)}getNode(){return this.audioWorkletNode}disconnect(){this.audioWorkletNode.disconnect()}getParameters(a){const d=this.audioWorkletNode.parameters;if(n.Pc(d.get))return d.get(a);d.forEach((c,l)=>{if(l===a)return c})}}},41324:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(61837);async function i(n,s){const r=(0,e.A)(s,{varName:"processor"}),a=new Blob([r],{type:"text/javascript"}),d=URL.createObjectURL(a);await n.audioWorklet.addModule(d)}},60120:(g,p,t)=>{t.d(p,{A:()=>a});var e,i=t(134),n=t(95335),s=t(4624);(function(d){d[d.ADD=0]="ADD",d[d.REMOVE=1]="REMOVE",d[d.UPDATE_TIMESTAMP_OFFSET=2]="UPDATE_TIMESTAMP_OFFSET"})(e||(e={}));const r={mediaBufferMax:10};class a{constructor(c={}){(0,i.A)(this,"sourceBuffer",void 0),(0,i.A)(this,"operatorQueue",void 0),(0,i.A)(this,"updating",void 0),(0,i.A)(this,"lastRemoveTime",void 0),(0,i.A)(this,"paddingCallback",void 0),(0,i.A)(this,"options",void 0),(0,i.A)(this,"ending",void 0),(0,i.A)(this,"onQuotaExceededError",void 0),(0,i.A)(this,"onEnded",void 0),this.options=n.X$({},r,c),this.operatorQueue=[],this.updating=!1,this.lastRemoveTime=0,this.ending=!1}setSourceBuffer(c){this.sourceBuffer=c,this.sourceBuffer.onupdateend=()=>{this.paddingCallback&&(this.paddingCallback(),this.paddingCallback=null),this.operatorQueue&&this.operatorQueue.length?this.enqueue():(this.updating=!1,this.ending&&this.onEnded&&this.onEnded())},this.sourceBuffer.onerror=l=>{s.z3(`track update buffer error: ${l}`,"src\\avrender\\track\\Track.ts",102)}}changeMimeType(c){this.sourceBuffer&&this.sourceBuffer.changeType(c)}enqueue(){if(this.operatorQueue.length){const c=this.operatorQueue.shift();if(c.operator===e.ADD)try{this.sourceBuffer.appendBuffer(c.buffer),this.updating=!0,c.callback&&(this.paddingCallback=c.callback)}catch(l){if(!(l instanceof DOMException&&l.name==="QuotaExceededError"))throw l;this.operatorQueue.unshift(c),this.onQuotaExceededError&&this.onQuotaExceededError(),this.updating=!1}else c.operator===e.REMOVE?(this.sourceBuffer.remove(c.start,c.end),this.updating=!0,c.callback&&(this.paddingCallback=c.callback)):c.operator===e.UPDATE_TIMESTAMP_OFFSET&&(this.sourceBuffer.timestampOffset=c.timestampOffset,c.callback&&c.callback(),this.enqueue())}}addBuffer(c,l){c?(this.operatorQueue.push({operator:e.ADD,buffer:c,callback:l}),this.updating||this.enqueue()):l&&l()}updateTimestampOffset(c,l){this.operatorQueue.push({operator:e.UPDATE_TIMESTAMP_OFFSET,timestampOffset:c,callback:l}),this.updating||this.enqueue()}removeBuffer(c,l){this.ending||(c=Math.floor(c))-this.lastRemoveTime<this.options.mediaBufferMax<<1||(this.operatorQueue.push({operator:e.REMOVE,start:this.lastRemoveTime,end:c-this.options.mediaBufferMax,callback:l}),this.updating||this.enqueue(),this.lastRemoveTime=c-this.options.mediaBufferMax)}removeAllBuffer(c){this.sourceBuffer.buffered.length?(this.operatorQueue.push({operator:e.REMOVE,start:this.sourceBuffer.buffered.start(0),end:this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1),callback:c}),this.updating||this.enqueue()):c&&c()}end(){this.ending=!0,this.updating||this.operatorQueue.length||this.onEnded&&this.onEnded()}stop(){if(this.sourceBuffer){try{this.sourceBuffer.abort(),this.updating=!1}catch{}try{this.sourceBuffer.buffered.length&&(this.updating?this.operatorQueue.push({operator:e.REMOVE,start:this.sourceBuffer.buffered.start(0),end:this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1)}):(this.sourceBuffer.remove(this.sourceBuffer.buffered.start(0),this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1)),this.updating=!0)),this.paddingCallback&&(this.paddingCallback(),this.paddingCallback=null)}catch{}}}reset(){this.stop(),this.operatorQueue.length=0,this.ending=!1}isPaused(){return!this.updating&&this.operatorQueue.length}getQueueLength(){return this.operatorQueue.length}getBufferedTime(){return this.sourceBuffer&&this.sourceBuffer.buffered.length?this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1)-this.sourceBuffer.buffered.start(0):0}getBufferedStart(){return this.sourceBuffer&&this.sourceBuffer.buffered.length?this.sourceBuffer.buffered.start(0):0}getBufferedEnd(){return this.sourceBuffer&&this.sourceBuffer.buffered.length?this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1):0}getSourceBuffer(){return this.sourceBuffer}setMediaBufferMax(c){this.options.mediaBufferMax=c}getMediaBufferMax(){return this.options.mediaBufferMax}destroy(){this.stop(),this.operatorQueue=null,this.sourceBuffer&&(this.sourceBuffer.onupdateend=this.sourceBuffer.onerror=null,this.sourceBuffer=null)}}},85224:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(63939),i=t(1984),n=t(86834);function s(r){let a="";return a=e.f[15](r+4)!==86017||n.A.firefox?`audio/mp4; codecs="${(0,i.A)(r)}"`:"audio/mpeg",a}},10333:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(94663);function i(n){return`video/mp4; codecs="${(0,e.A)(n)}"`}},77231:(g,p,t)=>{t.d(p,{Dh:()=>i,KR:()=>r,N_:()=>n,SF:()=>s,f7:()=>l,go:()=>d,i0:()=>a,zg:()=>c});var e=t(9599);const i=-BigInt(1),n=-1,s=1e6,r=new e.P({den:s,num:1}),a=new e.P({den:1e3,num:1}),d=(new e.P({den:1,num:1}),2147483647),c=65535,l=4294967295},9705:(g,p,t)=>{t.d(p,{E$:()=>e,LR:()=>i,LT:()=>a,UY:()=>n,gR:()=>s,lh:()=>r});const e=-1,i=-2,n=-3,s=-4,r=-5,a=-7},36204:(g,p,t)=>{t.d(p,{t:()=>a});var e=t(63939),i=t(50932),n=t(56024),s=t(66788),r=t(14686);function a(d,c=0){c===0&&(c=(0,n.FP)()),i.M[15](c+152,d.sampleRate),i.M[15](c+76,d.numberOfFrames),i.M[15](c+292,d.numberOfChannels),i.M[15](c+80,function(h){switch(h){case"u8":return 0;case"s16":return 1;case"s32":return 2;case"f32":return 3;case"u8-planar":return 5;case"s16-planar":return 6;case"s32-planar":return 7;case"f32-planar":return 8;default:throw new Error("not support")}}(d.format)),i.M[17](c+104,BigInt(Math.floor(d.timestamp))),(0,n.rh)(c);const l=(0,s.K0)(e.f[15](c+80))?e.f[15](c+292):1;for(let h=0;h<l;h++)d.copyTo((0,r.s3)(e.f[20](e.f[20](c+64)+4*h),e.f[15](c+32)),{planeIndex:h});return c}},72224:(g,p,t)=>{function e(i,n=0){for(let s=0;s<i.length;s++){n^=i[s];for(let r=0;r<8;r++)128&n?n=n<<1^7:n<<=1}return 255&n}t.d(p,{A:()=>e})},16041:(g,p,t)=>{t.d(p,{A:()=>d});var e=t(134),i=t(50932),n=t(40046),s=t(73783),r=t(37837),a=t(56024);class d{constructor(l,h){(0,e.A)(this,"list",void 0),(0,e.A)(this,"mutex",void 0),this.list=l,this.mutex=h}alloc(){let l=this.list.find(h=>n.p_(h+320,-1,1,16,2)===-1,20);return l||(l=(0,r.Gy)(328),(0,a._h)(l),i.M[16](l+320,1),s.s2(this.mutex),this.list.push(l,20),s.Tl(this.mutex)),l}release(l){n.Hh(l+320,16,2)<=0||n.jb(l+320,1,16,2)===1&&((0,a.to)(l),n.M_(l+320,-1,16,2))}}},47442:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(134),i=t(50932),n=t(40046),s=t(73783),r=t(37837);class a{constructor(c,l){(0,e.A)(this,"list",void 0),(0,e.A)(this,"mutex",void 0),this.list=c,this.mutex=l}alloc(){let c=this.list.find(l=>n.p_(l+40,-1,1,16,2)===-1,20);return c||(c=(0,r.Gy)(48),i.M[16](c+40,1),s.s2(this.mutex),this.list.push(c,20),s.Tl(this.mutex)),c}release(c){n.Hh(c+40,16,2)<=0||n.jb(c+40,1,16,2)===1&&n.M_(c+40,-1,16,2)}}},84290:(g,p,t)=>{t.d(p,{A:()=>d});var e=t(134),i=t(50932),n=t(40046),s=t(73783),r=t(37837),a=t(71517);class d{constructor(l,h){(0,e.A)(this,"list",void 0),(0,e.A)(this,"mutex",void 0),this.list=l,this.mutex=h}alloc(){let l=this.list.find(h=>n.p_(h+88,-1,1,16,2)===-1,20);return l||(l=(0,r.Gy)(96),(0,a.Pd)(l),i.M[16](l+88,1),s.s2(this.mutex),this.list.push(l,20),s.Tl(this.mutex)),l}release(l){n.Hh(l+88,16,2)<=0||n.jb(l+88,1,16,2)===1&&((0,a.Up)(l),n.M_(l+88,-1,16,2))}}},97317:(g,p,t)=>{t.d(p,{g:()=>e});const e={0:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]},12:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]},4:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]},13:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]},5:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]},14:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]},23:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:2,offset:0,shift:0,depth:8},{plane:1,step:2,offset:1,shift:0,depth:8}]},59:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]},60:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]},61:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]},62:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]},122:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]},123:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]},124:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]},125:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]},46:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]},45:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]},69:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]},70:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]},63:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]},64:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]},126:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]},127:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]},128:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]},129:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]},48:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]},47:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]},65:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]},66:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]},67:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]},68:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]},130:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]},131:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]},132:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]},133:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]},50:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]},49:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]},26:{nbComponents:4,log2ChromaW:0,log2ChromaH:0,flags:160,comp:[{plane:0,step:4,offset:0,shift:0,depth:8},{plane:0,step:4,offset:1,shift:0,depth:8},{plane:0,step:4,offset:2,shift:0,depth:8},{plane:0,step:4,offset:3,shift:0,depth:8}]},119:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:32,comp:[{plane:0,step:4,offset:0,shift:0,depth:8},{plane:0,step:4,offset:1,shift:0,depth:8},{plane:0,step:4,offset:2,shift:0,depth:8}]},28:{nbComponents:4,log2ChromaW:0,log2ChromaH:0,flags:160,comp:[{plane:0,step:4,offset:2,shift:0,depth:8},{plane:0,step:4,offset:1,shift:0,depth:8},{plane:0,step:4,offset:0,shift:0,depth:8},{plane:0,step:4,offset:3,shift:0,depth:8}]},121:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:32,comp:[{plane:0,step:4,offset:2,shift:0,depth:8},{plane:0,step:4,offset:1,shift:0,depth:8},{plane:0,step:4,offset:0,shift:0,depth:8}]},33:{nbComponents:4,log2ChromaW:1,log2ChromaH:1,flags:144,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8},{plane:3,step:1,offset:0,shift:0,depth:8}]}}},58055:(g,p,t)=>{t.d(p,{J:()=>e});const e={0:{bits:8,planar:!1},1:{bits:16,planar:!1},2:{bits:32,planar:!1},10:{bits:64,planar:!1},3:{bits:32,planar:!1},4:{bits:64,planar:!1},5:{bits:8,planar:!0},6:{bits:16,planar:!0},7:{bits:32,planar:!0},11:{bits:64,planar:!0},8:{bits:32,planar:!0},9:{bits:64,planar:!0}}},62751:(g,p,t)=>{t.d(p,{$$:()=>i,HR:()=>e});const e={flv:0,mp4:1,mov:1,ts:2,ivf:4,opus:3,ogg:3,m3u8:2,m3u:2,mpd:1,mp3:7,mkv:5,mka:5,webm:5,aac:8,flac:10,wav:9},i={m3u8:2,m3u:2,mpd:3}},36981:(g,p,t)=>{t.d(p,{r:()=>l});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085);class c{constructor(){(0,n.A)(this,"id",void 0),(0,n.A)(this,"name",void 0),(0,n.A)(this,"opaque",void 0)}}e=c.prototype,(i=new(r())).set("id",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("name",{0:4,1:0,2:0,3:1,4:16,5:0,6:0,7:4,8:0}),i.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,4),(0,d.A)(e,a.g7,24),(0,d.A)(e,a.JY,i);class l{constructor(){(0,n.A)(this,"order",void 0),(0,n.A)(this,"nbChannels",void 0),(0,n.A)(this,"u",void 0),(0,n.A)(this,"opaque",void 0)}}(function(h){var o=new(r());o.set("order",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),o.set("nbChannels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),o.set("u",{0:function(u){var f=new(r());return f.set("mask",{0:10,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),f.set("map",{0:c,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),(0,d.A)(u,a.Og,!0),(0,d.A)(u,a.dc,8),(0,d.A)(u,a.g7,8),(0,d.A)(u,a.JY,f),u}({}),1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),o.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),(0,d.A)(h,a.Og,!0),(0,d.A)(h,a.dc,8),(0,d.A)(h,a.g7,24),(0,d.A)(h,a.JY,o)})(l.prototype)},50288:(g,p,t)=>{t.d(p,{BU:()=>o});var e,i,n,s=t(134),r=t(80662),a=t.n(r),d=t(61499),c=t(12085),l=t(73783);class h{constructor(){(0,s.A)(this,"data",0),(0,s.A)(this,"size",0),(0,s.A)(this,"refcount",0),(0,s.A)(this,"free",0),(0,s.A)(this,"opaque",0),(0,s.A)(this,"flags",0),(0,s.A)(this,"flagsInternal",0)}}i=h.prototype,(n=new(a())).set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),n.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),n.set("refcount",{0:9,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),n.set("free",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),n.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),n.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),n.set("flagsInternal",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),(0,c.A)(i,d.Og,!0),(0,c.A)(i,d.dc,4),(0,c.A)(i,d.g7,28),(0,c.A)(i,d.JY,n);class o{constructor(){(0,s.A)(this,"buffer",0),(0,s.A)(this,"data",0),(0,s.A)(this,"size",0)}}(function(v){var y=new(a());y.set("buffer",{0:h,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),y.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),y.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,c.A)(v,d.Og,!0),(0,c.A)(v,d.dc,4),(0,c.A)(v,d.g7,12),(0,c.A)(v,d.JY,y)})(o.prototype);class u{constructor(){(0,s.A)(this,"mutex",void 0),(0,s.A)(this,"pool",0),(0,s.A)(this,"refcount",0),(0,s.A)(this,"size",0),(0,s.A)(this,"opaque",0),(0,s.A)(this,"alloc",0),(0,s.A)(this,"alloc2",0),(0,s.A)(this,"poolFree",0)}}(function(v){var y=new(a());y.set("mutex",{0:l.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),y.set("pool",{0:e,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),y.set("refcount",{0:9,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),y.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),y.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),y.set("alloc",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),y.set("alloc2",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:24,8:0}),y.set("poolFree",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:28,8:0}),(0,c.A)(v,d.Og,!0),(0,c.A)(v,d.dc,4),(0,c.A)(v,d.g7,32),(0,c.A)(v,d.JY,y)})(u.prototype);class f{constructor(){(0,s.A)(this,"data",0),(0,s.A)(this,"opaque",0),(0,s.A)(this,"free",0),(0,s.A)(this,"pool",0),(0,s.A)(this,"next",0),(0,s.A)(this,"buffer",void 0)}}(function(v){var y=new(a());y.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),y.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),y.set("free",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),y.set("pool",{0:u,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),y.set("next",{0:f,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),y.set("buffer",{0:h,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),(0,c.A)(v,d.Og,!0),(0,c.A)(v,d.dc,4),(0,c.A)(v,d.g7,48),(0,c.A)(v,d.JY,y)})(f.prototype),e=f},77162:(g,p,t)=>{t.d(p,{A:()=>f});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085),c=t(47958),l=t(9599),h=t(36981),o=t(77231),u=t(71766);class f{constructor(){(0,n.A)(this,"codecType",-1),(0,n.A)(this,"codecId",0),(0,n.A)(this,"codecTag",0),(0,n.A)(this,"extradata",0),(0,n.A)(this,"extradataSize",0),(0,n.A)(this,"codedSideData",0),(0,n.A)(this,"nbCodedSideData",0),(0,n.A)(this,"format",o.N_),(0,n.A)(this,"bitRate",BigInt(0)),(0,n.A)(this,"bitsPerCodedSample",0),(0,n.A)(this,"bitsPerRawSample",0),(0,n.A)(this,"profile",o.N_),(0,n.A)(this,"level",o.N_),(0,n.A)(this,"width",0),(0,n.A)(this,"height",0),(0,n.A)(this,"sampleAspectRatio",new l.P({den:1,num:0})),(0,n.A)(this,"framerate",new l.P({den:1,num:0})),(0,n.A)(this,"fieldOrder",0),(0,n.A)(this,"colorRange",0),(0,n.A)(this,"colorPrimaries",2),(0,n.A)(this,"colorTrc",2),(0,n.A)(this,"colorSpace",2),(0,n.A)(this,"chromaLocation",0),(0,n.A)(this,"videoDelay",0),(0,n.A)(this,"chLayout",void 0),(0,n.A)(this,"sampleRate",o.N_),(0,n.A)(this,"blockAlign",0),(0,n.A)(this,"frameSize",0),(0,n.A)(this,"initialPadding",0),(0,n.A)(this,"trailingPadding",0),(0,n.A)(this,"seekPreroll",0),(0,n.A)(this,"bitFormat",0)}destroy(){(0,u.dn)(this[a.o9]),this[a.o9]=0}}e=f.prototype,(i=new(r())).set("codecType",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("codecId",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("codecTag",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("extradata",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),i.set("extradataSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("codedSideData",{0:c.lg,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),i.set("nbCodedSideData",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),i.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),i.set("bitRate",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),i.set("bitsPerCodedSample",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),i.set("bitsPerRawSample",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:44,8:0}),i.set("profile",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),i.set("level",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:52,8:0}),i.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),i.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:60,8:0}),i.set("sampleAspectRatio",{0:l.P,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),i.set("framerate",{0:l.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),i.set("fieldOrder",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),i.set("colorRange",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),i.set("colorPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),i.set("colorTrc",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),i.set("colorSpace",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:96,8:0}),i.set("chromaLocation",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:100,8:0}),i.set("videoDelay",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),i.set("chLayout",{0:h.r,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),i.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),i.set("blockAlign",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),i.set("frameSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),i.set("initialPadding",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:148,8:0}),i.set("trailingPadding",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),i.set("seekPreroll",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:156,8:0}),i.set("bitFormat",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:160,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,8),(0,d.A)(e,a.g7,168),(0,d.A)(e,a.JY,i)},56490:(g,p,t)=>{t.d(p,{A:()=>l});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085);class c{constructor(){(0,n.A)(this,"key",0),(0,n.A)(this,"value",0)}}e=c.prototype,(i=new(r())).set("key",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("value",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,4),(0,d.A)(e,a.g7,8),(0,d.A)(e,a.JY,i);class l{constructor(){(0,n.A)(this,"count",0),(0,n.A)(this,"elems",0)}}(function(h){var o=new(r());o.set("count",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),o.set("elems",{0:c,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),(0,d.A)(h,a.Og,!0),(0,d.A)(h,a.dc,4),(0,d.A)(h,a.g7,8),(0,d.A)(h,a.JY,o)})(l.prototype)},55833:(g,p,t)=>{t.d(p,{pu:()=>f});var e=t(134),i=t(80662),n=t.n(i),s=t(61499),r=t(12085),a=t(56490),d=t(50288),c=t(9599),l=t(94300),h=t(36981),o=t(77231),u=t(56024);const f=8;class v{constructor(){(0,e.A)(this,"type",0),(0,e.A)(this,"data",0),(0,e.A)(this,"size",0),(0,e.A)(this,"metadata",0),(0,e.A)(this,"buf",0)}}var y,A;y=v.prototype,(A=new(n())).set("type",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),A.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),A.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),A.set("metadata",{0:a.A,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),A.set("buf",{0:d.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),(0,r.A)(y,s.Og,!0),(0,r.A)(y,s.dc,4),(0,r.A)(y,s.g7,20),(0,r.A)(y,s.JY,A),function(k){var T=new(n());T.set("displayPrimaries",{0:c.P,1:0,2:0,3:1,4:6,5:0,6:0,7:0,8:0}),T.set("whitePoint",{0:c.P,1:0,2:0,3:1,4:2,5:0,6:0,7:48,8:0}),T.set("minLuminance",{0:c.P,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),T.set("maxLuminance",{0:c.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),T.set("hasPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),T.set("hasLuminance",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),(0,r.A)(k,s.Og,!0),(0,r.A)(k,s.dc,4),(0,r.A)(k,s.g7,88),(0,r.A)(k,s.JY,T)}((class{constructor(){(0,e.A)(this,"displayPrimaries",void 0),(0,e.A)(this,"whitePoint",void 0),(0,e.A)(this,"minLuminance",void 0),(0,e.A)(this,"maxLuminance",void 0),(0,e.A)(this,"hasPrimaries",void 0),(0,e.A)(this,"hasLuminance",void 0)}}).prototype),function(k){var T=new(n());T.set("maxCLL",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),T.set("maxFALL",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,r.A)(k,s.Og,!0),(0,r.A)(k,s.dc,4),(0,r.A)(k,s.g7,8),(0,r.A)(k,s.JY,T)}((class{constructor(){(0,e.A)(this,"maxCLL",void 0),(0,e.A)(this,"maxFALL",void 0)}}).prototype);class w{constructor(){(0,e.A)(this,"data",new Array(f).fill(0,0,f)),(0,e.A)(this,"linesize",new Array(f).fill(0,0,f)),(0,e.A)(this,"extendedData",0),(0,e.A)(this,"width",o.N_),(0,e.A)(this,"height",o.N_),(0,e.A)(this,"nbSamples",o.N_),(0,e.A)(this,"format",o.N_),(0,e.A)(this,"keyFrame",0),(0,e.A)(this,"pictType",0),(0,e.A)(this,"sampleAspectRatio",new c.P({den:1,num:0})),(0,e.A)(this,"pts",o.Dh),(0,e.A)(this,"pktDts",o.Dh),(0,e.A)(this,"timeBase",void 0),(0,e.A)(this,"quality",o.N_),(0,e.A)(this,"opaque",0),(0,e.A)(this,"repeatPict",o.N_),(0,e.A)(this,"interlacedFrame",o.N_),(0,e.A)(this,"topFieldFirst",o.N_),(0,e.A)(this,"paletteHasChanged",o.N_),(0,e.A)(this,"sampleRate",o.N_),(0,e.A)(this,"buf",new Array(f).fill(0,0,f)),(0,e.A)(this,"extendedBuf",0),(0,e.A)(this,"nbExtendedBuf",0),(0,e.A)(this,"sideData",0),(0,e.A)(this,"nbSideData",0),(0,e.A)(this,"flags",0),(0,e.A)(this,"colorRange",0),(0,e.A)(this,"colorPrimaries",2),(0,e.A)(this,"colorTrc",2),(0,e.A)(this,"colorSpace",2),(0,e.A)(this,"chromaLocation",0),(0,e.A)(this,"bestEffortTimestamp",o.Dh),(0,e.A)(this,"pktPos",o.Dh),(0,e.A)(this,"metadata",0),(0,e.A)(this,"decodeErrorFlags",0),(0,e.A)(this,"pktSize",o.N_),(0,e.A)(this,"hwFramesCtx",0),(0,e.A)(this,"opaqueRef",0),(0,e.A)(this,"cropTop",0),(0,e.A)(this,"cropBottom",0),(0,e.A)(this,"cropLeft",0),(0,e.A)(this,"cropRight",0),(0,e.A)(this,"privateRef",0),(0,e.A)(this,"chLayout",void 0),(0,e.A)(this,"duration",BigInt(0))}close(){(0,u.to)(this[s.o9]),(0,l.A)(this)}}(function(k){var T=new(n());T.set("data",{0:2,1:1,2:1,3:1,4:8,5:0,6:0,7:0,8:0}),T.set("linesize",{0:15,1:0,2:0,3:1,4:8,5:0,6:0,7:32,8:0}),T.set("extendedData",{0:2,1:1,2:2,3:0,4:0,5:0,6:0,7:64,8:0}),T.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:68,8:0}),T.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),T.set("nbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:76,8:0}),T.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),T.set("keyFrame",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),T.set("pictType",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),T.set("sampleAspectRatio",{0:c.P,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),T.set("pts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),T.set("pktDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),T.set("timeBase",{0:c.P,1:0,2:0,3:0,4:0,5:0,6:0,7:120,8:0}),T.set("quality",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:128,8:0}),T.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:132,8:0}),T.set("repeatPict",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),T.set("interlacedFrame",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),T.set("topFieldFirst",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),T.set("paletteHasChanged",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:148,8:0}),T.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),T.set("buf",{0:d.BU,1:1,2:1,3:1,4:8,5:0,6:0,7:156,8:0}),T.set("extendedBuf",{0:d.BU,1:1,2:2,3:0,4:0,5:0,6:0,7:188,8:0}),T.set("nbExtendedBuf",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:192,8:0}),T.set("sideData",{0:v,1:1,2:2,3:0,4:0,5:0,6:0,7:196,8:0}),T.set("nbSideData",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:200,8:0}),T.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:204,8:0}),T.set("colorRange",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:208,8:0}),T.set("colorPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:212,8:0}),T.set("colorTrc",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:216,8:0}),T.set("colorSpace",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:220,8:0}),T.set("chromaLocation",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:224,8:0}),T.set("bestEffortTimestamp",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:232,8:0}),T.set("pktPos",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:240,8:0}),T.set("metadata",{0:a.A,1:1,2:1,3:0,4:0,5:0,6:0,7:248,8:0}),T.set("decodeErrorFlags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:252,8:0}),T.set("pktSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:256,8:0}),T.set("hwFramesCtx",{0:d.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:260,8:0}),T.set("opaqueRef",{0:d.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:264,8:0}),T.set("cropTop",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:268,8:0}),T.set("cropBottom",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:272,8:0}),T.set("cropLeft",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:276,8:0}),T.set("cropRight",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:280,8:0}),T.set("privateRef",{0:d.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:284,8:0}),T.set("chLayout",{0:h.r,1:0,2:0,3:0,4:0,5:0,6:0,7:288,8:0}),T.set("duration",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:312,8:0}),(0,r.A)(k,s.Og,!0),(0,r.A)(k,s.dc,8),(0,r.A)(k,s.g7,320),(0,r.A)(k,s.JY,T)})(w.prototype),function(k){var T=new(n());T.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:320,8:0}),(0,r.A)(k,s.Og,!0),(0,r.A)(k,s.dc,8),(0,r.A)(k,s.g7,328),(0,r.A)(k,s.JY,T)}((class extends w{constructor(...k){super(...k),(0,e.A)(this,"refCount",void 0)}}).prototype)},47958:(g,p,t)=>{t.d(p,{lg:()=>o});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085),c=t(50288),l=t(9599),h=t(77231);class o{constructor(){(0,n.A)(this,"data",0),(0,n.A)(this,"size",h.N_),(0,n.A)(this,"type",-1)}}e=o.prototype,(i=new(r())).set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("type",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,4),(0,d.A)(e,a.g7,12),(0,d.A)(e,a.JY,i);class u{constructor(){(0,n.A)(this,"buf",0),(0,n.A)(this,"pts",h.Dh),(0,n.A)(this,"dts",h.Dh),(0,n.A)(this,"data",0),(0,n.A)(this,"size",0),(0,n.A)(this,"streamIndex",h.N_),(0,n.A)(this,"flags",0),(0,n.A)(this,"sideData",0),(0,n.A)(this,"sideDataElems",0),(0,n.A)(this,"duration",h.Dh),(0,n.A)(this,"pos",h.Dh),(0,n.A)(this,"opaque",0),(0,n.A)(this,"opaqueRef",0),(0,n.A)(this,"timeBase",new l.P({den:h.SF,num:1})),(0,n.A)(this,"bitFormat",0)}}(function(f){var v=new(r());v.set("buf",{0:c.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),v.set("pts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),v.set("dts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),v.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:24,8:0}),v.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),v.set("streamIndex",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),v.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:36,8:0}),v.set("sideData",{0:o,1:1,2:1,3:0,4:0,5:0,6:0,7:40,8:0}),v.set("sideDataElems",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:44,8:0}),v.set("duration",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),v.set("pos",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),v.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:64,8:0}),v.set("opaqueRef",{0:c.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:68,8:0}),v.set("timeBase",{0:l.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),v.set("bitFormat",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),(0,d.A)(f,a.Og,!0),(0,d.A)(f,a.dc,8),(0,d.A)(f,a.g7,88),(0,d.A)(f,a.JY,v)})(u.prototype),function(f){var v=new(r());v.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),(0,d.A)(f,a.Og,!0),(0,d.A)(f,a.dc,8),(0,d.A)(f,a.g7,96),(0,d.A)(f,a.JY,v)}((class extends u{constructor(...f){super(...f),(0,n.A)(this,"refCount",void 0)}}).prototype)},10278:(g,p,t)=>{t.d(p,{A:()=>c});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085);class c{constructor(){(0,n.A)(this,"data",void 0),(0,n.A)(this,"nbSamples",void 0),(0,n.A)(this,"maxnbSamples",void 0),(0,n.A)(this,"channels",void 0),(0,n.A)(this,"sampleRate",void 0),(0,n.A)(this,"timestamp",void 0),(0,n.A)(this,"duration",void 0)}}e=c.prototype,(i=new(r())).set("data",{0:2,1:1,2:2,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("nbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("maxnbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("channels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),i.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("timestamp",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),i.set("duration",{0:19,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,8),(0,d.A)(e,a.g7,40),(0,d.A)(e,a.JY,i),function(l){var h=new(r());h.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),(0,d.A)(l,a.Og,!0),(0,d.A)(l,a.dc,8),(0,d.A)(l,a.g7,48),(0,d.A)(l,a.JY,h)}((class extends c{constructor(...l){super(...l),(0,n.A)(this,"refCount",void 0)}}).prototype)},9599:(g,p,t)=>{t.d(p,{P:()=>c});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085);class c{constructor(h){(0,n.A)(this,"num",1),(0,n.A)(this,"den",1),h&&(this.den=h.den,this.num=h.num)}}e=c.prototype,(i=new(r())).set("num",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("den",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,4),(0,d.A)(e,a.g7,8),(0,d.A)(e,a.JY,i)},37815:(g,p,t)=>{t.d(p,{A6:()=>y,D$:()=>h,Q7:()=>f,VG:()=>o,aw:()=>l,us:()=>v});var e=t(14686),i=t(63939),n=t(50932),s=t(37837),r=t(40046),a=t(73783),d=t(52699);const c=1;function l(w,k,T=0,P=0,b=0){const x=(0,s.Gy)(28);return x?function(I,S,z,V=0,L=0,C=0){n.M[20](I,S),n.M[15](I+4,z),n.M[20](I+12,V),n.M[20](I+16,L),r.M_(I+8,1,9,2),n.M[15](I+20,C);const F=(0,s.Gy)(12);return F?(n.M[20](F,I),n.M[20](F+4,S),n.M[15](F+8,z),F):0}(x,w,k,T,P,b)||((0,s.Eb)(x),0):0}function h(w){return l((0,s.sY)(w),w)}function o(w){const k=(0,s.Gy)(12);return(0,e.Mr)(k,w,12),r.WQ(i.f[20](w)+8,1,9,2),k}function u(w,k){const T=i.f[20](i.f[20](w));if(k?((0,e.Mr)(i.f[20](w),i.f[20](k),12),(0,s.aI)(k)):(0,s.aI)(w),r.jb(T+8,1,9,2)===1){const P=!(2&i.f[15](T+24));i.f[20](T+16)?A(i.f[20](T+16),i.f[20](T)):(0,s.Eb)(i.f[20](T)),P&&(0,s.Eb)(T)}}function f(w){w&&i.f[20](w)&&u(w,0)}function v(w,k){const T=i.f[20](w);if(!k)return f(w),0;if(T&&i.f[20](T+4)===i.f[20](k+4))return n.M[20](T+4,i.f[20](k+4)),n.M[15](T+8,i.f[15](k+8)),0;const P=o(k);return f(w),n.M[20](w,P),0}function y(w,k){if(!i.f[20](w)){const x=l((0,s.cz)(0,k),k);return n.M[20](w,x),n.M[15](i.f[20](x)+24,i.f[15](i.f[20](x)+24)|c),0}const T=i.f[20](w),P=i.f[20](T);if(i.f[15](T+8)===k)return 0;if(!(i.f[15](P+24)&c&&function(x){return 1&i.f[15](i.f[20](x)+20)?0:r.Hh(i.f[20](x)+8,9,2)===1?1:0}(T)&&i.f[20](T+4)===i.f[20](P))){let x=d.z(4);n.M[20](x,0);const I=y(x,k);return I<0?(d.t(4),I):((0,e.Mr)(i.f[20](i.f[20](x)+4),i.f[20](P),Math.min(k,i.f[15](P+4))),u(w,x),d.t(4),0)}const b=(0,s.cz)(i.f[20](P),k);return n.M[20](T+4,b),n.M[20](P,b),n.M[15](T+8,k),n.M[15](P+4,k),0}function A(w,k){const T=w,P=i.f[20](T+12);a.s2(P),n.M[20](T+16,i.f[20](P+4)),n.M[20](P+4,T),a.Tl(P),r.jb(P+8,1,9,2)===1&&function(b){(function(x){for(;i.f[20](x+4);){const I=i.f[20](x+4);n.M[20](x+4,i.f[20](I+16)),i.f[20](I+4)?A(i.f[20](I+4),i.f[20](I)):(0,s.Eb)(i.f[20](I)),(0,s.Eb)(I)}})(b),a.zr(b),(0,s.Eb)(b)}(P)}},73749:(g,p,t)=>{t.d(p,{I:()=>s});var e=t(63939),i=t(50932),n=t(37837);function s(r){const a=e.f[20](r);if(a){for(;i.M[15](a,e.f[15](a)-1),e.f[15](a)+1;)(0,n.aI)(e.f[20](a+4)+8*e.f[15](a)),(0,n.aI)(e.f[20](a+4)+8*e.f[15](a)+4);(0,n.aI)(a+4)}(0,n.aI)(r)}},56024:(g,p,t)=>{t.d(p,{FP:()=>o,_h:()=>y,aH:()=>v,rh:()=>A,to:()=>w,xj:()=>u});var e=t(63939),i=t(50932),n=t(55833),s=t(37837),r=t(14686),a=t(77231),d=t(37815),c=t(73749),l=t(66788),h=t(9705);function o(){const k=(0,s.Gy)(320);return y(k),k}function u(k){w(k),(0,s.Eb)(k)}function f(k){const T=e.f[20](k);(0,d.Q7)(T+16),(0,c.I)(T+12),(0,s.aI)(k)}function v(k,T){for(let P=0;P<e.f[15](k+200);P++)if(e.f[15](e.f[20](e.f[20](k+196)+4*P))===T)return e.f[20](e.f[20](k+196)+4*P);return 0}function y(k){e.f[20](k+64)!==k&&(0,s.aI)(k+64),(0,r.sO)(k,0,320),i.M[17](k+104,a.Dh),i.M[17](k+112,a.Dh),i.M[17](k+232,a.Dh),i.M[17](k+240,a.Dh),i.M[15](k+256,-1),i.M[15](k+84,1),i.M[15](k+92,0),i.M[15](k+96,1),i.M[15](k+80,-1),i.M[20](k+64,k),i.M[15](k+212,2),i.M[15](k+216,2),i.M[15](k+220,2),i.M[15](k+208,0),i.M[15](k+224,0),i.M[15](k+204,0)}function A(k,T){const P=(0,l.K0)(e.f[15](k+80)),b=e.f[15](k+292),x=P?b:1;let I=0;if(!e.f[15](k+32)){if(I=(0,l.f8)(e.f[15](k+80),b,e.f[15](k+76),T),I<0)return I;i.M[15](k+32,I)}if(x>n.pu){if(i.M[20](k+64,(0,s.sY)(4*x)),i.M[20](k+188,(0,s.sY)(4*x)),!e.f[20](k+188)||!e.f[20](k+64))return(0,s.aI)(k+64),(0,s.aI)(k+188),h.gR;i.M[15](k+192,x-n.pu)}else i.M[20](k+64,k);for(let S=0;S<Math.min(x,n.pu);S++){if(i.M[20](k+156+4*S,(0,d.D$)(e.f[15](k+32))),!e.f[20](k+156+4*S))return w(k),h.gR;i.M[20](e.f[20](k+64)+4*S,e.f[20](e.f[20](k+156+4*S)+4)),i.M[20](k+4*S,e.f[20](e.f[20](k+156+4*S)+4))}for(let S=0;S<x-n.pu;S++){if(i.M[20](e.f[20](k+188)+4*S,(0,d.D$)(e.f[15](k+32))),!e.f[20](e.f[20](k+188)+4*S))return w(k),h.gR;i.M[20](e.f[20](k+64)+(S+n.pu),e.f[20](e.f[20](e.f[20](k+188)+4*S)+4))}}function w(k){(function(T){for(let P=0;P<e.f[15](T+200);P++)f(e.f[20](T+196)+4*P);i.M[15](T+200,0),(0,s.aI)(T+196)})(k);for(let T=0;T<8;T++)(0,d.Q7)(k+156+4*T);for(let T=0;T<e.f[15](k+192);T++)(0,d.Q7)(e.f[20](k+188)+4*T);(0,s.aI)(k+188),(0,c.I)(k+248),(0,d.Q7)(k+260),(0,d.Q7)(k+264),(0,d.Q7)(k+284),y(k)}},71517:(g,p,t)=>{t.d(p,{Is:()=>u,NX:()=>x,NZ:()=>y,Ow:()=>o,Pd:()=>A,Qe:()=>v,Up:()=>P,Zx:()=>b,_5:()=>f,fQ:()=>h,iI:()=>c,rN:()=>T,rU:()=>l,zu:()=>w});var e=t(14686),i=t(63939),n=t(50932),s=t(37837),r=t(77231),a=t(37815);const d=64;function c(I,S){return S?(0,e.JW)(i.f[20](I+24),i.f[15](I+28)):(0,e.s3)(i.f[20](I+24),i.f[15](I+28))}function l(I,S){for(let z=0;z<i.f[15](I+44);z++)if(i.f[15](i.f[20](I+40)+12*z+8)===S)return i.f[20](I+40)+12*z;return 0}function h(I,S){for(let z=0;z<i.f[15](I+44);z++)if(i.f[15](i.f[20](I+40)+12*z+8)===S)return!0;return!1}function o(I,S,z,V){for(let H=0;H<i.f[15](I+44);H++)if(i.f[15](i.f[20](I+40)+12*H+8)===S)return(0,s.Eb)(i.f[20](i.f[20](I+40)+12*H)),n.M[20](i.f[20](I+40)+12*H,z),void n.M[15](i.f[20](I+40)+12*H+4,V);const L=12*(i.f[15](I+44)+1),C=(0,s.Gy)(L);if(i.f[15](I+44))for(let H=0;H<i.f[15](I+44);H++)(0,e.Mr)(C+12*H,i.f[20](I+40)+12*H,12);const F=C+12*i.f[15](I+44);n.M[20](F,z),n.M[15](F+8,S),n.M[15](F+4,V),i.f[20](I+40)&&(0,s.Eb)(i.f[20](I+40)),n.M[20](I+40,C),n.M[15](I+44,i.f[15](I+44)+1)}function u(I,S){let z=-1;for(let V=0;V<i.f[15](I+44);V++)if(i.f[15](i.f[20](I+40)+12*V+8)===S){z=V;break}if(z>-1)if(i.f[15](I+44)===1)(0,s.Eb)(i.f[20](i.f[20](I+40))),(0,s.Eb)(i.f[20](I+40)),n.M[20](I+40,0),n.M[15](I+44,0);else{const V=12*(i.f[15](I+44)-1),L=(0,s.Gy)(V);for(let C=0;C<i.f[15](I+44);C++)C!==z?(0,e.Mr)(L+12*C,i.f[20](I+40)+12*C,12):(0,s.Eb)(i.f[20](i.f[20](I+40)+12*C));(0,s.Eb)(i.f[20](I+40)),n.M[20](I+40,L),n.M[15](I+44,i.f[15](I+44)-1)}}function f(){const I=(0,s.Gy)(88);return A(I),I}function v(I){P(I),(0,s.Eb)(I)}function y(I,S){const z=i.f[20](I),V=i.f[15](S);if(z){for(let L=0;L<V;L++)(0,s.Eb)(i.f[20](z+12*L));(0,s.aI)(I),n.M[15](S,0)}}function A(I){n.M[20](I+24,0),n.M[15](I+28,0),n.M[20](I+40,0),n.M[15](I+44,0),n.M[15](I+32,r.N_),n.M[17](I+56,r.Dh),n.M[17](I+48,r.Dh),n.M[15](I+36,0),n.M[17](I+16,r.Dh),n.M[17](I+8,r.Dh),n.M[15](I+76,r.SF),n.M[15](I+72,1),n.M[15](I+80,0),n.M[20](I,0)}function w(I,S){return n.M[15](I+32,i.f[15](S+32)),n.M[17](I+56,i.f[17](S+56)),n.M[17](I+48,i.f[17](S+48)),n.M[15](I+36,i.f[15](S+36)),n.M[17](I+16,i.f[17](S+16)),n.M[17](I+8,i.f[17](S+8)),n.M[20](I+64,i.f[20](S+64)),n.M[15](I+76,i.f[15](S+76)),n.M[15](I+72,i.f[15](S+72)),n.M[15](I+80,i.f[15](S+80)),n.M[20](I+68,0),(0,a.us)(I+68,i.f[20](S+68)),function(z,V){if(y(z+40,z+44),i.f[15](V+44)){let L=12;n.M[20](z+40,(0,s.Gy)(L*i.f[15](V+44)));for(let C=0;C<i.f[15](V+44);C++)n.M[15](i.f[20](z+40)+12*C+4,i.f[15](i.f[20](V+40)+12*C+4)),n.M[15](i.f[20](z+40)+12*C+8,i.f[15](i.f[20](V+40)+12*C+8)),n.M[20](i.f[20](z+40)+12*C,(0,s.sY)(i.f[15](i.f[20](V+40)+12*C+4))),(0,e.Mr)(i.f[20](i.f[20](z+40)+12*C),i.f[20](i.f[20](V+40)+12*C),i.f[15](i.f[20](V+40)+12*C+4));n.M[15](z+44,i.f[15](V+44))}}(I,S),0}function k(I,S){return(0,a.A6)(I,S+d),(0,e.sO)(i.f[20](i.f[20](I)+4)+S,0,d),0}function T(I,S){return i.f[20](I)&&(0,a.Q7)(I),n.M[20](I,0),w(I,S),!i.f[20](S)&&i.f[15](S+28)?(k(I,i.f[15](S+28)),i.f[15](S+28)&&(0,e.Mr)(i.f[20](i.f[20](I)+4),i.f[20](S+24),i.f[15](S+28)),n.M[20](I+24,i.f[20](i.f[20](I)+4))):i.f[20](S)&&(n.M[20](I,(0,a.VG)(i.f[20](S))),n.M[20](I+24,i.f[20](S+24))),n.M[15](I+28,i.f[15](S+28)),0}function P(I){y(I+40,I+44),(0,a.Q7)(I+68),i.f[20](I)?(0,a.Q7)(I):i.f[20](I+24)&&(0,s.Eb)(i.f[20](I+24)),A(I)}function b(I,S){i.f[20](I)&&(0,a.Q7)(I),n.M[20](I,0),!i.f[20](S)&&i.f[15](S+28)?(k(I,i.f[15](S+28)),i.f[15](S+28)&&(0,e.Mr)(i.f[20](i.f[20](I)+4),i.f[20](S+24),i.f[15](S+28)),n.M[20](I+24,i.f[20](i.f[20](I)+4))):i.f[20](S)&&(n.M[20](I,(0,a.VG)(i.f[20](S))),n.M[20](I+24,i.f[20](S+24))),n.M[15](I+28,i.f[15](S+28))}function x(I,S,z){i.f[20](I)?(0,a.Q7)(I):i.f[20](I+24)&&(0,s.Eb)(i.f[20](I+24)),n.M[20](I,(0,a.aw)(S,z+d)),n.M[20](I+24,S),n.M[15](I+28,z)}},99991:(g,p,t)=>{t.d(p,{b:()=>s});var e=t(63939),i=t(37837),n=t(14686);function s(r){e.f[15](r)==2&&(0,i.aI)(r+8),(0,n.sO)(r,0,24)}},71766:(g,p,t)=>{t.d(p,{Yi:()=>c,dn:()=>l});var e=t(14686),i=t(63939),n=t(50932),s=t(37837),r=t(99991),a=t(71517),d=t(77231);function c(h,o){n.M[15](h,i.f[15](o)),n.M[15](h+4,i.f[15](o+4)),n.M[8](h+8,i.f[8](o+8)),n.M[15](h+28,i.f[15](o+28)),n.M[17](h+32,i.f[17](o+32)),n.M[15](h+40,i.f[15](o+40)),n.M[15](h+44,i.f[15](o+44)),n.M[15](h+48,i.f[15](o+48)),n.M[15](h+52,i.f[15](o+52)),n.M[15](h+56,i.f[15](o+56)),n.M[15](h+60,i.f[15](o+60)),n.M[15](h+68,i.f[15](o+68)),n.M[15](h+64,i.f[15](o+64)),n.M[15](h+80,i.f[15](o+80)),n.M[15](h+84,i.f[15](o+84)),n.M[15](h+88,i.f[15](o+88)),n.M[15](h+92,i.f[15](o+92)),n.M[15](h+96,i.f[15](o+96)),n.M[15](h+100,i.f[15](o+100)),n.M[15](h+104,i.f[15](o+104)),(0,e.Mr)(h+112,o+112,24),n.M[15](h+136,i.f[15](o+136)),n.M[15](h+140,i.f[15](o+140)),n.M[15](h+144,i.f[15](o+144)),n.M[15](h+148,i.f[15](o+148)),n.M[15](h+152,i.f[15](o+152)),n.M[15](h+156,i.f[15](o+156)),(0,e.Mr)(h+72,o+72,8),i.f[20](o+12)&&(i.f[20](h+12)&&(0,s.Eb)(i.f[20](h+12)),n.M[20](h+12,(0,s.sY)(i.f[15](o+16))),n.M[15](h+16,i.f[15](o+16)),(0,e.Mr)(i.f[20](h+12),i.f[20](o+12),i.f[15](o+16))),i.f[20](o+20)&&function(u,f,v,y){if(!v)return;const A=(0,s.Gy)(12*y);for(let w=0;w<y;w++)n.M[15](A+12*w+8,i.f[15](v+12*w+8)),n.M[15](A+12*w+4,i.f[15](v+12*w+4)),n.M[20](A+12*w,(0,s.sY)(i.f[15](v+12*w+4))),(0,e.Mr)(A+12*w,v+12*w,i.f[15](v+12*w+4));n.M[15](f,y),n.M[20](u,A)}(h+20,h+24,i.f[20](o+20),i.f[15](o+24))}function l(h){h&&(function(o){i.f[20](o+12)&&(0,s.aI)(o+12),(0,r.b)(o+112),(0,a.NZ)(o+20,o+24),(0,e.sO)(o,0,168),n.M[15](o,-1),n.M[15](o+4,0),n.M[15](o+28,-1),n.M[15](o+112,0),n.M[15](o+80,0),n.M[15](o+84,0),n.M[15](o+88,2),n.M[15](o+92,2),n.M[15](o+96,2),n.M[15](o+100,0),n.M[15](o+64,0),n.M[15](o+68,1),n.M[15](o+72,0),n.M[15](o+72,1),n.M[15](o+48,d.N_),n.M[15](o+52,d.N_)}(h),(0,s.Eb)(h))}},85103:(g,p,t)=>{function e(n){const s=n/BigInt(1e3),r=n-s*BigInt(1e3);return Number(s)+Number(r)/1e3}function i(n,s){return n+s-1&~(s-1)}t.d(p,{An:()=>i,yw:()=>e})},23991:(g,p,t)=>{function e(n){let s=0,r=0;for(;r<32&&n.readU1()===0;)r++;return s=n.readU(r),s+=(1<<r)-1,s}function i(n){let s=e(n);return s=1&s?(s+1)/2:-s/2,s}t.d(p,{$x:()=>i,xb:()=>e})},39381:(g,p,t)=>{t.d(p,{E3:()=>n,Y0:()=>s});var e=t(63939);function i(r){return e.f[2](r)}function n(r){return i(r+1)<<8|i(r)}function s(r){return n(r+2)<<16|n(r)}},82774:(g,p,t)=>{t.d(p,{Cv:()=>r});var e=t(50932);function i(a,d){e.M[2](a,255&d)}function n(a,d){i(a,d>>>8),i(a+1,d)}function s(a,d){n(a,d>>>16),n(a+2,65535&d)}function r(a,d){s(a,Number(d>>BigInt(32)&0xffffffffn)),s(a+4,Number(0xffffffffn&d))}},37837:(g,p,t)=>{t.d(p,{Eb:()=>l,Gy:()=>c,aI:()=>h,cz:()=>o,sY:()=>d});var e=t(11473),i=t(63939),n=t(50932),s=t(14686),r=t(4624),a="src\\avutil\\util\\mem.ts";function d(u){const f=e.s_.malloc(u);return f||r.h2("can not alloc buffer",a,32),f}function c(u){const f=e.s_.malloc(u);return f||r.h2("can not alloc buffer",a,40),(0,s.sO)(f,0,u),f}function l(u){e.s_.free(u)}function h(u){e.s_.free(i.f[20](u)),n.M[20](u,0)}function o(u,f){return e.s_.realloc(u,f)}},60264:(g,p,t)=>{function e(r){return r.length>4&&r[0]===0&&r[1]===0&&(r[2]===1||r[2]===0&&r[3]===1)}function i(r,a){let d=0;for(let c=a;c<r.length;c++)switch(r[c]){case 0:d++;break;case 1:if(d>=2)return{offset:c-Math.min(d,3),startCode:Math.min(d+1,4)};d=0;break;default:d=0}return{offset:-1,startCode:0}}function n(r){const a=[];let d=i(r,0),c={offset:-1,startCode:0};for(;c=i(r,d.offset+d.startCode),c.offset>-1;)a.push(r.subarray(d.offset+d.startCode,c.offset,!0)),d=c;return a.push(r.subarray(d.offset+d.startCode,void 0,!0)),a}function s(r,a=0,d){d||(d=r.length);const c=new Uint8Array(r.length);let l=0,h=0;for(let o=0;o<r.length;o++){if(o>=a&&o<d)if(r[o]===0)l++;else if(r[o]===3&&l===2&&o+1<r.length&&r[o+1]<=3){if(o++,o===r.length)break;l=r[o]===0?1:0}else l=0;c[h++]=r[o]}return c.slice(0,h)}t.d(p,{BN:()=>s,Bs:()=>e,py:()=>n})},95644:(g,p,t)=>{function e(n,s,r,a){if(n<=0||n>64)return 0;if(s)switch(n){case 32:return r?65556:65557;case 64:return r?65558:65559;default:return 0}else if(n+=7,a&1<<(n>>>=3)-1)switch(n){case 1:return 65540;case 2:return r?65537:65536;case 3:return r?65549:65548;case 4:return r?65545:65544;case 8:return r?65568:65567;default:return 0}else switch(n){case 1:return 65541;case 2:return r?65539:65538;case 3:return r?65551:65550;case 4:return r?65547:65546;default:return 0}}function i(n){switch(n){case 69649:return 2;case 69648:return 3;case 69647:case 69633:case 69632:case 69645:case 69638:return 4;default:return function(s){switch(s){case 86070:case 86071:case 69674:case 69644:case 69678:case 69651:case 69661:case 69677:case 69655:case 69664:case 69636:case 69675:case 69660:case 69646:case 69670:return 4;case 86089:case 86090:case 86091:case 86092:case 65543:case 65542:case 65571:case 65540:case 65563:case 65572:case 65541:case 81924:case 81926:return 8;case 65537:case 65566:case 65536:case 65554:case 65539:case 65538:return 16;case 65552:case 65549:case 65548:case 65564:case 65551:case 65550:return 24;case 65545:case 65544:case 65565:case 65547:case 65546:case 65556:case 65557:case 65570:case 65569:return 32;case 65558:case 65559:case 65568:case 65567:return 64;default:return 0}}(n)}}t.d(p,{MZ:()=>i,uU:()=>e})},44328:(g,p,t)=>{t.d(p,{Vt:()=>s,k:()=>i,lb:()=>n});var e=t(63939);function i(r,a,d){return r*BigInt(a.num>>>0)*BigInt(d.den>>>0)/(BigInt(a.den>>>0)*BigInt(d.num>>>0))}function n(r){return r.num/r.den}function s(r){return e.f[15](r)/e.f[15](r+4)}},66788:(g,p,t)=>{t.d(p,{K0:()=>s,f8:()=>r});var e=t(77231),i=t(85103),n=t(58055);function s(a){return!(a<0||a>=12)&&n.J[a].planar}function r(a,d,c,l){const h=function(u){return u<0||u>=12?0:n.J[u].bits>>3}(a),o=s(a);return!h||c<=0||d<=0?-1:(l||(l=1,c=(0,i.An)(c,32)),d>e.go/l||d*c>(e.go-l*d)/h?-1:o?(0,i.An)(c*h,l):(0,i.An)(c*h*d,l))}},95007:(g,p,t)=>{t.d(p,{A:()=>w});var e=t(134),i=t(95335),n=t(72739),s=t(73783),r=t(7417),a=t(4624),d="src\\cheap\\allocator\\AllocatorJS.ts";const c=2,l=b(16),h=32,o=1+2*h,u=1,f=0,v=2,y=1,A=u+o+2;class w{constructor(U,Q=!0){var N,_,O,R;(0,e.A)(this,"buffer",void 0),(0,e.A)(this,"byteOffset",void 0),(0,e.A)(this,"heapOffset",void 0),(0,e.A)(this,"heapLength",void 0),(0,e.A)(this,"int32Array",void 0),(0,e.A)(this,"updates",void 0),(0,e.A)(this,"options",void 0),(0,e.A)(this,"shared",void 0),(0,e.A)(this,"handles",void 0),this.options=i.X$({growSize:1048576,maxHeapSize:2097152e3},U),this.handles=[],this.buffer=U.buffer,this.shared=!1,this.options.memory||this.buffer instanceof ArrayBuffer||this.buffer instanceof SharedArrayBuffer?(this.byteOffset=(N=U.byteOffset)!==null&&N!==void 0?N:0,this.heapOffset=I(this.byteOffset+P(h),(_=U.byteLength)!==null&&_!==void 0?_:this.buffer.byteLength),this.heapLength=S(((O=U.byteLength)!==null&&O!==void 0?O:this.buffer.byteLength)-this.heapOffset),this.int32Array=new Int32Array(this.buffer,this.heapOffset,b(this.heapLength)),this.updates=new Int32Array(this.buffer,this.byteOffset,h),typeof SharedArrayBuffer=="function"&&this.buffer instanceof SharedArrayBuffer&&(this.shared=!0)):a.h2("Expected buffer to be an instance of Buffer or ArrayBuffer",d,109),Q&&(this.updates.fill(u),function(j){return j[u-1]===o&&j[u+o]===o}(R=this.int32Array)||function(j){const B=u,Y=o,Z=A,rt=j.length-(B+Y+2+y);L(j,Y,B),j[B+f]=1,j[B+v]=Z;for(let ot=1;ot<h;ot++)j[B+v+ot]=u;L(j,rt,Z),j[Z+f]=1,j[Z+v]=B}(R),function(j){let B=A;for(;B<j.length-y;){const Y=V(j,B);Y<2||Y>=j.length-A?a.h2(`Got invalid sized chunk at ${P(B)} (${P(Y)} bytes).`,d,563):H(j,B)?k(j,B,Y):T(j,B,Y),B+=Y+2}}(this.int32Array))}addUpdateHandle(U){n.zy(this.handles,U)||this.handles.push(U)}removeUpdateHandle(U){n.TF(this.handles,U)}malloc_(U){(U=x(U,7))<16&&(U=16);const Q=b(U),N=this.findFreeBlock(this.int32Array,Q);if(N<=u)return 0;const _=V(this.int32Array,N);return _-(Q+2)>=l?function(O,R,j,B,Y){const Z=R+j+2,rt=B-(Z-R);F(O,R,B,Y),O[R-1]=-j,O[R+j]=-j,O[Z-1]=-rt,O[Z+rt]=-rt,D(O,Z,rt,Y)}(this.int32Array,N,Q,_,this.updates):F(this.int32Array,N,_,this.updates),P(N)+this.heapOffset}malloc(U){this.shared&&((0,s.s2)(r.I,!0),this.checkBuffer());const Q=this.malloc_(U);return this.shared&&(0,s.Tl)(r.I),Q}calloc_(U,Q){let N=U*Q;N=N<16?16:x(N,7);const _=this.malloc_(N);if(_===0)return 0;const O=b(_);return this.int32Array.subarray(O,O+N>>2).fill(0),_}calloc(U,Q){this.shared&&((0,s.s2)(r.I,!0),this.checkBuffer());const N=this.calloc_(U,Q);return this.shared&&(0,s.Tl)(r.I),N}realloc_(U,Q){if(U===0)return this.malloc_(Q);const N=U;if(Q===0)return this.free_(N),0;let _=b(U-=this.heapOffset),O=_,R=0;M(this.int32Array,_)&&(O=this.int32Array[_-1],R=_-O);const j=V(this.int32Array,O)-R;if(j>=b(x(Q,7)))return N;{const B=this.malloc_(Q);return B===0?(this.free_(N),0):(this.int32Array.set(this.int32Array.subarray(_,_+j),b(B-this.heapOffset)),this.free_(N),B)}}realloc(U,Q){return this.shared&&((0,s.s2)(r.I,!0),this.checkBuffer()),U=this.realloc_(U,Q),this.shared&&(0,s.Tl)(r.I),U}alignedAlloc_(U,Q){if(U<=8)return this.malloc_(Q);const N=this.malloc_(Q+U-1+4);if(N===0)return 0;const _=N+U-1+4&~(U-1);return this.int32Array[b(_-this.heapOffset)-y]=b(N-this.heapOffset),_}alignedAlloc(U,Q){this.shared&&((0,s.s2)(r.I,!0),this.checkBuffer());const N=this.alignedAlloc_(U,Q);return this.shared&&(0,s.Tl)(r.I),N}free_(U){if(U===0)return;let Q=b(U-=this.heapOffset);if(M(this.int32Array,Q)&&(Q=this.int32Array[Q-y]),H(this.int32Array,Q))return;const N=V(this.int32Array,Q),_=G(this.int32Array,Q),O=function(R,j){const B=V(R,j);if(j+B+2>=R.length-2)return 0;const Y=j+B+2;return R[Y-y]<2?0:Y}(this.int32Array,Q);_!==0?O!==0?function(R,j,B,Y,Z,rt){const ot=V(R,j),ft=V(R,Z),ut=Z-j+ft;F(R,j,ot,rt),F(R,Z,ft,rt),R[j-y]=-ut,R[Z+ft]=-ut,D(R,j,ut,rt)}(this.int32Array,_,0,0,O,this.updates):W(this.int32Array,_,Q,N,this.updates):O!==0?function(R,j,B,Y,Z){const rt=V(R,j);F(R,j,rt,Z);const ot=Y+rt+2;R[B-y]=-ot,R[j+rt]=-ot,D(R,B,ot,Z)}(this.int32Array,O,Q,N,this.updates):D(this.int32Array,Q,N,this.updates)}free(U){this.shared&&((0,s.s2)(r.I,!0),this.checkBuffer()),this.free_(U),this.shared&&(0,s.Tl)(r.I)}sizeof(U){if(U===0)return 0;let Q=b(U-=this.heapOffset);return M(this.int32Array,Q)&&(Q=this.int32Array[Q-y]),P(V(this.int32Array,Q))}inspect(){return this.checkBuffer(),function(U,Q){const N=[],_=z(U,u,Q);let O=A,R=0;for(;O<U.length-y;){const j=V(U,O);(j<2||j>=U.length)&&a.h2(`Got invalid sized chunk at ${P(O)} (${P(j)})`,d,619),H(U,O)?N.push(z(U,O,Q)):(R+=P(j),N.push({type:"used",block:O,offset:P(O)+Q,size:P(j)})),O+=j+2}return{header:_,blocks:N,total:P(U.length),used:R}}(this.int32Array,this.heapOffset)}findFreeBlock(U,Q){let N=function(j,B){let Y=u;for(let Z=j[u+f];Z>0;Z--){let rt=j[Y+v+(Z-1)];for(;rt!==u&&j[rt-y]<B;)Y=rt,rt=j[Y+v+(Z-1)]}return Y=j[Y+v],Y}(U,Q);if(N===u){if(this.options.growAllowed&&this.heapLength<this.options.maxHeapSize){const j=this.int32Array.length+1;let B,Y,Z=0,rt=0,ot=0;if(this.options.onResize){var _,O,R;const At=this.options.onResize(this.int32Array,this.int32Array.byteLength+x(Math.max(this.options.growSize,P(Q)),7));Z=(_=At.byteOffset)!==null&&_!==void 0?_:0,ot=I(Z+P(h),(O=At.byteLength)!==null&&O!==void 0?O:At.buffer.byteLength),rt=S(((R=At.byteLength)!==null&&R!==void 0?R:At.buffer.byteLength)-ot),B=new Int32Array(At.buffer,ot,b(rt)),Y=new Int32Array(At.buffer,Z,h)}else{const At=new ArrayBuffer(this.int32Array.length+b(this.options.growSize));ot=I(Z+P(h),At.byteLength),rt=S(At.byteLength-ot),B=new Int32Array(At,ot,b(rt)),B.set(this.int32Array,0),Y=new Int32Array(At,Z,h)}this.byteOffset=Z,this.heapOffset=ot,this.buffer=B.buffer,this.heapLength=rt,this.int32Array=B,this.updates=Y;const ft=B.length-(j-1)-2;L(B,ft,j);const ut=G(B,j);return ut!==0?W(B,ut,j,ft,this.updates):D(B,j,ft,this.updates),this.handles.length&&n.__(this.handles,At=>{At(this.buffer)}),this.findFreeBlock(this.int32Array,Q)}return N}return N}getBuffer(){return this.buffer}isAlloc(U){this.shared&&((0,s.s2)(r.I,!0),this.checkBuffer());const Q=b(U-this.heapOffset);let N=this.int32Array[u+v];for(;N&&N!==u;){if(Q>=N&&Q<N+this.int32Array[N-y])return this.shared&&(0,s.Tl)(r.I),!1;N=this.int32Array[N+v]}return this.shared&&(0,s.Tl)(r.I),!0}checkBuffer(){this.options.memory&&this.options.memory.buffer!==this.buffer&&(this.buffer=this.options.memory.buffer,this.heapLength=S(this.buffer.byteLength-this.heapOffset),this.int32Array=new Int32Array(this.buffer,this.heapOffset,b(this.heapLength)))}}function k(X,U,Q){X[U-1]!==X[U+Q]&&a.h2(`Block length header does not match footer (${P(X[U-1])} vs ${P(X[U+Q])}).`,d,579);const N=X[U+f];(N<1||N>h)&&a.h2(`Block ${P(U)} height must be between 1 and ${h}, got ${N}.`,d,584);for(let _=0;_<N;_++){const O=X[U+v+_];O>=A&&!H(X,O)&&a.h2(`Block ${P(U)} has a pointer to a non-free block (${P(O)}).`,d,590)}return!0}function T(X,U,Q){if(X[U-1]===X[U+Q])return!0;a.h2(`Block length header does not match footer (${P(X[U-1])} vs ${P(X[U+Q])}).`,d,599)}function P(X){return X<<c}function b(X){return X>>>c}function x(X,U){return X+U&~U}function I(X,U){const Q=U-X;return X+(x(Q,7)===Q?0:Q-x(Q,7)+8)}function S(X){return X-=4,X}function z(X,U,Q){const N=X[U+f],_=[];for(let O=0;O<N;O++)_.push(X[U+v+O]);return{type:"free",block:U,offset:P(U)+Q,height:N,pointers:_,size:P(X[U-1])}}function V(X,U){const Q=X[U-1],N=Q>>31;return Q+N^N}function L(X,U,Q){X[Q-1]=U,X[Q+U]=U}function C(X,U,Q){const N=X[u+f];let _=u;for(let O=N;O>0;O--){let R=_+v+(O-1);for(;X[R]>=A&&X[X[R]-1]<U;)_=X[R],R=_+v+(O-1);Q[O-1]=_}}function F(X,U,Q,N){C(X,Q,N);let _=X[N[0]+v];for(;_!==U&&_!==u&&X[_-1]<=Q;){for(let R=X[_+f]-1;R>=0;R--)X[_+v+R]===U&&(N[R]=_);_=X[_+v]}let O=X[u+f];for(let R=0;R<O&&X[N[R]+v+R]===U;R++)X[N[R]+v+R]=X[U+v+R];for(;O>0&&X[u+v+(O-1)]===u;)O--,X[u+f]=O;X[U-1]=-Q,X[U+Q]=-Q}function H(X,U){return!(U<o)&&!(X[U-y]<0)}function M(X,U){return!(U<o)&&!(X[U-y]<0)}function G(X,U){if(U<=A)return 0;const Q=X[U-2];return Q<2?0:U-(2+Q)}function D(X,U,Q,N){C(X,Q,N);const _=function(O,R,j,B){const Y=O[u+f];let Z=function(){let rt=1;for(;Math.random()<.5&&rt<h;)rt+=1;return rt}();if(j-1<Z+1&&(Z=j-2),Z>Y){const rt=Y+1;return O[u+f]=rt,O[u+v+(rt-1)]=u,B[rt]=u,O[R+f]=rt,rt}return O[R+f]=Z,Z}(X,U,Q,N);for(let O=1;O<=_;O++){const R=N[O-1]+v+(O-1);X[U+v+(O-1)]=X[R],X[R]=U,N[O-1]=u}return X[U-1]=Q,X[U+Q]=Q,Q}function W(X,U,Q,N,_){const O=Q-U+N;return F(X,U,Q-U-2,_),X[U-y]=-O,X[Q+N]=-O,D(X,U,O,_),N}},94321:(g,p,t)=>{t.d(p,{z:()=>i});var e=t(134);class i{constructor(){(0,e.A)(this,"table",void 0),(0,e.A)(this,"pointer",void 0),(0,e.A)(this,"nodes",void 0),this.table=new WebAssembly.Table({initial:10,element:"anyfunc"}),this.pointer=1,this.nodes=[{pointer:1,length:9,free:!0}]}getPointer(){return this.pointer}alloc(s){let r=this.findFree(s);if(r<0){const d=this.nodes[this.nodes.length-1],c=s-(d.free?d.length:0);this.table.grow(c),d.free?d.length=d.length+c:this.nodes.push({pointer:d.pointer+d.length,length:c,free:!0}),r=this.findFree(s)}const a=this.nodes[r];return a.length>s&&(this.nodes.splice(r+1,0,{pointer:a.pointer+s,length:a.length-s,free:!0}),a.length=s),a.free=!1,a.pointer}free(s){let r=this.findNode(s);const a=this.nodes[r];if(a&&!a.free){const d=this.nodes[r-1],c=this.nodes[r+1];d&&d.free?c&&c.free?(d.length+=a.length+c.length,this.nodes.splice(r,2)):(d.length+=a.length,this.nodes.splice(r,1)):(c&&c.free&&(a.length+=c.length,this.nodes.splice(r+1,1)),a.free=!0)}this.nodes.length===1&&this.nodes[0].free&&(this.table=new WebAssembly.Table({initial:10,element:"anyfunc"}),this.pointer=1,this.nodes=[{pointer:1,length:9,free:!0}])}get(s){return this.table.get(s)}set(s,r){if(s<0||s>=this.pointer)throw new RangeError("index out of bound");this.table.set(s,r)}inspect(){return this.nodes}findFree(s){let r=-1;for(let a=0;a<this.nodes.length;a++)if(this.nodes[a].length>=s&&this.nodes[a].free){r=a;break}return r}findNode(s){let r=-1;for(let a=0;a<this.nodes.length;a++)if(this.nodes[a].pointer===s){r=a;break}return r}}},98564:(g,p,t)=>{t.d(p,{Ay:()=>h});var e=t(4919),i=t(4624),n=t(63939),s=t(50932),r=t(88096),a=t(73945),d=t.n(a),c="src\\cheap\\asm\\memory.ts";let l;async function h(o){try{let u=(0,e.E_)(d());r.DD(u,typeof SharedArrayBuffer=="function"&&o.buffer instanceof SharedArrayBuffer),l=(await WebAssembly.instantiate(u,{env:{memory:o}})).instance,(0,n.$)({4:l.exports.readU8,5:l.exports.readU8,2:l.exports.readU8,3:l.exports.readU8,6:l.exports.readU16,7:l.exports.readU16,8:f=>l.exports.read32(f)>>>0,9:f=>l.exports.read32(f)>>>0,10:f=>BigInt.asUintN(64,l.exports.read64(f)),22:f=>BigInt.asUintN(64,l.exports.read64(f)),11:l.exports.read8,12:l.exports.read8,13:l.exports.read16,14:l.exports.read16,15:l.exports.read32,16:l.exports.read32,17:l.exports.read64,21:l.exports.read64,18:l.exports.readf32,19:l.exports.readf64,20:f=>l.exports.read32(f)>>>0}),(0,s.$)({4:l.exports.write8,5:l.exports.write8,2:l.exports.write8,3:l.exports.write8,6:l.exports.write16,7:l.exports.write16,8:l.exports.write32,9:l.exports.write32,10:l.exports.write64,22:l.exports.write64,11:l.exports.write8,12:l.exports.write8,13:l.exports.write16,14:l.exports.write16,15:l.exports.write32,16:l.exports.write32,17:l.exports.write64,21:l.exports.write64,18:l.exports.writef32,19:l.exports.writef64,20:l.exports.write32})}catch{i.R8("memory asm not support, cannot use asm memory function",c,96)}}},26429:(g,p,t)=>{t.d(p,{Gx:()=>l,YN:()=>c,ZI:()=>r,_7:()=>s,dP:()=>d,pw:()=>a});var e,i=t(95797),n=t(10576);const s=!!i.A.thread&&n.TK.CHEAP_DISABLE_THREAD!==!0;let r=16,a=1048576;const d=1024,c=(e=n.TK.CHEAP_HEAP_INITIAL)!==null&&e!==void 0?e:265,l=32768},73281:(g,p,t)=>{t.d(p,{A:()=>C});var e=t(59135),i=t(63939),n=t(50932);let s;const r=(0,e.A)();function a(F,H){s().setUint8(F,H)}function d(F){return s().getUint8(F)}function c(F,H){s().setUint16(F,H,r)}function l(F){return s().getUint16(F,r)}function h(F,H){s().setUint32(F,H,r)}function o(F){return s().getUint32(F,r)}function u(F,H){s().setBigUint64(F,H,r)}function f(F){return s().getBigUint64(F,r)}function v(F,H){s().setInt8(F,H)}function y(F){return s().getInt8(F)}function A(F,H){s().setInt16(F,H,r)}function w(F){return s().getInt16(F,r)}function k(F,H){s().setInt32(F,H,r)}function T(F){return s().getInt32(F,r)}function P(F,H){s().setBigInt64(F,H,r)}function b(F){return s().getBigInt64(F,r)}function x(F,H){s().setFloat32(F,H,r)}function I(F){return s().getFloat32(F,r)}function S(F,H){s().setFloat64(F,H,r)}function z(F){return s().getFloat64(F,r)}function V(F){return s().getUint32(F,r)}function L(F,H){return s().setUint32(F,H,r)}function C(F,H){s=H,(0,i.$)({4:d,5:d,2:d,3:d,6:l,7:l,8:o,9:o,10:f,11:y,12:y,13:w,14:w,15:T,16:T,17:b,18:I,19:z,20:V,23:M=>!!y(M),24:M=>!!y(M)}),(0,n.$)({4:a,5:a,2:a,3:a,6:c,7:c,8:h,9:h,10:u,11:v,12:v,13:A,14:A,15:k,16:k,17:P,18:x,19:S,20:L,23:(M,G)=>{v(M,G?1:0)},24:(M,G)=>{v(M,G?1:0)}})}},63939:(g,p,t)=>{t.d(p,{$:()=>n,f:()=>i});var e=t(95335);const i={4:function(s){throw new Error("unimplemented")},5:function(s){throw new Error("unimplemented")},2:function(s){throw new Error("unimplemented")},3:function(s){throw new Error("unimplemented")},6:function(s){throw new Error("unimplemented")},7:function(s){throw new Error("unimplemented")},8:function(s){throw new Error("unimplemented")},9:function(s){throw new Error("unimplemented")},10:function(s){throw new Error("unimplemented")},11:function(s){throw new Error("unimplemented")},12:function(s){throw new Error("unimplemented")},13:function(s){throw new Error("unimplemented")},14:function(s){throw new Error("unimplemented")},15:function(s){throw new Error("unimplemented")},16:function(s){throw new Error("unimplemented")},17:function(s){throw new Error("unimplemented")},18:function(s){throw new Error("unimplemented")},19:function(s){throw new Error("unimplemented")},20:function(s){throw new Error("unimplemented")},0:function(s){throw new Error("invalid operate")},1:function(s){throw new Error("invalid operate")},22:function(s){throw new Error("invalid operate")},21:function(s){throw new Error("invalid operate")},23:function(s){throw new Error("invalid operate")},24:function(s){throw new Error("invalid operate")}};function n(s){e.X$(i,s)}},50932:(g,p,t)=>{t.d(p,{$:()=>n,M:()=>i});var e=t(95335);const i={4:function(s,r){throw new Error("unimplemented")},5:function(s,r){throw new Error("unimplemented")},2:function(s,r){throw new Error("unimplemented")},3:function(s,r){throw new Error("unimplemented")},6:function(s,r){throw new Error("unimplemented")},7:function(s,r){throw new Error("unimplemented")},8:function(s,r){throw new Error("unimplemented")},9:function(s,r){throw new Error("unimplemented")},10:function(s,r){throw new Error("unimplemented")},11:function(s,r){throw new Error("unimplemented")},12:function(s,r){throw new Error("unimplemented")},13:function(s,r){throw new Error("unimplemented")},14:function(s,r){throw new Error("unimplemented")},15:function(s,r){throw new Error("unimplemented")},16:function(s,r){throw new Error("unimplemented")},17:function(s,r){throw new Error("unimplemented")},18:function(s,r){throw new Error("unimplemented")},19:function(s,r){throw new Error("unimplemented")},20:function(s,r){throw new Error("unimplemented")},0:function(s,r){throw new Error("invalid operate")},1:function(s,r){throw new Error("invalid operate")},22:function(s,r){throw new Error("invalid operate")},21:function(s,r){throw new Error("invalid operate")},23:function(s,r){throw new Error("invalid operate")},24:function(s,r){throw new Error("invalid operate")}};function n(s){e.X$(i,s)}},25323:(g,p,t)=>{t.d(p,{X:()=>F,l:()=>C});var e=t(66681),i=t.n(e),n=t(11919),s=t.n(n),r=t(75019),a=t.n(r),d=t(99921),c=t(63939),l=t(50932),h=t(61499),o=t(6704),u=t(67672),f=t(95335),v=t(62100),y=t(72739);function A(H,M,G,D){i()(H,M,{get:G,set:D,configurable:!0,enumerable:!0})}function w(H){return function(){return c.f[20](H())}}function k(H,M,G,D){return function(){return H[`__$__${M}`]||(H[`__$__${M}`]=C(G(),D))}}function T(H,M){return function(){return c.f[M](H())}}function P(H,M,G,D){const W=8*o.i[M]-D-G,X=Math.pow(2,G)-1;return function(){return c.f[M](H())>>>W&X}}function b(H){return function(M){l.M[8](H(),M)}}function x(H,M,G,D){const W=`__$__${M}`;return function(X){const U=H[W]||(H[W]=C(G(),D));f.__(X,(Q,N)=>{U[N]=Q}),H[W]=U}}function I(H,M){return function(G){l.M[M](H(),G)}}function S(H,M,G,D){let W=0,X=8*o.i[M];for(let N=0;N<G;N++)W|=1<<X-1-(N+D);const U=Math.pow(2,G)-1,Q=X-D-G;return function(N){const _=H(),O=c.f[M](_);l.M[M](_,O&~W|(N&U)<<Q)}}function z(H,M,G){return function(){const D=M[`__$__${G}`];return D[h.o9]=H(),D}}function V(H,M,G,D,W){const X=`__$__${M}`;return function(U){let Q=H[X]||function(N,_,O){const R={};let j=(0,d.A)(O);for(let B=0;B<_;B++){const Y=(0,v.A)(B);A(R,Y,k(R,Y,()=>N()+j*B,O),x(R,Y,()=>N()+j*B,O))}return R}(G,D,W);Q[h.o9]=G(),y.__(U,(N,_)=>{Q[_]=N}),H[X]=Q}}function L(H,M,G,D,W){const X=`__$__${M}`;return function(U){let Q=H[X]||function(N,_,O){const R={};let j=(0,d.A)(O);for(let B=0;B<_;B++)A(R,(0,v.A)(B),T(()=>N()+j*B,O),I(()=>N()+j*B,O));return R}(G,D,W);Q[h.o9]=G(),y.__(U,(N,_)=>{Q[_]=N}),H[X]=Q}}function C(H,M){let G=u.Pc(M)?M.prototype:M;const D={};for(D[h.o9]=H,s()(D,G);;){let W=G[h.JY];if(W&&W.forEach((X,U)=>{X[3]?X[1]?A(D,U,z(()=>D[h.o9]+X[7],D,U),L(D,U,()=>D[h.o9]+X[7],X[4],20)):u.Pc(X[0])||u.Ik(X[0])?A(D,U,z(()=>D[h.o9]+X[7],D,U),V(D,U,()=>D[h.o9]+X[7],X[4],X[0])):A(D,U,z(()=>D[h.o9]+X[7],D,U),L(D,U,()=>D[h.o9]+X[7],X[4],X[0])):X[1]?A(D,U,w(()=>D[h.o9]+X[7]),b(()=>D[h.o9]+X[7])):u.Pc(X[0])||u.Ik(X[0])?A(D,U,k(D,U,()=>D[h.o9]+X[7],X[0]),x(D,U,()=>D[h.o9]+X[7],X[0])):X[5]?A(D,U,P(()=>D[h.o9]+X[7],X[0],X[6],X[8]),S(()=>D[h.o9]+X[7],X[0],X[6],X[8])):A(D,U,T(()=>D[h.o9]+X[7],X[0]),I(()=>D[h.o9]+X[7],X[0]))}),G=a()(G),!G)break}return D}function F(H){let M=a()(H);for(;;){let G=M[h.JY];if(G&&G.forEach((D,W)=>{delete H[W]}),M=a()(M),!M)break}}},12085:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(66681),i=t.n(e);function n(s,r,a){i()(s,r,{value:a,writable:!1,enumerable:!1,configurable:!1})}},11473:(g,p,t)=>{t.d(p,{GE:()=>y,KZ:()=>W,Tg:()=>N,XI:()=>k,ce:()=>P,eq:()=>G,hZ:()=>D,pv:()=>Q,s_:()=>T,wE:()=>A});var e=t(39638),i=t(95007),n=t(94321),s=t(10576),r=t(26429),a=t(7417),d=t(33856),c=t(98564),l=t(82854),h=t(73281),o=t(54568),u=t(86834);let f=-1,v="",y=null,A=null,w=0,k=null,T=null,P=null,b=null,x=null,I=null,S=null,z=null,V=null,L=null,C=null,F=null,H={5:z,3:z,7:V,9:L,22:C,12:b,14:x,16:I,21:S};function M(){return!(!P||P.buffer===z.buffer)}function G(){return M()&&U(P.buffer),z}function D(){return M()&&U(P.buffer),V}function W(){return M()&&U(P.buffer),F}function X(_){return M()&&U(P.buffer),H[_]}function U(_){b=new Int8Array(_),x=new Int16Array(_),I=new Int32Array(_),S=new BigInt64Array(_),z=new Uint8Array(_),V=new Uint16Array(_),L=new Uint32Array(_),C=new BigUint64Array(_),F=new DataView(_),H={5:z,3:z,7:V,9:L,22:C,12:b,14:x,16:I,21:S}}function Q(){return Atomics.add(L,a.h>>>2,1)}async function N(_){var O;(0,h.A)(()=>T,W),(0,d.A)(X),P=_.memory;var R;R=new i.A({buffer:P.buffer,memory:P,byteOffset:r.dP,growAllowed:!0,onResize:(j,B)=>(P.grow(B-j.byteLength>>>16),{buffer:P.buffer,byteOffset:r.dP})},!1),T&&T.removeUpdateHandle(U),T=R,s.TK.CHeap&&(s.TK.CHeap.Allocator=T),T.addUpdateHandle(U),U(T.getBuffer()),_.stackPointer&&(w=_.stackSize,A=_.stackPointer,y=new WebAssembly.Global({value:"i32",mutable:!0},A+w),k=new n.z),f=typeof _.id=="number"?_.id:Atomics.add(L,a.h>>>2,1),v=(O=_.name)!==null&&O!==void 0?O:"anonymous",s.TK.CHeap={initThread:N,Allocator:T,Table:k,ThreadId:f,ThreadName:v,Memory:P,StackSize:w,StackTop:A,StackPointer:y,isMainThread:!1},_.disableAsm||(typeof BigInt=="function"&&BigInt!==Number&&(u.A.chrome&&u.A.checkVersion(u.A.majorVersion,"85",!0)||u.A.firefox&&u.A.checkVersion(u.A.majorVersion,"78",!0)||u.A.safari&&u.A.checkVersion(u.A.majorVersion,"15",!0)||u.A.newEdge)&&await(0,c.Ay)(P),r._7&&(u.A.chrome&&u.A.checkVersion(u.A.majorVersion,"85",!0)||u.A.firefox&&u.A.checkVersion(u.A.majorVersion,"78",!0)||u.A.safari&&u.A.checkVersion(u.A.majorVersion,"15",!0)||u.A.newEdge)&&await(0,l.Ay)(P))}(0,e.A)()||(0,o.A)()?s.TK.CHeap={initThread:N,isMainThread:!1}:function(){var _,O,R,j,B,Y,Z,rt;if((0,h.A)(()=>T,W),(0,d.A)(X),P=(_=s.TK.CHeap)!==null&&_!==void 0&&_.Memory?s.TK.CHeap.Memory:new WebAssembly.Memory({initial:r.YN,maximum:r.Gx,shared:r._7}),T=(O=s.TK.CHeap)!==null&&O!==void 0&&O.Allocator?s.TK.CHeap.Allocator:new i.A({buffer:P.buffer,memory:P,byteOffset:r.dP,growAllowed:!0,onResize:(ot,ft)=>(P.grow(ft-ot.byteLength>>>16),{buffer:P.buffer,byteOffset:r.dP})}),T.addUpdateHandle(U),U(T.getBuffer()),w=(R=s.TK.CHeap)!==null&&R!==void 0&&R.StackSize?s.TK.CHeap.StackSize:r.pw,A=(j=s.TK.CHeap)!==null&&j!==void 0&&j.StackTop?s.TK.CHeap.StackTop:T.malloc(w),y=(B=s.TK.CHeap)!==null&&B!==void 0&&B.StackPointer?s.TK.CHeap.StackPointer:new WebAssembly.Global({value:"i32",mutable:!0},A+w),k=(Y=s.TK.CHeap)!==null&&Y!==void 0&&Y.Table?s.TK.CHeap.Table:new n.z,f=(Z=s.TK.CHeap)!==null&&Z!==void 0&&Z.ThreadId?s.TK.CHeap.ThreadId:0,v=(rt=s.TK.CHeap)!==null&&rt!==void 0&&rt.ThreadName?s.TK.CHeap.ThreadName:"main",!s.TK.CHeap)if(r._7)Atomics.store(L,a.h>>>2,f+1),Atomics.store(I,a.I>>>2,0);else{L[a.h>>>2]=f+1;let ot=a.I>>>2;I[ot]=0}typeof BigInt=="function"&&BigInt!==Number&&(u.A.chrome&&u.A.checkVersion(u.A.majorVersion,"85",!0)||u.A.firefox&&u.A.checkVersion(u.A.majorVersion,"78",!0)||u.A.safari&&u.A.checkVersion(u.A.majorVersion,"15",!0)||u.A.newEdge)&&(0,c.Ay)(P),r._7&&(u.A.chrome&&u.A.checkVersion(u.A.majorVersion,"85",!0)||u.A.firefox&&u.A.checkVersion(u.A.majorVersion,"78",!0)||u.A.safari&&u.A.checkVersion(u.A.majorVersion,"15",!0)||u.A.newEdge)&&(0,l.Ay)(P),s.TK.CHeap||(s.TK.CHeap={Allocator:T,Table:k,ThreadId:f,ThreadName:v,Memory:P,StackSize:w,StackTop:A,StackPointer:y,isMainThread:!0,threadCounter:a.h,heapMutex:a.I})}()},80098:(g,p,t)=>{t.d(p,{I_:()=>A,SQ:()=>w});var e=t(75019),i=t.n(e),n=t(11919),s=t.n(n),r=t(99921),a=t(63939),d=t(50932),c=t(61499),l=t(6704),h=t(67672),o=t(95335),u=t(72739),f=t(2148);const v=i()({});function y(k,T){for(;;){let P=k[c.JY];if(P){const b=P.get(T);if(b)return b}if(!(k=i()(k))||k===v)return null}}function A(k,T){const P=h.Pc(T)?T.prototype:T,b={};b[c.o9]=k,s()(b,P);const{proxy:x,revoke:I}=Proxy.revocable(b,{get(S,z,V){if(h.Yj(z)){const L=y(P,z.replace(/^\$+/,""));if(L){const C=S[c.o9]+L[7];if(L[3]){const F=S[z];return F[c.o9]=C,F}if(L[1])return a.f[20](C);if(h.Pc(L[0])||h.Ik(L[0]))return S[z]||(S[z]=A(C,L[0]));{let F=a.f[L[0]](C);return L[5]&&(F=F>>>8*l.i[L[0]]-L[8]-L[6]&Math.pow(2,L[6])-1),F}}return S[z]}return S[z]},set(S,z,V,L){if(h.Yj(z)){const C=y(P,z.replace(/^\$+/,""));if(C){const F=S[c.o9]+C[7];if(C[3]){const H=S[z]||function(M,G,D,W){const X={};X[c.o9]=M;let U=(0,r.A)(W?20:D);return new Proxy(X,{get(Q,N,_){if(N===c.o9)return Q[c.o9];const O=(0,f.A)(N);return W?a.f[20](Q[c.o9]+O*U):h.Pc(D)?Q[N]:a.f[D](Q[c.o9]+O*U)},set(Q,N,_,O){if(N===c.o9)return Q[c.o9]=_,!0;const R=(0,f.A)(N);if(W)d.M[20](Q[c.o9]+R*U,_),Q[N]=_;else if(h.Pc(D)){const j=Q[N]||(Q[N]=A(Q[c.o9]+R*U,D));o.__(_,(B,Y)=>{j[Y]=B}),Q[N]=j}else d.M[D](Q[c.o9]+R*U,_),Q[N]=_;return!0}})}(F,C[4],C[0],C[1]);u.__(V,(M,G)=>{H[G]=M}),S[z]=H}else if(C[1])d.M[20](F,V),S[z]=V;else if(h.Pc(C[0])||h.Ik(C[0])){const H=S[z]||(S[z]=A(F,C[0]));o.__(V,(M,G)=>{H[G]=M}),S[z]=H}else{if(C[5]){let H=0,M=8*l.i[C[0]];for(let D=0;D<C[6];D++)H|=1<<M-1-(D+C[8]);const G=a.f[C[0]](F);d.M[C[0]](F,G&~H|(V&Math.pow(2,C[6])-1)<<M-C[8]-C[6])}else d.M[C[0]](F,V);S[z]=V}}else S[z]=V}else S[z]=V;return!0}});return b[c.kE]=I,x}function w(k){const T=k[c.kE];T&&T()}},52699:(g,p,t)=>{t.d(p,{t:()=>n,z:()=>i});var e=t(11473);function i(s){return e.GE.value-=s,e.GE.value}function n(s){e.GE.value+=s}},7417:(g,p,t)=>{t.d(p,{I:()=>d,h:()=>a});var e,i,n=t(10576);let s=1;function r(c,l=1){let h=s;for(;h%l;)h+=1;return s=h+c,h}const a=(e=n.TK.CHeap)!==null&&e!==void 0&&e.threadCounter?n.TK.CHeap.threadCounter:r(4,4),d=(i=n.TK.CHeap)!==null&&i!==void 0&&i.heapMutex?n.TK.CHeap.heapMutex:r(4,4)},79630:(g,p,t)=>{t.d(p,{A:()=>d});var e=t(134),i=t(63939),n=t(50932),s=t(11473),r=t(61403);class a{constructor(l,h){(0,e.A)(this,"pointer",void 0),(0,e.A)(this,"len",void 0),this.pointer=l,this.len=h}get byteLength(){return this.len}get buffer(){return(0,s.eq)().buffer}get byteOffset(){return this.pointer}getFloat32(l,h){return(0,s.KZ)().getFloat32(this.pointer+l,h)}getFloat64(l,h){return(0,s.KZ)().getFloat64(this.pointer+l,h)}getInt8(l){return(0,s.KZ)().getInt8(this.pointer+l)}getInt16(l,h){return(0,s.KZ)().getInt16(this.pointer+l,h)}getInt32(l,h){return(0,s.KZ)().getInt32(this.pointer+l,h)}getUint8(l){return(0,s.KZ)().getUint8(this.pointer+l)}getUint16(l,h){return(0,s.KZ)().getUint16(this.pointer+l,h)}getUint32(l,h){return(0,s.KZ)().getUint32(this.pointer+l,h)}setFloat32(l,h,o){(0,s.KZ)().setFloat32(this.pointer+l,h,o)}setFloat64(l,h,o){(0,s.KZ)().setFloat64(this.pointer+l,h,o)}setInt8(l,h){(0,s.KZ)().setInt8(this.pointer+l,h)}setInt16(l,h,o){(0,s.KZ)().setInt16(this.pointer+l,h,o)}setInt32(l,h,o){(0,s.KZ)().setInt32(this.pointer+l,h,o)}setUint8(l,h){(0,s.KZ)().setUint8(this.pointer+l,h)}setUint16(l,h,o){(0,s.KZ)().setUint16(this.pointer+l,h,o)}setUint32(l,h,o){(0,s.KZ)().setUint32(this.pointer+l,h,o)}getBigInt64(l,h){return(0,s.KZ)().getBigInt64(this.pointer+l,h)}getBigUint64(l,h){return(0,s.KZ)().getBigUint64(this.pointer+l,h)}setBigInt64(l,h,o){(0,s.KZ)().setBigInt64(this.pointer+l,h,o)}setBigUint64(l,h,o){(0,s.KZ)().setBigUint64(this.pointer+l,h,o)}}class d extends r.A{constructor(l,h){return super(),(0,e.A)(this,"pointer",void 0),(0,e.A)(this,"len",void 0),this.pointer=l,this.len=h,this.proxy}getIndexValue(l){return i.f[2](this.pointer+l)}setIndexValue(l,h){n.M[2](this.pointer+l,h)}set(l,h=0){(0,s.eq)().set(l,this.pointer+h)}subarray(l=0,h,o){return o?new d(this.pointer+l,(h||this.len)-l):(0,s.eq)().subarray(this.pointer+l,this.pointer+(h??this.len))}slice(l=0,h){return(0,s.eq)().slice(this.pointer+l,this.pointer+(h??this.len))}get length(){return this.len}get byteLength(){return this.len}get buffer(){return(0,s.eq)().buffer}get byteOffset(){return this.pointer}get view(){return new a(this.pointer,this.len)}}},12264:(g,p,t)=>{t.d(p,{A:()=>A});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085),c=t(11473),l=t(63939),h=t(50932),o=t(99921),u=t(14686),f=t(67672),v=t(29170);class y{constructor(){(0,n.A)(this,"prev",void 0),(0,n.A)(this,"next",void 0),(0,n.A)(this,"data",void 0)}}e=y.prototype,(i=new(r())).set("prev",{0:y,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("next",{0:y,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("data",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,4),(0,d.A)(e,a.g7,12),(0,d.A)(e,a.JY,i);class A{constructor(){(0,n.A)(this,"length",0),(0,n.A)(this,"head",0),(0,n.A)(this,"tail",0)}createNode(k,T,P=!1){const b=c.s_.malloc(12);if(h.M[20](b+4,0),h.M[20](b,0),f.ai(T))if(T===20)h.M[20](b+8,k);else{const x=c.s_.malloc((0,o.A)(T));h.M[T](x,k),h.M[20](b+8,x)}else if(P)h.M[20](b+8,k);else{const x=c.s_.malloc((0,o.A)(T));(0,u.Mr)(x,k[a.o9],(0,o.A)(T)),h.M[20](b+8,x)}return b}getItem(k,T){let P;return P=f.ai(T)?T===20?k:l.f[T](k):(0,v.A)(k,T),P}push(k,T,P=!1){const b=this.createNode(k,T,P);this.tail?(h.M[20](this.tail+4,b),h.M[20](b,this.tail),this.tail=b):(this.head=b,this.tail=b),this.length++}pop(k){const T=this.tail;let P=this.getItem(l.f[20](T+8),k);return this.length>1?(h.M[20](l.f[20](T)+4,0),this.tail=l.f[20](T)):(this.head=0,this.tail=0),this.length--,c.s_.free(l.f[20](T+8)),c.s_.free(T),P}shift(k){const T=this.head;let P=this.getItem(l.f[20](T+8),k);return this.length>1?(h.M[20](l.f[20](T+4),0),this.head=l.f[20](T+4)):(this.head=0,this.tail=0),this.length--,c.s_.free(l.f[20](T+8)),c.s_.free(T),P}unshift(k,T,P=!1){const b=this.createNode(k,T,P);this.head?(h.M[20](this.head,b),h.M[20](b+4,this.head),this.head=b):(this.head=b,this.tail=b),this.length++}forEach(k,T){if(!this.length)return;let P=this.head,b=0;for(;P!==0&&k(this.getItem(l.f[20](P+8),T),b)!==!1;)P=l.f[20](P+4),b++}find(k,T){if(!this.length)return 0;let P=this.head,b=0;for(;P!==0;){const x=this.getItem(l.f[20](P+8),T);if(k(x,b)===!0)return x;P=l.f[20](P+4),b++}return 0}indexOf(k,T){if(!this.length)return 0;let P=this.head,b=0;for(;P!==0;){if(b===k)return this.getItem(l.f[20](P+8),T);P=l.f[20](P+4),b++}return 0}clear(k,T){if(this.length){let P=this.head;for(;P!==0;){k&&k(this.getItem(l.f[20](P+8),T)),c.s_.free(l.f[20](P+8));const b=l.f[20](P+4);c.s_.free(P),P=b}}this.head=0,this.tail=0,this.length=0}}(function(w){var k=new(r());k.set("length",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),k.set("head",{0:y,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),k.set("tail",{0:y,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),(0,d.A)(w,a.Og,!0),(0,d.A)(w,a.dc,4),(0,d.A)(w,a.g7,12),(0,d.A)(w,a.JY,k)})(A.prototype)},74503:(g,p,t)=>{t.d(p,{A:()=>d});var e=t(99921),i=t(11473),n=t(14686),s=t(95335),r=t(34677),a=t(29170);function d(c,l){const h=(0,e.A)(c),o=i.s_.malloc(h);if(!o)throw new TypeError("cannot alloc memory for struct");(0,n.sO)(o,0,h);const u=(0,a.A)(o,c),f=new c;return l&&s.X$(f,l),s.__(f,(v,y)=>{(0,r.A)(v)&&(u[y]=v)}),u}},14686:(g,p,t)=>{t.d(p,{JW:()=>d,Mr:()=>s,bg:()=>l,lW:()=>r,s3:()=>c,sO:()=>a});var e=t(11473),i=t(79630),n=t(26429);function s(h,o,u){(0,e.eq)().set((0,e.eq)().subarray(o,o+u),h)}function r(h,o,u){(0,e.eq)().set(u.subarray(0,o),h)}function a(h,o,u){(0,e.eq)().subarray(h,h+u).fill(o)}function d(h,o){return n._7?c(h,o):new i.A(h,o)}function c(h,o){return(0,e.eq)().subarray(h,h+o)}function l(h,o){return(0,e.hZ)().subarray(h>>>1,h+2*o)}},99921:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(61499),i=t(67672),n=t(6704);function s(r){return i.ai(r)?n.i[r]||0:i.Pc(r)&&r.prototype[e.Og]?r.prototype[e.g7]:0}},29170:(g,p,t)=>{t.d(p,{A:()=>d});var e=t(61499),i=t(80098),n=t(25323),s=t(95797),r=t(67672),a=t(10534);function d(c,l){return arguments[2]&&r.Yj(arguments[2])&&(l=l.prototype,a.__(arguments[2],h=>{l=l[e.JY].get(h)[0]})),s.A.proxy?(0,i.I_)(c,l):(0,n.l)(c,l)}},94300:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(11473),i=t(61499),n=t(80098),s=t(25323),r=t(95797);function a(d){const c=d[i.o9];c&&(e.s_.free(c),d[i.o9]=0,r.A.proxy?(0,n.SQ)(d):(0,s.X)(d))}},61499:(g,p,t)=>{t.d(p,{JY:()=>d,Og:()=>n,dc:()=>r,g7:()=>s,kE:()=>c,o9:()=>a});var e=t(75062),i=t.n(e);const n=i()("Struct"),s=i()("StructLength"),r=i()("StructMaxBaseTypeByteLength"),a=i()("StructAddress"),d=(i()("StructKeysQueue"),i()("StructKeysMeta")),c=(i()("StructKeysInstance"),i()("StructProxyRevoke"))},82854:(g,p,t)=>{t.d(p,{Ay:()=>h,KJ:()=>c,Ko:()=>l});var e=t(4919),i=t(4624),n=t(88096),s=t(49583),r=t.n(s),a=t(40046),d="src\\cheap\\thread\\asm\\atomics.ts";let c;function l(){return!!c}async function h(o){try{if(!(typeof SharedArrayBuffer=="function"&&o.buffer instanceof SharedArrayBuffer))return;{const u=(0,e.E_)(r());n.DD(u,!0),c=(await WebAssembly.instantiate(u,{env:{memory:o}})).instance}(0,a.$Z)({add:function(u,f,v){switch(v){case 5:case 3:return 255&c.exports.add8(u,f);case 12:return c.exports.add8(u,f);case 14:return c.exports.add16(u,f);case 7:return 65535&c.exports.add16(u,f);case 16:return c.exports.add32(u,f);case 9:return 4294967295&c.exports.add32(u,f);case 21:return c.exports.add64(u,f);case 22:return BigInt.asUintN(64,c.exports.add64(u,f))}},sub:function(u,f,v){switch(v){case 5:case 3:return 255&c.exports.sub8(u,f);case 12:return c.exports.sub8(u,f);case 14:return c.exports.sub16(u,f);case 7:return 65535&c.exports.sub16(u,f);case 16:return c.exports.sub32(u,f);case 9:return 4294967295&c.exports.sub32(u,f);case 21:return c.exports.sub64(u,f);case 22:return BigInt.asUintN(64,c.exports.sub64(u,f))}},and:function(u,f,v){switch(v){case 5:case 3:return 255&c.exports.and8(u,f);case 12:return c.exports.and8(u,f);case 14:return c.exports.and16(u,f);case 7:return 65535&c.exports.and16(u,f);case 16:return c.exports.and32(u,f);case 9:return 4294967295&c.exports.and32(u,f);case 21:return c.exports.and64(u,f);case 22:return BigInt.asUintN(64,c.exports.and64(u,f))}},or:function(u,f,v){switch(v){case 5:case 3:return 255&c.exports.or8(u,f);case 12:return c.exports.or8(u,f);case 14:return c.exports.or16(u,f);case 7:return 65535&c.exports.or16(u,f);case 16:case 9:return c.exports.or32(u,f);case 21:return c.exports.or64(u,f);case 22:return BigInt.asUintN(64,c.exports.or64(u,f))}},xor:function(u,f,v){switch(v){case 5:case 3:return 255&c.exports.xor8(u,f);case 12:return c.exports.xor8(u,f);case 14:return c.exports.xor16(u,f);case 7:return 65535&c.exports.xor16(u,f);case 16:case 9:return c.exports.xor32(u,f);case 21:return c.exports.xor64(u,f);case 22:return BigInt.asUintN(64,c.exports.xor64(u,f))}},store:function(u,f,v){switch(v){case 5:case 12:case 3:return c.exports.store8(u,f);case 14:case 7:return c.exports.store16(u,f);case 16:case 9:return c.exports.store32(u,f);case 21:case 22:return c.exports.store64(u,f)}},load:function(u,f){switch(f){case 5:case 3:return 255&c.exports.load8(u);case 12:return c.exports.load8(u);case 14:case 7:return c.exports.load16(u);case 16:return c.exports.load32(u);case 9:return 4294967295&c.exports.load32(u);case 21:return c.exports.load64(u);case 22:return BigInt.asUintN(64,c.exports.load64(u))}},compareExchange:function(u,f,v,y){switch(y){case 5:case 3:return 255&c.exports.compare_exchange8(u,f,v);case 12:return c.exports.compare_exchange8(u,f,v);case 14:return c.exports.compare_exchange16(u,f,v);case 7:return 65535&c.exports.compare_exchange16(u,f,v);case 16:return c.exports.compare_exchange32(u,f,v);case 9:return 4294967295&c.exports.compare_exchange32(u,f,v);case 21:return c.exports.compare_exchange64(u,f,v);case 22:return BigInt.asUintN(64,c.exports.compare_exchange64(u,f,v))}},exchange:function(u,f,v){switch(v){case 5:case 3:return 255&c.exports.exchange8(u,f);case 12:return c.exports.exchange8(u,f);case 14:return c.exports.exchange16(u,f);case 7:return 65535&c.exports.exchange16(u,f);case 16:return c.exports.exchange32(u,f);case 9:return 4294967295&c.exports.exchange32(u,f);case 21:return c.exports.exchange64(u,f);case 22:return BigInt.asUintN(64,c.exports.exchange64(u,f))}},notify:function(u,f){return c.exports.notify(u,f)},wait:function(u,f){return c.exports.wait(u,f)},waitTimeout:function(u,f,v){return c.exports.waitTimeout(u,f,BigInt(v>>>0))}})}catch{i.R8("atomics asm not support, cannot use asm atomics function",d,284)}}},40046:(g,p,t)=>{let e,i,n,s,r,a,d,c,l,h,o,u;function f(v){v.add&&(e=v.add),v.sub&&(i=v.sub),v.and&&(n=v.and),v.or&&(s=v.or),v.xor&&(r=v.xor),v.store&&(a=v.store),v.load&&(d=v.load),v.compareExchange&&(c=v.compareExchange),v.exchange&&(l=v.exchange),v.notify&&(h=v.notify),v.wait&&(o=v.wait),v.waitTimeout&&(u=v.waitTimeout),v.waitAsync&&v.waitAsync,v.waitTimeoutAsync&&v.waitTimeoutAsync}t.d(p,{$Z:()=>f,Hh:()=>d,I8:()=>r,M_:()=>a,Uo:()=>n,WQ:()=>e,cv:()=>l,j4:()=>u,jb:()=>i,me:()=>h,or:()=>s,p_:()=>c,uk:()=>o})},33856:(g,p,t)=>{t.d(p,{A:()=>V});var e=t(54001),i=t.n(e),n=t(86932),s=t(7972),r=t(40046),a=t(26429),d=t(39638),c=t(86834);let l;const h=a._7||(0,d.A)()||!c.A.chrome||c.A.checkVersion(c.A.majorVersion,"94",!0);function o(L,C,F,H){if(h)return Atomics.add(l(F),L>>>H,C);{const M=l(F),G=L>>>H,D=M[G];return M[G]+=C,D}}function u(L,C,F,H){if(h)return Atomics.sub(l(F),L>>>H,C);{const M=l(F),G=L>>>H,D=M[G];return M[G]-=C,D}}function f(L,C,F,H){if(h)return Atomics.and(l(F),L>>>H,C);{const M=l(F),G=L>>>H,D=M[G];return M[G]&=C,D}}function v(L,C,F,H){if(h)return Atomics.or(l(F),L>>>H,C);{const M=l(F),G=L>>>H,D=M[G];return M[G]|=C,D}}function y(L,C,F,H){if(h)return Atomics.xor(l(F),L>>>H,C);{const M=l(F),G=L>>>H,D=M[G];return M[G]^=C,D}}function A(L,C,F,H){if(h)return Atomics.store(l(F),L>>>H,C);{const M=l(F),G=L>>>H,D=M[G];return M[G]=C,D}}function w(L,C,F){return h?Atomics.load(l(C),L>>>F):l(C)[L>>>F]}function k(L,C,F,H,M){if(h)return Atomics.compareExchange(l(H),L>>>M,C,F);{const G=l(H),D=L>>>M,W=G[D];return W===C&&(G[D]=F),W}}function T(L,C,F,H){if(h)return Atomics.exchange(l(F),L>>>H,C);{const M=l(F),G=L>>>H,D=M[G];return M[G]=C,D}}function P(L,C){return h?Atomics.notify(l(16),L>>>2,C):void 0}const b={ok:0,"not-equal":1,"timed-out":2};function x(L,C){return b[Atomics.wait(l(16),L>>>2,C)]}function I(L,C,F){return b[Atomics.wait(l(16),L>>>2,C,F)]}async function S(L,C){if(Atomics.waitAsync){const F=Atomics.waitAsync(l(16),L>>>2,C);return F.async?b[await F.value]:b[F.value]}if(w(L)!==C)return 1;for(;w(L)===C;)await new(i())(F=>{(0,s.A)(()=>{F()})});return 0}async function z(L,C,F){if(Atomics.waitAsync){const H=Atomics.waitAsync(l(16),L>>>2,C,F);return H.async?b[await H.value]:b[H.value]}if(w(L)!==C)return 1;{const H=(0,n.A)();for(;w(L)===C&&(0,n.A)()-H<F;)await new(i())(M=>{(0,s.A)(()=>{M()})});return w(L)!==C?0:2}}function V(L){l=L,(0,r.$Z)({add:o,sub:u,and:f,or:v,xor:y,store:A,load:w,compareExchange:k,exchange:T,notify:P,wait:x,waitTimeout:I,waitAsync:S,waitTimeoutAsync:z})}},42518:(g,p,t)=>{t.d(p,{Ts:()=>h,XR:()=>y,mq:()=>f,uk:()=>v,vP:()=>u,zr:()=>o});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085),c=t(73783),l=t(40046);function h(A,w){return l.M_(A,0,16,2),0}function o(A){return l.M_(A,0,16,2),0}function u(A){return l.WQ(A,1,16,2),l.me(A,1),0}function f(A){return l.WQ(A,1,16,2),l.me(A,1073741824),0}function v(A,w){let k=l.Hh(A,16,2);return c.Tl(w),l.uk(A,k),c.s2(w),0}function y(A,w,k){let T=l.Hh(A,16,2);c.Tl(w);let P=l.j4(A,T,k);return c.s2(w),P===2?110:0}e=(class{constructor(){(0,n.A)(this,"atomic",void 0)}}).prototype,(i=new(r())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,4),(0,d.A)(e,a.g7,4),(0,d.A)(e,a.JY,i)},81574:(g,p,t)=>{t.r(p),t.d(p,{default:()=>r});var e=t(84149),i=t(10576),n=t(67672);let s=i.TK;function r(a){let d,c;s.onmessage=l=>{const h=l.data,o=h.type,u=h.data;switch(o){case"init":if(i.TK.CHeap&&i.TK.CHeap.initThread)return void i.TK.CHeap.initThread(u).then(()=>{s.postMessage({type:"ready"})});s.postMessage({type:"ready"});break;case"run":s.postMessage({type:"running"}),c=a(u.params),f=u.port,d=new e.Ay(f),d.on(e.S3,async v=>{const y=v.method,A=v.params;if(n.Pc(c[y]))try{const w=[],k=await c[y](...A.params,w);d.reply(v,k,null,w)}catch(w){d.reply(v,-2097152,{message:w.message})}});break;case"stop":d&&d.destroy(),s.postMessage({type:"stopped"})}var f}}},26848:(g,p,t)=>{t.r(p),t.d(p,{default:()=>n});var e=t(10576);let i=e.TK;function n(s){let r;i.onmessage=a=>{const d=a.data,c=d.type,l=d.data;switch(c){case"init":if(e.TK.CHeap&&e.TK.CHeap.initThread)return void e.TK.CHeap.initThread(l).then(()=>{i.postMessage({type:"ready"})});i.postMessage({type:"ready"});break;case"run":r=s(l.params);break;case"stop":r&&r.then?r.then(h=>{i.postMessage({type:"stopped",data:h})}):i.postMessage({type:"stopped",data:r})}}}},67524:(g,p,t)=>{t.r(p),t.d(p,{default:()=>r});var e=t(84149),i=t(10576),n=t(67672);let s=i.TK;function r(a){let d;s.onmessage=c=>{const l=c.data,h=l.type,o=l.data;switch(h){case"init":if(i.TK.CHeap&&i.TK.CHeap.initThread)return void i.TK.CHeap.initThread(o).then(()=>{s.postMessage({type:"ready"})});s.postMessage({type:"ready"});break;case"run":s.postMessage({type:"running"}),u=o.port,d=new e.Ay(u),d.on(e.S3,async f=>{const v=f.method,y=f.params;if(n.Pc(a[v]))try{const A=[],w=await a[v](...y.params,A);d.reply(f,w,null,A)}catch(A){d.reply(f,-2097152,{message:A.message})}});break;case"stop":d&&d.destroy(),s.postMessage({type:"stopped"})}var u}}},73783:(g,p,t)=>{t.d(p,{Tl:()=>f,Ts:()=>o,eu:()=>h,s2:()=>u,zr:()=>v});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085),c=t(40046),l=t(39638);class h{constructor(){(0,n.A)(this,"atomic",void 0)}}function o(y){return c.M_(y,0,16,2),0}function u(y,A=!1){let w;if((w=c.p_(y,0,1,16,2))!==0)do w!=2&&c.p_(y,1,2,16,2)===0||!A&&(0,l.A)()&&c.uk(y,2);while((w=c.p_(y,0,2,16,2))!==0);return 0}function f(y){return c.jb(y,1,16,2)!==1&&(c.M_(y,0,16,2),c.me(y,1)),0}function v(y){return c.M_(y,0,16,2),0}e=h.prototype,(i=new(r())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,4),(0,d.A)(e,a.g7,4),(0,d.A)(e,a.JY,i)},79490:(g,p,t)=>{t.d(p,{Ts:()=>u,XR:()=>w,Zr:()=>A,bE:()=>v,uk:()=>y,zr:()=>f});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085),c=t(73783),l=t(63939),h=t(50932),o=t(40046);function u(k,T){return o.M_(k,0|T,16,2),c.Ts(k+4),0}function f(k){return c.zr(k+4),0}function v(k){return o.WQ(k,1,16,2),o.me(k,1),0}function y(k){for(;o.uk(k,0),o.jb(k,1,16,2)<=0;)o.WQ(k,1,16,2);return 0}function A(k){return c.s2(k+4),l.f[16](k)>0?(h.M[16](k,l.f[16](k)-1),c.Tl(k+4),0):(c.Tl(k+4),11)}function w(k,T){return o.j4(k,0,T)!==2&&o.jb(k,1,16,2)<=0?(o.WQ(k,1,16,2),110):0}e=(class{constructor(){(0,n.A)(this,"atomic",void 0),(0,n.A)(this,"mutex",void 0)}}).prototype,(i=new(r())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("mutex",{0:c.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,4),(0,d.A)(e,a.g7,8),(0,d.A)(e,a.JY,i)},88506:(g,p,t)=>{t.d(p,{nE:()=>b,pt:()=>P});var e=t(75062),i=t.n(e),n=t(80662),s=t.n(n),r=t(54001),a=t.n(r),d=t(11473),c=t(84149),l=t(61837),h=t(26429),o=t(67672),u=t(10576),f=t(62100);let v=u.TK.Worker,y=u.TK.MessageChannel;t(81574),t(26848),t(67524);const A=(0,l.A)(81574,{varName:"init"}),w=((0,l.A)(26848,{varName:"init"}),(0,l.A)(67524,{varName:"init"}),i()("revoke")),k=new(s());function T(x,I){return`${x}_${I}`}function P(x,I={},S){let z,V=[];function L(...C){const F=new x(...C);return new(a())(H=>{const M={$worker:null,$ipc:null,$channel:null,$moduleId:(0,f.A)(S),$stackPointer:0,$instance:F,$type:"class"},{proxy:G,revoke:D}=Proxy.revocable(M,{get(W,X,U){if(W[X])return M[X];if(X in x.prototype&&typeof x.prototype[X]=="function"){const Q=function(...N){return F[X](...N)};Q.transfer=function(...N){return{invoke:function(..._){return F[X](..._)}}},W[X]=Q}return W[X]}});M[w]=D,H(G)})}return z=(...C)=>{let F;if(S instanceof v)F=S;else{let M;const G=T(S,"class");if(k.has(G))M=k.get(G).url,k.get(G).refCount++;else{const D=`
            ${(0,l.A)(S,{varName:`__module_${x.name}__`,exportName:`__${x.name}__`,pointName:x.name,exportIsClass:!0})}
            function run(params) {
              params.unshift(null)
              return new (Function.prototype.bind.apply(__module_${x.name}__.__${x.name}__, params))()
            }
            ${A}
            init.default(run);
          `;{const W=new Blob([D],{type:"text/javascript"});M=URL.createObjectURL(W)}k.set(G,{url:M,refCount:1})}F=new v(M)}const H=new y;return new(a())((M,G)=>{var D;const W=d.s_.alignedAlloc(h.ZI,I.stackSize?I.stackSize+h.ZI&~h.ZI:h.pw),X=U=>{const Q=U.data,N=Q.type;switch(Q.data,N){case"ready":F.postMessage({type:"run",data:{port:H.port2,params:C}},[H.port2,...V]);break;case"running":(function(){const _=new c.Ay(H.port1),O={$worker:F,$ipc:_,$channel:H,$moduleId:(0,f.A)(S),$stackPointer:W,$type:"class"},{proxy:R,revoke:j}=Proxy.revocable(O,{get(B,Y,Z){if(B[Y])return O[Y];if(Y in x.prototype&&typeof x.prototype[Y]=="function"){const rt=async function(...ot){return _.request(Y,{params:ot})};rt.transfer=function(...ot){return{invoke:async function(...ft){return _.request(Y,{params:ft},ot)}}},B[Y]=rt}return B[Y]}});O[w]=j,M(R)})()}};F.onmessage=X,F.onmessage=X,F.postMessage({type:"init",data:{memory:d.ce,name:I.name||x.name,stackPointer:W,stackSize:(D=I.stackSize)!==null&&D!==void 0?D:h.pw}})})},{run:h._7&&!I.disableWorker?z:L,transfer:function(...C){return V=C,{run:h._7&&!I.disableWorker?z:L}}}}function b(x){if(x.$worker&&(x.$worker.terminate(),x.$worker=null),x.$moduleId){if(o.Yj(x.$moduleId)){const I=T(x.$moduleId,x.$type);k.has(I)&&(k.get(I).refCount--,k.get(I).refCount===0&&(URL.revokeObjectURL(k.get(I).url),k.delete(I)))}x.$moduleId=null}if(x.$ipc&&(x.$ipc.destroy(),x.$ipc=null),x.$stackPointer&&(d.s_.free(x.$stackPointer),x.$stackPointer=0),x.$channel=null,x.$instance=null,x[w]){const I=x[w];x[w]=null,I()}}},6704:(g,p,t)=>{t.d(p,{_:()=>i,i:()=>e});const e={2:1,3:1,4:1,5:1,6:2,7:2,8:4,9:4,10:8,11:1,12:1,13:2,14:2,15:4,16:4,17:8,18:4,19:8,20:4,0:4,1:4,22:8,21:8,23:1,24:1},i={2:0,3:0,4:0,5:0,6:1,7:1,8:2,9:2,10:4,11:0,12:0,13:1,14:1,15:2,16:2,17:4,18:2,19:4,20:2,1:2,0:2,22:4,21:4,23:0,24:0}},16030:(g,p,t)=>{t.d(p,{A:()=>G});var e=t(134),i=t(80662),n=t.n(i),s=t(54001),r=t.n(s),a=t(61499),d=t(12085),c=t(11473),l=t(50932),h=t(63939),o=t(95335),u=t(72739),f=t(4624),v=t(67672),y=t(14686),A=t(14621),w=t(1708),k=t(20357),T=t(77775),P=t(61837),b=t(26429),x=t(40046),I=t(82854),S=t(24565),z=t(39638),V="src\\cheap\\webassembly\\WebAssemblyRunner.ts";t(81999);const L=(0,P.A)(81999,{varName:"init"});function C(){}let F=!1;var H,M;H=(class{constructor(){(0,e.A)(this,"flags",void 0)}}).prototype,(M=new(n())).set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,d.A)(H,a.Og,!0),(0,d.A)(H,a.dc,4),(0,d.A)(H,a.g7,4),(0,d.A)(H,a.JY,M);class G{static getTable(){return c.XI}constructor(W,X={}){var U;if((0,e.A)(this,"resource",void 0),(0,e.A)(this,"instance",void 0),(0,e.A)(this,"options",void 0),(0,e.A)(this,"builtinMalloc",void 0),(0,e.A)(this,"memoryBase",void 0),(0,e.A)(this,"tableBase",void 0),(0,e.A)(this,"childImports",void 0),(0,e.A)(this,"childUrl",void 0),(0,e.A)(this,"childBlob",void 0),(0,e.A)(this,"childThreads",void 0),(0,e.A)(this,"imports",void 0),(0,e.A)(this,"childReadyPromises",void 0),this.resource=W,this.builtinMalloc=[],this.childThreads=new(n()),this.childReadyPromises=[],v.Yj(X.childImports)?this.childImports=X.childImports:v.Ik(X.childImports)&&X.childImports instanceof Blob&&(this.childImports=URL.createObjectURL(X.childImports)),this.memoryBase=W.dataSize?c.s_.malloc(W.dataSize):0,X.thread&&X.tableBase&&c.XI.getPointer()!==X.tableBase&&c.XI.alloc(X.tableBase-c.XI.getPointer()),this.tableBase=W.tableSize?c.XI.alloc(W.tableSize):0,this.options=X,this.imports={env:{memory:c.ce,__stack_pointer:c.GE,__indirect_function_table:c.XI.table,clock_time_get:A.WU,clock_res_get:A.Lq,random_get:A.Pp,abort:A.h2,proc_exit:function(Q){f.z3(`wasm module exit, code: ${Q}`,V,133)},environ_get:C,environ_sizes_get:C,fd_close:C,fd_fdstat_get:A.LS,fd_read:C,fd_seek:C,fd_write:A.nK,emscripten_builtin_malloc:Q=>{const N=c.s_.malloc(Q);return this.builtinMalloc.push(N),N},emscripten_builtin_free:Q=>{c.s_.free(Q)},emscripten_builtin_memalign:(Q,N,_)=>{const O=c.s_.alignedAlloc(N,_);return O!==0?(l.M[20](Q,O),this.builtinMalloc.push(O),0):-1},emscripten_memcpy_big:function(Q,N,_){(0,y.Mr)(Q,N,_)},__libc_malloc:function(Q){return c.s_.malloc(Q)},malloc:function(Q){return c.s_.malloc(Q)},calloc:function(Q,N){return c.s_.calloc(Q,N)},realloc:function(Q,N){return c.s_.realloc(Q,N)},aligned_alloc:(Q,N)=>c.s_.alignedAlloc(Q,N),free:function(Q){c.s_.free(Q)},posix_memalign:function(Q,N,_){const O=c.s_.alignedAlloc(N,_);return O!==0?(l.M[20](Q,O),0):-1}}},o.X$(this.imports.env,{wasm_pthread_create:(Q,N,_,O)=>{if(!this.childUrl){const Z=`
              ${(0,P.A)(16030,{varName:"__WebAssemblyRunner__",exportName:"__WebAssemblyRunner__",pointName:G.name,exportIsClass:!0})}
              ${L}
              var preRun;
              ${this.childImports?`
              preRun = import('${this.childImports}')
              `:""}
              init.default(preRun);
            `;this.childBlob=new Blob([Z],{type:"text/javascript"}),this.childUrl=URL.createObjectURL(this.childBlob)}const R=new Worker(this.childUrl);l.M[15](Q,(0,c.pv)()),l.M[16](Q+12,1),l.M[15](Q+8,0),l.M[20](Q+4,0);const j=c.s_.alignedAlloc(b.ZI,b.pw),B=c.s_.malloc(4);let Y;return(0,y.sO)(B,0,4),this.childThreads.set(h.f[15](Q),{thread:Q,worker:R,stackPointer:j,threadDescriptor:B}),this.childReadyPromises.push(new(r())(Z=>{Y=Z})),R.onmessage=Z=>{const rt=Z.data,ot=rt.type;rt.data,ot==="run"&&Y()},R.postMessage({type:"run",data:{cheap:{memory:c.ce,stackPointer:j,stackSize:b.pw,id:h.f[15](Q)},runner:{resource:{tableSize:this.resource.tableSize,module:this.resource.threadModule.module,initFuncs:this.resource.threadModule.initFuncs},options:{memoryBase:this.options.memoryBase||this.memoryBase,tableBase:this.tableBase,thread:Q,threadDescriptor:B,childImports:this.childImports},func:_,args:O,imports:this.childImports,thread:Q}}}),0},wasm_pthread_join2:(Q,N)=>{if(1&h.f[15](Q+8))return this.childThreads.delete(h.f[15](Q)),0;x.uk(Q+12,1),N!==0&&l.M[20](N,h.f[20](Q+4));const _=this.childThreads.get(h.f[15](Q));return c.s_.free(_.stackPointer),c.s_.free(_.threadDescriptor),_.worker.terminate(),this.childThreads.delete(h.f[15](Q)),0},wasm_pthread_detach2:Q=>{const N=this.childThreads.get(h.f[15](Q));l.M[15](N.threadDescriptor,1|h.f[15](N.threadDescriptor)),l.M[15](Q+8,1|h.f[15](Q+8))}}),o.X$(this.imports.env,w),o.X$(this.imports.env,k),o.X$(this.imports.env,T),this.memoryBase?o.X$(this.imports.env,{__memory_base:this.memoryBase}):X.memoryBase&&o.X$(this.imports.env,{__memory_base:X.memoryBase}),this.tableBase&&o.X$(this.imports.env,{__table_base:this.tableBase}),(U=X.imports)!==null&&U!==void 0&&U.env&&(o.X$(this.imports.env,X.imports.env),X.envKey&&X.importMap)){const Q={};o.__(this.imports.env,(N,_)=>{X.importMap[_]&&(Q[X.importMap[_]]=N)}),this.imports[X.envKey]=Q}this.imports.wasi_snapshot_preview1=this.imports.env}overrideAtomic(){w.override({atomic_add_i8:I.KJ.exports.add8,atomic_sub_i8:I.KJ.exports.sub8,atomic_and_i8:I.KJ.exports.and8,atomic_or_i8:I.KJ.exports.or8,atomic_xor_i8:I.KJ.exports.xor8,atomic_store_i8:I.KJ.exports.store8,atomic_load_i8:I.KJ.exports.load8,atomic_compare_exchange_i8:I.KJ.exports.compare_exchange8,atomic_exchange_i8:I.KJ.exports.exchange8,atomic_add_i16:I.KJ.exports.add16,atomic_sub_i16:I.KJ.exports.sub16,atomic_and_i16:I.KJ.exports.and16,atomic_or_i16:I.KJ.exports.or16,atomic_xor_i16:I.KJ.exports.xor16,atomic_store_i16:I.KJ.exports.store16,atomic_load_i16:I.KJ.exports.load16,atomic_compare_exchange_i16:I.KJ.exports.compare_exchange16,atomic_exchange_i16:I.KJ.exports.exchange16,atomic_add_i32:I.KJ.exports.add32,atomic_sub_i32:I.KJ.exports.sub32,atomic_and_i32:I.KJ.exports.and32,atomic_or_i32:I.KJ.exports.or32,atomic_xor_i32:I.KJ.exports.xor32,atomic_store_i32:I.KJ.exports.store32,atomic_load_i32:I.KJ.exports.load32,atomic_compare_exchange_i32:I.KJ.exports.compare_exchange32,atomic_exchange_i32:I.KJ.exports.exchange32,atomic_add_i64:I.KJ.exports.add64,atomic_sub_i64:I.KJ.exports.sub64,atomic_and_i64:I.KJ.exports.and64,atomic_or_i64:I.KJ.exports.or64,atomic_xor_i64:I.KJ.exports.xor64,atomic_store_i64:I.KJ.exports.store64,atomic_load_i64:I.KJ.exports.load64,atomic_compare_exchange_i64:I.KJ.exports.compare_exchange64,atomic_exchange_i64:I.KJ.exports.exchange64,atomics_notify:I.KJ.exports.notify,atomics_wait:I.KJ.exports.wait}),o.X$(this.imports.env,w)}async run(W){v.Ik(W)&&o.X$(this.options.imports,W),(0,z.A)()&&!S.LK&&S.Ko()&&this.resource.threadModule&&(await S.Ts(c.ce,k.override),o.X$(this.imports.env,k)),!F&&I.Ko()&&(F=!0,this.overrideAtomic()),this.instance=await WebAssembly.instantiate(this.resource.module,this.imports),this.initRunTime()}async runAsChild(W){v.Ik(W)&&o.X$(this.options.imports,W),!S.LK&&S.Ko()&&(await S.Ts(c.ce,k.override),o.X$(this.imports.env,k)),!F&&I.Ko()&&(F=!0,this.overrideAtomic()),this.instance=new WebAssembly.Instance(this.resource.module,this.imports),this.initRunTime()}async childrenThreadReady(){if(!this.childReadyPromises.length)return;const W=this.childReadyPromises;this.childReadyPromises=[],await r().all(W)}initRunTime(){this.builtinMalloc=[],v.YO(this.resource.initFuncs)&&u.__(this.resource.initFuncs,W=>{this.call(W)})}call(W,...X){if(!this.asm)return-1;let U;if(this.asm[W]?U=this.asm[W]:this.options.exportMap&&this.options.exportMap[W]&&this.asm[this.options.exportMap[W]]&&(U=this.asm[this.options.exportMap[W]]),U)return U.apply(null,X);f.z3(`the wasm module has not function ${W} to call`,V,489)}get asm(){return this.instance&&this.instance.exports}getInstance(){return this.instance}destroy(){var W;(W=this.builtinMalloc)!==null&&W!==void 0&&W.length&&(u.__(this.builtinMalloc,X=>{c.s_.free(X)}),this.builtinMalloc.length=0),this.memoryBase&&(c.s_.free(this.memoryBase),this.memoryBase=null),this.tableBase&&(c.XI.free(this.tableBase),this.tableBase=null),this.childImports&&(URL.revokeObjectURL(this.childImports),this.childImports=null),this.childUrl&&(URL.revokeObjectURL(this.childUrl),this.childUrl=null),this.childBlob=null,this.childReadyPromises.length=0,this.childThreads.size&&this.childThreads.forEach((X,U)=>{1&h.f[15](X.threadDescriptor)||(f.R8("has child thread running, maybe resource leakage",V,534),X.worker.terminate(),l.M[16](X.thread+12,0),X.stackPointer&&c.s_.free(X.stackPointer),c.s_.free(X.threadDescriptor),this.childThreads.delete(U))}),this.builtinMalloc=null,this.instance=null,this.options.thread&&(this.options.threadDescriptor&&1&h.f[15](this.options.threadDescriptor)?(c.wE&&c.s_.free(c.wE),c.s_.free(this.options.threadDescriptor),self.close()):(l.M[16](this.options.thread+12,0),x.me(this.options.thread+12,1)))}}},76045:(g,p,t)=>{t.d(p,{A:()=>h});var e=t(54001),i=t.n(e),n=t(67672),s=t(24175),r=t(34531),a=t(88096),d=t(92647),c=t(95335),l=t(26429);async function h(o,u={}){let f,v,y,A;if(u=c.X$({enableThread:l._7,initFuncs:u.child?[]:["__wasm_apply_data_relocs"]},u),n.ai(o.dataSize)&&n.ai(o.tableSize))if(v=o.dataSize,y=o.dataSize,n.Yj(o.source)){const w={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};n.Pc(WebAssembly.compileStreaming)?f=await WebAssembly.compileStreaming(fetch(o.source,w)):(A=await(await fetch(o.source,w)).arrayBuffer(),f=await WebAssembly.compile(A))}else f=await WebAssembly.compile(o.source),A=n.sv(o.source)?o.source:o.source.buffer;else{const w={ioReader:new s.A(1048576),ioWriter:new r.A(1048576),bufferEnded:!1,compileStopped:!1,error:"",abortController:null,pullResolve:null,bufferResolve:null,buffers:[],data:{},options:u},k=new Response(new ReadableStream({async start(T){if(n.Yj(o.source)){var P;AbortController&&(w.abortController=new AbortController);const b={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade",signal:(P=w.abortController)===null||P===void 0?void 0:P.signal},x=await fetch(o.source,b);let I;x.ok&&x.status>=200&&x.status<=299?I=x.body.getReader():T.error(`Http code invalid, ${x.status} ${x.statusText}`);const S=[];w.ioReader.onFlush=async z=>{let V=0;for(;S.length&&V<z.length;){const F=S.shift();F.length>z.length-V?(z.set(F.subarray(0,z.length-V),V),S.unshift(F.subarray(z.length-V)),V=z.length):(z.set(F,V),V+=F.length)}if(V>=z.length)return z.length;const{value:L,done:C}=await I.read();return C?V>0?V:-1048576:(w.buffers.push(L),L.length>z.length-V?(z.set(L.subarray(0,z.length-V),V),S.push(L.subarray(z.length-V)),z.length):(z.set(L,V),V+=L.length,V))}}else{let b=0,x=o.source.byteLength;const I=n.sv(o.source)?new Uint8Array(o.source):o.source;w.ioReader.onFlush=async S=>{if(b>=x)return-1048576;const z=Math.min(S.length,x-b);return S.set(I.subarray(b,b+z),0),b+=z,z}}w.ioWriter.onFlush=async b=>w.pullResolve?(w.pullResolve(b.slice()),w.pullResolve=null,0):((await new(i())((x,I)=>{w.bufferResolve=x})).enqueue(b.slice()),0),async function(b){try{for(await b.ioWriter.writeUint32(await b.ioReader.readUint32()),await b.ioWriter.writeUint32(await b.ioReader.readUint32());;){if(b.compileStopped){b.abortController&&b.abortController.abort();break}const x=await b.ioReader.readUint8();if(b.options.child&&x===11){await b.ioWriter.writeUint8(x),await(0,a.$z)(b.ioWriter,7),await(0,a.$z)(b.ioWriter,1),await(0,a.$z)(b.ioWriter,0),await b.ioWriter.writeUint8(65),await b.ioWriter.writeUint8(0),await b.ioWriter.writeUint8(11),await(0,a.$z)(b.ioWriter,1),await b.ioWriter.writeUint8(0);const z=await(0,a.GG)(b.ioReader);await b.ioReader.skip(z);continue}await b.ioWriter.writeUint8(x);const I=await(0,a.GG)(b.ioReader);await(0,a.$z)(b.ioWriter,I);const S=b.ioReader.getPos();if(x===11){const z=await(0,a.GG)(b.ioReader);if(await(0,a.$z)(b.ioWriter,z),z){for(await(0,a.$z)(b.ioWriter,await(0,a.GG)(b.ioReader));;){const V=await b.ioReader.readUint8();if(await b.ioWriter.writeUint8(V),V===11)break}b.data.dataSize=await(0,a.GG)(b.ioReader),await(0,a.$z)(b.ioWriter,b.data.dataSize)}}else if(x===2){let z=await(0,a.GG)(b.ioReader);await(0,a.$z)(b.ioWriter,z);let V=0;for(;z--;){const L=await(0,a.GG)(b.ioReader);await(0,a.$z)(b.ioWriter,L),await b.ioWriter.writeBuffer(await b.ioReader.readBuffer(L));const C=await(0,a.GG)(b.ioReader);await(0,a.$z)(b.ioWriter,C),await b.ioWriter.writeBuffer(await b.ioReader.readBuffer(C));const F=await b.ioReader.readUint8();switch(await b.ioWriter.writeUint8(F),F){case 0:await(0,a.$z)(b.ioWriter,await(0,a.GG)(b.ioReader));break;case 3:await(0,a.p7)(b.ioWriter,await(0,a.Ee)(b.ioReader)),await(0,a.$z)(b.ioWriter,await(0,a.GG)(b.ioReader));break;case 2:{let H=await(0,a.GG)(b.ioReader);b.options.enableThread?H|=2:H&=-3,await(0,a.$z)(b.ioWriter,H),await(0,a.$z)(b.ioWriter,await(0,a.GG)(b.ioReader)),1&H&&await(0,a.$z)(b.ioWriter,await(0,a.GG)(b.ioReader)),V++;break}case 1:{await(0,a.p7)(b.ioWriter,await(0,a.Ee)(b.ioReader));const H=await(0,a.GG)(b.ioReader);await(0,a.$z)(b.ioWriter,H);const M=await(0,a.GG)(b.ioReader);await(0,a.$z)(b.ioWriter,M),b.data.tableSize=M,1&H&&await(0,a.$z)(b.ioWriter,await(0,a.GG)(b.ioReader)),V++;break}}if(V===2)break}}I-Number(b.ioReader.getPos()-S)&&await b.ioReader.pipe(b.ioWriter,I-Number(b.ioReader.getPos()-S))}}catch(x){b.ioReader.error===-1048576?b.bufferEnded=!0:b.error=x,b.ioReader.remainingLength()&&await b.ioWriter.writeBuffer(await b.ioReader.readBuffer(b.ioReader.remainingLength())),await b.ioWriter.flush()}}(w)},async pull(T){if(w.error)T.close();else{if(w.bufferResolve)return w.bufferResolve(T),void(w.bufferResolve=null);T.enqueue(await new(i())((P,b)=>{w.pullResolve=P})),w.bufferEnded?T.close():w.error&&T.error(w.error)}},cancel(T){w.compileStopped=!0}}),{headers:{"Content-Type":"application/wasm"}});f=n.Pc(WebAssembly.compileStreaming)?await WebAssembly.compileStreaming(k):await WebAssembly.compile(await k.arrayBuffer()),A=n.Yj(o.source)?(0,d.A)(Uint8Array,w.buffers).buffer:n.sv(o.source)?o.source:o.source.buffer,v=w.data.tableSize,y=w.data.dataSize}return u.child?{module:f,initFuncs:u.initFuncs||[]}:{module:f,tableSize:v,dataSize:y,initFuncs:u.initFuncs||[],buffer:A}}},81999:(g,p,t)=>{t.r(p),t.d(p,{default:()=>n});var e=t(10576);e.TK.imports={env:{}};let i=e.TK;function n(s){i.onmessage=r=>{const a=r.data,d=a.type,c=a.data;let l;d==="run"&&(i.postMessage({type:"run"}),e.TK.CHeap&&e.TK.CHeap.initThread&&e.TK.CHeap.initThread(c.cheap).then(()=>{function h(){e.TK.__SELF_THREAD__=c.runner.thread,c.runner.options.imports=e.TK.imports,l=new __WebAssemblyRunner__.__WebAssemblyRunner__(c.runner.resource,c.runner.options),l.runAsChild().then(()=>{__WebAssemblyRunner__.__WebAssemblyRunner__.getTable().get(c.runner.func)(c.runner.args),l.destroy()})}s?s.then(()=>{h()}):h()}))}}},24565:(g,p,t)=>{t.d(p,{Ko:()=>l,LK:()=>d,Ts:()=>h});var e=t(4919),i=t(4624),n=t(5454),s=t.n(n),r=t(88096),a="src\\cheap\\webassembly\\runtime\\asm\\thread.ts";let d,c=!0;function l(){return c}async function h(o,u){try{if(!(typeof SharedArrayBuffer=="function"&&o.buffer instanceof SharedArrayBuffer))return void(c=!1);{const f=(0,e.E_)(s());r.DD(f,!0),d=(await WebAssembly.instantiate(f,{env:{memory:o}})).instance}u({wasm_pthread_mutex_lock:d.exports.lock,wasm_pthread_mutex_unlock:d.exports.unlock,wasm_pthread_cond_wait:d.exports.wait,wasm_pthread_cond_timedwait:d.exports.timedwait,wasm_pthread_cond_signal:d.exports.signal,wasm_pthread_cond_broadcast:d.exports.broadcast})}catch{c=!1,i.R8("thread asm not support, cannot use asm thread function",a,65)}}},1708:(g,p,t)=>{t.r(p),t.d(p,{atomic_add_i16:()=>u,atomic_add_i32:()=>b,atomic_add_i64:()=>H,atomic_add_i8:()=>n,atomic_and_i16:()=>v,atomic_and_i32:()=>I,atomic_and_i64:()=>G,atomic_and_i8:()=>r,atomic_compare_exchange_i16:()=>T,atomic_compare_exchange_i32:()=>C,atomic_compare_exchange_i64:()=>Q,atomic_compare_exchange_i8:()=>h,atomic_exchange_i16:()=>P,atomic_exchange_i32:()=>F,atomic_exchange_i64:()=>N,atomic_exchange_i8:()=>o,atomic_load_i16:()=>k,atomic_load_i32:()=>L,atomic_load_i64:()=>U,atomic_load_i8:()=>l,atomic_or_i16:()=>y,atomic_or_i32:()=>S,atomic_or_i64:()=>D,atomic_or_i8:()=>a,atomic_store_i16:()=>w,atomic_store_i32:()=>V,atomic_store_i64:()=>X,atomic_store_i8:()=>c,atomic_sub_i16:()=>f,atomic_sub_i32:()=>x,atomic_sub_i64:()=>M,atomic_sub_i8:()=>s,atomic_xor_i16:()=>A,atomic_xor_i32:()=>z,atomic_xor_i64:()=>W,atomic_xor_i8:()=>d,atomics_notify:()=>_,atomics_wait:()=>O,atomics_wait_timeout:()=>R,override:()=>j});var e=t(40046),i=t(6704);let n=function(B,Y){return e.WQ(B,Y,12,i._[12])},s=function(B,Y){return e.jb(B,Y,12,i._[12])},r=function(B,Y){return e.Uo(B,Y,12,i._[12])},a=function(B,Y){return e.or(B,Y,12,i._[12])},d=function(B,Y){return e.I8(B,Y,12,i._[12])},c=function(B,Y){return e.M_(B,Y,12,i._[12])},l=function(B){return e.Hh(B,12,i._[12])},h=function(B,Y,Z){return e.p_(B,Y,Z,12,i._[12])},o=function(B,Y){return e.cv(B,Y,12,i._[12])},u=function(B,Y){return e.WQ(B,Y,14,i._[14])},f=function(B,Y){return e.jb(B,Y,14,i._[14])},v=function(B,Y){return e.Uo(B,Y,14,i._[14])},y=function(B,Y){return e.or(B,Y,14,i._[14])},A=function(B,Y){return e.I8(B,Y,14,i._[14])},w=function(B,Y){return e.M_(B,Y,14,i._[14])},k=function(B){return e.Hh(B,14,i._[14])},T=function(B,Y,Z){return e.p_(B,Y,Z,14,i._[14])},P=function(B,Y){return e.cv(B,Y,14,i._[14])},b=function(B,Y){return e.WQ(B,Y,16,i._[16])},x=function(B,Y){return e.jb(B,Y,16,i._[16])},I=function(B,Y){return e.Uo(B,Y,16,i._[16])},S=function(B,Y){return e.or(B,Y,16,i._[16])},z=function(B,Y){return e.I8(B,Y,16,i._[16])},V=function(B,Y){return e.M_(B,Y,16,i._[16])},L=function(B){return e.Hh(B,16,i._[16])},C=function(B,Y,Z){return e.p_(B,Y,Z,16,i._[16])},F=function(B,Y){return e.cv(B,Y,16,i._[16])},H=function(B,Y){return e.WQ(B,Y,21,i._[21])},M=function(B,Y){return e.jb(B,Y,21,i._[21])},G=function(B,Y){return e.Uo(B,Y,21,i._[21])},D=function(B,Y){return e.or(B,Y,21,i._[21])},W=function(B,Y){return e.I8(B,Y,21,i._[21])},X=function(B,Y){return e.M_(B,Y,21,i._[21])},U=function(B){return e.Hh(B,21,i._[21])},Q=function(B,Y,Z){return e.p_(B,Y,Z,21,i._[21])},N=function(B,Y){return e.cv(B,Y,21,i._[21])},_=function(B,Y){return e.me(B,Y)},O=function(B,Y){return e.uk(B,Y)},R=function(B,Y,Z){return e.j4(B,Y,0|Number(0xffffffffn&Z))};function j(B){B.atomic_add_i8&&(n=B.atomic_add_i8),B.atomic_sub_i8&&(s=B.atomic_sub_i8),B.atomic_and_i8&&(r=B.atomic_and_i8),B.atomic_or_i8&&(a=B.atomic_or_i8),B.atomic_xor_i8&&(d=B.atomic_xor_i8),B.atomic_store_i8&&(c=B.atomic_store_i8),B.atomic_load_i8&&(l=B.atomic_load_i8),B.atomic_compare_exchange_i8&&(h=B.atomic_compare_exchange_i8),B.atomic_exchange_i8&&(o=B.atomic_exchange_i8),B.atomic_add_i16&&(u=B.atomic_add_i16),B.atomic_sub_i16&&(f=B.atomic_sub_i16),B.atomic_and_i16&&(v=B.atomic_and_i16),B.atomic_or_i16&&(y=B.atomic_or_i16),B.atomic_xor_i16&&(A=B.atomic_xor_i16),B.atomic_store_i16&&(w=B.atomic_store_i16),B.atomic_load_i16&&(k=B.atomic_load_i16),B.atomic_compare_exchange_i16&&(T=B.atomic_compare_exchange_i16),B.atomic_exchange_i16&&(P=B.atomic_exchange_i16),B.atomic_add_i32&&(b=B.atomic_add_i32),B.atomic_sub_i32&&(x=B.atomic_sub_i32),B.atomic_and_i32&&(I=B.atomic_and_i32),B.atomic_or_i32&&(S=B.atomic_or_i32),B.atomic_xor_i32&&(z=B.atomic_xor_i32),B.atomic_store_i32&&(V=B.atomic_store_i32),B.atomic_load_i32&&(L=B.atomic_load_i32),B.atomic_compare_exchange_i32&&(C=B.atomic_compare_exchange_i32),B.atomic_exchange_i32&&(F=B.atomic_exchange_i32),B.atomic_add_i64&&(H=B.atomic_add_i64),B.atomic_sub_i64&&(M=B.atomic_sub_i64),B.atomic_and_i64&&(G=B.atomic_and_i64),B.atomic_or_i64&&(D=B.atomic_or_i64),B.atomic_xor_i64&&(W=B.atomic_xor_i64),B.atomic_store_i64&&(X=B.atomic_store_i64),B.atomic_load_i64&&(U=B.atomic_load_i64),B.atomic_compare_exchange_i64&&(Q=B.atomic_compare_exchange_i64),B.atomic_exchange_i64&&(N=B.atomic_exchange_i64),B.atomics_notify&&(_=B.atomics_notify),B.atomics_wait&&(O=B.atomics_wait),B.atomics_wait_timeout&&(R=B.atomics_wait_timeout)}},14621:(g,p,t)=>{t.d(p,{LS:()=>l,Lq:()=>f,Pp:()=>v,WU:()=>u,h2:()=>o,nK:()=>h});var e=t(50932),i=t(63939),n=t(14686),s=t(50011);const r=[null,[],[]],a=0,d=28;function c(y,A){const w=r[y];A===0||A===10?(console.log.bind(console)(s.D(w)),w.length=0):w.push(A)}function l(y,A){let w=0;return y==0?w=2:y!=1&&y!=2||(w=64),e.M[11](A,2),e.M[13](A+2,1),e.M[15](A+8,0|w),e.M[15](A+12,0),e.M[17](A+16,BigInt(0)),a}function h(y,A,w,k){let T=0;for(let P=0;P<w;P++){let b=i.f[8](A),x=i.f[8](A+4);A+=8;for(let I=0;I<x;I++)c(y,i.f[4](b+I));T+=x}return e.M[8](k,(0|T)>>>0),a}function o(y){throw y=`abort(${y+=""}). Build with -s ASSERTIONS=1 for more info.`,new WebAssembly.RuntimeError(y)}function u(y,A,w){if(y!==0)return d;const k=new Date().getTime();return e.M[10](w,BigInt(k)*BigInt(1e6)),a}function f(y,A){return y!==0?d:(e.M[10](A,BigInt(1e6)),a)}function v(y,A){const w=(0,n.s3)(y,A);return crypto.getRandomValues(w),a}},20357:(g,p,t)=>{t.r(p),t.d(p,{Pthread:()=>w,PthreadOnce:()=>A,override:()=>D,wasm_cpu_core_count:()=>G,wasm_pthread_cond_broadcast:()=>L,wasm_pthread_cond_destroy:()=>I,wasm_pthread_cond_init:()=>x,wasm_pthread_cond_signal:()=>V,wasm_pthread_cond_timedwait:()=>z,wasm_pthread_cond_wait:()=>S,wasm_pthread_equal2:()=>H,wasm_pthread_exit:()=>F,wasm_pthread_mutex_destroy:()=>T,wasm_pthread_mutex_init:()=>k,wasm_pthread_mutex_lock:()=>P,wasm_pthread_mutex_unlock:()=>b,wasm_pthread_once:()=>C,wasm_pthread_support:()=>M});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085),c=t(63939),l=t(50932),h=t(73783),o=t(42518),u=t(26429),f=t(11473),v=t(40046),y=t(10576);class A{constructor(){(0,n.A)(this,"atomic",void 0)}}e=A.prototype,(i=new(r())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,4),(0,d.A)(e,a.g7,4),(0,d.A)(e,a.JY,i);class w{constructor(){(0,n.A)(this,"id",void 0),(0,n.A)(this,"retval",void 0),(0,n.A)(this,"flags",void 0),(0,n.A)(this,"status",void 0)}}let k,T,P,b,x,I,S,z,V,L,C;function F(W){const X=y.TK.__SELF_THREAD__;l.M[20](X+4,W)}function H(W,X){return c.f[15](W)===c.f[15](X)?1:0}function M(){return u._7?1:0}function G(){return navigator.hardwareConcurrency}function D(W){W.wasm_pthread_mutex_lock&&(P=W.wasm_pthread_mutex_lock),W.wasm_pthread_mutex_unlock&&(b=W.wasm_pthread_mutex_unlock),W.wasm_pthread_cond_wait&&(S=W.wasm_pthread_cond_wait),W.wasm_pthread_cond_timedwait&&(z=W.wasm_pthread_cond_timedwait),W.wasm_pthread_cond_signal&&(V=W.wasm_pthread_cond_signal),W.wasm_pthread_cond_broadcast&&(L=W.wasm_pthread_cond_broadcast)}(function(W){var X=new(r());X.set("id",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),X.set("retval",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),X.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),X.set("status",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),(0,d.A)(W,a.Og,!0),(0,d.A)(W,a.dc,4),(0,d.A)(W,a.g7,16),(0,d.A)(W,a.JY,X)})(w.prototype),k=function(W,X){return h.Ts(W)},T=function(W){return h.zr(W)},P=function(W){return h.s2(W)},b=function(W){return h.Tl(W)},x=function(W,X){return o.Ts(W,X)},I=function(W){return o.zr(W)},S=function(W,X){return o.uk(W,X)},z=function(W,X,U){let Q=1e3*Number(c.f[17](U))+c.f[15](U+8)/1e6;return o.XR(W,X,Q)},V=function(W){return o.vP(W)},L=function(W){return o.mq(W)},C=function(W,X){return v.WQ(W,1,16,2)===0&&f.XI.get(X)(),0}},77775:(g,p,t)=>{t.r(p),t.d(p,{Timespec:()=>h,wasm_sem_destroy:()=>u,wasm_sem_init:()=>o,wasm_sem_post:()=>A,wasm_sem_timedwait:()=>y,wasm_sem_trywait:()=>v,wasm_sem_wait:()=>f});var e,i,n=t(134),s=t(80662),r=t.n(s),a=t(61499),d=t(12085),c=t(63939),l=t(79490);class h{constructor(){(0,n.A)(this,"tvSec",void 0),(0,n.A)(this,"tvNSec",void 0)}}function o(w,k,T){return l.Ts(w,T)}function u(w){return l.zr(w)}function f(w){return l.uk(w)}function v(w){return l.Zr(w)}function y(w,k){let T=1e3*Number(c.f[17](k))+c.f[15](k+8)/1e6;return l.XR(w,T)}function A(w){return l.bE(w)}e=h.prototype,(i=new(r())).set("tvSec",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("tvNSec",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,d.A)(e,a.Og,!0),(0,d.A)(e,a.dc,8),(0,d.A)(e,a.g7,16),(0,d.A)(e,a.JY,i)},13258:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(134);class i{constructor(s=0){(0,e.A)(this,"rcon",[0,1,2,4,8,16,32,64,128,27,54]),(0,e.A)(this,"subMix",[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)]),(0,e.A)(this,"invSubMix",[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)]),(0,e.A)(this,"sBox",new Uint32Array(256)),(0,e.A)(this,"invSBox",new Uint32Array(256)),(0,e.A)(this,"key",new Uint32Array(0)),(0,e.A)(this,"ksRows",0),(0,e.A)(this,"keySize",0),(0,e.A)(this,"keySchedule",void 0),(0,e.A)(this,"invKeySchedule",void 0),this.initTable()}uint8ArrayToUint32Array_(s){const r=new DataView(s),a=new Uint32Array(4);for(let d=0;d<4;d++)a[d]=r.getUint32(4*d);return a}initTable(){const s=this.sBox,r=this.invSBox,a=this.subMix,d=a[0],c=a[1],l=a[2],h=a[3],o=this.invSubMix,u=o[0],f=o[1],v=o[2],y=o[3],A=new Uint32Array(256);let w=0,k=0,T=0;for(T=0;T<256;T++)A[T]=T<128?T<<1:T<<1^283;for(T=0;T<256;T++){let P=k^k<<1^k<<2^k<<3^k<<4;P=P>>>8^255&P^99,s[w]=P,r[P]=w;const b=A[w],x=A[b],I=A[x];let S=257*A[P]^16843008*P;d[w]=S<<24|S>>>8,c[w]=S<<16|S>>>16,l[w]=S<<8|S>>>24,h[w]=S,S=16843009*I^65537*x^257*b^16843008*w,u[P]=S<<24|S>>>8,f[P]=S<<16|S>>>16,v[P]=S<<8|S>>>24,y[P]=S,w?(w=b^A[A[A[I^b]]],k^=A[A[k]]):w=k=1}}async expandKey(s){const r=this.uint8ArrayToUint32Array_(s);if(this.key){let b=!0,x=0;for(;x<r.length&&b;)b=r[x]===this.key[x],x++;if(b)return}this.key=r;const a=this.keySize=this.key.length;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size="+a);const d=this.ksRows=4*(a+6+1);let c,l;const h=this.keySchedule=new Uint32Array(d),o=this.invKeySchedule=new Uint32Array(d),u=this.sBox,f=this.rcon,v=this.invSubMix,y=v[0],A=v[1],w=v[2],k=v[3];let T,P;for(c=0;c<d;c++)c<a?T=h[c]=r[c]:(P=T,c%a==0?(P=P<<8|P>>>24,P=u[P>>>24]<<24|u[P>>>16&255]<<16|u[P>>>8&255]<<8|u[255&P],P^=f[c/a|0]<<24):a>6&&c%a==4&&(P=u[P>>>24]<<24|u[P>>>16&255]<<16|u[P>>>8&255]<<8|u[255&P]),h[c]=T=(h[c-a]^P)>>>0);for(l=0;l<d;l++)c=d-l,P=3&l?h[c]:h[c-4],o[l]=l<4||c<=4?P:y[u[P>>>24]]^A[u[P>>>16&255]]^w[u[P>>>8&255]]^k[u[255&P]],o[l]=o[l]>>>0}networkToHostOrderSwap(s){return s<<24|(65280&s)<<8|(16711680&s)>>8|s>>>24}async decrypt(s,r){const a=this.keySize+6,d=this.invKeySchedule,c=this.invSBox,l=this.invSubMix,h=l[0],o=l[1],u=l[2],f=l[3],v=this.uint8ArrayToUint32Array_(r);let y=v[0],A=v[1],w=v[2],k=v[3];const T=new Int32Array(s.buffer).subarray(s.byteOffset>>>2,(s.byteOffset>>>2)+(s.length>>>2)),P=new Int32Array(T.length);let b,x,I,S,z,V,L,C,F,H,M,G,D,W;const X=this.networkToHostOrderSwap;let U=0;for(;U<T.length;){for(F=X(T[U]),H=X(T[U+1]),M=X(T[U+2]),G=X(T[U+3]),z=F^d[0],V=G^d[1],L=M^d[2],C=H^d[3],D=4,W=1;W<a;W++)b=h[z>>>24]^o[V>>16&255]^u[L>>8&255]^f[255&C]^d[D],x=h[V>>>24]^o[L>>16&255]^u[C>>8&255]^f[255&z]^d[D+1],I=h[L>>>24]^o[C>>16&255]^u[z>>8&255]^f[255&V]^d[D+2],S=h[C>>>24]^o[z>>16&255]^u[V>>8&255]^f[255&L]^d[D+3],z=b,V=x,L=I,C=S,D+=4;b=c[z>>>24]<<24^c[V>>16&255]<<16^c[L>>8&255]<<8^c[255&C]^d[D],x=c[V>>>24]<<24^c[L>>16&255]<<16^c[C>>8&255]<<8^c[255&z]^d[D+1],I=c[L>>>24]<<24^c[C>>16&255]<<16^c[z>>8&255]<<8^c[255&V]^d[D+2],S=c[C>>>24]<<24^c[z>>16&255]<<16^c[V>>8&255]<<8^c[255&L]^d[D+3],P[U]=X(b^y),P[U+1]=X(S^A),P[U+2]=X(I^w),P[U+3]=X(x^k),y=F,A=H,w=M,k=G,U+=4}return P.buffer}}},51678:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(134);class i{constructor(s=0){(0,e.A)(this,"subtle",void 0),(0,e.A)(this,"key",void 0),(0,e.A)(this,"mode",void 0),(0,e.A)(this,"keyBuffer",void 0),this.mode=s,this.subtle=crypto.subtle||crypto.webkitSubtle}getSubtleAlgoName(){switch(this.mode){case 0:return"AES-CBC";case 1:return"AES-CTR"}}async expandKey(s){let r=new Uint8Array(s);if(this.keyBuffer){let a=!0,d=0;for(;d<r.length&&a;)a=r[d]===this.keyBuffer[d],d++;if(a)return}this.keyBuffer=r,this.key=await this.subtle.importKey("raw",s,{name:this.getSubtleAlgoName()},!1,["encrypt","decrypt"])}async encryptPadding(s,r){return new Uint8Array(await crypto.subtle.encrypt({name:"AES-CBC",iv:r},this.key,s))}async decrypt(s,r){switch(this.mode){case 0:return this.subtle.decrypt({name:"AES-CBC",iv:r},this.key,s);case 1:return this.subtle.decrypt({name:"AES-CTR",counter:r,length:64},this.key,s)}}static isSupport(){return typeof(crypto.subtle||crypto.webkitSubtle)=="object"}}},6331:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(10576);class n{constructor(r,a){(0,e.A)(this,"type",void 0),(0,e.A)(this,"phase",void 0),(0,e.A)(this,"ns",void 0),(0,e.A)(this,"target",void 0),(0,e.A)(this,"originalEvent",void 0),(0,e.A)(this,"isPrevented",void 0),(0,e.A)(this,"isStopped",void 0),(0,e.A)(this,"listener",void 0),this.type=r,this.phase=n.PHASE_CURRENT,a&&(this.originalEvent=a)}preventDefault(){const r=this;if(!r.isPrevented){const{originalEvent:a}=r;a&&a.preventDefault(),r.isPrevented=i.rT}return r}stopPropagation(){const r=this;if(!r.isStopped){const{originalEvent:a}=r;a&&a.stopPropagation(),r.isStopped=i.rT}return r}prevent(){return this.preventDefault()}stop(){return this.stopPropagation()}}(0,e.A)(n,"PHASE_CURRENT",0),(0,e.A)(n,"PHASE_UPWARD",1),(0,e.A)(n,"PHASE_DOWNWARD",i.Cy)},96172:(g,p,t)=>{t.d(p,{A:()=>l});var e=t(134),i=t(67672),n=t(72739),s=t(6331),r=t(95335),a=t(20525),d=t(56401),c=t(10576);class l{constructor(v){(0,e.A)(this,"ns",void 0),(0,e.A)(this,"listeners",void 0),(0,e.A)(this,"nativeListeners",void 0),this.ns=v||c.W8,this.listeners={}}fire(v,y,A){let w=this,k=i.Yj(v)?w.parse(v):v,T=w.listeners[k.type],P=c.rT;if(T){T=r.C(T);const b=y&&y[0]instanceof s.A?y[0]:c.ZH;n.__(T,function(x){if(!u(k.ns,x,c.rT)||!n.zy(T,x)||A&&!A(k,y,x))return;b&&(b.listener=x.fn);let I=(0,d.A)(x.fn,x.ctx,y);return b&&(b.listener=c.ZH),x.num=x.num?x.num+1:1,x.num===x.max&&w.off(k,x.fn),b&&(I===c.W8?b.prevent().stop():b.isStopped&&(I=c.W8)),I===c.W8?P=c.W8:void 0})}return P}on(v,y){const A=this,w=A.listeners,k=i.Pc(y)?{fn:y}:y;if(i.Ik(k)&&i.Pc(k.fn)){const T=i.Yj(v)?A.parse(v):v;k.ns=T.ns,n.VC(w[T.type]||(w[T.type]=[]),k)}return this}one(v,y){return i.Pc(y)?y={fn:y,max:1}:y.max=1,this.on(v,y)}off(v,y){const A=this,w=A.listeners;if(v){const k=i.Yj(v)?A.parse(v):v,T=k.type,P=k.ns,b=o(y),x=function(S,z){n.__(S,function(V,L){b(V)&&S.splice(L,1)},c.rT),S.length||delete w[z]},I=function(S,z){n.__(S,function(V,L){u(P,V)&&S.splice(L,1)},c.rT),S.length||delete w[z]};T?w[T]&&x(w[T],T):P&&r.__(w,I)}else A.listeners={}}has(v,y){let A=this.listeners,w=i.Yj(v)?this.parse(v):v,k=w.type,T=w.ns,P=c.rT,b=o(y);var x;return k?A[k]&&(x=A[k],n.__(x,function(I){if(b(I))return P=c.W8})):T&&r.__(A,function(I){return n.__(I,function(S){if(u(T,S))return P=c.W8}),P}),!P}parse(v){const y={type:v,ns:c.u1};if(this.ns){const A=a.qh(v,c.ZG);A>=0&&(y.type=a.di(v,0,A),y.ns=a.di(v,A+1))}return y}}function h(){return c.rT}function o(f){return i.Pc(f)?function(v){return f===v.fn}:h}function u(f,v,y){const{ns:A}=v;return A&&f?A===f:y?c.rT:c.W8}},84504:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(2148);function i(n,s,r=!1){const a=s.split("."),d=n.split(".");for(let c=0;c<d.length;c++){if(r&&c==d.length-1&&(0,e.A)(d[c])>=(0,e.A)(a[c]))return d.length>=a.length;if((0,e.A)(d[c])>(0,e.A)(a[c]))return!0;if((0,e.A)(d[c])<(0,e.A)(a[c]))return!1;if(c===a.length-1&&c===d.length-1)return r;if(c===a.length-1)return!0;if(c===d.length-1)return!1}return!0}},92647:(g,p,t)=>{function e(i,n){if(!n.length)return null;if(n.length===1)return n[0];let s,r=0;for(s of n)r+=s.length;let a=new i(r),d=0;for(s of n)a.set(s,d),d+=s.length;return a}t.d(p,{A:()=>e})},78995:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(56401),i=t(72739),n=t(10576);function s(r,a,d){let c;return function(){let l=this;if(!c){const h=i.$r(arguments);d&&(0,e.A)(r,l,h),c=setTimeout(function(){c=n.ZH,d||(0,e.A)(r,l,h)},a)}}}},56401:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(67672),i=t(10576);function n(s,r,a){if(e.Pc(s))return e.YO(a)?s.apply(r,a):r!==i.ZH?s.call(r,a):a!==i.ZH?s(a):s()}},8284:(g,p,t)=>{function e(){let i=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let s=(i+16*Math.random())%16|0;return i=Math.floor(i/16),(n=="x"?s:3&s|8).toString(16)})}t.d(p,{A:()=>e})},86932:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(45249),i=t.n(e);function n(){return i()()}},54568:(g,p,t)=>{function e(){return typeof registerProcessor=="function"&&typeof sampleRate=="number"&&typeof currentFrame=="number"&&typeof currentTime=="number"}t.d(p,{A:()=>e})},34677:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(10576);function i(n){return n!==e.ZH}},59135:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(34677);let i;function n(){if((0,e.A)(i))return i;const s=new ArrayBuffer(2);return new DataView(s).setInt16(0,256,!0),i=new Int16Array(s)[0]===256,i}},20491:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(67672),i=t(62100),n=t(20525);function s(r){return e.Pc(r)&&n.zy((0,i.A)(r),"[native code]")}},39638:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(34677),i=t(54568);function n(){return!(typeof window=="object"&&(0,e.A)(window.document)||(0,i.A)())}},7972:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(64236),i=t.n(e),n=t(20491),s=t(10576);let r;typeof i()===s.s0&&(0,n.A)(i())&&(r=i()),r=typeof MessageChannel===s.s0&&(0,n.A)(MessageChannel)?function(d){const c=new MessageChannel;c.port1.onmessage=d,c.port2.postMessage(1)}:typeof setTimeout=="function"?setTimeout:function(d){setTimeout(d)};const a=r},36:(g,p,t)=>{function e(i,n,s){return i<n?i=n:i>s&&(i=s),i}t.d(p,{A:()=>e})},61837:(g,p,t)=>{t.d(p,{A:()=>o});var e=t(69736),i=t.n(e),n=t(73146),s=t.n(n);const r=`
function webpackBootstrapFunc (modules) {
  var installedModules = {};
  function __webpack_require__(moduleId) {
    if(installedModules[moduleId])
    return installedModules[moduleId].exports;
    var module = installedModules[moduleId] = {
      i: moduleId,
      l: false,
      exports: {}
    };
    if (!modules[moduleId]) {
      console.log('can not found module:', moduleId)
    }
    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
    module.l = true;
    return module.exports;
  }
  __webpack_require__.m = modules;
  __webpack_require__.c = installedModules;
  __webpack_require__.i = function(value) { return value; };
  __webpack_require__.d = function(exports, definition, getter) {
    if (typeof definition === 'string') {
      if(!__webpack_require__.o(exports, definition)) {
        Object.defineProperty(exports, definition, {
          enumerable: true,
          get: getter
        });
      }
    }
    else {
      for(var key in definition) {
        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
          Object.defineProperty(exports, key, {
            enumerable: true,
            get: definition[key]
          });
        }
      }
    }
  };
  __webpack_require__.r = function(exports) {
    if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
    	Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
    }
    Object.defineProperty(exports, '__esModule', { value: true });
  };
  __webpack_require__.f = {};
  __webpack_require__.e = function(chunkId) {
    return Promise.all(Object.keys(__webpack_require__.f).reduce(function (promises, key) {
      __webpack_require__.f[key](chunkId, promises);
        return promises;
    	}, []));
	};
  __webpack_require__.u = function(chunkId) {
    return chunkId + "LIB_NAME";
  };
  __webpack_require__.n = function(module) {
    var getter = module && module.__esModule ?
      function getDefault() { return module['default']; } :
      function getModuleExports() { return module; };
    __webpack_require__.d(getter, 'a', getter);
    return getter;
  };
  (function() {
    var installedChunks = {
      "main": 0
    };
    __webpack_require__.f.j = function(chunkId, promises) {
      var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;
      if (installedChunkData !== 0) {
        if(installedChunkData) {
          promises.push(installedChunkData[2]);
        } else {
          if (true) {
            var promise = new Promise(function(resolve, reject){installedChunkData = installedChunks[chunkId] = [resolve, reject]});
            promises.push(installedChunkData[2] = promise);
            var url = __webpack_require__.p + __webpack_require__.u(chunkId);
            var error = new Error();
            var loadingEnded = function(event) {
              if(__webpack_require__.o(installedChunks, chunkId)) {
                installedChunkData = installedChunks[chunkId];
                if(installedChunkData !== 0) installedChunks[chunkId] = undefined;
                if(installedChunkData) {
                  var errorType = event && (event.type === 'load' ? 'missing' : event.type);
                  var realSrc = url;
                  error.message = "Loading chunk " + chunkId + " failed.\\n(" + errorType + ": " + realSrc + ")";
                  error.name = "ChunkLoadError";
                  error.type = errorType;
                  error.request = realSrc;
                  installedChunkData[1](error);
                }
              }
            };
            __webpack_require__.l(url, loadingEnded);
          }
        }
      }
    };
    var webpackJsonpCallback = function(parentChunkLoadingFunction, data) {
    var [chunkIds, moreModules, runtime] = data;
    var moduleId, chunkId, i = 0;
    if (chunkIds.some(function(id){return installedChunks[id] !== 0})) {
      for(moduleId in moreModules) {
        if(__webpack_require__.o(moreModules, moduleId)) {
          __webpack_require__.m[moduleId] = moreModules[moduleId];
        }
      }
      if(runtime) runtime(__webpack_require__);
    }
    if (parentChunkLoadingFunction) parentChunkLoadingFunction(data);
      for (;i < chunkIds.length; i++) {
        chunkId = chunkIds[i];
        if (__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
          installedChunks[chunkId][0]();
        }
        installedChunks[chunkId] = 0;
      }
    }
    var self = typeof globalThis !== undefined ? globalThis : self
    var chunkLoadingGlobal = self["webpackChunkAVPlayer"] = self["webpackChunkAVPlayer"] || [];
    chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
    chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
  })();
  (function() {
    var inProgress = {};
    __webpack_require__.l = function(url, done) {
      if (inProgress[url]) { inProgress[url].push(done); return; }
        inProgress[url] = [done];
        var onComplete = function(event) {
          clearTimeout(timeout);
          var doneFns = inProgress[url];
          delete inProgress[url];
          doneFns && doneFns.forEach(function(fn){fn(event)});
        }
        var timeout = setTimeout(onComplete.bind(null, undefined, { type: "timeout" }), 120000);
      import(url).then(function() {
        onComplete({
          type: "load"
        })
      }, function (error) {
        onComplete({
          type: "missing"
        })
      });
    };
  })();
  __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
  __webpack_require__.p = "ROOT_URL";
  __webpack_require__.oe = function(err) { console.error(err); throw err; };
  var f = __webpack_require__(__webpack_require__.s = ENTRY_MODULE);
  return f;
}
`,a="[\\.|\\-|\\+|\\w|/|@|!]+",d="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+a+").*?\\)";function c(u){return(u+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function l(u,f,v,y){const A={};A[v]=[];let w=f.toString();const k=w.match(/^(function)?\s?\w*\(\w+,\s*(\w+),\s*(\w+)\)/);if(!k)return A;const T=k[3];y.__webpack_exports_process__||(y.__webpack_require__=T,y.__webpack_exports__=k[2],y.__webpack_exports_process__=!0);let P,b=new RegExp("(\\\\n|\\W)"+c(T)+d,"g");for(;P=b.exec(w);)P[3]!=="dll-reference"&&A[v].push(P[3]);for(b=new RegExp("\\("+c(T)+'\\("(dll-reference\\s('+a+'))"\\)\\)'+d,"g");P=b.exec(w);)u[P[2]]||(A[v].push(P[1]),u[P[2]]=t(P[1]).m),A[P[2]]=A[P[2]]||[],A[P[2]].push(P[4]);const x=i()(A);for(let S=0;S<x.length;S++)for(let z=0;z<A[x[S]].length;z++)I=+A[x[S]][z],isNaN(I)||(A[x[S]][z]=+A[x[S]][z]);var I;return A}function h(u){return i()(u).reduce(function(f,v){return f||u[v].length>0},!1)}function o(u,f){const v={main:t.m},y=function(w,k){const T={main:[k]},P={main:[],__webpack_exports__:"__webpack_exports__",__webpack_require__:"__webpack_require__",__webpack_exports_process__:!1},b={main:{}};for(;h(T);){const x=i()(T);for(let I=0;I<x.length;I++){let S=x[I],z=T[S].pop();if(b[S]=b[S]||{},b[S][z]||!w[S][z])continue;b[S][z]=!0,P[S]=P[S]||[],P[S].push(z);let V=l(w,w[S][z],S,P),L=i()(V);for(let C=0;C<L.length;C++)T[L[C]]=T[L[C]]||[],T[L[C]]=T[L[C]].concat(V[L[C]])}}return P}(v,u);let A=s()(u);return"var "+f.varName+"=("+r.replace("ENTRY_MODULE",A).replace("ROOT_URL",t.p||"").replace("LIB_NAME",t.u&&t.u("")||"")+")({"+y.main.map(function(w){const k=s()(w);let T=k+": "+v.main[w].toString();if(k===A&&f.exportName&&f.pointName){const P=`;${y.__webpack_require__}.d(
          ${y.__webpack_exports__},
          "${f.exportName}",
          function() {
            if (${f.exportIsClass}) {
              for (var key in ${y.__webpack_exports__}) {
                if (key === '${f.exportName}') {
                  continue;
                }
                var v = ${y.__webpack_exports__}[key];
                if (typeof v === 'function' && v.name === '${f.pointName}') {
                  return v;
                }
              }
            }
            return ${f.pointName};
          }
        );`;T=T.slice(0,T.length-1)+P+"}"}return T}).join(",")+"});"}},2148:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(67672),i=t(10576);function n(s,r){return e.sH(s)?+s:r!==i.ZH?r:0}},62100:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(10576);function i(n,s){return n!=e.Cq&&n.toString?n.toString():s!==e.ZH?s:e.u1}},61403:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(67672);class n{constructor(){(0,e.A)(this,"proxy",void 0),this.proxy=new Proxy(this,{get:(r,a,d)=>i.sH(a)?r.getIndexValue(+a):r[a],set:(r,a,d,c)=>(i.sH(a)?r.setIndexValue(+a,d):r[a]=d,!0)})}}},37246:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(4624);class n{constructor(r=1048576){(0,e.A)(this,"buffer",void 0),(0,e.A)(this,"pointer",void 0),(0,e.A)(this,"bitsLeft",void 0),(0,e.A)(this,"size",void 0),(0,e.A)(this,"endPointer",void 0),(0,e.A)(this,"error",void 0),(0,e.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.size=r,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}peekU1(){let r=0;(this.remainingLength()<1||this.remainingLength()===1&&this.bitsLeft===0)&&this.flush();let a=this.pointer,d=this.bitsLeft;return d===0&&(a++,d=8),r=this.buffer[a]>>d-1&1,r}readU1(){let r=0;return(this.remainingLength()<1||this.remainingLength()===1&&this.bitsLeft===0)&&this.flush(),this.bitsLeft--,r=this.buffer[this.pointer]>>this.bitsLeft&1,this.bitsLeft===0&&(this.pointer++,this.bitsLeft=8),r}readU(r){let a=0;for(let d=0;d<r;d++)a|=this.readU1()<<r-d-1;return a}remainingLength(){return this.endPointer-this.pointer}getPos(){return this.pointer}flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(this.bitsLeft===0&&this.pointer++,!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);const r=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(r<0)throw this.error=r,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+r,this.pointer=0}else{const r=this.onFlush(this.buffer);if(this.endPointer=r,this.pointer=0,this.bitsLeft=8,r<0)throw this.error=r,Error("IOReader error, flush failed")}}getBuffer(){return this.buffer}appendBuffer(r){if(this.size-this.endPointer>=r.length)this.buffer.set(r,this.endPointer),this.endPointer+=r.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=r.length)this.buffer.set(r,this.endPointer),this.endPointer+=r.length;else{const a=Math.min(this.size-this.endPointer,r.length);this.buffer.set(r.subarray(0,a),this.endPointer),this.endPointer+=a,i.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src\\common\\io\\BitReader.ts",174)}}clear(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0}skipPadding(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++)}}},83314:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(134);class i{constructor(s=1048576){(0,e.A)(this,"buffer",void 0),(0,e.A)(this,"pointer",void 0),(0,e.A)(this,"bitPointer",void 0),(0,e.A)(this,"size",void 0),(0,e.A)(this,"error",void 0),(0,e.A)(this,"onFlush",void 0),this.pointer=0,this.bitPointer=0,this.size=s,this.error=0,this.buffer=new Uint8Array(this.size)}writeU1(s){(this.remainingLength()<1||this.remainingLength()===1&&this.bitPointer>=8)&&this.flush(),1&s?this.buffer[this.pointer]|=1<<7-this.bitPointer:this.buffer[this.pointer]&=~(1<<7-this.bitPointer),this.bitPointer++,this.bitPointer===8&&(this.pointer++,this.bitPointer=0)}writeU(s,r){for(let a=0;a<s;a++)this.writeU1(r>>s-a-1&1)}remainingLength(){return this.size-this.pointer}flush(){if(!this.onFlush)throw this.error=-1048574,Error("BSWriter error, flush failed because of no flush callback");if(this.pointer){if(this.bitPointer&&this.pointer>1){const s=this.onFlush(this.buffer.subarray(0,this.pointer-1));if(s!==0)throw this.error=s,Error("BSWriter error, flush failed");this.buffer[0]=this.buffer[this.pointer]}else if(this.bitPointer===0){const s=this.onFlush(this.buffer.subarray(0,this.pointer));if(s!==0)throw this.error=s,Error("BSWriter error, flush failed")}}this.pointer=0}padding(){for(;this.bitPointer!==0;)this.writeU1(0)}clear(){this.pointer=0,this.bitPointer=0,this.error=0}getBuffer(){return this.buffer}getPointer(){return this.pointer}}},31865:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(134),i=t(92647),n=t(50011);class s{constructor(a,d=!0){(0,e.A)(this,"data",void 0),(0,e.A)(this,"buffer",void 0),(0,e.A)(this,"byteStart",void 0),(0,e.A)(this,"pos",void 0),(0,e.A)(this,"size",void 0),(0,e.A)(this,"littleEndian",void 0),this.buffer=a,this.data=a instanceof Uint8Array?new DataView(a.buffer):a.view,this.byteStart=a instanceof Uint8Array?a.byteOffset:0,this.pos=0,this.size=a.byteLength,this.littleEndian=!d}readUint8(){return this.data.getUint8(this.pos+++this.byteStart)}readUint16(){const a=this.data.getUint16(this.pos+this.byteStart,this.littleEndian);return this.pos+=2,a}readUint24(){return this.readUint16()<<8|this.readUint8()}readUint32(){const a=this.data.getUint32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,a}readUint64(){const a=BigInt(this.readUint32()),d=BigInt(this.readUint32());return this.littleEndian?d<<BigInt(32)|a:a<<BigInt(32)|d}readInt8(){return this.data.getInt8(this.pos+++this.byteStart)}readInt16(){const a=this.data.getInt16(this.pos+this.byteStart,this.littleEndian);return this.pos+=2,a}readInt32(){const a=this.data.getInt32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,a}readInt64(){const a=BigInt(this.readInt32()),d=BigInt(this.readInt32());return this.littleEndian?d<<BigInt(32)|a:a<<BigInt(32)|d}readFloat(){const a=this.data.getFloat32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,a}readDouble(){const a=this.data.getFloat64(this.pos+this.byteStart,this.littleEndian);return this.pos+=8,a}readHex(a=1){let d="";for(let c=0;c<a;c++){const l=this.readUint8().toString(16);d+=l.length===1?"0"+l:l}return d}readString(a=1){let d="";if(a){let c=this.pos;for(let l=0;l<a&&this.buffer[this.pos+l]===0;l++)c++;d=n.D(this.buffer.subarray(c,c+a))}return this.pos+=a,d}readLine(){let a="";for(let d=this.pos;d<this.size;d++)if(this.buffer[d]===10||this.buffer[d]===13){a+=this.readString(d-this.pos);break}for(let d=this.pos;d<this.size&&(this.buffer[d]===10||this.buffer[d]===13);d++)this.readUint8();return a}getPos(){return BigInt(this.pos)}seek(a){a>this.size&&(a=this.size),this.pos=Math.max(0,a)}skip(a){this.seek(this.pos+a)}back(a){this.seek(this.pos-a)}remainingSize(){return this.size-this.pos}readBuffer(a){a=Math.min(a,this.remainingSize());const d=this.buffer.slice(this.pos,this.pos+a);return this.pos+=a,d}appendBuffer(a){this.buffer=(0,i.A)(Uint8Array,[this.buffer.slice(),a.slice()]),this.data=new DataView(this.buffer.buffer),this.size+=a.byteLength,this.byteStart=0}resetBuffer(a,d=!0){this.buffer=a,this.data=a instanceof Uint8Array?new DataView(a.buffer):a.view,this.byteStart=a instanceof Uint8Array?a.byteOffset:0,this.pos=0,this.size=a.byteLength,this.littleEndian=!d}}},729:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(134),i=t(4624),n=t(50011);class s{constructor(a,d=!0){(0,e.A)(this,"data",void 0),(0,e.A)(this,"buffer",void 0),(0,e.A)(this,"byteStart",void 0),(0,e.A)(this,"pos",void 0),(0,e.A)(this,"size",void 0),(0,e.A)(this,"littleEndian",void 0),this.buffer=a,this.data=a instanceof Uint8Array?new DataView(a.buffer):a.view,this.byteStart=a instanceof Uint8Array?a.byteOffset:0,this.pos=0,this.size=a.byteLength,this.littleEndian=!d}writeUint8(a){this.data.setUint8(this.pos+++this.byteStart,a)}writeUint16(a){this.data.setUint16(this.pos+this.byteStart,a,this.littleEndian),this.pos+=2}writeUint24(a){const d=3840&a,c=240&a,l=15&a;this.littleEndian?(this.writeUint8(l),this.writeUint8(c),this.writeUint8(d)):(this.writeUint8(d),this.writeUint8(c),this.writeUint8(l))}writeUint32(a){this.data.setUint32(this.pos+this.byteStart,a,this.littleEndian),this.pos+=4}writeUint64(a){const d=a&BigInt(4294967295),c=(a&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeUint32(Number(d)),this.writeUint32(Number(c))):(this.writeUint32(Number(c)),this.writeUint32(Number(d)))}writeInt8(a){this.data.setInt8(this.pos+++this.byteStart,a)}writeInt16(a){this.data.setInt16(this.pos+this.byteStart,a,this.littleEndian),this.pos+=2}writeInt32(a){this.data.setInt32(this.pos+this.byteStart,a,this.littleEndian),this.pos+=4}writeInt64(a){const d=a&BigInt(4294967295),c=(a&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeInt32(Number(d)),this.writeInt32(Number(c))):(this.writeInt32(Number(c)),this.writeInt32(Number(d)))}writeFloat(a){this.data.setFloat32(this.pos+this.byteStart,a,this.littleEndian),this.pos+=4}writeDouble(a){this.data.setFloat64(this.pos+this.byteStart,a,this.littleEndian),this.pos+=8}getPos(){return this.pos}seek(a){a>this.size&&(a=this.size),this.pos=Math.max(0,a)}skip(a){this.seek(this.pos+a)}back(a){this.seek(this.pos-a)}remainingSize(){return this.size-this.pos}writeBuffer(a){let d=a.length;this.remainingSize()<d&&(d=this.remainingSize(),i.R8(`the remaining buffer size is smaller then the wrote buffer, hope set ${a.length}, but set ${d}`,"src\\common\\io\\BufferWriter.ts",211)),this.buffer.set(a,this.pos),this.pos+=a.length}writeString(a){const d=n.l(a);return this.writeBuffer(d),d.length}getWroteBuffer(){return this.buffer.subarray(0,this.pos)}resetBuffer(a,d=!0){this.buffer=a,this.data=a instanceof Uint8Array?new DataView(a.buffer):a.view,this.byteStart=a instanceof Uint8Array?a.byteOffset:0,this.pos=0,this.size=a.byteLength,this.littleEndian=!d}}},24175:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(134),i=t(4624),n=t(50011),s=t(13724),r="src\\common\\io\\IOReader.ts";class a{constructor(c=1048576,l=!0,h){if((0,e.A)(this,"data",void 0),(0,e.A)(this,"buffer",void 0),(0,e.A)(this,"pointer",void 0),(0,e.A)(this,"endPointer",void 0),(0,e.A)(this,"pos",void 0),(0,e.A)(this,"size",void 0),(0,e.A)(this,"littleEndian",void 0),(0,e.A)(this,"fileSize_",void 0),(0,e.A)(this,"error",void 0),(0,e.A)(this,"onFlush",void 0),(0,e.A)(this,"onSeek",void 0),(0,e.A)(this,"onSize",void 0),(0,e.A)(this,"flags",void 0),this.pos=BigInt(0),this.pointer=0,this.error=0,this.endPointer=0,this.littleEndian=!l,this.flags=0,h&&h.view)this.size=h.length,this.buffer=h,this.data=h.view;else if(h&&!h.byteOffset)this.size=h.length,this.buffer=h,this.data=new DataView(this.buffer.buffer);else{if(h)throw new Error("not support subarray of ArrayBuffer");this.size=Math.max(c,102400),this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}async readUint8(){this.remainingLength()<1&&await this.flush(1);const c=this.data.getUint8(this.pointer);return this.pointer++,this.pos++,c}async peekUint8(){return this.remainingLength()<1&&await this.flush(1),this.data.getUint8(this.pointer)}async readUint16(){this.remainingLength()<2&&await this.flush(2);const c=this.data.getUint16(this.pointer,this.littleEndian);return this.pointer+=2,this.pos+=BigInt(2),c}async peekUint16(){return this.remainingLength()<2&&await this.flush(2),this.data.getUint16(this.pointer,this.littleEndian)}async readUint24(){return this.remainingLength()<3&&await this.flush(3),await this.readUint16()<<8|await this.readUint8()}async peekUint24(){this.remainingLength()<3&&await this.flush(3);const c=this.pointer,l=this.pos,h=await this.readUint16()<<8|await this.readUint8();return this.pointer=c,this.pos=l,h}async readUint32(){this.remainingLength()<4&&await this.flush(4);const c=this.data.getUint32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),c}async peekUint32(){return this.remainingLength()<4&&await this.flush(4),this.data.getUint32(this.pointer,this.littleEndian)}async readUint64(){this.remainingLength()<8&&await this.flush(8);const c=this.data.getBigUint64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),c}async peekUint64(){return this.remainingLength()<8&&await this.flush(8),this.data.getBigUint64(this.pointer,this.littleEndian)}async readInt8(){this.remainingLength()<1&&await this.flush(1);const c=this.data.getInt8(this.pointer);return this.pointer++,this.pos++,c}async peekInt8(){return this.remainingLength()<1&&await this.flush(1),this.data.getInt8(this.pointer)}async readInt16(){this.remainingLength()<2&&await this.flush(2);const c=this.data.getInt16(this.pointer,this.littleEndian);return this.pointer+=2,this.pos+=BigInt(2),c}async peekInt16(){return this.remainingLength()<2&&await this.flush(2),this.data.getInt16(this.pointer,this.littleEndian)}async readInt32(){this.remainingLength()<4&&await this.flush(4);const c=this.data.getInt32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),c}async peekInt32(){return this.remainingLength()<4&&await this.flush(4),this.data.getInt32(this.pointer,this.littleEndian)}async readInt64(){this.remainingLength()<8&&await this.flush(8);const c=this.data.getBigInt64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),c}async peekInt64(){return this.remainingLength()<8&&await this.flush(8),this.data.getBigInt64(this.pointer,this.littleEndian)}async readFloat(){this.remainingLength()<4&&await this.flush(4);const c=this.data.getFloat32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),c}async peekFloat(){return this.remainingLength()<4&&await this.flush(4),this.data.getFloat32(this.pointer,this.littleEndian)}async readDouble(){this.remainingLength()<8&&await this.flush(8);const c=this.data.getFloat64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),c}async peekDouble(){return this.remainingLength()<8&&await this.flush(8),this.data.getFloat64(this.pointer,this.littleEndian)}async readHex(c=1){let l="";for(let h=0;h<c;h++){const o=(await this.readUint8()).toString(16);l+=o.length===1?"0"+o:o}return l}async peekHex(c=1){c>this.size&&(this.error=-1048574,i.h2("peekHex, length too large",r,334)),this.remainingLength()<c&&await this.flush(c);const l=this.pointer,h=this.pos;let o="";for(let u=0;u<c;u++){const f=(await this.readUint8()).toString(16);o+=f.length===1?"0"+f:f}return this.pointer=l,this.pos=h,o}async readBuffer(c,l){if(l||(l=new Uint8Array(c)),this.remainingLength()<c){let h=0;if(this.remainingLength()>0){const o=this.remainingLength();l.set(this.buffer.subarray(this.pointer,this.pointer+o),h),h+=o,this.pointer+=o,this.pos+=BigInt(o),c-=o}for(;c>0;){await this.flush();const o=Math.min(this.endPointer-this.pointer,c);l.set(this.buffer.subarray(this.pointer,this.pointer+o),h),h+=o,this.pointer+=o,this.pos+=BigInt(o),c-=o}}else l.set(this.buffer.subarray(this.pointer,this.pointer+c),0),this.pointer+=c,this.pos+=BigInt(c);return l}async peekBuffer(c,l){return c>this.size&&(this.error=-1048574,i.h2("peekBuffer, length too large",r,410)),this.remainingLength()<c&&await this.flush(c),l||(l=new Uint8Array(c)),l.set(this.buffer.subarray(this.pointer,this.pointer+c),0),l}async readString(c=1){const l=await this.readBuffer(c);return n.D(l)}async peekString(c=1){const l=await this.peekBuffer(c);return n.D(l)}async readLine(){let c="";for(;;){let l=!1;for(let h=this.pointer;h<this.endPointer;h++)if(this.buffer[h]===10||this.buffer[h]===13){h!==this.pointer&&(c+=await this.readString(h-this.pointer)),l=!0;break}if(l)break;c+=await this.readString(this.remainingLength()),await this.flush()}for(;;){const l=await this.peekUint8();if(l!==10&&l!==13)break;await this.readUint8()}return c}async peekLine(){this.remainingLength()<this.size&&await this.flush();let c="",l=!1;for(let h=this.pointer;h<this.endPointer;h++)if(this.buffer[h]===10||this.buffer[h]===13){c+=await this.peekString(h-this.pointer),l=!0;break}return l||(this.error=-1048574,i.h2("peekLine, out of buffer",r,498)),c}getPointer(){return this.pointer}getPos(){return this.pos}async skip(c){const l=c;for(;this.remainingLength()<c;)c-=this.remainingLength(),this.pointer=this.endPointer,await this.flush();this.remainingLength()>=c&&(this.pointer+=c),this.pos+=BigInt(l)}remainingLength(){return this.endPointer-this.pointer}async flush_(c){for(;;){const l=await this.onFlush(c);if(l!==-1048575)return l;await new s.A(0)}}async flush(c=0){if(this.onFlush||(this.error=-1048574,i.h2("IOReader error, flush failed because of no flush callback",r,566)),!(this.size-this.remainingLength()<=0))if(c=Math.min(c,this.size),this.pointer<this.endPointer?(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer):this.endPointer=0,this.pointer=0,c)for(;this.remainingLength()<c;){const l=await this.flush_(this.buffer.subarray(this.endPointer));if(l<0)throw this.error=l,new Error(`IOReader error, flush ${l===-1048576?"ended":"failed"}, ret: ${l}`);this.endPointer+=l}else{const l=await this.flush_(this.buffer.subarray(this.endPointer));if(l<0)throw this.error=l,new Error(`IOReader error, flush ${l===-1048576?"ended":"failed"}, ret: ${l}`);this.endPointer+=l}}async seek(c,l=!1,h=!0){if(!l){const u=Number(c-this.pos);if(u<0&&Math.abs(u)<this.pointer)return this.pointer+=u,void(this.pos=c);if(u>0&&this.pointer+u<this.endPointer)return this.pointer+=u,void(this.pos=c);if(u===0)return}this.onSeek||(this.error=-1048574,i.h2("IOReader error, seek failed because of no seek callback",r,627)),this.pointer=this.endPointer=0,this.pos=c;const o=await this.onSeek(c);o!==0&&(this.error=o,i.h2("IOReader error, seek failed",r,636)),h&&await this.flush()}getBuffer(){return this.buffer}appendBuffer(c){if(this.size-this.endPointer>=c.length)this.buffer.set(c,this.endPointer),this.endPointer+=c.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=c.length)this.buffer.set(c,this.endPointer),this.endPointer+=c.length;else{const l=Math.min(this.size-this.endPointer,c.length);this.buffer.set(c.subarray(0,l),this.endPointer),this.endPointer+=l,i.R8("IOReader, call appendBuffer but the buffer's size is lagger then the remaining size",r,666)}}reset(){this.pointer=this.endPointer=0,this.pos=BigInt(0),this.error=0}setEndian(c){this.littleEndian=!c}async fileSize(){return this.fileSize_||(this.onSize||(this.error=-1048574,i.h2("IOReader error, fileSize failed because of no onSize callback",r,687)),this.fileSize_=await this.onSize()),this.fileSize_}getBufferSize(){return this.size}async pipe(c,l){if(l)if(this.remainingLength()<l){if(this.remainingLength()>0){const h=this.remainingLength();await c.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+h)),this.pointer+=h,this.pos+=BigInt(h),l-=h}for(;l>0;){await this.flush();const h=Math.min(this.remainingLength(),l);await c.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+h)),this.pointer+=h,this.pos+=BigInt(h),l-=h}}else await c.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+l)),this.pointer+=l,this.pos+=BigInt(l);else{if(this.remainingLength()>0){const h=this.remainingLength();await c.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+h)),this.pointer+=h,this.pos+=BigInt(h)}for(;await this.flush_(this.buffer.subarray(0))>0;){const h=this.remainingLength();await c.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+h)),this.pointer+=h,this.pos+=BigInt(h)}}}}},82348:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(134),i=t(4624),n=t(50011),s="src\\common\\io\\IOReaderSync.ts";class r{constructor(d=1048576,c=!0,l){if((0,e.A)(this,"data",void 0),(0,e.A)(this,"buffer",void 0),(0,e.A)(this,"pointer",void 0),(0,e.A)(this,"endPointer",void 0),(0,e.A)(this,"pos",void 0),(0,e.A)(this,"size",void 0),(0,e.A)(this,"littleEndian",void 0),(0,e.A)(this,"fileSize_",void 0),(0,e.A)(this,"error",void 0),(0,e.A)(this,"onFlush",void 0),(0,e.A)(this,"onSeek",void 0),(0,e.A)(this,"onSize",void 0),(0,e.A)(this,"flags",void 0),this.pos=BigInt(0),this.pointer=0,this.error=0,this.endPointer=0,this.littleEndian=!c,this.flags=0,l&&l.view)this.size=l.length,this.buffer=l,this.data=l.view;else if(l&&!l.byteOffset)this.size=l.length,this.buffer=l,this.data=new DataView(this.buffer.buffer);else{if(l)throw new Error("not support subarray of ArrayBuffer");this.size=Math.max(d,102400),this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}readUint8(){this.remainingLength()<1&&this.flush(1);const d=this.data.getUint8(this.pointer);return this.pointer++,this.pos++,d}peekUint8(){return this.remainingLength()<1&&this.flush(1),this.data.getUint8(this.pointer)}readUint16(){this.remainingLength()<2&&this.flush(2);const d=this.data.getUint16(this.pointer,this.littleEndian);return this.pointer+=2,this.pos+=BigInt(2),d}peekUint16(){return this.remainingLength()<2&&this.flush(2),this.data.getUint16(this.pointer,this.littleEndian)}readUint24(){return this.readUint16()<<8|this.readUint8()}peekUint24(){this.remainingLength()<3&&this.flush(3);const d=this.pointer,c=this.pos,l=this.readUint16()<<8|this.readUint8();return this.pointer=d,this.pos=c,l}readUint32(){this.remainingLength()<4&&this.flush(4);const d=this.data.getUint32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),d}peekUint32(){return this.remainingLength()<4&&this.flush(4),this.data.getUint32(this.pointer,this.littleEndian)}readUint64(){this.remainingLength()<8&&this.flush(8);const d=this.data.getBigUint64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),d}peekUint64(){return this.remainingLength()<8&&this.flush(8),this.data.getBigUint64(this.pointer,this.littleEndian)}readInt8(){this.remainingLength()<1&&this.flush(1);const d=this.data.getInt8(this.pointer);return this.pointer++,this.pos++,d}peekInt8(){return this.remainingLength()<1&&this.flush(1),this.data.getInt8(this.pointer)}readInt16(){this.remainingLength()<2&&this.flush(2);const d=this.data.getInt16(this.pointer,this.littleEndian);return this.pointer+=2,this.pos+=BigInt(2),d}peekInt16(){return this.remainingLength()<2&&this.flush(2),this.data.getInt16(this.pointer,this.littleEndian)}readInt32(){this.remainingLength()<4&&this.flush(4);const d=this.data.getInt32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),d}peekInt32(){return this.remainingLength()<4&&this.flush(4),this.data.getInt32(this.pointer,this.littleEndian)}readInt64(){this.remainingLength()<8&&this.flush(8);const d=this.data.getBigInt64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),d}peekInt64(){return this.remainingLength()<8&&this.flush(8),this.data.getBigInt64(this.pointer,this.littleEndian)}readFloat(){this.remainingLength()<4&&this.flush(4);const d=this.data.getFloat32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),d}peekFloat(){return this.remainingLength()<4&&this.flush(4),this.data.getFloat32(this.pointer,this.littleEndian)}readDouble(){this.remainingLength()<8&&this.flush(8);const d=this.data.getFloat64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),d}peekDouble(){return this.remainingLength()<8&&this.flush(8),this.data.getFloat64(this.pointer,this.littleEndian)}readHex(d=1){let c="";for(let l=0;l<d;l++){const h=this.readUint8().toString(16);c+=h.length===1?"0"+h:h}return c}peekHex(d=1){d>this.size&&(this.error=-1048574,i.h2("peekHex, length too large",s,341)),this.remainingLength()<d&&this.flush(d);const c=this.pointer,l=this.pos;let h="";for(let o=0;o<d;o++){const u=this.readUint8().toString(16);h+=u.length===1?"0"+u:u}return this.pointer=c,this.pos=l,h}readBuffer(d,c){if(!d)return new Uint8Array(0);if(c||(c=new Uint8Array(d)),this.remainingLength()<d){let l=0;if(this.remainingLength()>0){const h=this.remainingLength();c.set(this.buffer.subarray(this.pointer,this.pointer+h),l),l+=h,this.pointer+=h,this.pos+=BigInt(h),d-=h}for(;d>0;){this.flush();const h=Math.min(this.endPointer-this.pointer,d);c.set(this.buffer.subarray(this.pointer,this.pointer+h),l),l+=h,this.pointer+=h,this.pos+=BigInt(h),d-=h}}else c.set(this.buffer.subarray(this.pointer,this.pointer+d),0),this.pointer+=d,this.pos+=BigInt(d);return c}peekBuffer(d,c){return d?(d>this.size&&(this.error=-1048574,i.h2("peekBuffer, length too large",s,425)),this.remainingLength()<d&&this.flush(d),c||(c=new Uint8Array(d)),c.set(this.buffer.subarray(this.pointer,this.pointer+d),0),c):new Uint8Array(0)}readString(d=1){const c=this.readBuffer(d);return n.D(c)}peekString(d=1){const c=this.peekBuffer(d);return n.D(c)}readLine(){let d="";for(;;){let c=!1;for(let l=this.pointer;l<this.endPointer;l++)if(this.buffer[l]===10||this.buffer[l]===13){l!==this.pointer&&(d+=this.readString(l-this.pointer)),c=!0;break}if(c)break;d+=this.readString(this.remainingLength()),this.flush()}for(;;){const c=this.peekUint8();if(c!==10&&c!==13)break;this.readUint8()}return d}peekLine(){this.remainingLength()<this.size&&this.flush();let d="",c=!1;for(let l=this.pointer;l<this.endPointer;l++)if(this.buffer[l]===10||this.buffer[l]===13){d+=this.peekString(l-this.pointer),c=!0;break}return c||(this.error=-1048574,i.h2("peekLine, out of buffer",s,514)),d}getPointer(){return this.pointer}getPos(){return this.pos}skip(d){const c=d;for(;this.remainingLength()<d;)d-=this.remainingLength(),this.pointer=this.endPointer,this.flush();this.remainingLength()>=d&&(this.pointer+=d),this.pos+=BigInt(c)}remainingLength(){return this.endPointer-this.pointer}flush(d=0){if(this.onFlush||(this.error=-1048574,i.h2("IOReader error, flush failed because of no flush callback",s,572)),!(this.size-this.remainingLength()<=0))if(d=Math.min(d,this.size),this.pointer<this.endPointer?(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer):this.endPointer=0,this.pointer=0,d)for(;this.remainingLength()<d;){const c=this.onFlush(this.buffer.subarray(this.endPointer));if(c<0)throw this.error=c,new Error(`IOReader error, flush ${c===-1048576?"ended":"failed"}, ret: ${c}`);this.endPointer+=c}else{const c=this.onFlush(this.buffer.subarray(this.endPointer));if(c<0)throw this.error=c,new Error(`IOReader error, flush ${c===-1048576?"ended":"failed"}, ret: ${c}`);this.endPointer+=c}}seek(d,c=!1,l=!0){if(!c){const o=Number(d-this.pos);if(o<0&&Math.abs(o)<this.pointer)return this.pointer+=o,void(this.pos=d);if(o>0&&this.pointer+o<this.endPointer)return this.pointer+=o,void(this.pos=d);if(o===0)return}this.onSeek||(this.error=-1048574,i.h2("IOReader error, seek failed because of no seek callback",s,632)),this.pointer=this.endPointer=0,this.pos=d;const h=this.onSeek(d);h!==0&&(this.error=h,i.h2("IOReader error, seek failed",s,641)),l&&this.flush()}getBuffer(){return this.buffer}appendBuffer(d){if(this.size-this.endPointer>=d.length)this.buffer.set(d,this.endPointer),this.endPointer+=d.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=d.length)this.buffer.set(d,this.endPointer),this.endPointer+=d.length;else{const c=Math.min(this.size-this.endPointer,d.length);this.buffer.set(d.subarray(0,c),this.endPointer),this.endPointer+=c,i.R8("IOReader, call appendBuffer but the buffer's size is lagger then the remaining size",s,672)}}reset(){this.pointer=this.endPointer=0,this.pos=BigInt(0),this.error=0}setEndian(d){this.littleEndian=!d}fileSize(){return this.fileSize_||(this.onSize||(this.error=-1048574,i.h2("IOReader error, fileSize failed because of no onSize callback",s,693)),this.fileSize_=this.onSize()),this.fileSize_}getBufferSize(){return this.size}pipe(d,c){if(c)if(this.remainingLength()<c){if(this.remainingLength()>0){const l=this.remainingLength();d.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+l)),this.pointer+=l,this.pos+=BigInt(l),c-=l}for(;c>0;){this.flush();const l=Math.min(this.endPointer-this.pointer,c);d.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+l)),this.pointer+=l,this.pos+=BigInt(l),c-=l}}else d.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+c)),this.pointer+=c,this.pos+=BigInt(c);else{if(this.remainingLength()>0){const l=this.remainingLength();d.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+l)),this.pointer+=l,this.pos+=BigInt(l)}for(;this.onFlush(this.buffer.subarray(0))>0;){const l=this.remainingLength();d.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+l)),this.pointer+=l,this.pos+=BigInt(l)}}}}},34531:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(50011);class n{constructor(r=1048576,a=!0,d){if((0,e.A)(this,"data",void 0),(0,e.A)(this,"buffer",void 0),(0,e.A)(this,"pointer",void 0),(0,e.A)(this,"pos",void 0),(0,e.A)(this,"size",void 0),(0,e.A)(this,"littleEndian",void 0),(0,e.A)(this,"error",void 0),(0,e.A)(this,"onFlush",void 0),(0,e.A)(this,"onSeek",void 0),this.pointer=0,this.pos=BigInt(0),this.size=r,this.littleEndian=!a,this.error=0,d&&d.view)this.size=d.length,this.buffer=d,this.data=d.view;else if(d&&!d.byteOffset)this.size=d.length,this.buffer=d,this.data=new DataView(this.buffer.buffer);else{if(d)throw new Error("not support subarray of ArrayBuffer");this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}async writeUint8(r){this.remainingLength()<1&&await this.flush(),this.data.setUint8(this.pointer,r),this.pointer++,this.pos++}async writeUint16(r){this.remainingLength()<2&&await this.flush(),this.data.setUint16(this.pointer,r,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}async writeUint24(r){this.remainingLength()<3&&await this.flush();const a=(16711680&r)>>16,d=(65280&r)>>8,c=255&r;this.littleEndian?(await this.writeUint8(c),await this.writeUint8(d),await this.writeUint8(a)):(await this.writeUint8(a),await this.writeUint8(d),await this.writeUint8(c))}async writeUint32(r){this.remainingLength()<4&&await this.flush(),this.data.setUint32(this.pointer,r,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}async writeUint64(r){this.remainingLength()<8&&await this.flush(),this.data.setBigUint64(this.pointer,r,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}async writeInt8(r){this.remainingLength()<1&&await this.flush(),this.data.setInt8(this.pointer,r),this.pointer++,this.pos++}async writeInt16(r){this.remainingLength()<2&&await this.flush(),this.data.setInt16(this.pointer,r,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}async writeInt32(r){this.remainingLength()<4&&await this.flush(),this.data.setInt32(this.pointer,r,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}async writeInt64(r){this.remainingLength()<8&&await this.flush(),this.data.setBigInt64(this.pointer,r,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}async writeFloat(r){this.remainingLength()<4&&await this.flush(),this.data.setFloat32(this.pointer,r,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}async writeDouble(r){this.remainingLength()<8&&await this.flush(),this.data.setFloat64(this.pointer,r,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}getPointer(){return this.pointer}getPos(){return this.pos}remainingLength(){return this.size-this.pointer}async writeBuffer(r){if(!r.length)return;let a=r.length;if(this.remainingLength()<a){let d=0;for(;a>0;){await this.flush();const c=Math.min(this.size,a);this.buffer.set(r.subarray(d,d+c),this.pointer),this.pointer+=c,this.pos+=BigInt(c),d+=c,a-=c}}else this.buffer.set(r,this.pointer),this.pointer+=a,this.pos+=BigInt(a)}async writeString(r){const a=i.l(r);return await this.writeBuffer(a),a.length}encodeString(r){return i.l(r)}async flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const r=await this.onFlush(this.buffer.subarray(0,this.pointer));if(r!==0)throw this.error=r,Error("IOWriter error, flush failed")}this.pointer=0}async flushToPos(r){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const a=await this.onFlush(this.buffer.subarray(0,this.pointer),r);if(a!==0)throw this.error=a,Error("IOWriter error, flush failed")}this.pointer=0}async seek(r){if(!this.onSeek)throw this.error=-1048574,Error("IOWriter error, seek failed because of no seek callback");await this.flush();const a=await this.onSeek(r);if(a!==0)throw this.error=a,Error("IOWriter error, seek failed");this.pos=r}seekInline(r){const a=this.pointer;this.pointer=Math.max(0,Math.min(this.size,r)),this.pos+=BigInt(this.pointer-a)}skip(r){const a=this.pointer;this.pointer=Math.min(this.size,this.pointer+r),this.pos+=BigInt(this.pointer-a)}back(r){const a=this.pointer;this.pointer=Math.max(0,this.pointer-r),this.pos+=BigInt(this.pointer-a)}getBuffer(){return this.buffer.subarray(0,this.pointer)}setEndian(r){this.littleEndian=!r}reset(){this.pointer=0,this.pos=BigInt(0),this.error=0}getBufferSize(){return this.size}}},35336:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(50011);class n{constructor(r=1048576,a=!0,d){if((0,e.A)(this,"data",void 0),(0,e.A)(this,"buffer",void 0),(0,e.A)(this,"pointer",void 0),(0,e.A)(this,"pos",void 0),(0,e.A)(this,"size",void 0),(0,e.A)(this,"littleEndian",void 0),(0,e.A)(this,"error",void 0),(0,e.A)(this,"onFlush",void 0),(0,e.A)(this,"onSeek",void 0),this.pointer=0,this.pos=BigInt(0),this.size=r,this.littleEndian=!a,this.error=0,d&&d.view)this.size=d.length,this.buffer=d,this.data=d.view;else if(d&&!d.byteOffset)this.size=d.length,this.buffer=d,this.data=new DataView(this.buffer.buffer);else{if(d)throw new Error("not support subarray of ArrayBuffer");this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}writeUint8(r){this.remainingLength()<1&&this.flush(),this.data.setUint8(this.pointer,r),this.pointer++,this.pos++}writeUint16(r){this.remainingLength()<2&&this.flush(),this.data.setUint16(this.pointer,r,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}writeUint24(r){this.remainingLength()<3&&this.flush();const a=(16711680&r)>>16,d=(65280&r)>>8,c=255&r;this.littleEndian?(this.writeUint8(c),this.writeUint8(d),this.writeUint8(a)):(this.writeUint8(a),this.writeUint8(d),this.writeUint8(c))}writeUint32(r){this.remainingLength()<4&&this.flush(),this.data.setUint32(this.pointer,r,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}writeUint64(r){this.remainingLength()<8&&this.flush(),this.data.setBigUint64(this.pointer,r,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}writeInt8(r){this.remainingLength()<1&&this.flush(),this.data.setInt8(this.pointer,r),this.pointer++,this.pos++}writeInt16(r){this.remainingLength()<2&&this.flush(),this.data.setInt16(this.pointer,r,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}writeInt32(r){this.remainingLength()<4&&this.flush(),this.data.setInt32(this.pointer,r,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}writeInt64(r){this.remainingLength()<8&&this.flush(),this.data.setBigInt64(this.pointer,r,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}writeFloat(r){this.remainingLength()<4&&this.flush(),this.data.setFloat32(this.pointer,r,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}writeDouble(r){this.remainingLength()<8&&this.flush(),this.data.setFloat64(this.pointer,r,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}getPointer(){return this.pointer}getPos(){return this.pos}remainingLength(){return this.size-this.pointer}writeBuffer(r){if(!r.length)return;let a=r.length;if(this.remainingLength()<a){let d=0;for(;a>0;){this.flush();const c=Math.min(this.size,a);this.buffer.set(r.subarray(d,d+c),this.pointer),this.pointer+=c,this.pos+=BigInt(c),d+=c,a-=c}}else this.buffer.set(r,this.pointer),this.pointer+=a,this.pos+=BigInt(a)}writeString(r){const a=i.l(r);return this.writeBuffer(a),a.length}encodeString(r){return i.l(r)}flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const r=this.onFlush(this.buffer.subarray(0,this.pointer));if(r!==0)throw this.error=r,Error("IOWriter error, flush failed")}this.pointer=0}flushToPos(r){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const a=this.onFlush(this.buffer.subarray(0,this.pointer),r);if(a!==0)throw this.error=a,Error("IOWriter error, flush failed")}this.pointer=0}seek(r){if(!this.onSeek)throw this.error=-1048574,Error("IOWriter error, seek failed because of no seek callback");this.flush();const a=this.onSeek(r);if(a!==0)throw this.error=a,Error("IOWriter error, seek failed");this.pos=r}seekInline(r){const a=this.pointer;this.pointer=Math.max(0,Math.min(this.size,r)),this.pos+=BigInt(this.pointer-a)}skip(r){const a=this.pointer;this.pointer=Math.min(this.size,this.pointer+r),this.pos+=BigInt(this.pointer-a)}back(r){const a=this.pointer;this.pointer=Math.max(0,this.pointer-r),this.pos+=BigInt(this.pointer-a)}getBuffer(){return this.buffer.subarray(0,this.pointer)}setEndian(r){this.littleEndian=!r}reset(){this.pointer=0,this.pos=BigInt(0),this.error=0}getBufferSize(){return this.size}}},50400:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(92647);class n{constructor(){(0,e.A)(this,"queue",void 0),(0,e.A)(this,"pos",void 0),(0,e.A)(this,"startPos",void 0),(0,e.A)(this,"endPos",void 0),(0,e.A)(this,"index",void 0),(0,e.A)(this,"offset",void 0),this.queue=[],this.startPos=BigInt(0),this.endPos=BigInt(0),this.pos=BigInt(0)}push(r){if(this.pos===this.endPos)this.queue.push(r),this.endPos+=BigInt(r.length),this.pos+=BigInt(r.length);else if(r.length<this.queue[this.index].length-this.offset)this.queue[this.index].set(r,this.offset),this.offset+=r.length,this.pos+=BigInt(r.length),this.offset===this.queue[this.index].length&&(this.index++,this.offset=0),this.index===this.queue.length&&(this.index=-1,this.offset=-1,this.pos=this.endPos);else{let a=0;for(;a<r.length;){const d=Math.min(this.queue[this.index].length-this.offset,r.length-a);if(this.queue[this.index].set(r.subarray(a,a+d),this.offset),a+=d,this.offset+=d,this.pos+=BigInt(d),this.offset===this.queue[this.index].length){if(this.index+1===this.queue.length){if(a<r.length){const c=r.subarray(r.length-a);this.queue.push(c),this.endPos+=BigInt(c.length)}this.pos=this.endPos,this.index=-1,this.offset=-1;break}this.index++,this.offset=0}}}}seek(r){if(r<this.startPos||r>this.endPos)return!1;this.pos=r,this.index=-1,this.offset=-1;let a=this.startPos;for(let d=0;d<this.queue.length;d++){if(r<=a+BigInt(this.queue[d].length)){this.index=d,this.offset=Number(r-a);break}a+=BigInt(this.queue[d].length)}return this.index<0&&(this.pos=this.endPos),!0}flush(){this.startPos=this.endPos,this.pos=this.endPos,this.index=-1,this.offset=-1;const r=(0,i.A)(Uint8Array,this.queue);return this.queue.length=0,r}get size(){return this.queue.length}}},45726:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(134),i=t(72739),n=t(4624),s="src\\common\\math\\Matrix3.ts";class r{static RowMajor(d){return new r([d[0],d[3],d[6],d[1],d[4],d[7],d[2],d[5],d[8]])}static ColMajor(d){return new r(d)}constructor(d){(0,e.A)(this,"element",void 0),d?(this.element=new Float32Array(9),this.set(d)):this.element=new Float32Array([1,0,0,0,1,0,0,0,1])}rc(d,c){return this.getValue(3*c+d)}setRC(d,c,l){this.setValue(3*c+d,l)}getValue(d){if(d>=0&&d<9)return this.element[d];n.z3("index out of Matrix4's rang [0 - 9]",s,47)}setValue(d,c){d>=0&&d<9?this.element[d]=c:n.z3("index out of Matrix4's rang [0 - 9]",s,56)}setIdentity(){return this.element=new Float32Array([1,0,0,0,1,0,0,0,1]),this}set(d){return i.__(d,(c,l)=>{this.element[l]=c}),this}invert(){const d=this.element,c=d[0],l=d[1],h=d[2],o=d[3],u=d[4],f=d[5],v=d[6],y=d[7],A=d[8],w=A*u-f*y,k=f*v-A*o,T=y*o-u*v,P=c*w+l*k+h*T;if(P===0)return this.set([0,0,0,0,0,0,0,0,0]);const b=1/P;return d[0]=w*b,d[1]=(h*y-A*l)*b,d[2]=(f*l-h*u)*b,d[3]=k*b,d[4]=(A*c-h*v)*b,d[5]=(h*o-f*c)*b,d[6]=T*b,d[7]=(l*v-y*c)*b,d[8]=(u*c-l*o)*b,this}toArray(){let d=[];for(let c=0;c<9;c++)d[c]=this.element[c];return d}copy(){return new r().set(this.toArray())}}},12535:(g,p,t)=>{t.d(p,{A:()=>d});var e=t(134),i=t(72739),n=t(4624),s=t(1064),r="src\\common\\math\\Matrix4.ts";let a;class d{static shared(){return a||(a=new d)}static RowMajor(l){return new d([l[0],l[4],l[8],l[12],l[1],l[5],l[9],l[13],l[2],l[6],l[10],l[14],l[3],l[7],l[11],l[15]])}static ColMajor(l){return new d(l)}constructor(l){(0,e.A)(this,"element",void 0),l?(this.element=new Float32Array(16),this.set(l)):this.element=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}rc(l,h){return this.getValue(4*h+l)}setRC(l,h,o){this.setValue(4*h+l,o)}getValue(l){if(l>=0&&l<=15)return this.element[l];n.z3("index out of Matrix4's rang [0 - 15]",r,58)}setValue(l,h){l>=0&&l<=15?this.element[l]=h:n.z3("index out of Matrix4's rang [0 - 15]",r,67)}setIdentity(){return this.element=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}set(l){return i.__(l,(h,o)=>{this.element[o]=h}),this}multiply(l){let h,o,u,f,v,y,A,w;if(f=o=this.element,u=l.element,f===u)for(u=new Float32Array(16),h=0;h<16;h++)u[h]=f[h];for(h=0;h<4;h++)v=o[h],y=o[h+4],A=o[h+8],w=o[h+12],f[h]=v*u[0]+y*u[1]+A*u[2]+w*u[3],f[h+4]=v*u[4]+y*u[5]+A*u[6]+w*u[7],f[h+8]=v*u[8]+y*u[9]+A*u[10]+w*u[11],f[h+12]=v*u[12]+y*u[13]+A*u[14]+w*u[15];return this}multiplyVector3(l){let h=this.element,o=l.element;return new s.P([o[0]*h[0]+o[1]*h[4]+o[2]*h[8]+h[12],o[0]*h[1]+o[1]*h[5]+o[2]*h[9]+h[13],o[0]*h[2]+o[1]*h[6]+o[2]*h[10]+h[14]])}multiplyVector4(l){let h=this.element,o=l.element;return new s.I([o[0]*h[0]+o[1]*h[4]+o[2]*h[8]+o[3]*h[12],o[0]*h[1]+o[1]*h[5]+o[2]*h[9]+o[3]*h[13],o[0]*h[2]+o[1]*h[6]+o[2]*h[10]+o[3]*h[14],o[0]*h[3]+o[1]*h[7]+o[2]*h[11]+o[3]*h[15]])}transpose(){let l,h;return l=this.element,h=l[1],l[1]=l[4],l[4]=h,h=l[2],l[2]=l[8],l[8]=h,h=l[3],l[3]=l[12],l[12]=h,h=l[6],l[6]=l[9],l[9]=h,h=l[7],l[7]=l[13],l[13]=h,h=l[11],l[11]=l[14],l[14]=h,this}setInverseOf(l){let h,o,u,f,v;if(o=l.element,u=this.element,f=new Float32Array(16),f[0]=o[5]*o[10]*o[15]-o[5]*o[11]*o[14]-o[9]*o[6]*o[15]+o[9]*o[7]*o[14]+o[13]*o[6]*o[11]-o[13]*o[7]*o[10],f[1]=-o[1]*o[10]*o[15]+o[1]*o[11]*o[14]+o[9]*o[2]*o[15]-o[9]*o[3]*o[14]-o[13]*o[2]*o[11]+o[13]*o[3]*o[10],f[2]=o[1]*o[6]*o[15]-o[1]*o[7]*o[14]-o[5]*o[2]*o[15]+o[5]*o[3]*o[14]+o[13]*o[2]*o[7]-o[13]*o[3]*o[6],f[3]=-o[1]*o[6]*o[11]+o[1]*o[7]*o[10]+o[5]*o[2]*o[11]-o[5]*o[3]*o[10]-o[9]*o[2]*o[7]+o[9]*o[3]*o[6],f[4]=-o[4]*o[10]*o[15]+o[4]*o[11]*o[14]+o[8]*o[6]*o[15]-o[8]*o[7]*o[14]-o[12]*o[6]*o[11]+o[12]*o[7]*o[10],f[5]=o[0]*o[10]*o[15]-o[0]*o[11]*o[14]-o[8]*o[2]*o[15]+o[8]*o[3]*o[14]+o[12]*o[2]*o[11]-o[12]*o[3]*o[10],f[6]=-o[0]*o[6]*o[15]+o[0]*o[7]*o[14]+o[4]*o[2]*o[15]-o[4]*o[3]*o[14]-o[12]*o[2]*o[7]+o[12]*o[3]*o[6],f[7]=o[0]*o[6]*o[11]-o[0]*o[7]*o[10]-o[4]*o[2]*o[11]+o[4]*o[3]*o[10]+o[8]*o[2]*o[7]-o[8]*o[3]*o[6],f[8]=o[4]*o[9]*o[15]-o[4]*o[11]*o[13]-o[8]*o[5]*o[15]+o[8]*o[7]*o[13]+o[12]*o[5]*o[11]-o[12]*o[7]*o[9],f[9]=-o[0]*o[9]*o[15]+o[0]*o[11]*o[13]+o[8]*o[1]*o[15]-o[8]*o[3]*o[13]-o[12]*o[1]*o[11]+o[12]*o[3]*o[9],f[10]=o[0]*o[5]*o[15]-o[0]*o[7]*o[13]-o[4]*o[1]*o[15]+o[4]*o[3]*o[13]+o[12]*o[1]*o[7]-o[12]*o[3]*o[5],f[11]=-o[0]*o[5]*o[11]+o[0]*o[7]*o[9]+o[4]*o[1]*o[11]-o[4]*o[3]*o[9]-o[8]*o[1]*o[7]+o[8]*o[3]*o[5],f[12]=-o[4]*o[9]*o[14]+o[4]*o[10]*o[13]+o[8]*o[5]*o[14]-o[8]*o[6]*o[13]-o[12]*o[5]*o[10]+o[12]*o[6]*o[9],f[13]=o[0]*o[9]*o[14]-o[0]*o[10]*o[13]-o[8]*o[1]*o[14]+o[8]*o[2]*o[13]+o[12]*o[1]*o[10]-o[12]*o[2]*o[9],f[14]=-o[0]*o[5]*o[14]+o[0]*o[6]*o[13]+o[4]*o[1]*o[14]-o[4]*o[2]*o[13]-o[12]*o[1]*o[6]+o[12]*o[2]*o[5],f[15]=o[0]*o[5]*o[10]-o[0]*o[6]*o[9]-o[4]*o[1]*o[10]+o[4]*o[2]*o[9]+o[8]*o[1]*o[6]-o[8]*o[2]*o[5],v=o[0]*f[0]+o[1]*f[4]+o[2]*f[8]+o[3]*f[12],v===0)return this;for(v=1/v,h=0;h<16;h++)u[h]=f[h]*v;return this}invert(){return this.setInverseOf(this),this}setOrtho(l,h,o,u,f,v){let y,A,w;return l!==h&&o!==u&&f!==v||n.h2("null frustum",r,240),y=1/(h-l),A=1/(u-o),w=1/(v-f),this.set([2*y,0,0,0,0,2*A,0,0,0,0,-2*w,0,-(h+l)*y,-(u+o)*A,-(v+f)*w,1]),this}ortho(l,h,o,u,f,v){return this.multiply(new d().setOrtho(l,h,o,u,f,v))}setFrustum(l,h,o,u,f,v){let y,A,w;return l!==h&&o!==u&&f!==v||n.z3("null frustum",r,281),f<=0&&n.h2("near <= 0",r,284),v<=0&&n.h2("far <= 0",r,287),y=1/(h-l),A=1/(u-o),w=1/(v-f),this.set([2*f*y,0,0,0,0,2*f*A,0,0,(h+l)*y,(u+o)*A,-(v+f)*w,-1,0,0,-2*f*v*w,0]),this}frustum(l,h,o,u,f,v){return this.multiply(new d().setOrtho(l,h,o,u,f,v))}setPerspective(l,h,o,u){let f,v,y;return o!==u&&h!==0||n.h2("null frustum",r,328),o<=0&&n.h2("near <= 0",r,331),u<=0&&n.h2("far <= 0",r,334),l=Math.PI*l/180/2,v=Math.sin(l),v===0&&n.h2("null frustum",r,342),f=1/(u-o),y=Math.cos(l)/v,this.set([y/h,0,0,0,0,y,0,0,0,0,-(u+o)*f,-1,0,0,-2*o*u*f,0]),this}perspective(l,h,o,u){return this.multiply(new d().setPerspective(l,h,o,u))}setScale(l){return this.set([l.x,0,0,0,0,l.y,0,0,0,0,l.z,0,0,0,0,1]),this}scale(l){let h=this.element;return h[0]*=l.x,h[1]*=l.x,h[2]*=l.x,h[3]*=l.x,h[4]*=l.y,h[5]*=l.y,h[6]*=l.y,h[7]*=l.y,h[8]*=l.z,h[9]*=l.z,h[10]*=l.z,h[11]*=l.z,this}setTranslate(l){return this.set([1,0,0,0,0,1,0,0,0,0,1,0,l.x,l.y,l.z,1]),this}preTranslate(l){let h=this.element;return h[12]+=h[0]*l.x+h[4]*l.y+h[8]*l.z,h[13]+=h[1]*l.x+h[5]*l.y+h[9]*l.z,h[14]+=h[2]*l.x+h[6]*l.y+h[10]*l.z,h[15]+=h[3]*l.x+h[7]*l.y+h[11]*l.z,this}postTranslate(l){let h=this.element;return h[0]+=l.x*h[3],h[1]+=l.y*h[3],h[2]+=l.z*h[3],h[4]+=l.x*h[7],h[5]+=l.y*h[7],h[6]+=l.z*h[7],h[8]+=l.x*h[11],h[9]+=l.y*h[11],h[10]+=l.z*h[11],h[12]+=l.x*h[15],h[13]+=l.y*h[15],h[14]+=l.z*h[15],this}setRotate(l,h){let o,u,f,v,y,A,w,k,T,P,b,x,I,S;return l=Math.PI*l/180,o=h.x,u=h.y,f=h.z,v=Math.sin(l),y=Math.cos(l),h.x!==0&&h.y===0&&h.z===0?(h.x<0&&(v=-v),this.set([1,0,0,0,0,y,-v,0,0,v,y,0,0,0,0,1])):h.x===0&&h.y!==0&&h.z===0?(h.y<0&&(v=-v),this.set([y,0,v,0,0,1,0,0,-v,0,y,0,0,0,0,1])):h.x===0&&h.y===0&&h.z!==0?(h.z<0&&(v=-v),this.set([y,-v,0,0,v,y,0,0,0,0,1,0,0,0,0,1])):(A=h.magnitude,A!==1&&(w=1/A,o*=w,u*=w,f*=w),k=1-y,T=o*u,P=u*f,b=f*o,x=o*v,I=u*v,S=f*v,this.set([o*o*k+y,T*k+S,b*k-I,0,T*k-S,u*u*k+y,P*k+x,0,b*k+I,P*k-x,f*f*k+y,0,0,0,0,1])),this}rotate(l,h){return this.multiply(new d().setRotate(l,h)),this}setLookAt(l,h,o){let u,f,v,y,A,w,k,T,P,b,x;return u=h.x-l.x,f=h.y-l.y,v=h.z-l.z,y=1/Math.sqrt(u*u+f*f+v*v),u*=y,f*=y,v*=y,A=f*o.z-v*o.y,w=v*o.x-u*o.z,k=u*o.y-f*o.x,T=1/Math.sqrt(A*A+w*w+k*k),A*=T,w*=T,k*=T,P=w*v-k*f,b=k*u-A*v,x=A*f-w*u,this.set([A,P,-u,0,w,b,-f,0,k,x,-v,0,0,0,0,1]),this.preTranslate(new s.P([-l.x,-l.y,-l.z]))}lookAt(l,h,o){return this.multiply(new d().setLookAt(l,h,o))}toArray(){let l=[];for(let h=0;h<16;h++)l[h]=this.element[h];return l}copy(){return new d().set(this.toArray())}}},1064:(g,p,t)=>{t.d(p,{I:()=>n,P:()=>i});var e=t(134);class i{constructor(r){(0,e.A)(this,"element",void 0),this.element=new Float32Array(3),r&&(this.element[0]=r[0],this.element[1]=r[1],this.element[2]=r[2])}normalize(){let r=this.x,a=this.y,d=this.z,c=this.magnitude;return c?(c===1||(c=1/c,this.x=r*c,this.y=a*c,this.z=d*c),this):(this.x=this.y=this.z=0,this)}toArray(){return[this.x,this.y,this.z]}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}get sqrMagnitude(){return this.x*this.x+this.y*this.y+this.z*this.z}get x(){return this.element[0]}set x(r){this.element[0]=r}get y(){return this.element[1]}set y(r){this.element[1]=r}get z(){return this.element[2]}set z(r){this.element[2]=r}}class n{constructor(r){(0,e.A)(this,"element",void 0),this.element=new Float32Array(4),r&&(this.element[0]=r[0],this.element[1]=r[1],this.element[2]=r[2],this.element[4]=r[3])}}},66551:(g,p,t)=>{t.d(p,{B:()=>i});var e=t(45726);function i(n,s){const r=new e.A([0,0,0,0,0,0,0,0,0]);for(let a=0;a<3;a++)for(let d=0;d<3;d++){let c=n.rc(a,0)*s.rc(0,d)+n.rc(a,1)*s.rc(1,d)+n.rc(a,2)*s.rc(2,d);r.setRC(a,d,c)}return r}},60153:(g,p,t)=>{t.d(p,{Y3:()=>i});var e=t(1064);function i(n,s){const r=new e.P([0,0,0]);for(let a=0;a<3;a++)r.element[a]=n.rc(a,0)*s.x+n.rc(a,1)*s.y+n.rc(a,2)*s.z;return r}},42577:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134);class i extends EventTarget{constructor(...r){super(...r),(0,e.A)(this,"peer",void 0),(0,e.A)(this,"onmessage",void 0),(0,e.A)(this,"onmessageerror",void 0)}postMessage(r,a){var d;(d=this.peer)!==null&&d!==void 0&&d.onmessage&&this.peer.onmessage({data:r})}close(){this.peer=null}start(){}}class n{constructor(){(0,e.A)(this,"port1",void 0),(0,e.A)(this,"port2",void 0),this.port1=new i,this.port2=new i,this.port1.peer=this.port2,this.port2.peer=this.port1}}},84149:(g,p,t)=>{t.d(p,{Ay:()=>h,S3:()=>l,Wo:()=>c});var e=t(134),i=t(80662),n=t.n(i),s=t(54001),r=t.n(s),a=t(96172),d=t(34677);const c="notify",l="request";class h extends a.A{constructor(u){super(!0),(0,e.A)(this,"port",void 0),(0,e.A)(this,"requestMap",void 0),(0,e.A)(this,"seq",void 0),(0,e.A)(this,"closed",void 0),this.port=u,this.port.onmessage=this.handle.bind(this),this.seq=0,this.requestMap=new(n()),this.port.start(),this.closed=!1}handle(u){const f=u.data,v=f.type,y=f.data;if(v==="notify")this.fire(c,y);else if(v==="reply"){const A=this.requestMap.get(y.seq);A&&((0,d.A)(y.result)?A.resolve(y.result):y.error?A.reject(y.error):A.resolve(void 0),this.requestMap.delete(y.seq))}else v==="request"&&this.fire(l,y)}notify(u,f={},v=[]){this.port.postMessage({type:"notify",data:{method:u,params:f}},v)}async request(u,f={},v=[]){return new(r())((y,A)=>{const w=this.seq++;this.requestMap.set(w,{resolve:y,reject:A}),this.port.postMessage({type:"request",data:{seq:w,method:u,params:f}},v)})}reply(u,f,v,y=[]){const A={seq:u.seq};(0,d.A)(f)?A.result=f:v&&(A.error=v),y!=null&&y.length?this.port.postMessage({type:"reply",data:A},y):this.port.postMessage({type:"reply",data:A})}getPort(){return this.port}destroy(){this.requestMap.size&&(this.requestMap.forEach(u=>{u.reject("ipc port close")}),this.requestMap.clear()),this.port&&(this.port.close(),this.port=null),this.closed=!0}}},6253:(g,p,t)=>{t.d(p,{A:()=>h});var e=t(134),i=t(39638),n=t(86932),s=t(47222),r=t(78995);let a,d=0;function c(){return a?(d++,a):(a=new s.A,d=1,a)}function l(){d!==0&&(d--,d===0&&(a.destroy(),a=null))}class h{constructor(u,f=!0){(0,e.A)(this,"messageChannel",void 0),(0,e.A)(this,"interval",void 0),(0,e.A)(this,"started",void 0),(0,e.A)(this,"timer",void 0),(0,e.A)(this,"workerTimer",void 0),(0,e.A)(this,"workerSetTimeout",void 0),(0,e.A)(this,"onClock",void 0),(0,e.A)(this,"nextTick",void 0),(0,e.A)(this,"a",void 0),(0,e.A)(this,"b",void 0),(0,e.A)(this,"beta",void 0),(0,e.A)(this,"alpha",void 0),(0,e.A)(this,"count",void 0),(0,e.A)(this,"equivalent",void 0),(0,e.A)(this,"timestamp",void 0),(0,e.A)(this,"onVisibilityChange",void 0),(0,e.A)(this,"timeoutNext",void 0),(0,e.A)(this,"running",void 0),(0,e.A)(this,"highPerformance",void 0),this.started=!1,this.interval=u,this.highPerformance=f,this.a=.2,this.b=4,this.equivalent=50,this.timestamp=0,this.nextTick=()=>{if(this.started&&!this.running)if(this.running=!0,this.interval>=4||!this.highPerformance)this.timeoutTick();else if(this.interval<=0)this.messageChannel.port1.postMessage(null);else{const v=(0,n.A)();v-this.timestamp>this.equivalent&&(this.count=0,this.timestamp=v),this.count<this.beta?this.messageChannel.port1.postMessage(null):this.timeoutTick()}},this.compute(),this.messageChannel=new MessageChannel,this.handleEvent(),this.timeoutNext=v=>{v?this.workerTimer=null:this.timer=null,this.running=!1,this.count++,this.onClock?this.onClock(this.nextTick):this.nextTick()},(0,i.A)()||document.visibilityState!=="hidden"||(this.workerSetTimeout=c()),this.running=!1}compute(u=!0){this.interval>0&&(this.beta=Math.ceil(this.equivalent*(1-this.b/this.interval)/(this.a-this.b)),this.alpha=Math.floor(this.equivalent/this.interval-this.beta),u&&(this.count=0))}timeoutTick(){this.workerSetTimeout&&document.visibilityState==="hidden"&&this.interval<1e3?this.workerTimer=this.workerSetTimeout.setTimeout(this.timeoutNext,this.interval):this.timer=setTimeout(this.timeoutNext,this.interval)}start(){this.started||(this.started=!0,this.timestamp=(0,n.A)(),this.nextTick())}stop(){this.started=!1,this.timer&&(clearTimeout(this.timer),this.timer=null),this.workerTimer&&this.workerSetTimeout&&this.workerSetTimeout.clearTimeout(this.workerTimer),this.running=!1}isStarted(){return this.started}setInterval(u){this.interval=Math.max(u,0),this.compute()}getInterval(){return this.interval}isZeroTimeout(){return this.interval<4}destroy(){this.stop(),this.workerSetTimeout&&(l(),this.workerSetTimeout=null),this.onVisibilityChange&&(document.removeEventListener("visibilitychange",this.onVisibilityChange),this.onVisibilityChange=null)}handleEvent(){this.messageChannel.port2.onmessage=()=>{this.started&&(this.running=!1,this.count++,this.onClock?this.onClock(this.nextTick):this.nextTick())},(0,i.A)()||(this.onVisibilityChange=(0,r.A)(u=>{document.visibilityState==="hidden"?(this.workerSetTimeout=c(),this.timer&&(clearTimeout(this.timer),this.timer=null,this.running=!1),this.nextTick()):(this.workerTimer&&(this.workerSetTimeout.clearTimeout(this.workerTimer),this.workerTimer=null,this.running=!1),this.timer&&(clearTimeout(this.timer),this.timer=null,this.running=!1),l(),this.workerSetTimeout=null,this.nextTick())},20),document.addEventListener("visibilitychange",this.onVisibilityChange))}}},39148:(g,p,t)=>{t.d(p,{A:()=>a});var e=t(134),i=t(54001),n=t.n(i),s=t(6253),r=t(86932);class a{constructor(c,l=0,h=0,o=!0,u=!0){(0,e.A)(this,"task",void 0),(0,e.A)(this,"count",void 0),(0,e.A)(this,"emptyCount",void 0),(0,e.A)(this,"started",void 0),(0,e.A)(this,"clock",void 0),(0,e.A)(this,"timestamp",void 0),(0,e.A)(this,"timeout",void 0),(0,e.A)(this,"interval",void 0),(0,e.A)(this,"startTimer",void 0),(0,e.A)(this,"autoInterval",void 0),(0,e.A)(this,"sync",void 0),(0,e.A)(this,"tickAfter",void 0),(0,e.A)(this,"processing",void 0),this.task=c,this.timeout=l,this.interval=h,this.autoInterval=o,this.sync=u,this.count=0,this.emptyCount=0,this.timestamp=0,this.started=!1,this.processing=!1,this.clock=new s.A(this.interval),this.clock.onClock=f=>{if(this.started)if(this.count++,this.sync)this.tickAfter&&(this.tickAfter(),this.tickAfter=null),this.task()===!1?this.stop():this.next(f);else{if(this.processing)return;this.processing=!0,this.task().then(v=>{this.processing=!1,this.tickAfter&&(this.tickAfter(),this.tickAfter=null),v===!1?this.stop():this.next(f)})}}}next(c){if(!this.started)return;const l=(0,r.A)();if(this.autoInterval&&l-this.timestamp>50){const h=this.emptyCount/this.count;this.emptyCount===0?this.clock.setInterval(Math.max(this.clock.getInterval()>>1,this.interval)):h<.1?this.clock.setInterval(this.clock.getInterval()-1):h>.2?this.clock.setInterval(Math.min(this.clock.getInterval()+1,20)):h>.5&&this.clock.setInterval(this.clock.getInterval()<<1),this.count=0,this.emptyCount=0,this.timestamp=l}c()}start(){this.started=!0,this.timeout?this.startTimer=setTimeout(()=>{this.count=0,this.emptyCount=0,this.timestamp=(0,r.A)(),this.clock.start(),this.startTimer=null},this.timeout):(this.count=0,this.emptyCount=0,this.timestamp=(0,r.A)(),this.clock.start())}stop(){this.started=!1,this.processing=!1,this.startTimer&&(clearTimeout(this.startTimer),this.startTimer=null),this.clock.stop()}async stopBeforeNextTick(){if(this.startTimer&&(clearTimeout(this.startTimer),this.startTimer=null),this.clock.isStarted())return this.sync?(this.started=!1,this.processing=!1,void this.clock.stop()):new(n())(c=>{this.tickAfter=()=>{this.started=!1,this.processing=!1,this.clock.stop(),c()}})}isStarted(){return this.started}emptyTask(){this.emptyCount++}isZeroTimeout(){var c;return(c=this.clock)===null||c===void 0?void 0:c.isZeroTimeout()}restart(){this.clock&&(this.stop(),this.clock.setInterval(this.interval),this.start())}resetInterval(){this.clock.setInterval(Math.max(this.clock.getInterval()>>1,this.interval)),this.emptyCount=0,this.count=0,this.timestamp=(0,r.A)()}destroy(){this.stop(),this.task=null,this.timeout=null,this.interval=null}}},13724:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(134),i=t(45249),n=t.n(i);class s{constructor(a){(0,e.A)(this,"timeout",void 0),(0,e.A)(this,"timer",void 0),(0,e.A)(this,"resolve",void 0),(0,e.A)(this,"reject",void 0),(0,e.A)(this,"startTime",void 0),this.timeout=a}then(a,d){this.resolve=a,this.reject=d,this.startTime=n()(),this.timer=setTimeout(()=>{this.resolve(n()()-this.startTime),this.timer=null},1e3*this.timeout)}stop(a=!0){this.timer&&(clearTimeout(this.timer),this.timer=null,this.resolve&&a?this.resolve(n()()-this.startTime):this.reject&&!a&&this.reject(n()()-this.startTime))}reset(a){a&&(this.timeout=a),this.timer&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.resolve(n()()-this.startTime),this.timer=null},1e3*this.timeout))}}},54058:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(134);class i{constructor(s,r,a){(0,e.A)(this,"task",void 0),(0,e.A)(this,"timeout",void 0),(0,e.A)(this,"interval",void 0),(0,e.A)(this,"timer",void 0),this.task=s,this.timeout=r,this.interval=a}start(){const s=this;s.stop();let r=s.timeout;const a=s.interval,d=function(){s.task()!==!1&&s.timer?s.timer=setTimeout(d,s.interval):s.stop()};r==null&&(r=a),s.timer=setTimeout(d,r)}stop(){this.timer&&(clearTimeout(this.timer),this.timer=null)}updateInterval(s){this.interval=s}isStarted(){return!!this.timer}destroy(){this.stop(),this.task=this.timeout=this.interval=null}}},47222:(g,p,t)=>{t.d(p,{A:()=>r});var e=t(134),i=t(80662),n=t.n(i),s=t(61837);t(7903);class r{constructor(){(0,e.A)(this,"worker",void 0),(0,e.A)(this,"workerUrl",void 0),(0,e.A)(this,"taskMap",void 0),(0,e.A)(this,"id",void 0),this.id=0,this.taskMap=new(n());const d=`
      ${(0,s.A)(7903,{varName:"workerSetTimeoutTask"})}
      workerSetTimeoutTask.default(self)
    `,c=new Blob([d],{type:"text/javascript"});this.workerUrl=URL.createObjectURL(c),this.worker=new Worker(this.workerUrl),this.worker.addEventListener("message",l=>{const h=l.data,o=h.type,u=h.id;if(o==="pong"){const f=this.taskMap.get(u);f&&f(!0)}})}setTimeout(d,c=0){const l=this.id++;return this.taskMap.set(l,d),this.worker.postMessage({type:"ping",data:{timeout:c,id:l}}),l}clearTimeout(d){this.taskMap.delete(d)}destroy(){this.worker&&(this.worker.terminate(),this.worker=null),this.workerUrl&&(URL.revokeObjectURL(this.workerUrl),this.workerUrl=null),this.taskMap&&(this.taskMap.clear(),this.taskMap=null)}}},38724:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(6253);class n{constructor(r,a,d){(0,e.A)(this,"task",void 0),(0,e.A)(this,"timeout",void 0),(0,e.A)(this,"interval",void 0),(0,e.A)(this,"clock",void 0),(0,e.A)(this,"started",void 0),(0,e.A)(this,"timer",void 0),this.task=r,this.timeout=a,this.interval=d,this.started=!1,this.clock=new i.A(this.interval,!1),this.clock.onClock=c=>{this.started&&this.task()===!1?this.stop():c()}}start(){this.started=!0,this.timeout>0?this.timer=setTimeout(()=>{this.timer=null,this.clock.start()},this.timeout):this.clock.start()}stop(){this.started=!1,this.clock.stop(),this.timer&&(clearTimeout(this.timer),this.timer=null)}isStarted(){return this.started}updateInterval(r){this.interval=r,this.clock.setInterval(r)}destroy(){this.clock&&(this.stop(),this.clock.destroy(),this.clock=null),this.started=!1,this.task=this.timeout=this.interval=null}}},7903:(g,p,t)=>{t.r(p),t.d(p,{default:()=>r});var e=t(134),i=t(4624),n="src\\common\\timer\\workerSetTimeoutTask.ts";class s{constructor(d){(0,e.A)(this,"worker",void 0),this.worker=d,this.handleEvents()}handleEvents(){this.worker.addEventListener("message",d=>{var c;let l=d.data.data;setTimeout(()=>{this.worker.postMessage({type:"pong",id:l.id})},Math.max((c=l.timeout)!==null&&c!==void 0?c:0,4))})}}function r(a){try{new s(a)}catch{i.z3("new WorkerSetTimeout failed",n,32)}}},72739:(g,p,t)=>{t.d(p,{$r:()=>l,El:()=>h,TF:()=>d,VC:()=>a,__:()=>s,zy:()=>c});var e=t(67672),i=t(10576),n=t(56401);function s(o,u,f){if(!o)return;const{length:v}=o;if(v)if(f)for(let y=v-1;y>=0&&u(o[y],y)!==i.W8;y--);else for(let y=0;y<v&&u(o[y],y)!==i.W8;y++);}function r(o,u){o[o.length]=u}function a(o,u){(function(f,v,y){e.YO(v)?s(v,function(A){y(f,A)}):y(f,v)})(o,u,r)}function d(o,u,f){let v=0;return s(o,function(y,A){(f===i.W8?y==u:y===u)&&(o.splice(A,1),v++)},i.rT),v}function c(o,u,f){return function(v,y,A){let w=i.Cy;return s(v,function(k,T){if(A===i.W8?k==y:k===y)return w=T,i.W8}),w}(o,u,f)>=0}function l(o){return e.YO(o)?o:(0,n.A)(i.Ml.slice,o)}function h(o,u){let f=0,v=o.length-1,y=-1;for(;f<=v;){let A=(f+v)/2>>>0;const w=u(o[A]);if(w===0){y=A;break}w===1?f=A+1:(v=A-1,y=A)}return y}},90932:(g,p,t)=>{t.d(p,{l:()=>i});const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";function i(n,s=!0){const r=n.length;let a=0,d=0,c="";for(let l=0;l<r;l++)for(d=d<<8|n[l],a+=8;a>=5;)c+=e[d>>>a-5&31],a-=5;if(a>0&&(c+=e[d<<5-a&31]),s)for(;c.length%8!=0;)c+="=";return c}},4919:(g,p,t)=>{t.d(p,{E_:()=>n});var e=t(72739);const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(s){const r=typeof atob=="function"?atob(s):function(d){function c(h){const o=i.indexOf(h);return o===-1?0:o}let l="";for(let h=0;h<d.length;){const o=c(d[h++]),u=c(d[h++]),f=c(d[h++]),v=c(d[h++]),y=o<<2|u>>4,A=(15&u)<<4|f>>2,w=(3&f)<<6|v;l+=String.fromCharCode(y),f!==64&&(l+=String.fromCharCode(A)),v!==64&&(l+=String.fromCharCode(w))}return l}(s),a=new Uint8Array(r.length);for(let d=0;d<r.length;d++)a[d]=r.charCodeAt(d);return a}e.__(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],(s,r)=>{})},43607:(g,p,t)=>{function e(s){return s>0?s:-s}function i(s,r){return s>r?s:r}function n(s,r){return s>r?r:s}t.d(p,{T9:()=>i,jk:()=>n,tn:()=>e})},86834:(g,p,t)=>{t.d(p,{A:()=>o});var e=t(29967),i=t.n(e),n=t(72739),s=t(67672),r=t(84504);function a(u){return s.Yj(u)&&u.split(".").shift()||""}const d=[["alipay",/alipay/],["wechat",/micromessenger/],["dingtalk",/dingtalk[ \/]([\d_.]+)/],["baiduApp",/baiduboxapp/],["baidu",/baidubrowser/],["baidu",/bdbrowser/],["uc",/ucbrowser/],["uc",/ucweb/],["qq",/qqbrowser/],["qqApp",/qq/],["ie",/iemobile[ \/]([\d_.]+)/],["ie",/msie[ \/]([\d_.]+)/],["ie",/trident[ \/]([\d_.]+)/,4],["edge",/edge[ \/]([\d_.]+)/],["newEdge",/edg[ \/]([\d_.]+)/],["chrome",/chrome[ \/]([\d_.]+)/],["firefox",/firefox[ \/]([\d_.]+)/],["opera",/opera(?:.*version)?[ \/]([\d_.]+)/],["safari",/version[ \/]([\d_.]+) safari/],["safari",/version[ \/]([\d_.]+) \S* safari/],["safari",/safari/]],c={},l={},h=function(u){let f,v;return(0,n.__)(d,y=>{let A=y[1].exec(u);if(A)return f=y[0],v=A[1],v&&(v=v.replace(/_/g,"."),y[2]&&(v=i()(v,10)+y[2]+".0")),!1}),{name:f||"",version:v||"",majorVersion:(c[f]||a)(v),checkVersion:l[f]||r.A}}((typeof navigator=="object"&&navigator.userAgent||"").toLowerCase());h.name&&(h[h.name]=!0);const o=h},10576:(g,p,t)=>{t.d(p,{Cq:()=>r,Cy:()=>d,M_:()=>u,Ml:()=>y,TK:()=>f,W8:()=>s,ZG:()=>h,ZH:()=>a,aV:()=>c,jf:()=>o,rT:()=>n,s0:()=>l,u1:()=>A,x7:()=>v});var e=t(7403),i=t.n(e);const n=!0,s=!1,r=null,a=void 0,d=-1,c="undefined",l="function",h=".",o=typeof window!==c?window:a,u=typeof globalThis!==c?globalThis:typeof t.g!==c?t.g:o,f=typeof self!==c?self:u,v=function(){},y=(i()({}),i()([])),A=""},67672:(g,p,t)=>{t.d(p,{Ik:()=>c,Pc:()=>a,YO:()=>d,Yj:()=>l,ai:()=>h,o:()=>o,sH:()=>f,sv:()=>v,zM:()=>u});var e=t(68632),i=t.n(e),n=t(88032),s=t.n(n),r=t(10576);function a(y){return typeof y===r.s0}function d(y){return i()(y)}function c(y){return y!==r.Cq&&typeof y=="object"}function l(y){return typeof y=="string"}function h(y){return typeof y=="number"&&!isNaN(y)}function o(y){return typeof y=="bigint"}function u(y){return typeof y=="boolean"}function f(y){return h(y)||l(y)&&!isNaN(s()(y))&&isFinite(+y)}function v(y){return y instanceof ArrayBuffer}},10534:(g,p,t)=>{t.d(p,{__:()=>n});var e=t(10576);const i={};function n(s,r){const a=i.hasOwnProperty(s)?i[s]:i[s]=s.split(e.ZG);for(let d=0,c=a.length-1;d<=c&&r(a[d],d===c)!==e.W8;d++);}},4624:(g,p,t)=>{t.d(p,{R8:()=>k,V$:()=>v,Yz:()=>A,h2:()=>P,pq:()=>w,rD:()=>r,z3:()=>T});var e=t(10576),i=t(62100);const n=0,s=1,r=2,a=3,d=4,c=5,l=typeof console!==e.aV?console:e.Cq,h=/common/.test((0,i.A)(e.x7))?r:a,o=(e.jf&&/edge|msie|trident/i.test(e.jf.navigator.userAgent),e.u1),u=l?o?function(b,x,I){l.log(o+b,I,x)}:function(b,x){l.log(b,x)}:e.x7;function f(){if(e.M_){const b=e.TK.COMMON_LOG_LEVEL;if(b>=n&&b<=c)return b}return h}function v(b){e.TK.COMMON_LOG_LEVEL=b}function y(b){return`background-color:${b};border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;`}function A(b,x,I){f()<=s&&u(`[${arguments[1]}][line ${arguments[2]}] [debug]`,b,y("#999"))}function w(b,x,I){f()<=r&&u(`[${arguments[1]}][line ${arguments[2]}] [info]`,b,y("#2db7f5"))}function k(b,x,I){f()<=a&&u(`[${arguments[1]}][line ${arguments[2]}] [warn]`,b,y("#f90"))}function T(b,x,I){f()<=d&&u(`[${arguments[1]}][line ${arguments[2]}] [error]`,b,y("#ed4014"))}function P(b,x,I){if(f()<=c)throw T(b,x,I),new Error(`[${arguments[1]}][line ${arguments[2]}] [fatal]: ${b}`)}},95335:(g,p,t)=>{t.d(p,{C:()=>d,X$:()=>a,__:()=>s}),t(69736);var e=t(67672),i=t(72739),n=t(10576);function s(c,l){for(let h in c)if(l(c[h],h)===n.W8)break}function r(c,l){return e.Ik(c)?(e.Ik(l)&&s(l,function(h,o){c[o]=h}),c):l}function a(c,l,h){return r(r(c,l),h)}function d(c,l){let h=c;return e.YO(c)?l?(h=[],i.__(c,function(o,u){h[u]=d(o,l)})):h=c.slice():e.Ik(c)&&(h={},s(c,function(o,u){h[u]=l?d(o,l):o})),h}},44690:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(72739);const i=[["iphone",/iphone os ([\d_.]+)/],["ipad",/ipad; cpu os ([\d_.]+)/],["itouch",/itouch; cpu os ([\d_.]+)/],["android",/android ([\d_.]+)/],["wp",/windows phone ([\d_.]+)/],["windows",/windows nt ([\d_.]+)/],["linux",/linux/],["mac",/mac os x ([\d_.]+)/]],n=function(r){let a,d;return(0,e.__)(i,c=>{let l=c[1].exec(r);if(l)return a=c[0],d=l[1],d&&(d=d.replace(/_/g,".")),!1}),{name:a||"",version:d||""}}((typeof navigator=="object"&&navigator.userAgent||"").toLowerCase());n.name&&(n[n.name]=!0,{iphone:1,ipad:1,itouch:1}[n.name]&&(n.ios=!0));const s=n},20525:(g,p,t)=>{t.d(p,{GP:()=>l,di:()=>a,qh:()=>d,zy:()=>c});var e=t(29967),i=t.n(e),n=t(67672),s=t(10576),r=t(62100);function a(h,o,u){return n.ai(u)?o===u?s.u1:h.slice(o,u):h.slice(o)}function d(h,o,u){return h.indexOf(o,u!==s.ZH?u:0)}function c(h,o){return d(h,o)>=0}function l(h,...o){let u=0;const f=o.length;return h.replace(/(%[sdvx%])|(%0(\d)+[dx])/g,v=>{if(u>=f)return v;const y=o[u++];if(/%0(\d)+[dx]/g.test(v)){const A=i()(v.substring(1));let w=v[v.length-1]==="d"?(0,r.A)(Number(y)):Number(y).toString(16);return A>w.length&&(w=new Array(A-w.length).fill("0").join("")+w),w}switch(v){case"%%":return"%";case"%s":return String(y);case"%d":return(0,r.A)(Number(y));case"%v":return"";case"%x":return Number(y).toString(16)}return v})}},95797:(g,p,t)=>{t.d(p,{A:()=>i});var e=t(86834);const i=function(){let n=typeof Blob=="function",s=typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function",r=typeof fetch=="function",a=typeof document=="object"&&document.createElement("canvas"),d=a&&!!a.getContext("webgl"),c=typeof OffscreenCanvas=="function",l=typeof Worker=="function",h=typeof ArrayBuffer=="function",o=typeof Atomics=="object",u=typeof AudioContext=="function"||typeof webkitAudioContext=="function",f=typeof AudioWorklet=="function",v=typeof VideoDecoder=="function",y=typeof VideoEncoder=="function",A=typeof AudioDecoder=="function",w=typeof AudioEncoder=="function",k=typeof SharedArrayBuffer=="function",T=typeof MediaSource=="function"||typeof ManagedMediaSource=="function",P=typeof Proxy=="function",b=l&&k&&o&&P;e.A.safari&&!e.A.checkVersion(e.A.majorVersion,"11",!0)&&(s=!1),e.A.chrome&&!e.A.checkVersion(e.A.majorVersion,"94",!0)&&(v=!1,A=!1),e.A.safari&&!e.A.checkVersion(e.A.majorVersion,"17",!0)&&(v=!1);let x=typeof navigator=="object"&&typeof navigator.gpu=="object",I=typeof MediaSourceHandle=="function",S=s&&typeof WebAssembly.Global=="function";return{browser:e.A,blob:n,wasm:s,fetch:r,webgl:d,worker:l,mse:T,arrayBuffer:h,audioContext:u,audioWorklet:f,videoDecoder:v,videoEncoder:y,audioDecoder:A,audioEncoder:w,atomics:o,shareArrayBuffer:k,thread:b,webgpu:x,offscreenCanvas:c,workerMSE:I,webAssemblyGlobal:S,proxy:P,simd:(e.A.chrome||e.A.newEdge)&&e.A.checkVersion(e.A.majorVersion,"91",!0)||e.A.firefox&&e.A.checkVersion(e.A.majorVersion,"89",!0)||e.A.safari&&e.A.checkVersion(e.A.version,"16.4",!0),wasmBaseSupported:r&&s&&d&&u&&h&&S}}()},50011:(g,p,t)=>{t.d(p,{D:()=>s,l:()=>n});const e=typeof TextEncoder=="function"?new TextEncoder:null,i=typeof TextDecoder=="function"?new TextDecoder:null;function n(r){if(e)return e.encode(r);const a=[];for(let d=0;d<r.length;++d){let c=r.charCodeAt(d);c>=55296&&c<=57343&&(c=65536+((1023&c)<<10)|1023&r.charCodeAt(++d)),c<=127?a.push(c):c<=2047?(a.push(192|c>>6),a.push(128|63&c)):c<=65535?(a.push(224|c>>12),a.push(128|c>>6&63),a.push(128|63&c)):(a.push(240|c>>18),a.push(128|c>>12&63),a.push(128|c>>6&63),a.push(128|63&c))}return new Uint8Array(a)}function s(r){if(r instanceof Uint8Array&&i&&!(typeof SharedArrayBuffer=="function"&&r.buffer instanceof SharedArrayBuffer))return i.decode(r);let a="";for(let d=0;d<r.length;){let c=r[d++>>>0];if(!(128&c)){a+=String.fromCharCode(c);continue}let l=63&r[d++>>>0];if((224&c)==192){a+=String.fromCharCode((31&c)<<6|l);continue}let h=63&r[d++>>>0];if(c=(240&c)==224?(15&c)<<12|l<<6|h:(7&c)<<18|l<<12|h<<6|63&r[d++>>>0],c<65536)a+=String.fromCharCode(c);else{let o=c-65536;a+=String.fromCharCode(55296|o>>10,56320|1023&o)}}return a}},8507:(g,p,t)=>{function e(h){const o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],u={},f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(h);let v=14;for(;v--;){var y;u[o[v]]=(y=f[v])!==null&&y!==void 0?y:""}return{protocol:u.protocol,file:u.file,host:u.host,port:u.port,user:u.user,password:u.password,origin:`${u.protocol}://${u.authority}`,pathname:u.path,search:`?${u.query}`,hash:u.anchor?`#${u.anchor}`:""}}t.d(p,{ll:()=>l,qg:()=>e}),t(73146);const i=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s=/^(?=([^\/?#]*))\1([^]*)$/,r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/;function a(h){return h.scheme+h.netLoc+h.path+h.params+h.query+h.fragment}function d(h){const o=r.exec(h);return o?{scheme:o[1]||"",netLoc:o[2]||"",path:o[3]||"",params:o[4]||"",query:o[5]||"",fragment:o[6]||""}:null}function c(h){for(h=h.split("").reverse().join("").replace(i,"");h.length!==(h=h.replace(n,"")).length;);return h.split("").reverse().join("")}function l(h,o,u){if(u=u||{},h=h.trim(),!(o=o.trim())){if(!u.alwaysNormalize)return h;let A=d(h);if(!A)throw new Error("Error trying to parse base URL.");return A.path=c(A.path),a(A)}let f=d(o);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return u.alwaysNormalize?(f.path=c(f.path),a(f)):o;let v=d(h);if(!v)throw new Error("Error trying to parse base URL.");if(!v.netLoc&&v.path&&v.path[0]!=="/"){let A=s.exec(v.path);v.netLoc=A[1],v.path=A[2]}v.netLoc&&!v.path&&(v.path="/");const y={scheme:v.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(y.netLoc=v.netLoc,f.path[0]!=="/"))if(f.path){let A=v.path,w=A.substring(0,A.lastIndexOf("/")+1)+f.path;y.path=c(w)}else y.path=v.path,f.params||(y.params=v.params,f.query||(y.query=v.query));return y.path===null&&(y.path=u.alwaysNormalize?c(f.path):f.path),a(y)}},88096:(g,p,t)=>{t.d(p,{$z:()=>d,DD:()=>c,Ee:()=>r,GG:()=>n,p7:()=>a});var e=t(31865);function i(l){let h=0,o=0;for(;;){const u=l.readUint8();if(h|=(127&u)<<o,o+=7,!(128&u))break}return h}async function n(l){let h=0,o=0;for(;;){const u=await l.readUint8();if(h|=(127&u)<<o,o+=7,!(128&u))break}return h}function s(l){let h,o=0,u=0;for(;h=l.readUint8(),o|=(127&h)<<u,u+=7,128&h;);return 64&h&&(o|=-1<<u),o}async function r(l){let h,o=0,u=0;for(;h=await l.readUint8(),o|=(127&h)<<u,u+=7,128&h;);return 64&h&&(o|=-1<<u),o}async function a(l,h){let o=!0;for(;o;){let u=127&h;(h>>=7)==0&&!(64&u)||h===-1&&64&u?o=!1:u|=128,await l.writeUint8(u)}}async function d(l,h){do{let o=127&h;(h>>=7)!=0&&(o|=128),await l.writeUint8(o)}while(h!==0)}function c(l,h){const o=new e.A(l,!0);for(o.skip(8);o.remainingSize();){const u=o.readUint8(),f=i(o);if(u===2){let v=i(o);for(;v--;){const y=i(o);o.skip(y);const A=i(o);switch(o.skip(A),o.readUint8()){case 0:i(o);break;case 3:s(o),i(o);break;case 2:{const w=Number(o.getPos());return void(l[w]=h?2|l[w]:-3&l[w])}case 1:{s(o);const w=i(o);i(o),1&w&&i(o);break}}}return}o.skip(f)}}},79331:(g,p,t)=>{t.d(p,{A:()=>s});var e=t(68632),i=t.n(e);const n={aloneValueName:"_@attribute"};function s(a,d=n){const c={...n,...d};return function(l,h){const o={};let u;for(;u=l.match(/<[^\/][^>]*>/);){let f,v=u[0],y=v.substring(1,v.length-1),A=l.indexOf(v.replace("<","</"));A==-1&&(f=v.match(/[^<][\S+$]*/))&&(y=f[0],A=l.indexOf("</"+y),A==-1&&(A=l.indexOf("<\\/"+y)));let w=l.substring(v.length,A);const k=w.match(/<[^\/][^>]*>/)?s(w,h):w;o[y]===void 0?o[y]=k:i()(o[y])?o[y].push(k):o[y]=[o[y],k],l=l.substring(2*v.length+1+w.length)}return o}(a=function(l,h){return l=function(o,u){const f=o.match(/<[^\/][^>][^<]+\s+.[^<]+[=][^<]+>([^<]+)/g);if(!f)return o;for(let v=0;v<f.length;v++){const y=f[v],A=y.substring(0,y.indexOf(">")+1)+"<"+u+">"+y.substring(y.indexOf(">")+1)+"</"+u+">";o=o.replace(y,A)}return o}(l=function(o){const u=o.match(/<[^/][^>]*\/>/g);if(!u)return o;for(let f=0;f<u.length;f++){const v=u[f],y=v.match(/[^<][\S+$]*/);if(y){const A=y[0],w="</"+A+">",k=r(A,v)+w;o=o.replace(v,k)}}return o}(l=(l=(l=(l=l.replace(/<!--[\s\S]*?-->/g,"")).replace(/[\n\t\r]/g,"")).replace(/>[ \t]+</g,"><")).replace(/<\?[^>]*\?>/g,"")),h),l=function(o){const u=o.match(/<[^\/><]\S+\s+[^<]+[=][^<]+>/g);if(!u)return o;for(let f=0;f<u.length;f++){const v=u[f],y=v.match(/[^<]\S*/);if(y){const A=r(y[0],v);o=o.replace(v,A)}}return o}(l)}(a,c.aloneValueName),c)}function r(a,d){let c="<"+a+">";const l=d.match(/([^"'\s]+)\s*=\s*((?:"[^"]+")|(?:'[^']+'))/g);if(!l)return c;for(let h=0;h<l.length;h++){const o=l[h],u=o.substring(0,o.indexOf("=")).trim(),f=o[o.length-1];c+="<"+u+">"+o.substring(o.indexOf(f)+1,o.lastIndexOf(f))+"</"+u+">"}return c}},34268:(g,p,t)=>{var e=t(134),i=t(54001),n=t.n(i),s=t(84149),r=t(87503),a=t(67672),d=t(4624);class c extends r.A{constructor(){super(),(0,e.A)(this,"pullIPC",void 0),(0,e.A)(this,"frontBuffer",void 0),(0,e.A)(this,"backBuffer",void 0),(0,e.A)(this,"channels",void 0),(0,e.A)(this,"backBufferOffset",void 0),(0,e.A)(this,"ended",void 0),(0,e.A)(this,"frontBuffered",void 0),(0,e.A)(this,"pause",void 0),(0,e.A)(this,"firstRendered",void 0),(0,e.A)(this,"stopped",void 0),(0,e.A)(this,"afterPullResolve",void 0),this.ipcPort.on(s.S3,async h=>{switch(h.method){case"init":this.ipcPort.reply(h);break;case"start":{const{port:o,channels:u}=h.params;this.channels=u,this.pullIPC=new s.Ay(o);const f=[],v=[];await this.pull(f),await this.pull(v),this.frontBuffer=v,this.backBuffer=f,this.backBufferOffset=0,this.ended=!1,this.frontBuffered=!0,this.pause=!1,this.firstRendered=!1,this.stopped=!1,this.ipcPort.reply(h);break}case"restart":{if(!this.ended)return void this.ipcPort.reply(h);const o=[],u=[];await this.pull(o),await this.pull(u),this.frontBuffer=u,this.backBuffer=o,this.backBufferOffset=0,this.ended=!1,this.frontBuffered=!0,this.pause=!1,this.firstRendered=!1,this.stopped=!1,this.ipcPort.reply(h);break}case"clear":this.backBufferOffset=40,this.ipcPort.reply(h);break;case"stop":this.ended||await new(n())(o=>{this.afterPullResolve=o}),this.stopped=!0,this.pullIPC.destroy(),this.ipcPort.reply(h);break;case"pause":this.pause=!0,this.ipcPort.reply(h);break;case"unpause":this.pause=!1,this.ipcPort.reply(h)}})}async pull(h){const o=await this.pullIPC.request("pullBuffer",{nbSamples:5120});if(a.ai(o))this.ended=!0;else{const u=new Float32Array(o);for(let f=0;f<this.channels;f++)h[f]=u.subarray(40*f*128,40*(f+1)*128)}this.afterPullResolve&&this.afterPullResolve()}swapBuffer(){return!!this.frontBuffered&&(this.backBuffer=this.frontBuffer,this.backBufferOffset=0,this.frontBuffer=[],this.frontBuffered=!1,this.pull(this.frontBuffer).then(()=>{this.frontBuffered=!0}),!0)}process(h,o,u){if(this.stopped)return!1;if(this.backBuffer&&!this.pause){if(this.backBufferOffset===40){if(this.ended)return this.backBuffer=null,this.frontBuffer=null,d.pq("audio source ended","src\\avrender\\pcm\\AudioSourceWorkletProcessor.ts",197),this.ipcPort.notify("ended"),!0;if(!this.swapBuffer())return this.ipcPort.notify("stutter"),!0}const f=o[0];for(let v=0;v<this.channels;v++)f[v].set(this.backBuffer[v].subarray(128*this.backBufferOffset,128*(this.backBufferOffset+1)),0);this.backBufferOffset++,this.firstRendered||(this.firstRendered=!0,this.ipcPort.notify("firstRendered"))}return!0}}registerProcessor("audio-source-processor",c)},5676:(g,p,t)=>{var e=t(134),i=t(54001),n=t.n(i),s=t(63939),r=t(50932),a=t(84149),d=t(87503),c=t(11473),l=t(37837),h=t(4624);class o extends d.A{constructor(){super(),(0,e.A)(this,"pullIPC",void 0),(0,e.A)(this,"frontBuffer",void 0),(0,e.A)(this,"backBuffer",void 0),(0,e.A)(this,"channels",void 0),(0,e.A)(this,"backBufferOffset",void 0),(0,e.A)(this,"ended",void 0),(0,e.A)(this,"frontBuffered",void 0),(0,e.A)(this,"firstRendered",void 0),(0,e.A)(this,"float32",void 0),(0,e.A)(this,"pause",void 0),(0,e.A)(this,"stopped",void 0),(0,e.A)(this,"afterPullResolve",void 0),this.ipcPort.on(a.S3,async f=>{switch(f.method){case"init":{const{memory:v}=f.params;await(0,c.Tg)({memory:v,disableAsm:!0}),this.ipcPort.reply(f);break}case"start":{const{port:v,channels:y}=f.params;this.channels=y,this.pullIPC=new a.Ay(v);const A=this.allocBuffer(),w=this.allocBuffer();await this.pullIPC.request("pull",{buffer:w}),await this.pullIPC.request("pull",{buffer:A}),this.frontBuffer=A,this.backBuffer=w,this.backBufferOffset=0,this.ended=!1,this.pause=!1,this.frontBuffered=!0,this.firstRendered=!1,this.stopped=!1,this.float32=new Float32Array((0,c.eq)().buffer),this.ipcPort.reply(f);break}case"restart":{if(!this.ended)return void this.ipcPort.reply(f);const v=this.allocBuffer(),y=this.allocBuffer();await this.pullIPC.request("pull",{buffer:y}),await this.pullIPC.request("pull",{buffer:v}),this.frontBuffer=v,this.backBuffer=y,this.backBufferOffset=0,this.ended=!1,this.pause=!1,this.frontBuffered=!0,this.firstRendered=!1,this.stopped=!1,this.float32=new Float32Array((0,c.eq)().buffer),this.ipcPort.reply(f);break}case"stop":this.ended||await new(n())(v=>{this.afterPullResolve=v}),this.freeBuffer(this.backBuffer),this.freeBuffer(this.frontBuffer),this.backBuffer=0,this.frontBuffer=0,this.stopped=!0,this.pullIPC.destroy(),this.ipcPort.reply(f);break;case"clear":this.backBufferOffset=40,this.ipcPort.reply(f);break;case"pause":this.pause=!0,this.ipcPort.reply(f);break;case"unpause":this.pause=!1,this.ipcPort.reply(f)}})}allocBuffer(){const f=(0,l.Gy)(40);r.M[20](f,(0,l.Gy)(4*this.channels));const v=(0,l.Gy)(20480*this.channels);for(let y=0;y<this.channels;y++)r.M[20](s.f[20](f)+4*y,v+20480*y);return r.M[15](f+8,5120),f}freeBuffer(f){f&&((0,l.aI)(s.f[20](f)),(0,l.aI)(f),(0,l.Eb)(f))}async pull(){await this.pullIPC.request("pull",{buffer:this.frontBuffer})<0&&(this.ended=!0),this.afterPullResolve&&this.afterPullResolve()}swapBuffer(){if(!this.frontBuffered)return!1;{const f=this.backBuffer;this.backBuffer=this.frontBuffer,this.frontBuffer=f,this.backBufferOffset=0}return this.frontBuffered=!1,this.pull().then(()=>{this.frontBuffered=!0}),!0}process(f,v,y){if(this.stopped)return!1;if(this.backBuffer&&!this.pause){if(this.backBufferOffset===40){if(this.ended)return this.freeBuffer(this.backBuffer),this.freeBuffer(this.frontBuffer),this.backBuffer=0,this.frontBuffer=0,h.pq("audio source ended","src\\avrender\\pcm\\AudioSourceWorkletProcessor2.ts",240),this.ipcPort.notify("ended"),!0;if(!this.swapBuffer())return this.ipcPort.notify("stutter"),!0}const A=v[0];for(let w=0;w<this.channels;w++)A[w].set(this.float32.subarray((s.f[20](s.f[20](this.backBuffer)+4*w)>>>2)+128*this.backBufferOffset,(s.f[20](s.f[20](this.backBuffer)+4*w)>>>2)+128*(this.backBufferOffset+1)),0);this.backBufferOffset++,this.firstRendered||(this.firstRendered=!0,this.ipcPort.notify("firstRendered"))}return!0}}registerProcessor("audio-source-processor",o)},87503:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(134),i=t(84149);class n extends AudioWorkletProcessor{constructor(){super(),(0,e.A)(this,"ipcPort",void 0),this.ipcPort=new i.Ay(this.port)}async request(r,a,d){return this.ipcPort.request(r,a,d)}notify(r,a,d){this.ipcPort.notify(r,a,d)}}},37149:(g,p,t)=>{t(18355),g.exports=t(46438).Array.isArray},87172:(g,p,t)=>{t(23204),g.exports=t(46438).Date.now},85079:(g,p,t)=>{var e=t(46438),i=e.JSON||(e.JSON={stringify:JSON.stringify});g.exports=function(n){return i.stringify.apply(i,arguments)}},92861:(g,p,t)=>{t(78978),t(97863),t(7914),t(96050),t(28337),t(74674),t(62223),g.exports=t(46438).Map},63342:(g,p,t)=>{t(5882),g.exports=t(46438).Number.isInteger},11837:(g,p,t)=>{t(21489),g.exports=t(46438).Number.isNaN},19737:(g,p,t)=>{t(56477),g.exports=t(46438).Number.parseFloat},58886:(g,p,t)=>{t(15706),g.exports=t(46438).Number.parseInt},92696:(g,p,t)=>{t(74712);var e=t(46438).Object;g.exports=function(i,n,s){return e.defineProperty(i,n,s)}},22948:(g,p,t)=>{t(51780),g.exports=t(46438).Object.freeze},62160:(g,p,t)=>{t(18128),g.exports=t(46438).Object.getPrototypeOf},47567:(g,p,t)=>{t(96847),g.exports=t(46438).Object.keys},21724:(g,p,t)=>{t(4284),g.exports=t(46438).Object.setPrototypeOf},27279:(g,p,t)=>{t(95828),g.exports=t(46438).parseFloat},25216:(g,p,t)=>{t(65331),g.exports=t(46438).parseInt},34750:(g,p,t)=>{t(78978),t(97863),t(7914),t(91229),t(2639),t(46121),g.exports=t(46438).Promise},31707:(g,p,t)=>{t(66801),g.exports=t(46438).setImmediate},28795:(g,p,t)=>{t(78978),t(97863),t(7914),t(21640),t(871),t(52584),t(98345),g.exports=t(46438).Set},16560:(g,p,t)=>{t(19626),t(78978),t(42860),t(60716),g.exports=t(46438).Symbol},54220:(g,p,t)=>{t(97863),t(7914),g.exports=t(84336).f("iterator")},39967:(g,p,t)=>{g.exports=t(84336).f("toPrimitive")},25219:g=>{g.exports=function(p){if(typeof p!="function")throw TypeError(p+" is not a function!");return p}},12560:g=>{g.exports=function(){}},2832:g=>{g.exports=function(p,t,e,i){if(!(p instanceof t)||i!==void 0&&i in p)throw TypeError(e+": incorrect invocation!");return p}},80812:(g,p,t)=>{var e=t(24401);g.exports=function(i){if(!e(i))throw TypeError(i+" is not an object!");return i}},77076:(g,p,t)=>{var e=t(95838);g.exports=function(i,n){var s=[];return e(i,!1,s.push,s,n),s}},84448:(g,p,t)=>{var e=t(65133),i=t(70181),n=t(72917);g.exports=function(s){return function(r,a,d){var c,l=e(r),h=i(l.length),o=n(d,h);if(s&&a!=a){for(;h>o;)if((c=l[o++])!=c)return!0}else for(;h>o;o++)if((s||o in l)&&l[o]===a)return s||o||0;return!s&&-1}}},48219:(g,p,t)=>{var e=t(58852),i=t(7001),n=t(66310),s=t(70181),r=t(99244);g.exports=function(a,d){var c=a==1,l=a==2,h=a==3,o=a==4,u=a==6,f=a==5||u,v=d||r;return function(y,A,w){for(var k,T,P=n(y),b=i(P),x=e(A,w,3),I=s(b.length),S=0,z=c?v(y,I):l?v(y,0):void 0;I>S;S++)if((f||S in b)&&(T=x(k=b[S],S,P),a)){if(c)z[S]=T;else if(T)switch(a){case 3:return!0;case 5:return k;case 6:return S;case 2:z.push(k)}else if(o)return!1}return u?-1:h||o?o:z}}},49742:(g,p,t)=>{var e=t(24401),i=t(15461),n=t(30254)("species");g.exports=function(s){var r;return i(s)&&(typeof(r=s.constructor)!="function"||r!==Array&&!i(r.prototype)||(r=void 0),e(r)&&(r=r[n])===null&&(r=void 0)),r===void 0?Array:r}},99244:(g,p,t)=>{var e=t(49742);g.exports=function(i,n){return new(e(i))(n)}},44968:(g,p,t)=>{var e=t(93417),i=t(30254)("toStringTag"),n=e(function(){return arguments}())=="Arguments";g.exports=function(s){var r,a,d;return s===void 0?"Undefined":s===null?"Null":typeof(a=function(c,l){try{return c[l]}catch{}}(r=Object(s),i))=="string"?a:n?e(r):(d=e(r))=="Object"&&typeof r.callee=="function"?"Arguments":d}},93417:g=>{var p={}.toString;g.exports=function(t){return p.call(t).slice(8,-1)}},95933:(g,p,t)=>{var e=t(78423).f,i=t(22087),n=t(30953),s=t(58852),r=t(2832),a=t(95838),d=t(88839),c=t(20322),l=t(45274),h=t(58219),o=t(75172).fastKey,u=t(6096),f=h?"_s":"size",v=function(y,A){var w,k=o(A);if(k!=="F")return y._i[k];for(w=y._f;w;w=w.n)if(w.k==A)return w};g.exports={getConstructor:function(y,A,w,k){var T=y(function(P,b){r(P,T,A,"_i"),P._t=A,P._i=i(null),P._f=void 0,P._l=void 0,P[f]=0,b!=null&&a(b,w,P[k],P)});return n(T.prototype,{clear:function(){for(var P=u(this,A),b=P._i,x=P._f;x;x=x.n)x.r=!0,x.p&&(x.p=x.p.n=void 0),delete b[x.i];P._f=P._l=void 0,P[f]=0},delete:function(P){var b=u(this,A),x=v(b,P);if(x){var I=x.n,S=x.p;delete b._i[x.i],x.r=!0,S&&(S.n=I),I&&(I.p=S),b._f==x&&(b._f=I),b._l==x&&(b._l=S),b[f]--}return!!x},forEach:function(P){u(this,A);for(var b,x=s(P,arguments.length>1?arguments[1]:void 0,3);b=b?b.n:this._f;)for(x(b.v,b.k,this);b&&b.r;)b=b.p},has:function(P){return!!v(u(this,A),P)}}),h&&e(T.prototype,"size",{get:function(){return u(this,A)[f]}}),T},def:function(y,A,w){var k,T,P=v(y,A);return P?P.v=w:(y._l=P={i:T=o(A,!0),k:A,v:w,p:k=y._l,n:void 0,r:!1},y._f||(y._f=P),k&&(k.n=P),y[f]++,T!=="F"&&(y._i[T]=P)),y},getEntry:v,setStrong:function(y,A,w){d(y,A,function(k,T){this._t=u(k,A),this._k=T,this._l=void 0},function(){for(var k=this,T=k._k,P=k._l;P&&P.r;)P=P.p;return k._t&&(k._l=P=P?P.n:k._t._f)?c(0,T=="keys"?P.k:T=="values"?P.v:[P.k,P.v]):(k._t=void 0,c(1))},w?"entries":"values",!w,!0),l(A)}}},5874:(g,p,t)=>{var e=t(44968),i=t(77076);g.exports=function(n){return function(){if(e(this)!=n)throw TypeError(n+"#toJSON isn't generic");return i(this)}}},99373:(g,p,t)=>{var e=t(66670),i=t(88535),n=t(75172),s=t(81984),r=t(2677),a=t(30953),d=t(95838),c=t(2832),l=t(24401),h=t(1356),o=t(78423).f,u=t(48219)(0),f=t(58219);g.exports=function(v,y,A,w,k,T){var P=e[v],b=P,x=k?"set":"add",I=b&&b.prototype,S={};return f&&typeof b=="function"&&(T||I.forEach&&!s(function(){new b().entries().next()}))?(b=y(function(z,V){c(z,b,v,"_c"),z._c=new P,V!=null&&d(V,k,z[x],z)}),u("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(z){var V=z=="add"||z=="set";!(z in I)||T&&z=="clear"||r(b.prototype,z,function(L,C){if(c(this,b,z),!V&&T&&!l(L))return z=="get"&&void 0;var F=this._c[z](L===0?0:L,C);return V?this:F})}),T||o(b.prototype,"size",{get:function(){return this._c.size}})):(b=w.getConstructor(y,v,k,x),a(b.prototype,A),n.NEED=!0),h(b,v),S[v]=b,i(i.G+i.W+i.F,S),T||w.setStrong(b,v,k),b}},46438:g=>{var p=g.exports={version:"2.6.12"};typeof __e=="number"&&(__e=p)},58852:(g,p,t)=>{var e=t(25219);g.exports=function(i,n,s){if(e(i),n===void 0)return i;switch(s){case 1:return function(r){return i.call(n,r)};case 2:return function(r,a){return i.call(n,r,a)};case 3:return function(r,a,d){return i.call(n,r,a,d)}}return function(){return i.apply(n,arguments)}}},87608:g=>{g.exports=function(p){if(p==null)throw TypeError("Can't call method on  "+p);return p}},58219:(g,p,t)=>{g.exports=!t(81984)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},3802:(g,p,t)=>{var e=t(24401),i=t(66670).document,n=e(i)&&e(i.createElement);g.exports=function(s){return n?i.createElement(s):{}}},77956:g=>{g.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},36473:(g,p,t)=>{var e=t(54311),i=t(59820),n=t(36569);g.exports=function(s){var r=e(s),a=i.f;if(a)for(var d,c=a(s),l=n.f,h=0;c.length>h;)l.call(s,d=c[h++])&&r.push(d);return r}},88535:(g,p,t)=>{var e=t(66670),i=t(46438),n=t(58852),s=t(2677),r=t(75509),a="prototype",d=function(c,l,h){var o,u,f,v=c&d.F,y=c&d.G,A=c&d.S,w=c&d.P,k=c&d.B,T=c&d.W,P=y?i:i[l]||(i[l]={}),b=P[a],x=y?e:A?e[l]:(e[l]||{})[a];for(o in y&&(h=l),h)(u=!v&&x&&x[o]!==void 0)&&r(P,o)||(f=u?x[o]:h[o],P[o]=y&&typeof x[o]!="function"?h[o]:k&&u?n(f,e):T&&x[o]==f?function(I){var S=function(z,V,L){if(this instanceof I){switch(arguments.length){case 0:return new I;case 1:return new I(z);case 2:return new I(z,V)}return new I(z,V,L)}return I.apply(this,arguments)};return S[a]=I[a],S}(f):w&&typeof f=="function"?n(Function.call,f):f,w&&((P.virtual||(P.virtual={}))[o]=f,c&d.R&&b&&!b[o]&&s(b,o,f)))};d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,g.exports=d},81984:g=>{g.exports=function(p){try{return!!p()}catch{return!0}}},95838:(g,p,t)=>{var e=t(58852),i=t(27904),n=t(12828),s=t(80812),r=t(70181),a=t(55298),d={},c={},l=g.exports=function(h,o,u,f,v){var y,A,w,k,T=v?function(){return h}:a(h),P=e(u,f,o?2:1),b=0;if(typeof T!="function")throw TypeError(h+" is not iterable!");if(n(T)){for(y=r(h.length);y>b;b++)if((k=o?P(s(A=h[b])[0],A[1]):P(h[b]))===d||k===c)return k}else for(w=T.call(h);!(A=w.next()).done;)if((k=i(w,P,A.value,o))===d||k===c)return k};l.BREAK=d,l.RETURN=c},66670:g=>{var p=g.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=p)},75509:g=>{var p={}.hasOwnProperty;g.exports=function(t,e){return p.call(t,e)}},2677:(g,p,t)=>{var e=t(78423),i=t(86260);g.exports=t(58219)?function(n,s,r){return e.f(n,s,i(1,r))}:function(n,s,r){return n[s]=r,n}},76260:(g,p,t)=>{var e=t(66670).document;g.exports=e&&e.documentElement},32484:(g,p,t)=>{g.exports=!t(58219)&&!t(81984)(function(){return Object.defineProperty(t(3802)("div"),"a",{get:function(){return 7}}).a!=7})},20709:g=>{g.exports=function(p,t,e){var i=e===void 0;switch(t.length){case 0:return i?p():p.call(e);case 1:return i?p(t[0]):p.call(e,t[0]);case 2:return i?p(t[0],t[1]):p.call(e,t[0],t[1]);case 3:return i?p(t[0],t[1],t[2]):p.call(e,t[0],t[1],t[2]);case 4:return i?p(t[0],t[1],t[2],t[3]):p.call(e,t[0],t[1],t[2],t[3])}return p.apply(e,t)}},7001:(g,p,t)=>{var e=t(93417);g.exports=Object("z").propertyIsEnumerable(0)?Object:function(i){return e(i)=="String"?i.split(""):Object(i)}},12828:(g,p,t)=>{var e=t(20210),i=t(30254)("iterator"),n=Array.prototype;g.exports=function(s){return s!==void 0&&(e.Array===s||n[i]===s)}},15461:(g,p,t)=>{var e=t(93417);g.exports=Array.isArray||function(i){return e(i)=="Array"}},25194:(g,p,t)=>{var e=t(24401),i=Math.floor;g.exports=function(n){return!e(n)&&isFinite(n)&&i(n)===n}},24401:g=>{g.exports=function(p){return typeof p=="object"?p!==null:typeof p=="function"}},27904:(g,p,t)=>{var e=t(80812);g.exports=function(i,n,s,r){try{return r?n(e(s)[0],s[1]):n(s)}catch(d){var a=i.return;throw a!==void 0&&e(a.call(i)),d}}},48248:(g,p,t)=>{var e=t(22087),i=t(86260),n=t(1356),s={};t(2677)(s,t(30254)("iterator"),function(){return this}),g.exports=function(r,a,d){r.prototype=e(s,{next:i(1,d)}),n(r,a+" Iterator")}},88839:(g,p,t)=>{var e=t(74742),i=t(88535),n=t(61331),s=t(2677),r=t(20210),a=t(48248),d=t(1356),c=t(66123),l=t(30254)("iterator"),h=!([].keys&&"next"in[].keys()),o="keys",u="values",f=function(){return this};g.exports=function(v,y,A,w,k,T,P){a(A,y,w);var b,x,I,S=function(D){if(!h&&D in C)return C[D];switch(D){case o:case u:return function(){return new A(this,D)}}return function(){return new A(this,D)}},z=y+" Iterator",V=k==u,L=!1,C=v.prototype,F=C[l]||C["@@iterator"]||k&&C[k],H=F||S(k),M=k?V?S("entries"):H:void 0,G=y=="Array"&&C.entries||F;if(G&&(I=c(G.call(new v)))!==Object.prototype&&I.next&&(d(I,z,!0),e||typeof I[l]=="function"||s(I,l,f)),V&&F&&F.name!==u&&(L=!0,H=function(){return F.call(this)}),e&&!P||!h&&!L&&C[l]||s(C,l,H),r[y]=H,r[z]=f,k)if(b={values:V?H:S(u),keys:T?H:S(o),entries:M},P)for(x in b)x in C||n(C,x,b[x]);else i(i.P+i.F*(h||L),y,b);return b}},27899:(g,p,t)=>{var e=t(30254)("iterator"),i=!1;try{var n=[7][e]();n.return=function(){i=!0},Array.from(n,function(){throw 2})}catch{}g.exports=function(s,r){if(!r&&!i)return!1;var a=!1;try{var d=[7],c=d[e]();c.next=function(){return{done:a=!0}},d[e]=function(){return c},s(d)}catch{}return a}},20322:g=>{g.exports=function(p,t){return{value:t,done:!!p}}},20210:g=>{g.exports={}},74742:g=>{g.exports=!0},75172:(g,p,t)=>{var e=t(19191)("meta"),i=t(24401),n=t(75509),s=t(78423).f,r=0,a=Object.isExtensible||function(){return!0},d=!t(81984)(function(){return a(Object.preventExtensions({}))}),c=function(h){s(h,e,{value:{i:"O"+ ++r,w:{}}})},l=g.exports={KEY:e,NEED:!1,fastKey:function(h,o){if(!i(h))return typeof h=="symbol"?h:(typeof h=="string"?"S":"P")+h;if(!n(h,e)){if(!a(h))return"F";if(!o)return"E";c(h)}return h[e].i},getWeak:function(h,o){if(!n(h,e)){if(!a(h))return!0;if(!o)return!1;c(h)}return h[e].w},onFreeze:function(h){return d&&l.NEED&&a(h)&&!n(h,e)&&c(h),h}}},53792:(g,p,t)=>{var e=t(66670),i=t(8036).set,n=e.MutationObserver||e.WebKitMutationObserver,s=e.process,r=e.Promise,a=t(93417)(s)=="process";g.exports=function(){var d,c,l,h=function(){var v,y;for(a&&(v=s.domain)&&v.exit();d;){y=d.fn,d=d.next;try{y()}catch(A){throw d?l():c=void 0,A}}c=void 0,v&&v.enter()};if(a)l=function(){s.nextTick(h)};else if(!n||e.navigator&&e.navigator.standalone)if(r&&r.resolve){var o=r.resolve(void 0);l=function(){o.then(h)}}else l=function(){i.call(e,h)};else{var u=!0,f=document.createTextNode("");new n(h).observe(f,{characterData:!0}),l=function(){f.data=u=!u}}return function(v){var y={fn:v,next:void 0};c&&(c.next=y),d||(d=y,l()),c=y}}},11642:(g,p,t)=>{var e=t(25219);function i(n){var s,r;this.promise=new n(function(a,d){if(s!==void 0||r!==void 0)throw TypeError("Bad Promise constructor");s=a,r=d}),this.resolve=e(s),this.reject=e(r)}g.exports.f=function(n){return new i(n)}},22087:(g,p,t)=>{var e=t(80812),i=t(90082),n=t(77956),s=t(4566)("IE_PROTO"),r=function(){},a="prototype",d=function(){var c,l=t(3802)("iframe"),h=n.length;for(l.style.display="none",t(76260).appendChild(l),l.src="javascript:",(c=l.contentWindow.document).open(),c.write("<script>document.F=Object<\/script>"),c.close(),d=c.F;h--;)delete d[a][n[h]];return d()};g.exports=Object.create||function(c,l){var h;return c!==null?(r[a]=e(c),h=new r,r[a]=null,h[s]=c):h=d(),l===void 0?h:i(h,l)}},78423:(g,p,t)=>{var e=t(80812),i=t(32484),n=t(10752),s=Object.defineProperty;p.f=t(58219)?Object.defineProperty:function(r,a,d){if(e(r),a=n(a,!0),e(d),i)try{return s(r,a,d)}catch{}if("get"in d||"set"in d)throw TypeError("Accessors not supported!");return"value"in d&&(r[a]=d.value),r}},90082:(g,p,t)=>{var e=t(78423),i=t(80812),n=t(54311);g.exports=t(58219)?Object.defineProperties:function(s,r){i(s);for(var a,d=n(r),c=d.length,l=0;c>l;)e.f(s,a=d[l++],r[a]);return s}},81033:(g,p,t)=>{var e=t(36569),i=t(86260),n=t(65133),s=t(10752),r=t(75509),a=t(32484),d=Object.getOwnPropertyDescriptor;p.f=t(58219)?d:function(c,l){if(c=n(c),l=s(l,!0),a)try{return d(c,l)}catch{}if(r(c,l))return i(!e.f.call(c,l),c[l])}},36309:(g,p,t)=>{var e=t(65133),i=t(1743).f,n={}.toString,s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];g.exports.f=function(r){return s&&n.call(r)=="[object Window]"?function(a){try{return i(a)}catch{return s.slice()}}(r):i(e(r))}},1743:(g,p,t)=>{var e=t(85081),i=t(77956).concat("length","prototype");p.f=Object.getOwnPropertyNames||function(n){return e(n,i)}},59820:(g,p)=>{p.f=Object.getOwnPropertySymbols},66123:(g,p,t)=>{var e=t(75509),i=t(66310),n=t(4566)("IE_PROTO"),s=Object.prototype;g.exports=Object.getPrototypeOf||function(r){return r=i(r),e(r,n)?r[n]:typeof r.constructor=="function"&&r instanceof r.constructor?r.constructor.prototype:r instanceof Object?s:null}},85081:(g,p,t)=>{var e=t(75509),i=t(65133),n=t(84448)(!1),s=t(4566)("IE_PROTO");g.exports=function(r,a){var d,c=i(r),l=0,h=[];for(d in c)d!=s&&e(c,d)&&h.push(d);for(;a.length>l;)e(c,d=a[l++])&&(~n(h,d)||h.push(d));return h}},54311:(g,p,t)=>{var e=t(85081),i=t(77956);g.exports=Object.keys||function(n){return e(n,i)}},36569:(g,p)=>{p.f={}.propertyIsEnumerable},47331:(g,p,t)=>{var e=t(88535),i=t(46438),n=t(81984);g.exports=function(s,r){var a=(i.Object||{})[s]||Object[s],d={};d[s]=r(a),e(e.S+e.F*n(function(){a(1)}),"Object",d)}},49709:(g,p,t)=>{var e=t(66670).parseFloat,i=t(24269).trim;g.exports=1/e(t(80459)+"-0")!=-1/0?function(n){var s=i(String(n),3),r=e(s);return r===0&&s.charAt(0)=="-"?-0:r}:e},15722:(g,p,t)=>{var e=t(66670).parseInt,i=t(24269).trim,n=t(80459),s=/^[-+]?0[xX]/;g.exports=e(n+"08")!==8||e(n+"0x16")!==22?function(r,a){var d=i(String(r),3);return e(d,a>>>0||(s.test(d)?16:10))}:e},41704:g=>{g.exports=function(p){try{return{e:!1,v:p()}}catch(t){return{e:!0,v:t}}}},61037:(g,p,t)=>{var e=t(80812),i=t(24401),n=t(11642);g.exports=function(s,r){if(e(s),i(r)&&r.constructor===s)return r;var a=n.f(s);return(0,a.resolve)(r),a.promise}},86260:g=>{g.exports=function(p,t){return{enumerable:!(1&p),configurable:!(2&p),writable:!(4&p),value:t}}},30953:(g,p,t)=>{var e=t(2677);g.exports=function(i,n,s){for(var r in n)s&&i[r]?i[r]=n[r]:e(i,r,n[r]);return i}},61331:(g,p,t)=>{g.exports=t(2677)},643:(g,p,t)=>{var e=t(88535),i=t(25219),n=t(58852),s=t(95838);g.exports=function(r){e(e.S,r,{from:function(a){var d,c,l,h,o=arguments[1];return i(this),(d=o!==void 0)&&i(o),a==null?new this:(c=[],d?(l=0,h=n(o,arguments[2],2),s(a,!1,function(u){c.push(h(u,l++))})):s(a,!1,c.push,c),new this(c))}})}},44398:(g,p,t)=>{var e=t(88535);g.exports=function(i){e(e.S,i,{of:function(){for(var n=arguments.length,s=new Array(n);n--;)s[n]=arguments[n];return new this(s)}})}},32074:(g,p,t)=>{var e=t(24401),i=t(80812),n=function(s,r){if(i(s),!e(r)&&r!==null)throw TypeError(r+": can't set as prototype!")};g.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(s,r,a){try{(a=t(58852)(Function.call,t(81033).f(Object.prototype,"__proto__").set,2))(s,[]),r=!(s instanceof Array)}catch{r=!0}return function(d,c){return n(d,c),r?d.__proto__=c:a(d,c),d}}({},!1):void 0),check:n}},45274:(g,p,t)=>{var e=t(66670),i=t(46438),n=t(78423),s=t(58219),r=t(30254)("species");g.exports=function(a){var d=typeof i[a]=="function"?i[a]:e[a];s&&d&&!d[r]&&n.f(d,r,{configurable:!0,get:function(){return this}})}},1356:(g,p,t)=>{var e=t(78423).f,i=t(75509),n=t(30254)("toStringTag");g.exports=function(s,r,a){s&&!i(s=a?s:s.prototype,n)&&e(s,n,{configurable:!0,value:r})}},4566:(g,p,t)=>{var e=t(96308)("keys"),i=t(19191);g.exports=function(n){return e[n]||(e[n]=i(n))}},96308:(g,p,t)=>{var e=t(46438),i=t(66670),n="__core-js_shared__",s=i[n]||(i[n]={});(g.exports=function(r,a){return s[r]||(s[r]=a!==void 0?a:{})})("versions",[]).push({version:e.version,mode:t(74742)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},85614:(g,p,t)=>{var e=t(80812),i=t(25219),n=t(30254)("species");g.exports=function(s,r){var a,d=e(s).constructor;return d===void 0||(a=e(d)[n])==null?r:i(a)}},43172:(g,p,t)=>{var e=t(49383),i=t(87608);g.exports=function(n){return function(s,r){var a,d,c=String(i(s)),l=e(r),h=c.length;return l<0||l>=h?n?"":void 0:(a=c.charCodeAt(l))<55296||a>56319||l+1===h||(d=c.charCodeAt(l+1))<56320||d>57343?n?c.charAt(l):a:n?c.slice(l,l+2):d-56320+(a-55296<<10)+65536}}},24269:(g,p,t)=>{var e=t(88535),i=t(87608),n=t(81984),s=t(80459),r="["+s+"]",a=RegExp("^"+r+r+"*"),d=RegExp(r+r+"*$"),c=function(h,o,u){var f={},v=n(function(){return!!s[h]()||"​"[h]()!="​"}),y=f[h]=v?o(l):s[h];u&&(f[u]=y),e(e.P+e.F*v,"String",f)},l=c.trim=function(h,o){return h=String(i(h)),1&o&&(h=h.replace(a,"")),2&o&&(h=h.replace(d,"")),h};g.exports=c},80459:g=>{g.exports=`	
\v\f\r   ᠎             　\u2028\u2029\uFEFF`},8036:(g,p,t)=>{var e,i,n,s=t(58852),r=t(20709),a=t(76260),d=t(3802),c=t(66670),l=c.process,h=c.setImmediate,o=c.clearImmediate,u=c.MessageChannel,f=c.Dispatch,v=0,y={},A="onreadystatechange",w=function(){var T=+this;if(y.hasOwnProperty(T)){var P=y[T];delete y[T],P()}},k=function(T){w.call(T.data)};h&&o||(h=function(T){for(var P=[],b=1;arguments.length>b;)P.push(arguments[b++]);return y[++v]=function(){r(typeof T=="function"?T:Function(T),P)},e(v),v},o=function(T){delete y[T]},t(93417)(l)=="process"?e=function(T){l.nextTick(s(w,T,1))}:f&&f.now?e=function(T){f.now(s(w,T,1))}:u?(n=(i=new u).port2,i.port1.onmessage=k,e=s(n.postMessage,n,1)):c.addEventListener&&typeof postMessage=="function"&&!c.importScripts?(e=function(T){c.postMessage(T+"","*")},c.addEventListener("message",k,!1)):e=A in d("script")?function(T){a.appendChild(d("script"))[A]=function(){a.removeChild(this),w.call(T)}}:function(T){setTimeout(s(w,T,1),0)}),g.exports={set:h,clear:o}},72917:(g,p,t)=>{var e=t(49383),i=Math.max,n=Math.min;g.exports=function(s,r){return(s=e(s))<0?i(s+r,0):n(s,r)}},49383:g=>{var p=Math.ceil,t=Math.floor;g.exports=function(e){return isNaN(e=+e)?0:(e>0?t:p)(e)}},65133:(g,p,t)=>{var e=t(7001),i=t(87608);g.exports=function(n){return e(i(n))}},70181:(g,p,t)=>{var e=t(49383),i=Math.min;g.exports=function(n){return n>0?i(e(n),9007199254740991):0}},66310:(g,p,t)=>{var e=t(87608);g.exports=function(i){return Object(e(i))}},10752:(g,p,t)=>{var e=t(24401);g.exports=function(i,n){if(!e(i))return i;var s,r;if(n&&typeof(s=i.toString)=="function"&&!e(r=s.call(i))||typeof(s=i.valueOf)=="function"&&!e(r=s.call(i))||!n&&typeof(s=i.toString)=="function"&&!e(r=s.call(i)))return r;throw TypeError("Can't convert object to primitive value")}},19191:g=>{var p=0,t=Math.random();g.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++p+t).toString(36))}},80218:(g,p,t)=>{var e=t(66670).navigator;g.exports=e&&e.userAgent||""},6096:(g,p,t)=>{var e=t(24401);g.exports=function(i,n){if(!e(i)||i._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return i}},67816:(g,p,t)=>{var e=t(66670),i=t(46438),n=t(74742),s=t(84336),r=t(78423).f;g.exports=function(a){var d=i.Symbol||(i.Symbol=n?{}:e.Symbol||{});a.charAt(0)=="_"||a in d||r(d,a,{value:s.f(a)})}},84336:(g,p,t)=>{p.f=t(30254)},30254:(g,p,t)=>{var e=t(96308)("wks"),i=t(19191),n=t(66670).Symbol,s=typeof n=="function";(g.exports=function(r){return e[r]||(e[r]=s&&n[r]||(s?n:i)("Symbol."+r))}).store=e},55298:(g,p,t)=>{var e=t(44968),i=t(30254)("iterator"),n=t(20210);g.exports=t(46438).getIteratorMethod=function(s){if(s!=null)return s[i]||s["@@iterator"]||n[e(s)]}},18355:(g,p,t)=>{var e=t(88535);e(e.S,"Array",{isArray:t(15461)})},52293:(g,p,t)=>{var e=t(12560),i=t(20322),n=t(20210),s=t(65133);g.exports=t(88839)(Array,"Array",function(r,a){this._t=s(r),this._i=0,this._k=a},function(){var r=this._t,a=this._k,d=this._i++;return!r||d>=r.length?(this._t=void 0,i(1)):i(0,a=="keys"?d:a=="values"?r[d]:[d,r[d]])},"values"),n.Arguments=n.Array,e("keys"),e("values"),e("entries")},23204:(g,p,t)=>{var e=t(88535);e(e.S,"Date",{now:function(){return new Date().getTime()}})},96050:(g,p,t)=>{var e=t(95933),i=t(6096),n="Map";g.exports=t(99373)(n,function(s){return function(){return s(this,arguments.length>0?arguments[0]:void 0)}},{get:function(s){var r=e.getEntry(i(this,n),s);return r&&r.v},set:function(s,r){return e.def(i(this,n),s===0?0:s,r)}},e,!0)},5882:(g,p,t)=>{var e=t(88535);e(e.S,"Number",{isInteger:t(25194)})},21489:(g,p,t)=>{var e=t(88535);e(e.S,"Number",{isNaN:function(i){return i!=i}})},56477:(g,p,t)=>{var e=t(88535),i=t(49709);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},15706:(g,p,t)=>{var e=t(88535),i=t(15722);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},74712:(g,p,t)=>{var e=t(88535);e(e.S+e.F*!t(58219),"Object",{defineProperty:t(78423).f})},51780:(g,p,t)=>{var e=t(24401),i=t(75172).onFreeze;t(47331)("freeze",function(n){return function(s){return n&&e(s)?n(i(s)):s}})},18128:(g,p,t)=>{var e=t(66310),i=t(66123);t(47331)("getPrototypeOf",function(){return function(n){return i(e(n))}})},96847:(g,p,t)=>{var e=t(66310),i=t(54311);t(47331)("keys",function(){return function(n){return i(e(n))}})},4284:(g,p,t)=>{var e=t(88535);e(e.S,"Object",{setPrototypeOf:t(32074).set})},78978:()=>{},95828:(g,p,t)=>{var e=t(88535),i=t(49709);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},65331:(g,p,t)=>{var e=t(88535),i=t(15722);e(e.G+e.F*(parseInt!=i),{parseInt:i})},91229:(g,p,t)=>{var e,i,n,s,r=t(74742),a=t(66670),d=t(58852),c=t(44968),l=t(88535),h=t(24401),o=t(25219),u=t(2832),f=t(95838),v=t(85614),y=t(8036).set,A=t(53792)(),w=t(11642),k=t(41704),T=t(80218),P=t(61037),b="Promise",x=a.TypeError,I=a.process,S=I&&I.versions,z=S&&S.v8||"",V=a[b],L=c(I)=="process",C=function(){},F=i=w.f,H=!!function(){try{var N=V.resolve(1),_=(N.constructor={})[t(30254)("species")]=function(O){O(C,C)};return(L||typeof PromiseRejectionEvent=="function")&&N.then(C)instanceof _&&z.indexOf("6.6")!==0&&T.indexOf("Chrome/66")===-1}catch{}}(),M=function(N){var _;return!(!h(N)||typeof(_=N.then)!="function")&&_},G=function(N,_){if(!N._n){N._n=!0;var O=N._c;A(function(){for(var R=N._v,j=N._s==1,B=0,Y=function(Z){var rt,ot,ft,ut=j?Z.ok:Z.fail,At=Z.resolve,vt=Z.reject,et=Z.domain;try{ut?(j||(N._h==2&&X(N),N._h=1),ut===!0?rt=R:(et&&et.enter(),rt=ut(R),et&&(et.exit(),ft=!0)),rt===Z.promise?vt(x("Promise-chain cycle")):(ot=M(rt))?ot.call(rt,At,vt):At(rt)):vt(R)}catch(st){et&&!ft&&et.exit(),vt(st)}};O.length>B;)Y(O[B++]);N._c=[],N._n=!1,_&&!N._h&&D(N)})}},D=function(N){y.call(a,function(){var _,O,R,j=N._v,B=W(N);if(B&&(_=k(function(){L?I.emit("unhandledRejection",j,N):(O=a.onunhandledrejection)?O({promise:N,reason:j}):(R=a.console)&&R.error&&R.error("Unhandled promise rejection",j)}),N._h=L||W(N)?2:1),N._a=void 0,B&&_.e)throw _.v})},W=function(N){return N._h!==1&&(N._a||N._c).length===0},X=function(N){y.call(a,function(){var _;L?I.emit("rejectionHandled",N):(_=a.onrejectionhandled)&&_({promise:N,reason:N._v})})},U=function(N){var _=this;_._d||(_._d=!0,(_=_._w||_)._v=N,_._s=2,_._a||(_._a=_._c.slice()),G(_,!0))},Q=function(N){var _,O=this;if(!O._d){O._d=!0,O=O._w||O;try{if(O===N)throw x("Promise can't be resolved itself");(_=M(N))?A(function(){var R={_w:O,_d:!1};try{_.call(N,d(Q,R,1),d(U,R,1))}catch(j){U.call(R,j)}}):(O._v=N,O._s=1,G(O,!1))}catch(R){U.call({_w:O,_d:!1},R)}}};H||(V=function(N){u(this,V,b,"_h"),o(N),e.call(this);try{N(d(Q,this,1),d(U,this,1))}catch(_){U.call(this,_)}},(e=function(N){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=t(30953)(V.prototype,{then:function(N,_){var O=F(v(this,V));return O.ok=typeof N!="function"||N,O.fail=typeof _=="function"&&_,O.domain=L?I.domain:void 0,this._c.push(O),this._a&&this._a.push(O),this._s&&G(this,!1),O.promise},catch:function(N){return this.then(void 0,N)}}),n=function(){var N=new e;this.promise=N,this.resolve=d(Q,N,1),this.reject=d(U,N,1)},w.f=F=function(N){return N===V||N===s?new n(N):i(N)}),l(l.G+l.W+l.F*!H,{Promise:V}),t(1356)(V,b),t(45274)(b),s=t(46438)[b],l(l.S+l.F*!H,b,{reject:function(N){var _=F(this);return(0,_.reject)(N),_.promise}}),l(l.S+l.F*(r||!H),b,{resolve:function(N){return P(r&&this===s?V:this,N)}}),l(l.S+l.F*!(H&&t(27899)(function(N){V.all(N).catch(C)})),b,{all:function(N){var _=this,O=F(_),R=O.resolve,j=O.reject,B=k(function(){var Y=[],Z=0,rt=1;f(N,!1,function(ot){var ft=Z++,ut=!1;Y.push(void 0),rt++,_.resolve(ot).then(function(At){ut||(ut=!0,Y[ft]=At,--rt||R(Y))},j)}),--rt||R(Y)});return B.e&&j(B.v),O.promise},race:function(N){var _=this,O=F(_),R=O.reject,j=k(function(){f(N,!1,function(B){_.resolve(B).then(O.resolve,R)})});return j.e&&R(j.v),O.promise}})},21640:(g,p,t)=>{var e=t(95933),i=t(6096);g.exports=t(99373)("Set",function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{add:function(n){return e.def(i(this,"Set"),n=n===0?0:n,n)}},e)},97863:(g,p,t)=>{var e=t(43172)(!0);t(88839)(String,"String",function(i){this._t=String(i),this._i=0},function(){var i,n=this._t,s=this._i;return s>=n.length?{value:void 0,done:!0}:(i=e(n,s),this._i+=i.length,{value:i,done:!1})})},19626:(g,p,t)=>{var e=t(66670),i=t(75509),n=t(58219),s=t(88535),r=t(61331),a=t(75172).KEY,d=t(81984),c=t(96308),l=t(1356),h=t(19191),o=t(30254),u=t(84336),f=t(67816),v=t(36473),y=t(15461),A=t(80812),w=t(24401),k=t(66310),T=t(65133),P=t(10752),b=t(86260),x=t(22087),I=t(36309),S=t(81033),z=t(59820),V=t(78423),L=t(54311),C=S.f,F=V.f,H=I.f,M=e.Symbol,G=e.JSON,D=G&&G.stringify,W="prototype",X=o("_hidden"),U=o("toPrimitive"),Q={}.propertyIsEnumerable,N=c("symbol-registry"),_=c("symbols"),O=c("op-symbols"),R=Object[W],j=typeof M=="function"&&!!z.f,B=e.QObject,Y=!B||!B[W]||!B[W].findChild,Z=n&&d(function(){return x(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a!=7})?function(dt,ht,gt){var lt=C(R,ht);lt&&delete R[ht],F(dt,ht,gt),lt&&dt!==R&&F(R,ht,lt)}:F,rt=function(dt){var ht=_[dt]=x(M[W]);return ht._k=dt,ht},ot=j&&typeof M.iterator=="symbol"?function(dt){return typeof dt=="symbol"}:function(dt){return dt instanceof M},ft=function(dt,ht,gt){return dt===R&&ft(O,ht,gt),A(dt),ht=P(ht,!0),A(gt),i(_,ht)?(gt.enumerable?(i(dt,X)&&dt[X][ht]&&(dt[X][ht]=!1),gt=x(gt,{enumerable:b(0,!1)})):(i(dt,X)||F(dt,X,b(1,{})),dt[X][ht]=!0),Z(dt,ht,gt)):F(dt,ht,gt)},ut=function(dt,ht){A(dt);for(var gt,lt=v(ht=T(ht)),Mt=0,jt=lt.length;jt>Mt;)ft(dt,gt=lt[Mt++],ht[gt]);return dt},At=function(dt){var ht=Q.call(this,dt=P(dt,!0));return!(this===R&&i(_,dt)&&!i(O,dt))&&(!(ht||!i(this,dt)||!i(_,dt)||i(this,X)&&this[X][dt])||ht)},vt=function(dt,ht){if(dt=T(dt),ht=P(ht,!0),dt!==R||!i(_,ht)||i(O,ht)){var gt=C(dt,ht);return!gt||!i(_,ht)||i(dt,X)&&dt[X][ht]||(gt.enumerable=!0),gt}},et=function(dt){for(var ht,gt=H(T(dt)),lt=[],Mt=0;gt.length>Mt;)i(_,ht=gt[Mt++])||ht==X||ht==a||lt.push(ht);return lt},st=function(dt){for(var ht,gt=dt===R,lt=H(gt?O:T(dt)),Mt=[],jt=0;lt.length>jt;)!i(_,ht=lt[jt++])||gt&&!i(R,ht)||Mt.push(_[ht]);return Mt};j||(r((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var dt=h(arguments.length>0?arguments[0]:void 0),ht=function(gt){this===R&&ht.call(O,gt),i(this,X)&&i(this[X],dt)&&(this[X][dt]=!1),Z(this,dt,b(1,gt))};return n&&Y&&Z(R,dt,{configurable:!0,set:ht}),rt(dt)})[W],"toString",function(){return this._k}),S.f=vt,V.f=ft,t(1743).f=I.f=et,t(36569).f=At,z.f=st,n&&!t(74742)&&r(R,"propertyIsEnumerable",At,!0),u.f=function(dt){return rt(o(dt))}),s(s.G+s.W+s.F*!j,{Symbol:M});for(var at="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ct=0;at.length>ct;)o(at[ct++]);for(var mt=L(o.store),It=0;mt.length>It;)f(mt[It++]);s(s.S+s.F*!j,"Symbol",{for:function(dt){return i(N,dt+="")?N[dt]:N[dt]=M(dt)},keyFor:function(dt){if(!ot(dt))throw TypeError(dt+" is not a symbol!");for(var ht in N)if(N[ht]===dt)return ht},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),s(s.S+s.F*!j,"Object",{create:function(dt,ht){return ht===void 0?x(dt):ut(x(dt),ht)},defineProperty:ft,defineProperties:ut,getOwnPropertyDescriptor:vt,getOwnPropertyNames:et,getOwnPropertySymbols:st});var bt=d(function(){z.f(1)});s(s.S+s.F*bt,"Object",{getOwnPropertySymbols:function(dt){return z.f(k(dt))}}),G&&s(s.S+s.F*(!j||d(function(){var dt=M();return D([dt])!="[null]"||D({a:dt})!="{}"||D(Object(dt))!="{}"})),"JSON",{stringify:function(dt){for(var ht,gt,lt=[dt],Mt=1;arguments.length>Mt;)lt.push(arguments[Mt++]);if(gt=ht=lt[1],(w(ht)||dt!==void 0)&&!ot(dt))return y(ht)||(ht=function(jt,Jt){if(typeof gt=="function"&&(Jt=gt.call(this,jt,Jt)),!ot(Jt))return Jt}),lt[1]=ht,D.apply(G,lt)}}),M[W][U]||t(2677)(M[W],U,M[W].valueOf),l(M,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},62223:(g,p,t)=>{t(643)("Map")},74674:(g,p,t)=>{t(44398)("Map")},28337:(g,p,t)=>{var e=t(88535);e(e.P+e.R,"Map",{toJSON:t(5874)("Map")})},2639:(g,p,t)=>{var e=t(88535),i=t(46438),n=t(66670),s=t(85614),r=t(61037);e(e.P+e.R,"Promise",{finally:function(a){var d=s(this,i.Promise||n.Promise),c=typeof a=="function";return this.then(c?function(l){return r(d,a()).then(function(){return l})}:a,c?function(l){return r(d,a()).then(function(){throw l})}:a)}})},46121:(g,p,t)=>{var e=t(88535),i=t(11642),n=t(41704);e(e.S,"Promise",{try:function(s){var r=i.f(this),a=n(s);return(a.e?r.reject:r.resolve)(a.v),r.promise}})},98345:(g,p,t)=>{t(643)("Set")},52584:(g,p,t)=>{t(44398)("Set")},871:(g,p,t)=>{var e=t(88535);e(e.P+e.R,"Set",{toJSON:t(5874)("Set")})},42860:(g,p,t)=>{t(67816)("asyncIterator")},60716:(g,p,t)=>{t(67816)("observable")},7914:(g,p,t)=>{t(52293);for(var e=t(66670),i=t(2677),n=t(20210),s=t(30254)("toStringTag"),r="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),a=0;a<r.length;a++){var d=r[a],c=e[d],l=c&&c.prototype;l&&!l[s]&&i(l,s,d),n[d]=n.Array}},66801:(g,p,t)=>{var e=t(88535),i=t(8036);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},14397:(g,p,t)=>{t.d(p,{A:()=>e});const e=`precision highp float;
#define GLSLIFY 1

attribute vec3 point;
attribute vec4 color;
varying vec4 v_color;

uniform mat4 rotateMatrix;

void main(void){
  gl_Position = rotateMatrix * vec4(point, 1.0);
  v_color = color;
}
`},57914:(g,p,t)=>{t.d(p,{A:()=>e});const e=`\r
struct Meta {\r
  max: u32,\r
  width: u32,\r
  height: u32\r
};\r
\r
@group(0) @binding(0) var<uniform> metaData: Meta;\r
@group(0) @binding(1) var input: texture_2d<u32>;\r
@group(0) @binding(2) var output: texture_storage_2d<r32float, write>;\r
\r
@compute @workgroup_size(8, 8) fn main(\r
  @builtin(workgroup_id) workgroup_id: vec3<u32>,\r
  @builtin(local_invocation_id) local_invocation_id: vec3<u32>\r
) {\r
  var x = workgroup_id.x * 8 + local_invocation_id.x;\r
  var y = workgroup_id.y * 8 + local_invocation_id.y;\r
  if (x < metaData.width && y < metaData.height) {\r
    var value: u32 = textureLoad(input, vec2(x, y), 0).x;\r
    var low = value & 0xff;\r
    var high = (value >> 8) & 0xff;\r
    value = (low << 8) | high;\r
    var value_no: f32 = f32(value) / f32(metaData.max);\r
    textureStore(output, vec2(x, y), vec4(value_no, 0, 0, 0));\r
  }\r
}`},62496:(g,p,t)=>{t.d(p,{A:()=>e});const e=`\r
struct Meta {\r
  max: u32,\r
  width: u32,\r
  height: u32\r
};\r
\r
@group(0) @binding(0) var<uniform> metaData: Meta;\r
@group(0) @binding(1) var input: texture_2d<u32>;\r
@group(0) @binding(2) var output: texture_storage_2d<r32float, write>;\r
\r
@compute @workgroup_size(8, 8) fn main(\r
  @builtin(workgroup_id) workgroup_id: vec3<u32>,\r
  @builtin(local_invocation_id) local_invocation_id: vec3<u32>\r
) {\r
  var x = workgroup_id.x * 8 + local_invocation_id.x;\r
  var y = workgroup_id.y * 8 + local_invocation_id.y;\r
  if (x < metaData.width && y < metaData.height) {\r
    var value: u32 = textureLoad(input, vec2(x, y), 0).x;\r
    var value_no: f32 = f32(value) / f32(metaData.max);\r
    textureStore(output, vec2(x, y), vec4(value_no, 0, 0, 0));\r
  }\r
}`},23195:(g,p,t)=>{t.d(p,{A:()=>e});const e=`\r
@group(0) @binding(1) var eTexture: texture_external;\r
@group(0) @binding(2) var s: sampler;\r
\r
@fragment\r
fn main(@location(0) in_texcoord: vec4<f32>) -> @location(0) vec4<f32> {\r
  return textureSampleBaseClampToEdge(eTexture, s, in_texcoord.xy);\r
}`},54895:(g,p,t)=>{t.d(p,{A:()=>e});const e=`struct PositionColorInput {\r
    @location(0) in_position_3d: vec3<f32>,\r
    @location(1) in_color_rgba: vec4<f32>\r
};\r
\r
struct PositionColorOutput {\r
    @builtin(position) coords_output: vec4<f32>,\r
    @location(0) color_output: vec4<f32>\r
};\r
\r
struct RotateMatrix {\r
    matrix: mat4x4<f32>\r
};\r
\r
@group(0) @binding(0) var<uniform> rotateMatrix: RotateMatrix;\r
\r
@vertex\r
fn main(input: PositionColorInput) -> PositionColorOutput {\r
    var output: PositionColorOutput;\r
    output.color_output = input.in_color_rgba;\r
    output.coords_output = rotateMatrix.matrix * vec4<f32>(input.in_position_3d, 1.0);\r
    return output;\r
}`},73945:g=>{g.exports="AGFzbQEAAAABKQhgAn9/AGACf34AYAJ/fQBgAn98AGABfwF/YAF/AX5gAX8BfWABfwF8AhIBA2VudgZtZW1vcnkCAwGAgAIDDw4AAAABAgMEBAQEBAUGBweIAQ4Gd3JpdGU4AAAHd3JpdGUxNgABB3dyaXRlMzIAAgd3cml0ZTY0AAMId3JpdGVmMzIABAh3cml0ZWY2NAAFBXJlYWQ4AAYGcmVhZFU4AAcGcmVhZDE2AAgHcmVhZFUxNgAJBnJlYWQzMgAKBnJlYWQ2NAALB3JlYWRmMzIADAdyZWFkZjY0AA0KfQ4JACAAIAE6AAALCQAgACABOwEACwkAIAAgATYCAAsJACAAIAE3AwALCQAgACABOAIACwkAIAAgATkDAAsHACAALAAACwcAIAAtAAALBwAgAC4BAAsHACAALwEACwcAIAAoAgALBwAgACkDAAsHACAAKgIACwcAIAArAwAL"},49583:g=>{g.exports="AGFzbQEAAAABLAdgAX8Bf2ABfwF+YAJ/fwF/YAJ/fgF+YAN/f38Bf2ADf35+AX5gA39/fgF/AhIBA2VudgZtZW1vcnkCAwGAgAIDKCcAAAABAgICAwICAgMCAgIDAgICAwICAgMCAgIDAgICAwQEBAUCAgYHhgMnBWxvYWQ4AAAGbG9hZDE2AAEGbG9hZDMyAAIGbG9hZDY0AAMGc3RvcmU4AAQHc3RvcmUxNgAFB3N0b3JlMzIABgdzdG9yZTY0AAcEYWRkOAAIBWFkZDE2AAkFYWRkMzIACgVhZGQ2NAALBHN1YjgADAVzdWIxNgANBXN1YjMyAA4Fc3ViNjQADwRhbmQ4ABAFYW5kMTYAEQVhbmQzMgASBWFuZDY0ABMDb3I4ABQEb3IxNgAVBG9yMzIAFgRvcjY0ABcEeG9yOAAYBXhvcjE2ABkFeG9yMzIAGgV4b3I2NAAbCWV4Y2hhbmdlOAAcCmV4Y2hhbmdlMTYAHQpleGNoYW5nZTMyAB4KZXhjaGFuZ2U2NAAfEWNvbXBhcmVfZXhjaGFuZ2U4ACASY29tcGFyZV9leGNoYW5nZTE2ACESY29tcGFyZV9leGNoYW5nZTMyACISY29tcGFyZV9leGNoYW5nZTY0ACMGbm90aWZ5ACQEd2FpdAAlC3dhaXRUaW1lb3V0ACYKugMnCAAgAP4SAAALCAAgAP4TAQALCAAgAP4QAgALCAAgAP4RAwALDAAgACAB/hkAACABCwwAIAAgAf4aAQAgAQsMACAAIAH+FwIAIAELDAAgACAB/hgDACABCwoAIAAgAf4gAAALCgAgACAB/iEBAAsKACAAIAH+HgIACwoAIAAgAf4fAwALCgAgACAB/icAAAsKACAAIAH+KAEACwoAIAAgAf4lAgALCgAgACAB/iYDAAsKACAAIAH+LgAACwoAIAAgAf4vAQALCgAgACAB/iwCAAsKACAAIAH+LQMACwoAIAAgAf41AAALCgAgACAB/jYBAAsKACAAIAH+MwIACwoAIAAgAf40AwALCgAgACAB/jwAAAsKACAAIAH+PQEACwoAIAAgAf46AgALCgAgACAB/jsDAAsKACAAIAH+QwAACwoAIAAgAf5EAQALCgAgACAB/kECAAsKACAAIAH+QgMACwwAIAAgASAC/koAAAsMACAAIAEgAv5LAQALDAAgACABIAL+SAIACwwAIAAgASAC/kkDAAsKACAAIAH+AAIACwwAIAAgAUJ//gECAAsMACAAIAEgAv4BAgAL"},5454:g=>{g.exports="AGFzbQEAAAABEwNgAX8Bf2ACf38Bf2ADf39/AX8CEgEDZW52Bm1lbW9yeQIDAYCAAgMHBgAAAQIAAAc5BgRsb2NrAAAGdW5sb2NrAAEEd2FpdAACCXRpbWVkd2FpdAADBnNpZ25hbAAECWJyb2FkY2FzdAAFCvYBBlYBAX8gAEEAQQH+SAIAIQEgAUEARwRAA0AgAUECRgR/QQEFIABBAUEC/kgCAEEARwsEQCAAQQJCf/4BAgAaCyAAQQBBAv5IAgAhASABQQBHDQALC0EACyMAIABBAf4lAgBBAUcEQCAAQQD+FwIAIABBAf4AAgAaC0EACx0AIAAgAP4QAgAgARABGkJ//gECABogARAAGkEACykAIAAgAP4QAgAgARABGiACKQMA/gECACABEAAaQQJGBH9B8AAFQQALCxYAIABBAf4eAgAaIABBAf4AAgAaQQALGgAgAEEB/h4CABogAEGAgICABP4AAgAaQQAL"},68632:(g,p,t)=>{g.exports=t(37149)},45249:(g,p,t)=>{g.exports=t(87172)},73146:(g,p,t)=>{g.exports=t(85079)},80662:(g,p,t)=>{g.exports=t(92861)},43929:(g,p,t)=>{g.exports=t(63342)},7210:(g,p,t)=>{g.exports=t(11837)},99704:(g,p,t)=>{g.exports=t(19737)},17735:(g,p,t)=>{g.exports=t(58886)},66681:(g,p,t)=>{g.exports=t(92696)},7403:(g,p,t)=>{g.exports=t(22948)},75019:(g,p,t)=>{g.exports=t(62160)},69736:(g,p,t)=>{g.exports=t(47567)},11919:(g,p,t)=>{g.exports=t(21724)},88032:(g,p,t)=>{g.exports=t(27279)},29967:(g,p,t)=>{g.exports=t(25216)},54001:(g,p,t)=>{g.exports=t(34750)},64236:(g,p,t)=>{g.exports=t(31707)},97860:(g,p,t)=>{g.exports=t(28795)},75062:(g,p,t)=>{g.exports=t(16560)},134:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(92696),i=t(87361);function n(s,r,a){return(r=(0,i.A)(r))in s?e(s,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[r]=a,s}},91908:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(23509),i=t(39967);function n(s,r){if((0,e.A)(s)!="object"||!s)return s;var a=s[i];if(a!==void 0){var d=a.call(s,r||"default");if((0,e.A)(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(s)}},87361:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(23509),i=t(91908);function n(s){var r=(0,i.A)(s,"string");return(0,e.A)(r)=="symbol"?r:String(r)}},23509:(g,p,t)=>{t.d(p,{A:()=>n});var e=t(16560),i=t(54220);function n(s){return n=typeof e=="function"&&typeof i=="symbol"?function(r){return typeof r}:function(r){return r&&typeof e=="function"&&r.constructor===e&&r!==e.prototype?"symbol":typeof r},n(s)}}},q={};function K(g){var p=q[g];if(p!==void 0)return p.exports;var t=q[g]={exports:{}};return $[g](t,t.exports,K),t.exports}K.m=$,K.n=g=>{var p=g&&g.__esModule?()=>g.default:()=>g;return K.d(p,{a:p}),p},K.d=(g,p)=>{for(var t in p)K.o(p,t)&&!K.o(g,t)&&Object.defineProperty(g,t,{enumerable:!0,get:p[t]})},K.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),K.o=(g,p)=>Object.prototype.hasOwnProperty.call(g,p),K.r=g=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})};var J=K(61634);return J.default})())}});const Zo=Jo();class rd extends Zo{constructor(E){super({...E,getWasm($,q){switch($){case"decoder":switch(q){case 27:return E.enableVideoWebcodec?"":new URL(""+new URL("/wasm/h264-atomic.wasm",self.location).href,self.location).href;case 86018:return E.enableAudioWebcodec?"":new URL(""+new URL("/wasm/aac-atomic.wasm",self.location).href,self.location).href;case 86017:return E.enableAudioWebcodec?"":new URL(""+new URL("/wasm/mp3-atomic.wasm",self.location).href,self.location).href;case 173:return E.enableAudioWebcodec?"":new URL(""+new URL("/wasm/hevc-atomic.wasm",self.location).href,self.location).href;case 12:return E.enableAudioWebcodec?"":new URL(""+new URL("/wasm/mpeg4-atomic.wasm",self.location).href,self.location).href;case 226:return E.enableAudioWebcodec?"":new URL(""+new URL("/wasm/av1-atomic.wasm",self.location).href,self.location).href;case 86051:return E.enableAudioWebcodec?"":new URL(""+new URL("/wasm/speex-atomic.wasm",self.location).href,self.location).href;case 86076:return E.enableAudioWebcodec?"":new URL(""+new URL("/wasm/opus-atomic.wasm",self.location).href,self.location).href;case 86028:return E.enableAudioWebcodec?"":new URL(""+new URL("/wasm/flac-atomic.wasm",self.location).href,self.location).href;case 86021:return E.enableAudioWebcodec?"":new URL(""+new URL("/wasm/vorbis-atomic.wasm",self.location).href,self.location).href;case 139:return E.enableAudioWebcodec?"":new URL(""+new URL("/wasm/vp8-atomic.wasm",self.location).href,self.location).href;case 167:return E.enableAudioWebcodec?"":new URL(""+new URL("/wasm/vp9-atomic.wasm",self.location).href,self.location).href;default:return""}case"resampler":return new URL(""+new URL("/wasm/resample-atomic.wasm",self.location).href,self.location).href;case"stretchpitcher":return new URL(""+new URL("/wasm/stretchpitch-atomic.wasm",self.location).href,self.location).href}}})}}const sd=Wr({enableAudioWebcodec:window.localStorage.getItem("enableAudioWebcodec")===null?!0:window.localStorage.getItem("enableAudioWebcodec")==="true",enableVideoWebcodec:window.localStorage.getItem("enableVideoWebcodec")===null?!0:window.localStorage.getItem("enableVideoWebcodec")==="true",enableHardware:window.localStorage.getItem("enableHardware")===null?!0:window.localStorage.getItem("enableHardware")==="true",enableWebGPU:!1});function tc(m,E){let $,q;try{$=m.toString().split(".")[1].length}catch{$=0}try{q=E.toString().split(".")[1].length}catch{q=0}const K=10**Math.max($,q),J=$>=q?$:q;return parseFloat(((m*K+E*K)/K).toFixed(J))}function si(m,E){let $,q;try{$=m.toString().split(".")[1].length}catch{$=0}try{q=E.toString().split(".")[1].length}catch{q=0}const K=10**Math.max($,q),J=$>=q?$:q;return parseFloat(((m*K-E*K)/K).toFixed(J))}function ec(m,E){let $=0;const q=m.toString(),K=E.toString();try{$+=q.split(".")[1].length}catch{$=0}try{$+=K.split(".")[1].length}catch{$=0}return Number(q.replace(".",""))*Number(K.replace(".",""))/10**$}function ir(m,E){let $=0,q=0;try{$=m.toString().split(".")[1].length}catch{$=0}try{q=E.toString().split(".")[1].length}catch{q=0}const K=Number(m.toString().replace(".","")),J=Number(E.toString().replace(".",""));return K/J*10**(q-$)}const ic=m=>{const{content:E}=m;return typeof E=="function"?E(Ni):Ni("span",E)},rc={name:"UiSlider",components:{SliderMark:ic},props:{modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},tick:Boolean,marks:Object,tipVisible:Boolean},emits:["change","onAfterChange","update:modelValue"],data(){return{cacheValue:Math.min(this.modelValue,this.max),tipSide:"",dragging:!1}},computed:{total(){return si(this.max,this.min)},prcent(){return this.calcPrcent(this.cacheValue)},tickList(){if(!this.tick)return[];const m=ir(si(this.max,this.min),this.step),E=[];for(let $=1;$<m;$++)E.push($*100/m);return E}},watch:{modelValue:"setLocalValue"},methods:{calcPrcent(m){return Math.round(ir(si(m,this.min),this.total)*100)},setLocalValue(m){this.cacheValue=Math.min(m,this.max),this.$nextTick(()=>{const{slider:E,tip:$}=this.$refs,q=$.getBoundingClientRect(),K=E.getBoundingClientRect();if(q.left<K.left){this.tipSide="left";return}if(q.right>K.right){this.tipSide="right";return}this.tipSide=""})},changeValue(m,E){!E&&m.preventDefault();const{width:$,left:q}=this.$refs.slider.getBoundingClientRect(),{total:K,min:J,step:g}=this,p=Math.max(m.clientX-q,0),e=Math.min(p/$,1)*K+J,i=tc(ec(Math.round((e-J)/g),g),J);E&&(this.$emit("update:modelValue",i),this.$emit("onAfterChange",i)),i!==this.cacheValue&&(this.setLocalValue(i),this.$emit("change",i))},onMousedown(){this.disabled||(this.dragging=!0,document.body.addEventListener("pointermove",this.changeValue),document.body.addEventListener("pointerup",this.onMouseup),document.body.addEventListener("pointerleave",this.onMouseup))},onMouseup(m){this.changeValue(m,!0),this.dragging=!1,document.body.removeEventListener("pointermove",this.changeValue),document.body.removeEventListener("pointerup",this.onMouseup),document.body.removeEventListener("pointerleave",this.onMouseup)}}},Fr=m=>(Zr("data-v-24a71471"),m=m(),ts(),m),sc=Fr(()=>_t("div",{class:"ui-slider-back"},null,-1)),ac={class:"ui-slider-tip-content"},nc=Fr(()=>_t("span",{class:"ui-slider-tip-arrow"},null,-1)),oc={key:0,class:"ui-slider-ticks"},cc={key:1,class:"ui-slider-marks"};function dc(m,E,$,q,K,J){const g=Kr("SliderMark");return Bt(),Et("div",{class:Dt(["ui-slider",{disabled:m.disabled}])},[_t("div",{ref:"slider",class:"ui-slider-container",onPointerdown:E[0]||(E[0]=(...p)=>J.onMousedown&&J.onMousedown(...p))},[sc,_t("div",{class:"ui-slider-track",style:Lt({width:J.prcent+"%"})},null,4),_t("div",{class:"ui-slider-pointer",style:Lt({left:J.prcent+"%"})},[_t("div",{class:Dt(["ui-slider-handler",{"ui-slider-tip-trigger":!$.tipVisible}])},null,2),_t("div",{ref:"tip",class:Dt(["ui-slider-tip",[{visible:$.tipVisible||K.dragging},K.tipSide]]),style:{display:"none"}},[_t("div",ac,[rr(m.$slots,"tip",{value:K.cacheValue},()=>[Qr(Yr(K.cacheValue),1)],!0)]),nc],2)],4),$.tick?(Bt(),Et("div",oc,[(Bt(!0),Et(Ui,null,Li(J.tickList,p=>(Bt(),Et("span",{key:p,style:Lt({left:`${p}%`})},null,4))),128))])):Di("",!0),$.marks?(Bt(),Et("div",cc,[(Bt(!0),Et(Ui,null,Li($.marks,(p,t)=>(Bt(),Et("div",{key:t,class:"ui-slider-marks-item",style:Lt({left:J.calcPrcent(Number(t))+"%"})},[Jr(g,{content:p},null,8,["content"])],4))),128))])):Di("",!0)],544)],2)}const ad=es(rc,[["render",dc],["__scopeId","data-v-24a71471"]]);export{wc as $,mc as A,Jc as B,ed as C,td as D,Yc as E,id as F,Dr as G,kc as H,Kc as I,Fe as J,dn as K,yc as L,Fc as M,Ur as N,Mc as O,Cc as P,Gc as Q,Ac as R,ad as S,Hn as T,gc as U,pc as V,Sc as W,rd as X,Rc as Y,Ec as Z,$t as _,Wc as a,_c as a0,$c as a1,hn as a2,cn as a3,Ic as a4,on as a5,qc as b,Qc as c,Na as d,Uc as e,Dc as f,Ft as g,Nc as h,Vt as i,Oc as j,zc as k,Lc as l,Vc as m,Pc as n,Ka as o,bc as p,Lr as q,Bc as r,jc as s,Hc as t,Xc as u,vc as v,Tc as w,xc as x,sd as y,Zc as z};
